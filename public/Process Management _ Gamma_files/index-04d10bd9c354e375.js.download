(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{75209:function(e,n,i){"use strict";i.d(n,{X:function(){return C}});var r=i(9735),t=i(55452),s=i(38717),o=i(53738),l=i(45650),a=i(71354),c=i(11919),d=i(36895),u=i(8283),x=i(4036),h=i(50390),p=i(91012),j=i(49929),f=i(39097),m=i.n(f),g=i(9734),v=i(52322),b=function(e){var n=e.children,i=e.href,r=e.onClick;return i?(0,v.jsx)(s.f,{as:o.xu,role:"group",onClick:r,children:(0,v.jsx)(s.A,{href:i,as:m(),_focusVisible:{boxShadow:"none",outline:"0 none !important"},children:n})}):(0,v.jsx)(o.xu,{as:l.z,w:"100%",variant:"unstyled",display:"inline-flex",h:"fit-content",role:"group",onClick:r,maxW:"18em",tabIndex:0,_focusVisible:{boxShadow:"none",outline:"0 none !important"},children:n})},C=function(e){var n=e.label,i=e.description,s=e.isPopular,l=e.colorScheme,f=e.imageUrl,m=e.href,C=e.transform,y=e.onClick,w=e.ctaIcon,O=e.ctaLabel;return(0,v.jsx)(b,{href:m,onClick:function(){null==y||y()},children:(0,v.jsxs)(a.K,{cursor:"pointer",direction:{base:"row",md:"column"},px:"0",flex:"1",whiteSpace:"normal",textAlign:"left",spacing:"0",border:"none",bg:"white",borderRadius:"lg",boxShadow:{base:"sm",md:"md"},transition:"all 300ms ease",bottom:"0",outline:"none",_groupHover:(0,g.s2)()?{}:{bottom:3,boxShadow:"xl",transform:"scale(1.03)"},position:"relative",transform:{base:"auto",md:C&&!(0,g.s2)()?C:"auto"},_groupFocusWithin:{shadow:"outline"},overflow:"hidden",children:[(0,v.jsxs)(c.k,{flex:"1",justifyContent:"center",textAlign:"center",color:"".concat(l,".500"),bg:"".concat(l,".100"),position:"relative",minH:{base:"none",md:"190px"},children:[(0,v.jsx)(d.E,{src:f,objectFit:"cover",transitionProperty:"filter",transitionDuration:"normal",_groupHover:{filter:"brightness(1.02)"}}),s&&(0,v.jsx)(u.U,{position:"absolute",bottom:"2",left:"2",children:(0,v.jsxs)(x.C,{colorScheme:"teal",fontSize:"md",p:"0.5",px:"2",textTransform:"none",fontWeight:"600",borderRadius:["sm","md"],children:[(0,v.jsx)(j.G,{icon:r.BD})," ",(0,v.jsx)(t.cC,{id:"gL/sdV"})]})})]}),(0,v.jsxs)(a.K,{spacing:"1.5",p:4,maxW:"100%",minH:{base:"100px",md:"none"},justifyContent:"space-between",alignItems:"stretch",flex:"1.5",direction:{base:"row",md:"column"},position:"relative",h:"100%",children:[(0,v.jsxs)(a.K,{children:[(0,v.jsx)(h.X,{fontSize:{base:"xl",md:"2xl"},fontWeight:"600",children:n}),(0,v.jsx)(u.U,{children:(0,v.jsx)(o.xu,{fontSize:{base:"sm",md:"md"},fontWeight:"500",lineHeight:"1.4",color:"gray.600",children:i})})]}),(0,v.jsxs)(u.U,{maxW:"100%",justifyContent:"flex-end",alignItems:"flex-start",fontSize:{base:"sm",sm:"md"},p:{base:.5,md:0},children:[(0,v.jsx)(p.x,{display:{base:"none",md:"block"},transition:"all 300ms ease",opacity:0,color:"".concat(l,".700"),_groupFocusWithin:{opacity:1},_groupHover:{opacity:1},children:O}),(0,v.jsx)(o.xu,{fontSize:{base:"md",sm:"lg"},_groupFocusWithin:{color:"".concat(l,".700")},_groupHover:{color:"".concat(l,".700")},children:w})]})]})]})})}},42763:function(e,n,i){"use strict";i.d(n,{G:function(){return l}});var r=i(5632),t=i.n(r),s=i(2784),o=i(98875),l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",i=(0,o.ye)(e),r=(0,o.yZ)().hasInitialized?!i:null;return(0,s.useEffect)(function(){!0===r&&t().replace(n)},[r,n]),r}},8980:function(e,n,i){"use strict";i.d(n,{m:function(){return j}});var r=i(20406),t=i(95235),s=i(28526),o=i.n(s),l=i(65616),a=i(48484),c=i(37914),d=i(28139),u=i(4038);function x(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function h(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?x(Object(i),!0).forEach(function(n){(0,t.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var p=function(e){var n="",i=!1;if("transloadit"in e){var r=e.failed,t=e.transloadit;i=!!r.length,n=t[0].results[":original"][0].url}else{if(!("results"in e))return{sourceUrl:n,success:!1};n=e.results[":original"][0].url}return i?{sourceUrl:n,success:!1}:{sourceUrl:n,success:!0}},j=function(e,n){var i,t=new l.ZP(h(h({},d.N$),{},{restrictions:h(h({},d.N$.restrictions),{},{allowedFileTypes:d.Ge})}));return t.use(a.ZP,{assemblyOptions:(i=(0,r.Z)(o().mark(function n(){var i,r,t,s;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=c.v.TRANSLOADIT_FILE_TEMPLATE_ID,n.next=3,(0,u.xQ)(i);case 3:return t=(r=n.sent).signature,s=r.expires,n.abrupt("return",{params:{auth:{key:c.v.TRANSLOADIT_AUTH_KEY,expires:s},template_id:i},fields:{orgId:e},signature:t});case 7:case"end":return n.stop()}},n)})),function(){return i.apply(this,arguments)}),waitForEncoding:!0}),new Promise(function(e,i){t.on("complete",function(n){var r=p(n),t=r.success,s=r.sourceUrl;t?e(s):i("Could not get sourceUrl from upload result")}),t.on("transloadit:complete",function(n){var r=p(n),t=r.success,s=r.sourceUrl;t?e(s):i("Could not get sourceUrl from result")}),t.on("error",function(e){i(e)}),t.on("restriction-failed",function(e,n){console.error("[uploadFontFile] restriction failed on file",e,"error",n),i(n)}),t.addFile({name:n.name,type:n.type,data:n}),d.N$.autoProceed||t.upload()})}},35541:function(e,n,i){"use strict";i.d(n,{E:function(){return l}});var r=i(2784),t=i(28139),s=i(52322),o={width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},l=function(e){var n=e.handleFilesCallback,i=e.multiple,l=void 0!==i&&i,a=e.accept,c=void 0===a?t.pK.join(","):a,d=(0,r.useRef)(null);return{inputElement:(0,r.useMemo)(function(){return(0,s.jsx)("input",{ref:d,className:"gamma-FileInput-input",style:o,type:"file",name:"gamma-file-input",multiple:l,accept:c,onChange:function(e){var i=e.target;i&&i.files&&(n(Array.from(i.files)),i.value=null)}})},[c,n,l]),onClick:(0,r.useCallback)(function(){var e;null===(e=d.current)||void 0===e||e.click()},[])}}},33954:function(e,n,i){"use strict";i.d(n,{v:function(){return C}});var r=i(13813),t=i(91128),s=i(55452),o=i(71354),l=i(53738),a=i(91012),c=i(49747),d=i(8283),u=i(420),x=i(84103),h=i(49929),p=i(39097),j=i.n(p),f=i(75209),m=i(20078),g=i(16726),v=i(52322),b=function(e){var n=e.text;return(0,v.jsxs)(o.K,{direction:"row",spacing:1.5,w:"100%",children:[(0,v.jsx)(l.xu,{color:"green.400",children:(0,v.jsx)(h.G,{icon:r.LE})}),(0,v.jsx)(a.x,{children:n})]})},C=function(e){var n=e.onImportComplete,i=e.hidePasteLink,r=(0,g.S)({onUploadComplete:n}),p=r.initiateDocUpload,C=r.hiddenInputElement,y=r.isUploading,w=r.isSuccess,O=(0,m.H)({onImportComplete:n}),k=O.initiateGoogleImport,S=O.isImporting,I=O.isSuccess,D=y||S,P=I||w;return(0,v.jsxs)(l.xu,{w:"100%",children:[(0,v.jsx)(c.U,{in:P,children:(0,v.jsx)(d.U,{w:"100%",p:12,justifyContent:"center",spacing:4,border:"none",boxShadow:"none",bg:"whiteAlpha.700",backdropFilter:"blur(10px)",borderRadius:"md",children:(0,v.jsx)(a.x,{fontSize:"xl",children:(0,v.jsx)(s.cC,{id:"oMgC5V"})})})}),(0,v.jsx)(c.U,{in:D,children:(0,v.jsxs)(d.U,{w:"100%",p:12,justifyContent:"center",spacing:4,border:"none",boxShadow:"none",bg:"whiteAlpha.700",backdropFilter:"blur(10px)",borderRadius:"md",children:[(0,v.jsx)(u.$,{}),(0,v.jsx)(a.x,{fontSize:"xl",children:(0,v.jsx)(s.cC,{id:"fxZ/WE"})})]})}),(0,v.jsx)(c.U,{in:!D&&!P,children:(0,v.jsxs)(o.K,{direction:"column",spacing:{base:6,md:8},align:"center",w:"100%",children:[(0,v.jsxs)(o.K,{w:"100%",direction:{base:"column",md:"row"},justifyContent:"center",spacing:{base:3,md:4},children:[(0,v.jsx)(f.X,{label:(0,v.jsx)(s.cC,{id:"RMmFZu"}),description:(0,v.jsxs)(o.K,{spacing:1,children:[(0,v.jsx)(b,{text:(0,v.jsx)(s.cC,{id:"6f5BQJ"})}),(0,v.jsx)(b,{text:(0,v.jsx)(s.cC,{id:"cuyHFX"})})]}),isPopular:!1,colorScheme:"blue",imageUrl:"/_next/static/media/Thumbnail-drive.beda1526.svg",onClick:k,ctaIcon:(0,v.jsx)(h.G,{icon:t.A$}),ctaLabel:(0,v.jsx)(s.cC,{id:"iSLIjg"})}),(0,v.jsx)(f.X,{label:(0,v.jsx)(s.cC,{id:"RNxrCU"}),description:(0,v.jsxs)(o.K,{spacing:1,children:[(0,v.jsx)(b,{text:(0,v.jsx)(s.cC,{id:"G28OFI"})}),(0,v.jsx)(b,{text:(0,v.jsx)(s.cC,{id:"g8oIJP"})})]}),isPopular:!1,colorScheme:"purple",imageUrl:"/_next/static/media/Thumbnail-upload.175964bf.svg",onClick:p,ctaIcon:(0,v.jsx)(h.G,{icon:t.A$}),ctaLabel:(0,v.jsx)(s.cC,{id:"JYj5R2"})}),C]}),!i&&(0,v.jsx)(l.xu,{w:"100%",children:(0,v.jsx)(a.x,{textAlign:"center",color:"blackAlpha.800",children:(0,v.jsx)(s.cC,{id:"HmmZUO",components:{0:(0,v.jsx)(x.r,{as:j(),textDecoration:"underline",fontWeight:"600",href:"/create/paste?ref=import"})}})})})]})})]})}},87999:function(e,n,i){"use strict";i.d(n,{g:function(){return T}});var r=i(95235),t=i(92488),s=i(8783),o=i(55452),l=i(9088),a=i(30893),c=i(45650),d=i(94301),u=i(40771),x=i(82904),h=i(36895),p=i(4036),j=i(95258),f=i(53738),m=i(49929),g=i(82863),v=i(37914),b=i(98875),C={src:"/_next/static/media/google-docs.fc1fc7af.svg"},y={src:"/_next/static/media/google-slides.41c2bc5b.svg"},w={src:"/_next/static/media/ms-word.93689aae.svg"},O={src:"/_next/static/media/powerpoint.0a9e1c20.svg"},k=i(20078),S=i(16726),I=i(52322);function D(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function P(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?D(Object(i),!0).forEach(function(n){(0,r.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var T=function(e){var n=(0,b.ye)("docImport"),i=(0,b.ye)("pptImport");return n||i?(0,I.jsx)(g.rg,{clientId:v.v.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,I.jsx)(A,P({},e))}):null},A=function(e){var n=e.handleImport,i=e.isDisabled,r=e.buttonProps,g=e.helpTip,v=(0,b.ye)("docImport"),D=(0,b.ye)("pptImport"),T=(0,S.S)({onUploadComplete:n}),A=T.initiateDocUpload,E=T.hiddenInputElement,_=T.isUploading,F=(0,k.H)({onImportComplete:n}),N=F.initiateGoogleImport,z=F.isImporting;return(0,I.jsxs)(l.v,{children:[(0,I.jsx)(a.j,P(P({as:c.z,onFocus:function(e){return e.preventDefault()},"data-testid":"import-doc-button",isDisabled:i,leftIcon:(0,I.jsx)(m.G,{icon:s.Vm}),rightIcon:(0,I.jsx)(m.G,{icon:t.gc}),sx:{span:{flexGrow:0}},isLoading:_||z},r),{},{children:(0,I.jsx)(o.cC,{id:"l3s5ri"})})),(0,I.jsx)(d.h,{children:(0,I.jsxs)(u.q,{maxW:"350px",zIndex:"tooltip",children:[v&&(0,I.jsx)(x.s,{icon:(0,I.jsx)(h.E,{h:"1.5em",w:"1.5em",src:C.src}),onClick:N,children:(0,I.jsx)(o.cC,{id:"cuyHFX"})}),v&&D&&(0,I.jsxs)(x.s,{icon:(0,I.jsx)(h.E,{h:"1.5em",w:"1.5em",src:y.src}),onClick:N,children:[(0,I.jsx)(o.cC,{id:"W/x3L4"}),(0,I.jsx)(p.C,{colorScheme:"green",ml:2,children:(0,I.jsx)(o.cC,{id:"YBt9YP"})})]}),D&&(0,I.jsx)(x.s,{icon:(0,I.jsx)(h.E,{h:"1.5em",w:"1.5em",src:w.src}),onClick:A,children:(0,I.jsx)(o.cC,{id:"KMcdT7"})}),D&&(0,I.jsxs)(x.s,{icon:(0,I.jsx)(h.E,{h:"1.5em",w:"1.5em",src:O.src}),onClick:A,children:[(0,I.jsx)(o.cC,{id:"r5rK8L"}),(0,I.jsx)(p.C,{colorScheme:"green",ml:2,children:(0,I.jsx)(o.cC,{id:"YBt9YP"})})]}),g&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(j.R,{}),(0,I.jsx)(f.xu,{px:4,py:0,children:g})]}),E]})})]})}},20078:function(e,n,i){"use strict";i.d(n,{H:function(){return g}});var r=i(81333),t=i(20406),s=i(28526),o=i.n(s),l=i(55452),a=i(55479),c=i(82863),d=i(2784),u=i(37914),x=i(98875),h=i(10710),p=i(98666),j=i(16726),f=i(52322),m="https://www.googleapis.com/auth/drive.file",g=function(e){var n=(0,d.useState)(!1),i=n[0],s=n[1],g=(0,d.useState)(),v=g[0],b=g[1],C=(0,a.p)(),y=(0,h.SE)().user,w=(0,d.useState)(!1),O=w[0],k=w[1],S=(0,d.useState)(!1),I=S[0],D=S[1],P=(0,j.S)({onUploadComplete:e.onImportComplete}).handleDocUpload,T=(0,d.useCallback)(function(e,n,i,r){var s,a,c="https://www.googleapis.com/drive/v3/files/".concat(n,"?fields=exportLinks");k(!0);var d=C({id:"load-doc-toast-".concat(n),position:"top",duration:null,status:"loading",variant:"subtle",title:(0,f.jsx)(l.cC,{id:"hdsaJo"}),description:(0,f.jsx)(l.cC,{id:"5VLwXq"}),isClosable:!1});fetch(c,{headers:{Authorization:"Bearer ".concat(e)}}).then((s=(0,t.Z)(o().mark(function e(n){var i,r,t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(200!==n.status)){e.next=6;break}return e.next=3,n.json();case 3:return t=null==(r=e.sent)?void 0:null===(i=r.error)||void 0===i?void 0:i.message,e.abrupt("return",Promise.reject(t?"Google Drive error ".concat(n.status,": ").concat(t):"Google Drive error ".concat(n.status)));case 6:return e.abrupt("return",n.json());case 7:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})).then((a=(0,t.Z)(o().mark(function n(r){var t,s;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=r.exportLinks[i],n.next=3,fetch(t,{headers:{Authorization:"Bearer ".concat(e)}});case 3:return s=n.sent,n.abrupt("return",s.blob());case 5:case"end":return n.stop()}},n)})),function(e){return a.apply(this,arguments)})).then(function(e){P([new File([e],"".concat(r,".pptx"),{type:i})]),k(!1),C.close(d)}).catch(function(e){console.error("Error importing doc ".concat(n," from google"),e),k(!1),C.update(d,{status:"error",title:(0,f.jsx)(l.cC,{id:"SlfejT"}),description:e.message||e||(0,f.jsx)(l.cC,{id:"lIW942"}),duration:5e3,isClosable:!0})})},[C,P]),A=(0,d.useCallback)(function(n,i,r,t){var s="https://www.googleapis.com/drive/v3/files/".concat(i,"/export?mimeType=").concat(r);k(!0);var o=C({id:"load-doc-toast-".concat(i),position:"top",duration:null,status:"loading",variant:"subtle",title:(0,f.jsx)(l.cC,{id:"hdsaJo"}),description:(0,f.jsx)(l.cC,{id:"gmwDJx"}),isClosable:!1});fetch(s,{headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){return e.text()}).then(function(n){e.onImportComplete({html:n,filename:t,source:"GoogleDocs"}),C.update(o,{status:"success",title:(0,f.jsx)(l.cC,{id:"oMgC5V"}),duration:5e3,isClosable:!0}),D(!0),k(!1)}).catch(function(e){console.error("Error importing doc ".concat(i," from google"),e),D(!1),k(!1)})},[e,C]),E=(0,d.useCallback)(function(e,n){if("picked"===n.action){var i=(0,r.Z)(n.docs,1)[0];"application/vnd.google-apps.document"===i.mimeType?A(e,i.id,"text/html",i.name):"application/vnd.google-apps.presentation"===i.mimeType&&T(e,i.id,"application/vnd.openxmlformats-officedocument.presentationml.presentation",i.name)}},[A,T]),_=(0,d.useCallback)(function(e){b(e);var n=window.google,i=x.VH.get("pptImport"),r=["application/vnd.google-apps.document",i&&"application/vnd.google-apps.presentation"].filter(function(e){return!!e}),t=new n.picker.DocsView(n.picker.ViewId.DOCS).setMimeTypes(r.join(",")),s=new n.picker.PickerBuilder().addView(t).addView(n.picker.ViewId.FOLDERS).setOAuthToken(e).setAppId(u.v.GOOGLE_PROJECT_ID).setDeveloperKey(u.v.GOOGLE_API_KEY).setCallback(function(n){E(e,n)});i&&s.addView(n.picker.ViewId.DOCUMENTS).addView(n.picker.ViewId.PRESENTATIONS),s.build().setVisible(!0),Array.from(document.getElementsByClassName("picker-dialog")).forEach(function(e){e.style.zIndex="2000"})},[E]),F=(0,d.useCallback)(function(e){console.error("Google auth failed:",e),C({title:(0,f.jsx)(l.cC,{id:"FL/pCd",values:{error:e}}),status:"error",duration:3e3,position:"top",isClosable:!1})},[C]),N=(0,c.Nq)({scope:m,hint:null==y?void 0:y.email,prompt:"",onSuccess:function(e){(0,c.FX)(e,m)?_(e.access_token):F("Could not get requested scopes")},onError:F}),z=(0,d.useCallback)(function(){window.gapi.load("picker",function(){s(!0)})},[]);return(0,p.Gq)("https://apis.google.com/js/api.js",{onload:z}),{initiateGoogleImport:(0,d.useCallback)(function(){i&&(v?_(v):N())},[v,N,i,_]),isImporting:O,isSuccess:I}}},16726:function(e,n,i){"use strict";i.d(n,{S:function(){return j}});var r=i(12741),t=i(20406),s=i(28526),o=i.n(s),l=i(55452),a=i(55479),c=i(2784),d=i(37914),u=i(4038),x=i(10710),h=i(35541),p=i(52322),j=function(e){var n,i=(0,a.p)(),s=(0,x.SE)().currentWorkspace,j=(0,c.useState)(!1),f=j[0],m=j[1],g=(0,c.useState)(!1),v=g[0],b=g[1],C=(0,c.useCallback)((n=(0,t.Z)(o().mark(function n(r){var a,c,x,h;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:null===(a=e.onUploadStarted)||void 0===a||a.call(e),m(!0),c=r[0],x=u.eb.includes(c.type),h=i({id:"load-doc-toast-".concat(c.name),position:"top",duration:null,status:"loading",variant:"subtle",title:(0,p.jsx)(l.cC,{id:"hdsaJo"}),description:(0,p.jsx)(l.cC,{id:"HOoZAi"}),isClosable:!1}),(0,u.cT)(c,null==s?void 0:s.id,{onUploadComplete:function(){var n=(0,t.Z)(o().mark(function n(r){var t,s,a,c;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=r.src,s=r.name,n.next=3,fetch(t).then(function(e){return e.text()});case 3:a=n.sent,c=s.replace(/[.]html$/,""),e.onUploadComplete({html:a,filename:c,source:x?"PptxUpload":"DocxUpload"}),i.update(h,{status:"success",title:(0,p.jsx)(l.cC,{id:"oMgC5V"}),duration:5e3,isClosable:!0}),b(!0),m(!1);case 9:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),onUploadFailed:function(n){var r;i.update(h,{status:"error",title:(0,p.jsx)(l.cC,{id:"SlfejT"}),description:(0,p.jsx)(l.cC,{id:"lIW942"}),duration:5e3,isClosable:!0}),null===(r=e.onUploadFailed)||void 0===r||r.call(e,n),m(!1),b(!1)}},void 0,"importDoc",d.v.TRANSLOADIT_DOC_IMPORT_TEMPLATE_ID);case 6:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)}),[null==s?void 0:s.id,e,i]),y=(0,h.E)({handleFilesCallback:C,multiple:!1,accept:[].concat((0,r.Z)(u.u0),(0,r.Z)(u.eb)).join(",")});return{initiateDocUpload:y.onClick,hiddenInputElement:y.inputElement,isUploading:f,handleDocUpload:C,isSuccess:v}}},23718:function(e,n,i){"use strict";i.d(n,{X:function(){return c}});var r=i(81333),t=i(5632),s=i(2784),o=i(57973),l=i(51823),a=i(49392),c=function(e){var n=(0,o.X)(a.H.lastHomeUrl,"/"),i=(0,r.Z)(n,2),c=(i[0],i[1]),d=(0,t.useRouter)();(0,s.useEffect)(function(){var n=function(n){e&&(0,l.y6)(n)&&c(n)};return d.events.on("routeChangeStart",n),d.events.on("hashChangeStart",n),function(){d.events.off("routeChangeStart",n),d.events.off("hashChangeStart",n)}},[d.events,c,e])};i(47270)},55114:function(e,n,i){"use strict";i.d(n,{a:function(){return I}});var r=i(81333),t=i(55452),s=i(87254),o=i(53738),l=i(71354),a=i(2046),c=i(70287),d=i(49248),u=i(78361),x=i(31186),h=i(94659),p=i(27777),j=i(45650),f=i(55966),m=i(2784),g=i(23313),v=i(75085),b=i(10710),C=i(52322),y=[{id:"consulting",label:function(){return s.ag._({id:"m5xed+"})}},{id:"creator",label:function(){return s.ag._({id:"UE2beD"})}},{id:"customer_service",label:function(){return s.ag._({id:"FfYIy2"})}},{id:"data",label:function(){return s.ag._({id:"HKH+W+"})}},{id:"design",label:function(){return s.ag._({id:"f8fH8W"})}},{id:"education",label:function(){return s.ag._({id:"aqxYLv"})}},{id:"engineering",label:function(){return s.ag._({id:"SUXBxp"})}},{id:"finance",label:function(){return s.ag._({id:"8V6XO3"})}},{id:"human_resources",label:function(){return s.ag._({id:"aDLrMs"})}},{id:"leadership",label:function(){return s.ag._({id:"HyFz7F"})}},{id:"legal",label:function(){return s.ag._({id:"vifyyw"})}},{id:"marketing",label:function(){return s.ag._({id:"vo2a+a"})}},{id:"operations",label:function(){return s.ag._({id:"B1MDds"})}},{id:"product",label:function(){return s.ag._({id:"K47k8R"})}},{id:"recruiting",label:function(){return s.ag._({id:"bn0SqF"})}},{id:"sales",label:function(){return s.ag._({id:"mUv9U4"})}},{id:"other",label:function(){return s.ag._({id:"/IX/7x"})}}],w={"get-started":{saveButtonText:function(){return s.ag._({id:"ZDIydz"})},formControlMaxW:["100%","80%","50%"],categoryQuestion:function(){return s.ag._({id:"kJizcc"})}},modal:{saveButtonText:function(){return s.ag._({id:"hQRttt"})},formControlMaxW:["100%","60%"],categoryQuestion:function(){return s.ag._({id:"06/kLN"})}},setup:{saveButtonText:function(){return s.ag._({id:"xGVfLh"})},formControlMaxW:["100%"],categoryQuestion:function(){return s.ag._({id:"kJizcc"})}}},O=[{id:"work",label:function(){return s.ag._({id:"rgBHdd"})}},{id:"education",label:function(){return s.ag._({id:"RKJfzm"})}},{id:"personal",label:function(){return s.ag._({id:"jo0oU2"})}}],k=[{id:"primary",label:function(){return s.ag._({id:"LldObG"})}},{id:"secondary",label:function(){return s.ag._({id:"AtXGMV"})}},{id:"university",label:function(){return s.ag._({id:"DEb9mB"})}},{id:"other",label:function(){return s.ag._({id:"/IX/7x"})}}],S=[{id:"student",label:function(){return s.ag._({id:"a0qEkS"})}},{id:"teacher",label:function(){return s.ag._({id:"lypRAW"})}},{id:"administrator",label:function(){return s.ag._({id:"Faptqt"})}},{id:"other",label:function(){return s.ag._({id:"/IX/7x"})}}],I=function(e){var n=e.onSuccess,i=e.onError,I=e.context,D=(0,b.SE)(),P=D.user,T=D.refetch,A=(0,m.useState)(!1),E=A[0],_=A[1],F=(0,m.useState)(void 0),N=F[0],z=F[1],L=(0,m.useState)(void 0),R=L[0],U=L[1],M=(0,m.useState)(void 0),W=M[0],G=M[1],B=(0,g.kDo)(),Z=(0,r.Z)(B,2),H=Z[0],V=Z[1],K=V.loading,q=V.error,X=(0,m.useState)(void 0),Y=X[0],Q=X[1],J=(0,m.useState)("student"),$=J[0],ee=J[1],en="education"===W||"education"===N?Y&&$:W,ei=N&&!W,er=(0,m.useCallback)(function(){var e="education"===W||"education"===N?"".concat(W,"_").concat($,"_").concat(Y):W;H({variables:{input:{id:null==P?void 0:P.id,referrer:R,jobFunction:e}}}).then(function(){return _(!0),null==T?void 0:T()}).then(function(){n&&n()}).catch(function(e){console.error('[GetStarted.UserInfo] Error updating user info "'.concat(null==P?void 0:P.id,'"'),e.message),_(!1),i&&i()})},[W,Y,$,i,n,R,T,H,null==P?void 0:P.id,N]),et=w[void 0===I?"get-started":I],es=et.formControlMaxW,eo=et.saveButtonText,el=et.categoryQuestion;return(0,C.jsx)(o.xu,{w:"100%",children:(0,C.jsxs)(l.K,{pt:6,alignItems:"center",spacing:6,alignSelf:"center",mb:10,children:[(0,C.jsxs)(a.NI,{maxW:es,as:"fieldset",isRequired:!0,children:[(0,C.jsx)(c.l,{children:el()}),(0,C.jsx)(d.E,{onChange:function(e){z(e),"education"===e?G("education"):G(void 0)},value:N,children:(0,C.jsx)(l.K,{direction:"column",spacing:2,children:O.map(function(e){var n=e.id,i=e.label;return(0,C.jsx)(u.Y,{value:n,children:i()},n)})})})]}),N&&(0,C.jsxs)(C.Fragment,{children:["education"!==N&&(0,C.jsxs)(a.NI,{maxW:es,isRequired:!0,children:[(0,C.jsx)(c.l,{children:(0,C.jsx)(t.cC,{id:"SYYw/x"})}),(0,C.jsx)(x.P,{placeholder:s.ag._({id:"rjLlrw"}),isRequired:!0,onChange:function(e){var n=e.target.value;"work"===N&&"education"===n&&ee("teacher"),G(n)},children:y.map(function(e,n){var i=e.label,r=e.id;return(0,C.jsx)("option",{value:r,children:i()},"".concat(r,"-").concat(n))})})]}),("education"===N||"education"===W)&&(0,C.jsxs)(a.NI,{maxW:es,isRequired:!0,children:[(0,C.jsx)(c.l,{children:(0,C.jsx)(t.cC,{id:"B+ClFT"})}),(0,C.jsxs)(h.g,{spacing:2,children:[(0,C.jsx)(x.P,{placeholder:s.ag._({id:"rjLlrw"}),isRequired:!0,value:$,onChange:function(e){ee(function(){return e.target.value})},children:S.map(function(e,n){var i=e.label,r=e.id;return(0,C.jsx)("option",{value:r,children:i()},"".concat(r,"-").concat(n))})}),(0,C.jsx)(x.P,{placeholder:s.ag._({id:"rNbKca"}),isRequired:!0,onChange:function(e){Q(function(){return e.target.value})},children:k.map(function(e,n){var i=e.label,r=e.id;return(0,C.jsx)("option",{value:r,children:i()},"".concat(r,"-").concat(n))})})]}),(0,C.jsx)(a.Q6,{fontSize:"xs",children:(0,C.jsx)(t.cC,{id:"9sEdx4"})})]}),(0,C.jsxs)(a.NI,{maxW:es,children:[(0,C.jsx)(c.l,{children:(0,C.jsx)(t.cC,{id:"bxuHg8"})}),(0,C.jsx)(p.I,{size:"lg",type:"text",value:R,onChange:function(e){U(e.target.value)}}),(0,C.jsx)(a.Q6,{fontSize:"xs",children:R&&(null==R?void 0:R.length)>4?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(t.cC,{id:"RNrV8M",values:{GRANT_PROPER_NOUN:v.XI}})," ",(0,C.jsx)("span",{role:"img","aria-label":s.ag._({id:"8K1shM"}),children:"\uD83D\uDE4F"})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(t.cC,{id:"Bhgibl",values:{GRANT_PROPER_NOUN:v.XI}})," ",(0,C.jsx)("span",{role:"img","aria-label":s.ag._({id:"bh5RqM"}),children:"\uD83D\uDE0A"})]})})]})]}),(0,C.jsx)(l.K,{alignItems:"center",spacing:4,pt:4,children:(0,C.jsx)(f.kH,{label:(0,C.jsx)(t.cC,{id:"5G+MQW"}),isDisabled:!ei,placement:"top",children:(0,C.jsx)(o.xu,{children:(0,C.jsx)(j.z,{variant:"solid",size:"lg",isDisabled:E||!!q||!en,isLoading:K||E,onClick:er,children:eo()})})})})]})})}},14509:function(e,n,i){"use strict";i.d(n,{o:function(){return o}});var r=i(28654),t=i(2784),s=i(10710),o=function(){var e=(0,r.useRouter)().push,n=(0,s.SE)().userStatus;(0,t.useEffect)(function(){"loggedOut"===n&&e("/signin?redirect_to=".concat(encodeURIComponent(window.location.href)))},[n,e])}},85121:function(e,n,i){"use strict";i.d(n,{My:function(){return c},rK:function(){return x},r_:function(){return d},up:function(){return u}});var r,t=i(95235),s=i(55452),o=i(87254),l=i(23313),a=i(52322),c=1,d=function(){return o.ag._({id:"cyLJM2"})},u=function(){return o.ag._({id:"6h5uMS"})},x=(r={},(0,t.Z)(r,l.r3E.Admin,{title:(0,a.jsx)(s.cC,{id:"U3pytU"}),description:(0,a.jsx)(s.cC,{id:"U4MLdj"})}),(0,t.Z)(r,l.r3E.Member,{title:(0,a.jsx)(s.cC,{id:"OvoEq7"}),description:(0,a.jsx)(s.cC,{id:"nslZjr"})}),r)},55754:function(e,n,i){"use strict";i.r(n),i.d(n,{HomePage:function(){return oU},default:function(){return oM}});var r,t=i(28654),s=i(89962),o=i(23718),l=i(10710),a=i(14509),c=i(11919),d=i(56133),u=i(97729),x=i.n(u),h=i(5632),p=i.n(h),j=i(2784),f=i(28846),m=i(52797),g=i(11197),v=i(75085),b=i(15087),C=i(32333),y=i(49626),w=i(55452),O=i(75944),k=i(8283),S=i(71354),I=i(4036),D=i(50390),P=i(36895),T=i(91012),A=i(45650),E=i(53738),_=i(27440),F=i(49929),N=i(23313),z=i(51331),L=i(27901),R=i(1672),U=i(13537),M=i(94370),W=i(47557),G=i(87254),B=i(38717),Z=i(71170),H=i(54336),V=i(93319),K=i(9088),q=i(30893),X=i(67887),Y=i(94301),Q=i(40771),J=i(82904),$=i(95258),ee=i(39097),en=i.n(ee),ei=i(14990),er=i(34717),et=i(8388),es=i(42879),eo=i(52322),el=function(e){var n,i,r=e.site,t=(0,O.q)(),s=t.isOpen,o=t.onOpen,a=(0,es.ri)(r.id,r.name),d=(0,l.SE)().user,u=r&&(0,es.AR)({site:r,path:"/"}),x=r&&(0,es.mb)(r.id);return(0,eo.jsxs)(B.f,{as:Z.P,bg:"linen.50",borderRadius:"5px",shadow:"md",_focusWithin:{shadow:"outline",_hover:{shadow:"outline"}},cursor:"pointer",_hover:{shadow:"lg",bgColor:"gray.100"},transition:"box-shadow .2s ease",role:"group",className:"highlight-mask",children:[(null==r?void 0:r.routes.length)>2&&(0,eo.jsx)(E.xu,{pos:"absolute",top:-2,left:2,right:2,bottom:"calc(66%)",bg:"whiteAlpha.600",zIndex:0,borderRadius:"md"}),(null==r?void 0:r.routes.length)>1&&(0,eo.jsx)(E.xu,{pos:"absolute",top:-1,left:1,right:1,bottom:"calc(66%)",bg:"whiteAlpha.900",zIndex:0,borderRadius:"md"}),(0,eo.jsxs)(c.k,{direction:"column",wordBreak:"break-word",alignContent:"space-between",height:"100%",bg:"white",_hover:{bgColor:"gray.100"},borderBottomRadius:"md",children:[(0,eo.jsx)(B.A,{href:a,as:en(),borderRadius:"md",children:(0,eo.jsx)(H.o,{ratio:40/21,bgColor:"gray.100",children:(0,eo.jsxs)(c.k,{borderBottomWidth:"1px",borderBottomColor:"gray.100",pos:"relative",overflow:"hidden",borderTopRadius:"md",shadow:(null==r?void 0:r.routes.length)>1?"0px -4px 9px -8px rgba(0,0,0,0.4);":"none",children:[(0,eo.jsx)(P.E,{src:null==r?void 0:r.previewUrl,fit:"cover",fallbackSrc:er.Z.src}),(null==r?void 0:r.routes.length)>1&&(0,eo.jsx)(I.C,{pos:"absolute",bottom:2,right:2,colorScheme:"blackAlpha",bg:"gray.100",color:"gray.600",children:(0,eo.jsxs)(k.U,{spacing:1,children:[(0,eo.jsx)(F.G,{fixedWidth:!0,icon:W.s2}),(0,eo.jsx)(T.x,{children:null==r?void 0:r.routes.length})]})})]})})}),(0,eo.jsxs)(c.k,{p:3,position:"relative",direction:"column",justifyContent:"space-between",h:"100%",alignItems:"flex-start",children:[(0,eo.jsx)(B.A,{href:a,as:en(),children:(0,eo.jsxs)(S.K,{spacing:0,mb:2,children:[(0,eo.jsx)(T.x,{noOfLines:2,children:r.name}),(0,eo.jsxs)(k.U,{children:[(null==r?void 0:r.faviconUrl)&&(0,eo.jsx)(P.E,{maxW:"16px",maxH:"16px",src:null==r?void 0:r.faviconUrl}),(0,eo.jsx)(T.x,{noOfLines:1,color:"gray.500",fontSize:"xs",wordBreak:"break-all",children:null==r?void 0:null===(n=r.domains)||void 0===n?void 0:null===(i=n[0])||void 0===i?void 0:i.name})]})]})}),(0,eo.jsx)(c.k,{direction:"column",w:"100%",children:(0,eo.jsxs)(c.k,{mt:2,align:"flex-start",w:"100%",justify:"space-between",children:[(null==r?void 0:r.createdBy)&&(0,eo.jsx)(ei.l,{createdByYou:r.createdBy.id===(null==d?void 0:d.id),createdByName:r.createdBy.displayName||G.ag._({id:"rtir7c"}),createdByProfileImageUrl:r.createdBy.profileImageUrl,timestampDescription:(0,eo.jsx)(w.cC,{id:"oJFw5Q",values:{0:(0,et.Dw)(r.createdTime)}})}),(0,eo.jsx)(V.L,{}),(0,eo.jsxs)(K.v,{isLazy:!0,closeOnSelect:!1,children:[(0,eo.jsx)(q.j,{"data-dashboard-site-menu":!0,as:X.h,size:"xs",variant:"ghost",borderRadius:"full",onClick:o,icon:(0,eo.jsx)(F.G,{fixedWidth:!0,icon:M.cN}),color:"gray.400",_hover:{color:"gray.800",bg:"gray.200"},children:(0,eo.jsx)(w.cC,{id:"7L01XJ"})}),s&&r&&(0,eo.jsx)(Y.h,{children:(0,eo.jsxs)(Q.q,{maxW:"sm",zIndex:"overlay",children:[u&&(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(J.s,{href:u,as:en(),target:"_blank",icon:(0,eo.jsx)(F.G,{fixedWidth:!0,icon:U.ZE}),children:(0,eo.jsx)(w.cC,{id:"OHFiKG"})}),(0,eo.jsx)($.R,{})]}),x&&(0,eo.jsx)(J.s,{as:en(),href:x,icon:(0,eo.jsx)(F.G,{fixedWidth:!0,icon:R.gr}),children:(0,eo.jsx)(w.cC,{id:"Tz0i8g"})})]})})]})]})})]})]})]})},ea=i(95235),ec=i(27037),ed=i(64256),eu=i(32834),ex=i(8649),eh=i(94993),ep=i(18504),ej=i(59777),ef=i(45170),em=i(36471),eg=i(60697),ev=i(97948),eb=i(82642),eC=i(40110),ey=i(420),ew=i(94659),eO=i(55966),ek=i(24021),eS=i(68019),eI=i(41033),eD=i(98875),eP=i(21735),eT=i(51746),eA=i(84103),eE=i(41173),e_=i(80540),eF=function(e){var n=e.onOpenCallback,i=e.onCloseCallback,r=(0,eD.ye)("upsellUXEnabled_Pro"),t=(0,eE.zc)().openUpsellModal;return r?(0,eo.jsxs)(S.K,{borderTopWidth:"1px",bottom:0,bg:"white",pt:6,pb:2,borderTopColor:"blackAlpha.200",px:2,children:[(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(e_.ER,{variant:"solid"}),(0,eo.jsx)(T.x,{fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:v.x8}})})]}),(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.500",children:(0,eo.jsx)(w.cC,{id:"gGlaFH",values:{GAMMA_PROPER_NOUN:v.N6}})}),(0,eo.jsx)(T.x,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,eo.jsx)(eA.r,{color:"trueblue.600",href:"#",onClick:function(){t({onOpenCallback:n,onCloseCallback:i,segmentEvent:C.AA.GAMMA_PRO_UPSELL_CALLOUT_SIDEBAR})},children:(0,eo.jsxs)(k.U,{flex:1,children:[(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"Xaz7bJ"})}),(0,eo.jsx)(V.L,{})]})})})]}):null},eN=i(74586),ez=i(46358),eL=i(16092),eR=i(86105),eU=i(49067),eM=i(93812),eW=i(92488),eG=i(1842),eB=i.n(eG),eZ=i(39351),eH=i(81927),eV=i(12221),eK=i(63849),eq=i(2575),eX=i(37914),eY=i(13720),eQ=i(81333),eJ=i(67835),e$=i(72360),e0=i(55479),e1=i(20010),e2=i(56915),e5=i(48273),e3=i(92619),e4=i(64827),e6=i(2167),e8=i(30302),e7=i(80353),e9=i(76648),ne=function(){return(0,eo.jsxs)(k.U,{px:2,py:2,border:"2px solid var(--chakra-colors-red-500)",borderRadius:"md",children:[(0,eo.jsx)(eJ.i,{w:4,h:4,color:"red.500"}),(0,eo.jsx)(T.x,{fontSize:"sm",color:"red.500",children:(0,eo.jsx)(w.cC,{id:"Ofm9ns"})})]})},nn=function(e){var n=e.user,i=e.workspace,r=e.canDeleteAccount;return(0,eo.jsxs)(e$.b,{status:n||null!=i&&i.memberCount&&i.memberCount<=1?"error":"warning",display:"flex",flexDirection:"column",alignItems:"normal",mt:2,children:[(0,eo.jsxs)(c.k,{pb:3,flexDirection:["column","column","row","row"],align:"flex-start",gap:2,children:[(0,eo.jsxs)(c.k,{flex:1,children:[(0,eo.jsx)(eV.q,{src:null==n?void 0:n.profileImageUrl,size:"sm",name:(null==n?void 0:n.displayName)||(null==i?void 0:i.name)}),(0,eo.jsxs)(S.K,{spacing:0,ml:2,flex:"1",children:[(0,eo.jsx)(T.x,{fontSize:"sm",flex:"1",wordBreak:"break-word",children:(null==n?void 0:n.displayName)||(null==i?void 0:i.name)}),n&&(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.600",flex:"1",wordBreak:"break-word",children:n.email}),i&&(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.600",children:(0,eo.jsx)(w.cC,{id:"LaQ44M",values:{0:i.memberCount||0}})})]})]}),(0,eo.jsx)(c.k,{flexShrink:1,children:(n||i&&(null==i?void 0:i.memberCount)===1)&&(0,eo.jsx)(ne,{})})]}),(0,eo.jsx)(eC.i,{borderColor:"blackAlpha.200"}),(0,eo.jsxs)(T.x,{pt:2,fontSize:"sm",color:n||null!=i&&i.memberCount&&i.memberCount<=1?"red.500":"yellow.700",children:[r&&n&&(0,eo.jsxs)(eo.Fragment,{children:["⚠️"," ",(0,eo.jsx)(w.cC,{id:"j95nHI",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}})]}),r&&(null==i?void 0:i.memberCount)&&(i.memberCount>1?(0,eo.jsxs)(eo.Fragment,{children:["⚠️ ",(0,eo.jsx)(w.cC,{id:"QnF/9z"})]}):(0,eo.jsxs)(eo.Fragment,{children:["⚠️"," ",(0,eo.jsx)(w.cC,{id:"PU+L+E",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}})]})),!r&&(0,eo.jsxs)(eo.Fragment,{children:["⚠️"," ",(0,eo.jsx)(w.cC,{id:"eFx5qm"})]})]})]})},ni=function(e){var n,i,r=e.isOpen,t=e.onClose,s=e.user,o=(0,j.useState)(!1),l=o[0],a=o[1],c=(0,j.useState)(!1),d=c[0],u=c[1],x=(0,N.NUx)().data,h=(0,e0.p)(),p=(0,N.I1z)(),f=(0,eQ.Z)(p,1)[0],m=(null==x?void 0:null===(n=x.user)||void 0===n?void 0:null===(i=n.workspaceMemberships)||void 0===i?void 0:i.filter(function(e){return!1===e.disabled}))||[],g=m.filter(function(e){var n,i;return"admin"===e.role&&(null===(n=e.workspace)||void 0===n?void 0:n.adminCount)===1&&(null===(i=e.workspace)||void 0===i?void 0:i.memberCount)&&e.workspace.memberCount>1}),b=m.map(function(e){return e.workspace}),C=0===g.length,y=(0,j.useCallback)(function(){u(!0),f().then(function(e){e.data&&(window.location.href="".concat(eX.v.API_HOST,"/logout?redirectTo=/user-deleted"))}).catch(function(){u(!1),h({title:"Delete account failed. Try again or reach out to Gamma support.",status:"error",duration:3e3,position:"top",isClosable:!0})})},[h,f]);return(0,eo.jsxs)(e1.u_,{isOpen:r,onClose:t,size:"lg",closeOnOverlayClick:!1,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{p:2,children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"pj33Dr",values:{GAMMA_PROPER_NOUN:v.N6}})}),(0,eo.jsx)(e4.o,{}),(0,eo.jsxs)(e6.f,{children:[C&&(0,eo.jsxs)(S.K,{spacing:3,children:[(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"gICMDu"})}),(0,eo.jsxs)(E.xu,{children:[(0,eo.jsx)(T.x,{colorScheme:"gray",fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"sG4820"})}),(0,eo.jsx)(nn,{user:s,canDeleteAccount:C})]}),b&&b.length>0&&(0,eo.jsxs)(E.xu,{children:[(0,eo.jsx)(T.x,{colorScheme:"gray",fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"dFEw4P"})}),null==b?void 0:b.map(function(e){return(0,eo.jsx)(nn,{workspace:e,canDeleteAccount:C},null==e?void 0:e.id)})]}),(0,eo.jsxs)(E.xu,{children:[(0,eo.jsx)(T.x,{colorScheme:"gray",fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"R3XcoA"})}),(0,eo.jsxs)(k.U,{bg:"gray.100",mt:2,p:3,pl:2,spacing:2,borderRadius:"sm",children:[(0,eo.jsx)(e8.X,{size:"lg",spacing:"1rem",p:3,defaultChecked:l,onChange:function(e){return a(e.target.checked)}}),(0,eo.jsx)(T.x,{fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"4YT8Pd"})})]})]})]}),!C&&(0,eo.jsx)(S.K,{children:(0,eo.jsxs)(E.xu,{children:[(0,eo.jsx)(T.x,{colorScheme:"gray",fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"nhUDfL"})}),null==b?void 0:b.map(function(e){return(0,eo.jsx)(nn,{workspace:e,canDeleteAccount:C},null==e?void 0:e.id)})]})})]}),C&&(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",colorScheme:"gray",onClick:t,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{isDisabled:!l,variant:"ghost",colorScheme:"red",onClick:y,isLoading:d,loadingText:G.ag._({id:"O71YIC"}),children:(0,eo.jsx)(w.cC,{id:"dfBVKc"})})]})})]})]})},nr=i(19265),nt=i(12662),ns=i(60239),no=i(2804),nl=i(49747),na=i(60807),nc=i(2046),nd=i(70287),nu=i(27777),nx=i(62849),nh=i(40315),np=i(96214),nj=i(18445),nf=i(28139),nm={width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},ng=function(e){var n=e.uppy,i=e.multiple,r=void 0!==i&&i,t=e.accept,s=void 0===t?nf.pK.join(","):t,o=(0,j.useRef)(null),l=(0,j.useMemo)(function(){return(0,eo.jsx)("input",{ref:o,className:"gamma-uppy-FileInput-input",style:nm,type:"file",name:"gamma-file-input",multiple:r,accept:s,onChange:function(e){var i=e.target;i&&i.files&&(Array.from(i.files).forEach(function(e){try{n.addFile({source:"file input",name:e.name,type:e.type,data:e})}catch(e){e.isRestriction?console.warn("[useFileInput] Restriction error:",e):console.error(e)}}),i.value=null)}})},[]),a=(0,j.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.click()},[]);return(0,j.useEffect)(function(){var e=o.current;e&&(n.on("file-removed",function(){e.value=null}),n.on("complete",function(){e.value=null}),n.on("transloadit:complete",function(){e.value=null}))},[]),{inputElement:l,onClick:a}},nv=i(31889);function nb(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function nC(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?nb(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nb(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var ny={cropped:"",original:""},nw=function(e){var n=e.isOpen,i=e.onClose,r=e.onAccountDeleteModalOpen,t=e.user,s=e.orgId,o=e.refetchUser,a=(0,e0.p)(),d=(0,N.kDo)(),u=(0,eQ.Z)(d,2),x=u[0],h=u[1],p=h.loading,f=h.error,m=(0,l.SE)().setSettings,g=(0,np.l)(),v=(0,j.useMemo)(function(){return g},[]),b=(0,j.useState)(v),C=b[0],y=b[1];(0,nj.m)(C);var O=(0,j.useState)(t.firstName||""),I=O[0],D=O[1],_=(0,j.useState)(t.lastName||""),z=_[0],L=_[1],R=(0,j.useState)(t.profileImageUrl||""),U=R[0],M=R[1],W=(0,j.useState)(ny),G=W[0],B=W[1],Z=(0,j.useState)("original"),H=Z[0],V=Z[1],X=G.cropped&&"cropped"===H?G.cropped:G.original&&"original"===H?G.original:U,Y=(0,j.useState)("idle"),ee=Y[0],en=Y[1],ei=(0,j.useMemo)(function(){return nf.ND.createUppyInstance(s,{onUploadStart:function(e){B(ny),en("uploading"),V("original"),(0,nv.Ns)(e.file.type||"")||M(e.tempUrl)},onOriginalFileUpload:function(e){console.debug("[AccountSettingsModal] onOriginalFileUpload",e),M(e.src),B(function(n){return nC(nC({},n),{},{original:e.src})})},onUploadComplete:function(e){console.debug("[AccountSettingsModal] onUploadComplete",e),M(function(n){return n||e.src}),B(function(){return{original:e.src,cropped:e.croppedFace||""}}),en("idle"),ei.cancelAll()},onUploadFailed:function(){en("error"),ei.cancelAll()}},"profile")},[]),er=ng({uppy:ei}),et=er.onClick,es=er.inputElement,el=(0,j.useCallback)(function(){r&&(r(),i())},[r,i]),ea=(0,j.useCallback)(function(){ei.cancelAll(),en("idle"),D(t.firstName||""),L(t.lastName||""),M(t.profileImageUrl||""),V("original"),B(ny),y(v)},[t,v,ei]),ec=C!==v,ed=I!==t.firstName||z!==t.lastName||U!==t.profileImageUrl,eu=(0,j.useMemo)(function(){return ed||ec},[ec,ed]),ex=(0,j.useCallback)(function(){if(!eu){i();return}var e=[];ec&&m&&nh.p_.includes(C)&&e.push(m({set:{locale:C}})),ed&&e.push(x({variables:{input:{id:t.id,firstName:I,lastName:z,profileImageUrl:U}}})),Promise.all(e).then(function(){null==o||o(),i(),a({title:(0,eo.jsx)(w.cC,{id:"wAvGr+"}),position:"top",status:"success",isClosable:!0,duration:3e3})}).catch(function(e){console.error('[AccountSettingsModal.onSaveClick] Error updating user info "'.concat(null==t?void 0:t.id,'"'),e.message)})},[I,eu,ec,ed,z,C,i,U,o,m,a,x,null==t?void 0:t.id]),eh=I.length<1&&z.length<1||!!(null==f?void 0:f.message)||"error"===ee;return(0,eo.jsxs)(e1.u_,{isOpen:n,onClose:i,size:"lg",closeOnOverlayClick:!1,children:[es,(0,eo.jsxs)(E.xu,{w:0,h:0,children:[(0,eo.jsx)(P.E,{src:G.original}),(0,eo.jsx)(P.E,{src:G.cropped})]}),(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"T3FM0r"})}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(eC.i,{mb:4}),(0,eo.jsxs)(e6.f,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,eo.jsxs)(S.K,{direction:"column",alignItems:"center",children:[(0,eo.jsxs)(K.v,{placement:"bottom-start",offset:[100,0],children:[(0,eo.jsx)(eO.kH,{label:(0,eo.jsx)(w.cC,{id:"etzA4s"}),openDelay:750,placement:"top",children:(0,eo.jsx)(q.j,{position:"relative",disabled:"uploading"===ee,userSelect:"none",cursor:"pointer",role:"group",_hover:{opacity:.9},children:(0,eo.jsxs)(eV.q,{src:X,name:"".concat(I," ").concat(z).trim(),size:"2xl",_groupHover:{shadow:"lg"},ignoreFallback:!0,children:["uploading"===ee&&(0,eo.jsx)(E.Cd,{position:"absolute",size:"full",justifyContent:"center",alignItems:"center",bg:"gray.300",opacity:.5,children:(0,eo.jsx)(ey.$,{size:"xl",thickness:"2px"})}),(0,eo.jsx)(E.Cd,{position:"absolute",bottom:0,right:0,borderRadius:"full",color:"gray.800",textAlign:"center",bg:"gray.200",size:9,_groupHover:{shadow:"lg",transform:"scale(1.02)"},children:(0,eo.jsx)(F.G,{icon:U?no._j:ns.Tz,width:16,height:16,size:"xs"})})]})})}),(0,eo.jsxs)(Q.q,{fontSize:"sm",children:[(0,eo.jsx)(J.s,{onClick:function(){"uploading"!==ee&&et()},children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(F.G,{icon:nr.A$}),(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"wPTug2"})})]})}),U&&(0,eo.jsx)($.R,{}),U&&(0,eo.jsx)(J.s,{onClick:function(){M(""),B(ny)},children:(0,eo.jsxs)(k.U,{color:"var(--chakra-colors-red-500)",children:[(0,eo.jsx)(F.G,{icon:nt.faTrashCan,color:"var(--chakra-colors-red-500)"}),(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"k8od7T"})})]})})]})]}),(0,eo.jsx)(nl.U,{in:!!U&&!!G.cropped&&U!==t.profileImageUrl&&"idle"===ee,animateOpacity:!0,children:(0,eo.jsx)(e8.X,{size:"sm",fontSize:"12px",color:"gray.500",isChecked:"cropped"===H,onChange:function(e){V(e.target.checked?"cropped":"original"),M(e.target.checked?G.cropped:G.original)},mb:3,children:(0,eo.jsx)(w.cC,{id:"+J8/VC"})})}),(0,eo.jsx)(na.J1,{children:"error"===ee&&"Error uploading profile image."}),(0,eo.jsxs)(S.K,{spacing:0,alignItems:"center",children:[(0,eo.jsx)(T.x,{fontSize:"xl",fontWeight:"bold",children:t.displayName}),(0,eo.jsx)(T.x,{color:"gray.500",children:t.email})]})]}),(0,eo.jsxs)(S.K,{direction:"column",width:"100%",my:6,px:4,spacing:6,children:[(0,eo.jsxs)(nc.NI,{isInvalid:eh,children:[(0,eo.jsx)(nd.l,{children:(0,eo.jsx)(w.cC,{id:"V1EGGU"})}),(0,eo.jsx)(nu.I,{w:"100%",value:I,onChange:function(e){return D(e.target.value)}})]}),(0,eo.jsxs)(nc.NI,{isInvalid:eh,children:[(0,eo.jsx)(nd.l,{children:(0,eo.jsx)(w.cC,{id:"1ZaQUH"})}),(0,eo.jsx)(nu.I,{w:"100%",value:z,onChange:function(e){return L(e.target.value)}}),(0,eo.jsx)(na.J1,{children:null!=f&&f.message?null==f?void 0:f.message:(0,eo.jsx)(w.cC,{id:"yQeiGC"})})]}),(0,eo.jsxs)(nc.NI,{children:[(0,eo.jsx)(nd.l,{children:(0,eo.jsx)(w.cC,{id:"vXIe7J"})}),(0,eo.jsx)(nx.p,{selectedLocale:nh.w$[C],onLocaleSelect:y})]})]})]}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(c.k,{justifyContent:"space-between",flex:1,alignItems:"flex-end",children:[(0,eo.jsx)(c.k,{children:(0,eo.jsx)(A.z,{variant:"ghost",color:"gray.400",colorScheme:"gray",size:"sm",onClick:el,children:(0,eo.jsx)(w.cC,{id:"ktknoE"})})}),(0,eo.jsxs)(c.k,{flexWrap:"wrap",justifyContent:"flex-end",gap:2,children:[eu&&(0,eo.jsx)(A.z,{variant:"ghost",colorScheme:"gray",onClick:ea,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{variant:eu?"solid":"plain",onClick:ex,isDisabled:eh||"uploading"===ee,isLoading:p,children:eu?(0,eo.jsx)(w.cC,{id:"y3aU20"}):(0,eo.jsx)(w.cC,{id:"DPfwMq"})})]})]})})]})]})};function nO(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function nk(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?nO(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):nO(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var nS=function(){return(0,eo.jsxs)(k.U,{w:"100%",px:2,pb:1,children:[(0,eo.jsx)(eZ.s,{size:"32px"}),(0,eo.jsx)(eH.O,{width:"60%",height:"20px"})]})},nI=function(e){var n,i=e.workspace,r=e.memberCount,t=e.isMultiline,s=void 0===t||t;return(0,eo.jsxs)(k.U,{mr:4,children:[(0,eo.jsx)(eV.q,{name:null===(n=i.name)||void 0===n?void 0:n.replace(/\s/g,""),size:"sm",bgColor:"orchid.300",color:"white"}),(0,eo.jsxs)(S.K,nk(nk({textAlign:"left",align:"flex-start",justify:"flex-start",spacing:0},s?{}:{noOfLines:1}),{},{children:[(0,eo.jsx)(T.x,nk(nk({fontSize:"sm",fontWeight:"600",wordBreak:"break-word",m:0,p:0},s?{}:{overflow:"hidden",textOverflow:"ellipsis"}),{},{minWidth:"0px",children:i.name})),(0,eo.jsx)(e_.Y7,{workspace:i}),!eB()(r)&&(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.500",textAlign:"left",children:(0,eo.jsx)(w.cC,{id:"F6GBat",values:{memberCount:r}})})]}))]})},nD=function(e){var n=e.onOpen,i=(0,l.SE)(),r=i.user,t=i.currentWorkspace,s=i.refetch,o=i.setCurrentWorkspaceId,a=(0,N.$gs)().isConnected,d=(0,O.q)({id:"user-settings-modal"}),u=d.isOpen,x=d.onOpen,h=d.onClose,p=(0,O.q)({id:"account-delete-modal"}),j=p.isOpen,f=p.onOpen,m=p.onClose,g=(0,eY.i)({md:"400px"});if(!r)return(0,eo.jsx)(eo.Fragment,{});var v=null==r?void 0:r.organizations;return v&&t?(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsxs)(K.v,{autoSelect:!1,children:[(0,eo.jsx)(eO.kH,{label:a?"":"You're offline","aria-label":a?"Workspace options":"You're offline",children:(0,eo.jsx)(E.xu,{children:(0,eo.jsx)(q.j,{as:A.z,isDisabled:!a,variant:"ghost",rightIcon:a?(0,eo.jsx)(F.G,{icon:eW.gc,"aria-label":"Caret icon"}):(0,eo.jsx)(F.G,{icon:eM.bK}),w:"100%",colorScheme:"blackAlpha",color:"gray.800",cursor:"pointer",_hover:{color:"trueblue.600"},p:2,pr:4,children:(0,eo.jsx)(E.xu,{width:"100%",children:t&&(0,eo.jsx)(nI,{workspace:t,memberCount:null,isMultiline:!1})})})})}),(0,eo.jsxs)(Q.q,{minW:g,zIndex:"overlay",shadow:"lg",maxW:"min(500px, 100vw)",children:[(0,eo.jsxs)(J.s,{px:2,cursor:"pointer",onClick:x,children:[(0,eo.jsx)(eV.q,{src:r.profileImageUrl,size:"sm",name:r.displayName}),(0,eo.jsxs)(S.K,{spacing:0,ml:2,children:[(0,eo.jsx)(T.x,{fontSize:"sm",children:r.displayName}),(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.500",children:r.email})]}),(0,eo.jsx)(V.L,{}),(0,eo.jsx)(F.G,{size:"sm",icon:eR.gr,color:"var(--chakra-colors-gray-500)"})]}),(0,eo.jsx)($.R,{}),v&&v.length>0&&(0,eo.jsx)(eK._,{title:G.ag._({id:"pmt7u4"}),type:"radio",defaultValue:null==t?void 0:t.id,onChange:function(e){o(e)},children:v.filter(function(e){return!eB()(e)&&!eB()(e.id)&&!eB()(e.name)}).map(function(e){return(0,eo.jsx)(eq.i,{value:e.id,icon:1===v.length?null:void 0,isFocusable:1!==v.length,children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(c.k,{flex:1,w:"100%",children:(0,eo.jsx)(nI,{workspace:e,memberCount:null,isMultiline:!0})}),e.id===(null==t?void 0:t.id)&&(0,eo.jsx)(c.k,{children:(0,eo.jsx)(A.z,{size:"sm",variant:"outline",onClick:n,children:(0,eo.jsx)(w.cC,{id:"0dbeO4"})})})]})},e.id)})}),(0,eo.jsx)($.R,{}),(0,eo.jsx)(J.s,{color:"red.500",icon:(0,eo.jsx)(F.G,{icon:eU.jL,fixedWidth:!0}),onClick:function(){window.location.href="".concat(eX.v.API_HOST,"/logout")},children:(0,eo.jsx)(w.cC,{id:"fcWrnU"})})]})]}),u&&(0,eo.jsx)(nw,{orgId:t.id,user:r,refetchUser:s,isOpen:u,onClose:h,onAccountDeleteModalOpen:f}),j&&(0,eo.jsx)(ni,{user:r,isOpen:j,onClose:m})]}):(0,eo.jsx)(eo.Fragment,{})},nP=i(48854),nT=i(89190),nA=i(73848),nE=i(24798),n_=i(84520),nF=i(95085),nN=i(49922),nz=i(20406),nL=i(54875),nR=i(28526),nU=i.n(nR),nM=i(29705),nW=i(82282),nG=i(31807),nB=i(76485),nZ=i(99704),nH=i(82483),nV=i(83039),nK=i(78308),nq=function(e){var n,i,r,t,s=e.memberCount,o=(0,l.SE)(),a=o.user,c=o.currentWorkspace,d=(0,nH.zc)(),u=d.subscription,x=d.product,h=d.refetchSubscription,p=(0,nB.B_)(u,c),f=p.launchCancelFlow,m=p.cancelFlowEnabled,g=(0,j.useState)(!1),v=g[0],b=g[1],C=(0,j.useCallback)((0,nz.Z)(nU().mark(function e(){var n,i;return nU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return nV.c.track(nK.AA.CANCEL_SUBSCRIPTION_CLICK,{source:"cancel-flow"}),b(!0),e.prev=4,e.next=7,f();case 7:if((null==(i=e.sent)?void 0:null===(n=i.sessionResults)||void 0===n?void 0:n.canceled)!==!0){e.next=11;break}return e.next=11,null==h?void 0:h();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.warn("Failed to cancel subscription",e.t0);case 16:b(!1);case 17:case"end":return e.stop()}},e,null,[[4,13]])})),[f,h]),y=null==u?void 0:null===(n=u.products)||void 0===n?void 0:n[0];if(!y||!x)return null;var O=!!(null==u?void 0:u.cancellationRequestedTime),k=!!(null==u?void 0:u.expirationTime)&&new Date>new Date(u.expirationTime),I=(null==u?void 0:null===(i=u.createdByUser)||void 0===i?void 0:i.id)===(null==a?void 0:a.id),D=I?(0,nZ._8)():null,P=null!=y&&y.units&&s?s-y.units:void 0,T="".concat(null==u?void 0:null===(r=u.createdByUser)||void 0===r?void 0:r.displayName," (").concat(null==u?void 0:null===(t=u.createdByUser)||void 0===t?void 0:t.email,")");return(0,eo.jsxs)(S.K,{direction:"row",spacing:2,alignItems:"baseline",children:[(0,eo.jsx)(e_.Y7,{workspace:c}),P&&P>0&&I&&(0,eo.jsx)(eO.kH,{label:(0,eo.jsx)(w.cC,{id:"J8+D9M",values:{addedSeats:P}}),placement:"top",children:(0,eo.jsx)(E.xu,{color:"yellow.500",children:(0,eo.jsx)(F.G,{icon:nL.Vm})})}),(0,eo.jsxs)(e9.h,{px:2,spacing:4,children:[(0,eo.jsx)(eO.kH,{placement:"top",shouldWrapChildren:!0,label:I?k?(0,eo.jsx)(w.cC,{id:"uxwzHm",values:{0:(0,nW.Z)((0,nG.Z)(u.expirationTime),"PPP")}}):O?(0,eo.jsx)(w.cC,{id:"SoEbnk",values:{0:(0,nW.Z)((0,nG.Z)(u.expirationTime),"PPP")}}):(0,eo.jsx)(w.cC,{id:"HrQ7yf"}):(0,eo.jsx)(w.cC,{id:"H49TQ5",values:{creatorNameAndEmail:T}}),children:(0,eo.jsx)(A.z,{target:"_blank",href:I?D:null,as:eA.r,colorScheme:I?"trueblue":"gray",variant:"link",size:"sm",rightIcon:(0,eo.jsx)(nM.h,{ml:-1}),isDisabled:!I,children:(0,eo.jsx)(w.cC,{id:"J/hVSQ",values:{0:O||k?"Re-activate subscription":"Manage subscription"}})})}),m&&!O&&I&&(0,eo.jsx)(eO.kH,{placement:"top",shouldWrapChildren:!0,label:(0,eo.jsx)(w.cC,{id:"o/WrRZ"}),children:(0,eo.jsx)(A.z,{colorScheme:"gray",color:"gray.600",variant:"link",size:"sm",onClick:C,isLoading:v,isDisabled:v,children:(0,eo.jsx)(w.cC,{id:"fHXMPy"})})})]}),k?(0,eo.jsx)(E.xu,{fontSize:"sm",color:"gray.400",children:(0,eo.jsx)(w.cC,{id:"mrIVJ+",values:{0:(0,nW.Z)((0,nG.Z)(u.expirationTime),"PPP")}})}):O?(0,eo.jsx)(E.xu,{fontSize:"sm",color:"gray.400",children:(0,eo.jsx)(w.cC,{id:"uBqaX6",values:{0:(0,nW.Z)((0,nG.Z)(u.expirationTime),"PPP")}})}):(0,eo.jsx)(E.xu,{fontSize:"sm",color:"gray.400",children:(0,eo.jsx)(w.cC,{id:"TwZCUl",values:{0:(0,nW.Z)((0,nG.Z)(u.nextBillingTime),"PPP")}})})]})},nX=i(81188),nY=i(79821),nQ=i(85121),nJ=function(e){var n=e.workspace,i=e.canManageWorkspace,r=(0,e0.p)(),t=(0,l.SE)().refetch,s=(0,j.useState)((null==n?void 0:n.name)||""),o=s[0],a=s[1],c=(0,j.useState)(!1),d=c[0],u=c[1],x=(0,N.Mqp)(),h=(0,eQ.Z)(x,2),p=h[0],f=h[1],m=f.loading,g=f.called,v=f.error,b=f.reset,C=(0,j.useCallback)(function(){u(!1),a((null==n?void 0:n.name)||"")},[null==n?void 0:n.name]),y=(0,j.useCallback)(function(){p({variables:{input:{name:o,id:null==n?void 0:n.id}},fetchPolicy:"no-cache"}).then(function(){null==t||t(),r({status:"success",title:"Success!",description:"Workspace updated successfully.",position:"top",duration:5e3}),setTimeout(function(){u(!1),b()},1e3)}).catch(function(e){console.error('[WorkspaceSettingsModal] Error updating workspace "'.concat(null==n?void 0:n.id,'"'),e.message)})},[o,null==n?void 0:n.id,t,b,r,p]),O=""===o||o.length<nQ.My||o.length>50||!!(null==v?void 0:v.message);(0,j.useEffect)(function(){o!==n.name&&u(!0)},[o,n.name]);var k=(0,nQ.up)();return n?(0,eo.jsx)(E.xu,{children:(0,eo.jsxs)(nc.NI,{isInvalid:O,children:[(0,eo.jsx)(nd.l,{children:(0,eo.jsx)(w.cC,{id:"CozWO1"})}),(0,eo.jsxs)(S.K,{w:"100%",direction:["column","row"],children:[(0,eo.jsx)(eO.kH,{placement:"top-start",label:(0,eo.jsx)(w.cC,{id:"M1LZmX",values:{WORKSPACE_ADMIN_DISPLAY_NAME_PLURAL:k}}),isDisabled:i,children:(0,eo.jsx)(E.xu,{flex:1,children:(0,eo.jsx)(nu.I,{w:["100%","50%"],placeholder:G.ag._({id:"CozWO1"}),value:o,disabled:!i,onChange:function(e){return a(e.target.value.slice(0,50))}})})}),(0,eo.jsx)(nY.R,{in:d,unmountOnExit:!0,children:(0,eo.jsx)(E.xu,{children:(0,eo.jsxs)(e9.h,{w:"100%",children:[(0,eo.jsx)(A.z,{variant:"solid",isLoading:m,isDisabled:O||g,onClick:y,children:(0,eo.jsx)(w.cC,{id:"EkH9pt"})}),(0,eo.jsx)(A.z,{onClick:C,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})})]})})})]}),(0,eo.jsx)(nc.Q6,{children:(0,eo.jsx)(w.cC,{id:"ODB/Vo"})}),(0,eo.jsx)(na.J1,{children:null!=v&&v.message?null==v?void 0:v.message:(0,eo.jsx)(w.cC,{id:"soNtuq",values:{WORKSPACE_NAME_MIN_LENGTH:nQ.My}})})]})}):null},n$=i(12741),n0=i(84636),n1=i.n(n0),n2=i(46949),n5=i(21891),n3=i(35316),n4=i(90113),n6=i(7985),n8=i(98841),n7=i(86379),n9=i(15241),ie=i(29677),ii=i(74642),ir=i(73851),it=i(36258),is=i(19875),io=i(35319),il=i(27912),ia=i(21010),ic=i(93148),id=i(85761),iu=function(e){var n=e.productPrice,i=e.newMemberCount,r=e.totalPrice,t=e.perSeatPrice;return{pricePerInterval:(null==n?void 0:n.frequencyUnit)===ia.C_B.Month?(0,eo.jsx)(w.cC,{id:"0RWTxv",values:{totalPrice:r}}):(null==n?void 0:n.frequencyUnit)===ia.C_B.Year?(0,eo.jsx)(w.cC,{id:"QACZwO",values:{totalPrice:r}}):"---",priceBlurb:(null==n?void 0:n.frequencyUnit)===ia.C_B.Month?(0,eo.jsx)(w.cC,{id:"bZFzjo",values:{newMemberCount:i,perSeatPrice:t}}):(null==n?void 0:n.frequencyUnit)===ia.C_B.Year?(0,eo.jsx)(w.cC,{id:"FWS732",values:{newMemberCount:i,perSeatPrice:t}}):"---",subscriptionCostFrequencyDisplay:(null==n?void 0:n.frequencyUnit)===ia.C_B.Month?(0,eo.jsx)(w.cC,{id:"0lMZC2"}):(null==n?void 0:n.frequencyUnit)===ia.C_B.Year?(0,eo.jsx)(w.cC,{id:"cA02Qf"}):"---"}},ix=function(){var e=!!(0,nH.zc)().product,n=(0,j.useState)(new ie.B),i=n[0],r=n[1],t=(0,O.q)({id:"confirm-add-paid-user"}),s=t.isOpen,o=t.onOpen,l=t.onClose;return{isConfirmAddPaidMemberModalOpen:s,onConfirmAddPaidMemberClose:(0,j.useCallback)(function(){i.reject(),l()},[l,i]),onConfirmAddPaidMemberClick:(0,j.useCallback)(function(){i.resolve(!0),l()},[l,i]),showConfirmPaidUserModal:(0,j.useCallback)(function(){if(!e)return Promise.resolve();var n=new ie.B;return r(n),o(),n.promise},[e,o])}},ih=function(e){var n=e.isOpen,i=e.newMemberCount,r=e.onClose,t=e.onConfirmClick,s=e.onCancelClick,o=(0,nH.zc)().subscription,l=(0,j.useCallback)(function(){return(0,id.$F)(o,i)},[o,i]),a=(0,ic.A)(l,[i,o]),c=a.proratedTotalPrice,d=a.totalPrice,u=a.productPrice,x=a.proratedDays,h=iu({productPrice:u,newMemberCount:i,totalPrice:d,perSeatPrice:a.perSeatPrice}),p=h.pricePerInterval,f=h.priceBlurb,m=h.subscriptionCostFrequencyDisplay;return n&&o?(0,eo.jsxs)(e1.u_,{isOpen:n,onClose:r,trapFocus:!1,size:"xl",children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"B9zUUN",values:{newMemberCount:i}})}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(e6.f,{children:(0,eo.jsxs)(S.K,{spacing:4,children:[(0,eo.jsx)(T.x,{as:"span",fontWeight:"600",children:f}),(0,eo.jsxs)(ii.i,{variant:"simple",colorScheme:"blackAlpha",children:[(0,eo.jsx)(ir.h,{children:(0,eo.jsxs)(it.Tr,{children:[(0,eo.jsx)(is.Th,{width:"30%",children:(0,eo.jsx)(w.cC,{id:"vimlM2"})}),(0,eo.jsx)(is.Th,{isNumeric:!0,children:m}),(0,eo.jsxs)(is.Th,{isNumeric:!0,width:"40%",children:[(0,eo.jsx)(w.cC,{id:"ogu/zU"}),(0,eo.jsx)("span",{children:"*"})]})]})}),(0,eo.jsx)(io.p,{children:(0,eo.jsxs)(it.Tr,{children:[(0,eo.jsx)(il.Td,{children:i}),(0,eo.jsx)(il.Td,{isNumeric:!0,children:(0,eo.jsx)(w.cC,{id:"mkb1xp",values:{pricePerInterval:p}})}),(0,eo.jsx)(il.Td,{isNumeric:!0,children:(0,eo.jsxs)(S.K,{spacing:0,children:[(0,eo.jsx)(T.x,{fontWeight:"bold",children:c}),(0,eo.jsxs)(T.x,{fontSize:"sm",color:"gray.500",children:[(0,eo.jsx)(w.cC,{id:"o30QTA",values:{proratedDays:x}}),(0,eo.jsx)("span",{children:"*"})]})]})})]})})]}),(0,eo.jsx)(T.x,{color:"gray.600",fontSize:"sm",pt:2,children:(0,eo.jsx)(w.cC,{id:"2p6xA4"})}),(0,eo.jsxs)(T.x,{color:"gray.600",fontSize:"sm",fontStyle:"italic",pt:4,children:[(0,eo.jsx)("span",{children:"*"}),(0,eo.jsx)(w.cC,{id:"AGM7Il"})]})]})}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",colorScheme:"gray",onClick:s,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{variant:"solid",onClick:t,children:(0,eo.jsx)(w.cC,{id:"Aa0YLq",values:{newMemberCount:i}})})]})})]})]}):null},ip=(0,n8.E)(E.xu),ij=function(e){var n=e.workspace,i=e.canManageWorkspace,r=e.setDoneFn,t=(0,e0.p)(),s=(0,j.useRef)(),o=(0,j.useRef)(null),l=(0,j.useState)([]),a=l[0],d=l[1],u=(0,j.useState)(new ie.B),x=u[0],h=u[1],p=(0,j.useState)(""),f=p[0],m=p[1],g=(0,N.f4M)(),v=(0,eQ.Z)(g,2),b=v[0],C=v[1].loading,y=(0,O.q)({id:"confirm-unsent-invitations"}),k=y.isOpen,S=y.onOpen,I=y.onClose,D=ix(),P=D.isConfirmAddPaidMemberModalOpen,_=D.onConfirmAddPaidMemberClick,F=D.onConfirmAddPaidMemberClose,z=D.showConfirmPaidUserModal,L=(0,j.useMemo)(function(){return a.concat({email:f.trim()}).filter(function(e){return!("email"in e)||(0,n6.G)(e.email||"")})},[f,a]),R=!!a.length,U=!!L.length;(0,j.useEffect)(function(){r(function(){return function(){return U?S():x.resolve(),x.promise}})},[U,x,S,r]);var M=C||!i,W=(0,j.useCallback)((0,nz.Z)(nU().mark(function e(){return nU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==L.length){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",b({variables:{workspaceId:n.id,invitees:L},refetchQueries:["GetWorkspace"]}).then(function(){t({title:(0,eo.jsx)(w.cC,{id:"Ka86rB",values:{0:L.length}}),description:(0,eo.jsx)(T.x,{children:L.map(function(e){return(0,eo.jsx)(T.x,{children:e.email},e.email)})}),status:"success",position:"top",isClosable:!0,duration:9e3})}));case 3:case"end":return e.stop()}},e)})),[L,b,n.id,t]),B=(0,j.useCallback)((0,nz.Z)(nU().mark(function e(){return nU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z().then(W).then(function(){var e;d([]),m(""),null===(e=s.current)||void 0===e||e.resetItems(!0),x.resolve(),h(new ie.B)}).catch(function(e){console.warn(e)}));case 1:case"end":return e.stop()}},e)})),[z,W,x]),Z=(0,j.useCallback)(function(e){d(function(n){return n.filter(function(n){return n.email!==e})})},[]),H=(0,j.useCallback)(function(e){d(function(n){return n1()([].concat((0,n$.Z)(n),(0,n$.Z)(e)),"email")})},[]),V=(0,nQ.up)(),K=(0,nQ.r_)();return(0,eo.jsxs)(E.xu,{my:4,mb:6,children:[(0,eo.jsx)(T.x,{mb:2,fontSize:"sm",color:"gray.500",children:(0,eo.jsx)(w.cC,{id:"/Yxzaj"})}),(0,eo.jsxs)(c.k,{direction:"row",w:"100%",alignItems:"flex-start",children:[(0,eo.jsx)(n5.B,{w:"100%",justifyContent:"center",flex:1,children:(0,eo.jsxs)(n4.AutoComplete,{ref:s,values:a,maxSelections:100,maxSuggestions:20,creatable:!0,multiple:!0,freeSolo:!0,suggestWhenEmpty:!1,openOnFocus:!0,filter:function(e,n){return!a.find(function(e){return e.email===n})},onSelectOption:function(e){H([{email:e.item.value}]),m("")},onTagRemoved:function(e){d(function(n){return(0,n$.Z)(n).filter(function(n){return n.email!==e})})},children:[(0,eo.jsxs)(n3.Z,{pointerEvents:"none",color:"gray.300",h:"100%",flexDirection:"column",children:[(0,eo.jsx)(c.k,{flex:1}),(0,eo.jsx)(c.k,{h:10,py:4,alignItems:"center",children:(0,eo.jsx)(n2.W,{w:10})})]}),(0,eo.jsx)(eO.kH,{placement:"top-start",label:(0,eo.jsx)(w.cC,{id:"8LvjQl",values:{WORKSPACE_ADMIN_DISPLAY_NAME_PLURAL:V,WORKSPACE_ADMIN_DISPLAY_NAME:K}}),isDisabled:i,children:(0,eo.jsx)(E.xu,{children:(0,eo.jsx)(n4.AutoCompleteInput,{ref:o,"data-testid":"autocomplete-collaborators-input",cursor:M?"not-allowed":void 0,disabled:M,w:"100%",pl:5,wrapStyles:{px:2},fontSize:"md",placeholder:G.ag._({id:"+1O5zr"}),transition:"width 1s ease-in-out",value:f,onKeyDown:function(e){var n=e.key;if("Enter"===n&&0===f.length){e.preventDefault();return}if("Backspace"===n&&0===f.length&&a.length>0){var i,r=a.slice(-1).pop();r&&(null===(i=s.current)||void 0===i||i.removeItem(r.email))}},onPaste:function(e){e.preventDefault(),e.stopPropagation();var n=e.clipboardData.getData("Text").trim().split(/[,|;\s]+/);H((0,n$.Z)(n.map(function(e){return{email:e}}))),m("")},onChange:function(e){m(e.target.value)},children:a.map(function(e,n){return(0,eo.jsx)(n9.L,{idx:n,selectedCollaborator:e,handleRemoveClick:function(){Z(e.email)}},e.email)})})})})]})}),(0,eo.jsx)(ip,{overflowX:"hidden",transition:"slow",animate:{maxWidth:R?"240px":"0px"},children:(0,eo.jsx)(E.xu,{ml:2,children:(0,eo.jsx)(A.z,{variant:"solid",onClick:B,isDisabled:!U,isLoading:!1,"data-testid":"add-selected-items",children:(0,eo.jsx)(w.cC,{id:"MFKlMB"})})})})]}),(0,eo.jsx)(n7.C,{invitationCount:L.length,isOpen:k,onClose:function(){I(),x.reject(),h(new ie.B)},onDiscardClick:function(){I(),x.resolve(),h(new ie.B)},onSendInvitationsClick:function(){I(),B()}}),(0,eo.jsx)(ih,{isOpen:P,newMemberCount:L.length,onConfirmClick:_,onClose:F,onCancelClick:F})]})},im=i(48322),ig=i(97442),iv=function(){var e=(0,nH.zc)().subscription,n=(0,id.OJ)(e),i=null==n?void 0:n.frequencyUnit;return(0,eo.jsxs)(T.x,{children:[(0,eo.jsx)(T.x,{as:"span",fontWeight:"600",children:i===N.C_B.Month?(0,eo.jsx)(w.cC,{id:"cs6BKJ",values:{0:(0,id.Hk)(n)},components:{0:(0,eo.jsx)(T.x,{as:"span",textDecoration:"underline"})}}):i===N.C_B.Year?(0,eo.jsx)(w.cC,{id:"xArlW8",values:{0:(0,id.Hk)(n)},components:{0:(0,eo.jsx)(T.x,{as:"span",textDecoration:"underline"})}}):"---"}),(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"gfz9Jx"})})]})},ib=i(51823),iC=function(e){var n=e.workspace,i=(0,ib.Dg)(n),r=(0,nH.zc)().product;return(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsxs)(T.x,{my:2,fontSize:"sm",color:"gray.500",children:[(0,eo.jsx)(w.cC,{id:"eR6rch"})," ",(0,eo.jsx)(w.cC,{id:"X4Z7y1"})]}),(0,eo.jsx)(c.k,{mb:4,children:(0,eo.jsx)(ig.I,{url:i})}),(0,eo.jsxs)(e$.b,{mt:2,status:"warning",fontSize:"sm",borderRadius:4,children:[(0,eo.jsx)(im.z,{}),(0,eo.jsxs)(S.K,{children:[(0,eo.jsxs)(T.x,{children:[(0,eo.jsx)("strong",{children:(0,eo.jsx)(w.cC,{id:"XeiZmu"})})," ",(0,eo.jsx)(w.cC,{id:"PF+S+V",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}})]}),r&&(0,eo.jsx)(iv,{})]})]})]})},iy=i(99185),iw=i(12337),iO=i(5918),ik=i(77525),iS=function(e,n){return"".concat(null!=e?e:""," ").concat(n?"(".concat(n,")"):"")},iI=i(82269),iD=i(35837),iP=["user"];function iT(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function iA(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?iT(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iT(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var iE=function(e,n,i){var r=iS(n.displayName,n.email),t=(0,nQ.r_)();return"remove"===e?{title:(0,eo.jsx)(w.cC,{id:"HlXuQk",values:{0:n.displayName||""}}),description:(0,eo.jsx)(w.cC,{id:"MYcnTw",values:{nameWithEmail:r}}),confirmButtonLabel:(0,eo.jsx)(w.cC,{id:"gNjH/6"})}:"leave"===e?{title:(0,eo.jsx)(w.cC,{id:"6iUevl"}),description:(0,eo.jsx)(w.cC,{id:"nM44Cu",values:{0:i.name}}),confirmButtonLabel:(0,eo.jsx)(w.cC,{id:"hGWoeF"})}:{title:(0,eo.jsx)(w.cC,{id:"kxbLa+",values:{WORKSPACE_ADMIN_DISPLAY_NAME:t}}),description:(0,eo.jsx)(w.cC,{id:"gJfQ74",values:{WORKSPACE_ADMIN_DISPLAY_NAME:t}}),confirmButtonLabel:(0,eo.jsx)(w.cC,{id:"m4YerB"})}},i_=function(e){var n=e.isOpen,i=e.onClose,r=e.onConfirmClick,t=e.onCancelClick,s=e.userToConfirm,o=e.workspace,l=e.action;if(!n)return null;var a=iE(l,s,o),c=a.title,d=a.description,u=a.confirmButtonLabel;return(0,eo.jsxs)(e1.u_,{returnFocusOnClose:!1,onClose:i,isOpen:!0,isCentered:!0,size:"lg",children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:c}),(0,eo.jsx)(e4.o,{}),(0,eo.jsxs)(e6.f,{children:[(0,eo.jsx)(T.x,{children:d}),"remove"===l&&(0,eo.jsx)(iF,{user:s,mt:3})]}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{variant:"ghost",children:[(0,eo.jsx)(A.z,{onClick:t,colorScheme:"gray",children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{colorScheme:"red",onClick:r,children:u})]})})]})]})},iF=function(e){var n=e.user,i=(0,iI.Z)(e,iP);return(0,eo.jsxs)(ew.g,iA(iA({spacing:3},i),{},{children:[(0,eo.jsx)(e$.b,{status:"warning",children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(eV.q,{src:null==n?void 0:n.profileImageUrl,size:"sm",name:null==n?void 0:n.displayName}),(0,eo.jsxs)(S.K,{spacing:0,ml:2,flex:"1",children:[(0,eo.jsx)(T.x,{fontSize:"sm",flex:"1",wordBreak:"break-word",children:null==n?void 0:n.displayName}),n.email&&(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.600",flex:"1",wordBreak:"break-word",children:n.email})]})]})}),(0,eo.jsxs)(e$.b,{children:[(0,eo.jsx)(im.z,{}),(0,eo.jsxs)(iD.GS,{spacing:3,children:[(0,eo.jsx)(iD.HC,{children:(0,eo.jsx)(w.cC,{id:"J1E9I7",values:{0:n.displayName||"",GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}})}),(0,eo.jsx)(iD.HC,{children:(0,eo.jsx)(w.cC,{id:"1i/P7t",values:{0:n.displayName||"",GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}})})]})]})]}))},iN=i(26673),iz=i(56241),iL=function(e){var n=e.selected,i=e.options,r=e.onSelect,t=e.isMenuDisabled,s=e.disabledOptions,o=void 0===s?[]:s,l=e.deleteLabel,a=void 0===l?(0,eo.jsx)(w.cC,{id:"HBvein"}):l,c=e.onDeleteClick,d=e.disabledDeleteReason,u=n===N.r3E.Admin?(0,eo.jsx)(w.cC,{id:"U3pytU"}):(0,eo.jsx)(w.cC,{id:"OvoEq7"});return(0,eo.jsxs)(K.v,{closeOnSelect:!0,children:[(0,eo.jsx)(q.j,{as:A.z,isDisabled:t,variant:"ghost",size:"sm",rightIcon:(0,eo.jsx)(F.G,{icon:iN.pt}),children:u}),(0,eo.jsx)(Q.q,{maxW:"320px",zIndex:"dropdown",children:(0,eo.jsxs)(eK._,{defaultValue:n,value:n,type:"radio",onChange:function(e){Array.isArray(e)||r(e)},children:[i.map(function(e){var n=o.find(function(n){return n.disabledOption===e});return(0,eo.jsx)(eq.i,{value:e,isDisabled:!!n,pt:3,children:(0,eo.jsx)(iz.u,{"aria-label":null==n?void 0:n.reason,label:null==n?void 0:n.reason,isDisabled:!n,placement:"right",shouldWrapChildren:!0,children:(0,eo.jsxs)(E.xu,{lineHeight:"base",children:[(0,eo.jsx)(T.x,{fontSize:"md",children:nQ.rK[e].title}),(0,eo.jsx)(T.x,{fontSize:"sm",color:"gray.500",children:nQ.rK[e].description})]})})},e)}),(0,eo.jsx)($.R,{}),(0,eo.jsx)(iz.u,{"aria-label":d,label:d,isDisabled:!d,placement:"right",shouldWrapChildren:!0,children:(0,eo.jsx)(J.s,{onClick:c,color:"red.500",fontSize:"md",lineHeight:"base",isDisabled:!!d,children:a})})]})})]})},iR=function(e,n){return(n||[]).find(function(n){var i;return(null===(i=n.workspace)||void 0===i?void 0:i.id)===e})},iU=function(e){var n,i=e.workspace,r=e.dateFormatterFn,t=e.canManageWorkspace,s=e.workspaceAdminCount,o=(0,j.useState)(N.tvj.DisplayName),a=o[0],d=o[1],u=(0,j.useState)(N.SrV.Asc),x=u[0],h=u[1],p=(0,j.useState)(!1),f=p[0],m=p[1],g={id:null==i?void 0:i.id,first:50,sortBy:{field:a,direction:x}},v=(0,N.iR3)({variables:g,skip:!(null!=i&&i.id)}),b=v.data,C=v.loading,y=v.fetchMore,k=(0,N.Eiz)(),I=(0,eQ.Z)(k,2),D=I[0],P=I[1].loading,T=(0,N.ert)(),_=(0,eQ.Z)(T,2),z=_[0],L=_[1].loading,R=(0,j.useState)(null),U=R[0],M=R[1],W=null==b?void 0:null===(n=b.workspaceMembers)||void 0===n?void 0:n.pageInfo,G=!C&&(null==W?void 0:W.hasNextPage)&&(null==W?void 0:W.endCursor),B=null==b?void 0:b.workspaceMembers.edges.map(function(e){return e.node}),Z=(0,l.SE)(),H=Z.user,V=Z.refetch,K=i.id,q=(0,e0.p)(),X=(0,j.useState)(null),Y=X[0],Q=X[1],J=(0,j.useState)(null),$=J[0],ee=J[1],en=(0,j.useState)(new ie.B),ei=en[0],er=en[1],et=(0,O.q)(),es=et.isOpen,el=et.onOpen,ea=et.onClose,ec=(0,j.useMemo)(function(){return null!=s?s:(null==B?void 0:B.reduce(function(e,n){var i=iR(K,n.workspaceMemberships);return i&&i.role===N.r3E.Admin&&e++,e},0))||0},[B,K,s]),ed=(0,j.useCallback)((0,nz.Z)(nU().mark(function e(){return nU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return el(),e.abrupt("return",ei.promise);case 2:case"end":return e.stop()}},e)})),[ei,el]),eu=(0,j.useCallback)(function(){Q(null),ee(null)},[]),ex=(0,j.useCallback)(function(e,n){M(e.id),D({variables:{workspaceId:i.id,userId:e.id,role:n},refetchQueries:["GetWorkspace"]}).then(function(){null==V||V(),q({description:n===N.r3E.Admin?(0,eo.jsx)(w.cC,{id:"IFCQlQ",values:{0:e.displayName,1:e.email}}):(0,eo.jsx)(w.cC,{id:"gWgob7",values:{0:e.displayName,1:e.email}}),status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(){q({description:(0,eo.jsx)(w.cC,{id:"CF7q4i",values:{0:e.displayName,1:e.email}}),status:"error",position:"top",duration:5e3,isClosable:!0})}).finally(function(){M(null)})},[V,q,D,i.id]),eh=(0,j.useCallback)(function(e){var n;return n=(0,nz.Z)(nU().mark(function n(i){return nU().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!e||!t)){n.next=2;break}return n.abrupt("return");case 2:if(!((null==H?void 0:H.id)===e.id&&i===N.r3E.Member)){n.next=10;break}if(!(ec<=1)){n.next=5;break}return n.abrupt("return");case 5:Q(e),ee("giveUpAdminAccess"),ed().then(function(){ex(e,i)}).catch(function(){console.debug("[handleMemberRoleChange] User cancelled action")}).finally(function(){return eu()}),n.next=11;break;case 10:ex(e,i);case 11:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)}},[ec,t,ex,ed,eu,null==H?void 0:H.id]),ep=(0,j.useCallback)(function(e){return function(){if(e.id!==(null==H?void 0:H.id)){var n=iS(e.displayName,e.email);Q(e),ee("remove"),ed().then(function(){M(e.id),z({variables:{workspaceId:K,userId:e.id},refetchQueries:["GetWorkspace","GetWorkspaceMembers"]}).then(function(){null==V||V(),q({description:(0,eo.jsx)(w.cC,{id:"jkCRxy",values:{emailWithName:n}}),status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(){q({description:(0,eo.jsx)(w.cC,{id:"eETcUn",values:{emailWithName:n}}),status:"error",position:"top",duration:5e3,isClosable:!0})})}).finally(function(){M(null),eu()})}}},[z,ed,K,null==H?void 0:H.id,V,eu,q]);return(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(ik.x,{children:(0,eo.jsxs)(ii.i,{variant:"simple",colorScheme:"blackAlpha",size:"sm",whiteSpace:"normal",children:[(0,eo.jsx)(ir.h,{children:(0,eo.jsxs)(it.Tr,{children:[(0,eo.jsx)(is.Th,{children:(0,eo.jsx)(A.z,{ml:-3,size:"sm",color:"gray.500",variant:"ghost",colorScheme:"blackAlpha","aria-label":"sort",onClick:function(){d(N.tvj.DisplayName),h(function(e){return e===N.SrV.Asc?N.SrV.Desc:N.SrV.Asc})},rightIcon:(0,eo.jsx)(E.xu,{color:a===N.tvj.DisplayName?"gray.700":"gray.300",children:(0,eo.jsx)(F.G,{icon:a===N.tvj.DisplayName?"asc"===x?iO.eW:iw.l1:iy.Cm})}),children:(0,eo.jsx)(w.cC,{id:"6YtxFj"})})}),(0,eo.jsx)(is.Th,{children:(0,eo.jsx)(A.z,{ml:-3,size:"sm",color:"gray.500",variant:"ghost",colorScheme:"blackAlpha","aria-label":"sort",onClick:function(){d(N.tvj.CreatedTime),h(function(e){return e===N.SrV.Asc?N.SrV.Desc:N.SrV.Asc})},rightIcon:(0,eo.jsx)(E.xu,{color:a===N.tvj.CreatedTime?"gray.700":"gray.300",children:(0,eo.jsx)(F.G,{icon:a===N.tvj.CreatedTime?"asc"===x?iO.eW:iw.l1:iy.Cm})}),children:(0,eo.jsx)(w.cC,{id:"SnjWqV"})})}),(0,eo.jsx)(is.Th,{children:(0,eo.jsx)(w.cC,{id:"GDvlUT"})})]})}),(0,eo.jsxs)(io.p,{children:[C&&(0,eo.jsx)(it.Tr,{p:0,children:(0,eo.jsx)(il.Td,{colSpan:2,p:0,children:(0,eo.jsxs)(S.K,{spacing:2,children:[(0,eo.jsx)(eH.O,{h:8}),(0,eo.jsx)(eH.O,{h:8}),(0,eo.jsx)(eH.O,{h:8})]})})}),B&&B.map(function(e,n){var s=n===B.length-1,o=iR(i.id,e.workspaceMemberships),l=r(null==o?void 0:o.createdTime),a=null==o?void 0:o.role,c=a===N.r3E.Admin,d=a?nQ.rK[a].title:"",u=U===e.id,x=e.id===(null==H?void 0:H.id);return(0,eo.jsxs)(it.Tr,{children:[(0,eo.jsx)(il.Td,{borderBottom:s?"0 none":void 0,children:(0,eo.jsx)(iM,{user:e,isSelf:x})}),(0,eo.jsx)(il.Td,{borderBottom:s?"0 none":void 0,whiteSpace:"nowrap",children:l}),(0,eo.jsx)(il.Td,{borderBottom:s?"0 none":void 0,w:32,children:u?(0,eo.jsx)(E.xu,{textAlign:"center",children:(0,eo.jsx)(ey.$,{size:"xs"})}):t&&a?(0,eo.jsx)(iL,{selected:a,isMenuDisabled:P||L,options:[N.r3E.Admin,N.r3E.Member],onSelect:eh(e),disabledOptions:c&&ec<=1?[{disabledOption:N.r3E.Member,reason:"A workspace must have at least one admin"}]:[],disabledDeleteReason:x?"You cannot remove yourself":void 0,onDeleteClick:ep(e)}):d})]},e.id)})]})]})}),G&&(0,eo.jsx)(c.k,{w:"100%",justify:"center",align:"center",mt:3,children:(0,eo.jsx)(A.z,{isLoading:f,size:"sm",onClick:function(){m(!0),y({variables:{after:null==W?void 0:W.endCursor}}).finally(function(){m(!1)})},children:(0,eo.jsx)(w.cC,{id:"yQ2kGp"})})}),Y&&$&&(0,eo.jsx)(i_,{isOpen:es,onClose:function(){ea(),ei.reject(),er(new ie.B)},onCancelClick:function(){ea(),ei.reject(),er(new ie.B)},onConfirmClick:(0,nz.Z)(nU().mark(function e(){return nU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ea(),ei.resolve(),er(new ie.B);case 3:case"end":return e.stop()}},e)})),userToConfirm:Y,action:$,workspace:i})]})},iM=function(e){var n=e.user,i=e.isSelf,r=n.displayName,t=n.profileImageUrl,s=n.email;return(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(eV.q,{size:"sm",name:r,src:t}),(0,eo.jsxs)(S.K,{spacing:0,children:[(0,eo.jsxs)(T.x,{children:[r,i?(0,eo.jsxs)(eo.Fragment,{children:[" ",(0,eo.jsx)(w.cC,{id:"4Q6lF1"})]}):""]}),(0,eo.jsx)(k.U,{mt:1,children:(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.500",children:s})})]})]})},iW=i(829),iG=i.n(iW),iB=function(e){var n=e.invitations,i=e.dateFormatterFn,r=e.canManageWorkspace,t=(0,j.useState)("email"),s=t[0],o=t[1],l=(0,j.useState)("asc"),a=l[0],c=l[1],d=(0,N.PZh)(),u=(0,eQ.Z)(d,1)[0],x=(0,e0.p)(),h=(0,nQ.up)(),p=(0,j.useCallback)(function(e){u({variables:{id:e}}).then(function(){x({title:G.ag._({id:"DGxAzK"}),status:"success",duration:3e3,isClosable:!0,position:"bottom"})}).catch(function(e){console.error(e),x({title:G.ag._({id:"s51CLN",values:{0:e.message}}),status:"error",isClosable:!0,position:"bottom"})})},[u,x]),f="asc"===a?iG()(n,s):iG()(n,s).reverse();return 0===f.length?(0,eo.jsx)(E.xu,{p:4,background:"gray.50",children:(0,eo.jsx)(T.x,{my:8,textAlign:"center",children:(0,eo.jsx)(w.cC,{id:"blyObO"})})}):(0,eo.jsx)(ik.x,{children:(0,eo.jsxs)(ii.i,{variant:"simple",colorScheme:"blackAlpha",size:"sm",whiteSpace:"normal",children:[(0,eo.jsx)(ir.h,{children:(0,eo.jsxs)(it.Tr,{children:[(0,eo.jsx)(is.Th,{children:(0,eo.jsx)(A.z,{ml:-3,size:"sm",color:"gray.500",variant:"ghost",colorScheme:"blackAlpha","aria-label":"sort",onClick:function(){o("email"),c(function(e){return"asc"===e?"desc":"asc"})},rightIcon:(0,eo.jsx)(E.xu,{color:"email"===s?"gray.700":"gray.300",children:(0,eo.jsx)(F.G,{icon:"email"===s?"asc"===a?iO.eW:iw.l1:iy.Cm})}),children:(0,eo.jsx)(w.cC,{id:"O3oNi5"})})}),(0,eo.jsxs)(is.Th,{children:[" ",(0,eo.jsx)(A.z,{ml:-3,size:"sm",color:"gray.500",variant:"ghost",colorScheme:"blackAlpha","aria-label":"sort",onClick:function(){o("createdTime"),c(function(e){return"asc"===e?"desc":"asc"})},rightIcon:(0,eo.jsx)(E.xu,{color:"email"===s?"gray.700":"gray.300",children:(0,eo.jsx)(F.G,{icon:"createdTime"===s?"asc"===a?iO.eW:iw.l1:iy.Cm})}),children:(0,eo.jsx)(w.cC,{id:"B82OLR"})})]}),(0,eo.jsx)(is.Th,{children:(0,eo.jsx)(w.cC,{id:"GXsAby"})})]})}),(0,eo.jsx)(io.p,{children:f&&(null==f?void 0:f.length)>0&&f.map(function(e,n){return(0,eo.jsxs)(it.Tr,{children:[(0,eo.jsx)(il.Td,{children:e.email}),(0,eo.jsx)(il.Td,{children:i(e.createdTime)}),(0,eo.jsx)(il.Td,{children:(0,eo.jsx)(eO.kH,{placement:"top",label:(0,eo.jsx)(w.cC,{id:"wcx9n8",values:{WORKSPACE_ADMIN_DISPLAY_NAME_PLURAL:h}}),shouldWrapChildren:!0,isDisabled:r,children:(0,eo.jsx)(A.z,{w:20,variant:"plain",color:"plain",size:"sm",isDisabled:!r,onClick:function(){p(e.id)},children:(0,eo.jsx)(w.cC,{id:"GXsAby"})})})})]},e.id)})})]})})},iZ=function(e){var n,i,r,t=e.isOpen,s=e.onClose,o=(0,l.SE)().currentWorkspace,a=(0,l.d3)(),c=(0,N.WaV)({variables:{id:null==o?void 0:o.id},skip:!(null!=o&&o.id)}).data,d=(0,j.useState)(function(){return function(){return Promise.resolve()}}),u=d[0],x=d[1],h=(null==c?void 0:null===(n=c.workspace)||void 0===n?void 0:n.invitations)||[],p=(0,j.useCallback)(function(){u().then(s).catch(function(){console.warn("[workspaceSettingsModal] InviteByEmail rejected to close modal")})},[u,s]);if(!o)return null;var f=null==c?void 0:null===(i=c.workspace)||void 0===i?void 0:i.memberCount;return(0,eo.jsxs)(e1.u_,{isOpen:t,onClose:p,size:"3xl",trapFocus:!1,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"Knd6gz"})}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(eC.i,{mb:4}),(0,eo.jsxs)(e6.f,{children:[(0,eo.jsx)(nN.m,{segmentEvent:C.AA.GAMMA_PRO_UPSELL_CALLOUT_WORKSPACE_SETTINGS,onOpenCallback:p}),(0,eo.jsx)(nJ,{workspace:o,canManageWorkspace:a}),(0,eo.jsx)(E.xu,{mt:12,children:(0,eo.jsxs)(S.K,{spacing:8,children:[(0,eo.jsxs)(E.xu,{children:[(0,eo.jsx)(D.X,{size:"md",fontWeight:"600",mb:4,children:(0,eo.jsx)(w.cC,{id:"KKJitJ"})}),(0,eo.jsx)(ij,{workspace:o,canManageWorkspace:a,setDoneFn:x}),a&&(0,eo.jsx)(iC,{workspace:o})]}),(0,eo.jsx)(E.xu,{children:(0,eo.jsxs)(nT.m,{variant:"soft-rounded",size:"sm",children:[(0,eo.jsxs)(nA.t,{mb:4,children:[(0,eo.jsxs)(nE.O,{children:[(0,eo.jsx)(E.xu,{mr:2,children:(0,eo.jsx)(F.G,{icon:nP.iO})}),(0,eo.jsx)(w.cC,{id:"VJ7g+s",values:{memberCount:f}})]}),(0,eo.jsxs)(nE.O,{children:[(0,eo.jsx)(E.xu,{mr:2,children:(0,eo.jsx)(F.G,{icon:ec.FU})}),(0,eo.jsx)(w.cC,{id:"KxTWx3",values:{0:h.length}})]})]}),(0,eo.jsxs)(n_.n,{children:[(0,eo.jsx)(nF.x,{p:0,mt:0,children:(0,eo.jsx)(iU,{workspace:o,dateFormatterFn:nX.P9,canManageWorkspace:a,workspaceAdminCount:null==c?void 0:null===(r=c.workspace)||void 0===r?void 0:r.adminCount})}),(0,eo.jsx)(nF.x,{p:0,mt:0,children:(0,eo.jsx)(iB,{invitations:h,dateFormatterFn:nX.P9,canManageWorkspace:a})})]})]})})]})})]}),(0,eo.jsx)(eC.i,{mt:6}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(S.K,{w:"100%",direction:"row",align:"center",justifyContent:"space-between",children:[(0,eo.jsx)(nq,{memberCount:f}),(0,eo.jsx)(V.L,{}),(0,eo.jsx)(e9.h,{children:(0,eo.jsx)(A.z,{variant:"solid",onClick:p,children:(0,eo.jsx)(w.cC,{id:"DPfwMq"})})})]})})]})]})},iH=i(73629);function iV(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function iK(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?iV(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iV(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var iq=function(e){var n=e.openModal,i=(0,l.SE)().currentWorkspace,r=(0,e0.p)();(0,j.useEffect)(function(){var e=(0,ib.SJ)()[l.f2],t=null==i?void 0:i.id;e&&t&&(e===t?n():r({title:(0,eo.jsx)(w.cC,{id:"EhVOPs"}),position:"top",id:"workspace-not-found",status:"error",isClosable:!0,duration:3e3}),(0,iH.lO)({query:iK(iK({},(0,ib.SJ)()),{},(0,ea.Z)({},l.f2,void 0)),emitChange:!1}))},[r,n,i])},iX=i(9734),iY=["children","dataTestId","isSelected","isDropActive","href","target"];function iQ(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function iJ(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?iQ(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iQ(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var i$=j.forwardRef(function(e,n){var i=e.children,r=e.dataTestId,t=e.isSelected,s=e.isDropActive,o=e.href,l=e.target,a=(0,iI.Z)(e,iY);return(0,eo.jsx)(A.z,iJ(iJ({ref:n,textDecoration:"none",variant:"ghost",w:"100%",size:"sm",colorScheme:"gray",as:eA.r,borderRadius:"md",justifyContent:"flex-start","data-testid":r,_hover:{bgColor:t?"trueblue.50":"gray.100",textDecoration:"none"},color:t||s?"trueblue.500":"gray.600",bgColor:t||s?"trueblue.50":void 0,_active:{color:"trueblue.500",bgColor:"trueblue.200",textDecoration:"none"},py:1.5,mb:1,paddingInlineStart:2,fontWeight:t?"bold":"regular",href:o,target:l},a),{},{children:i}))});i$.displayName="SidebarButton";var i0=i(55104),i1=i(20103),i2=i(41864),i5=i(52622),i3=i(34396),i4=i(92779);function i6(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function i8(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?i6(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):i6(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var i7=function(e){var n,i=e.onClose,r=e.onSubmit,t=e.doc,s=(0,l.py)("manage",t||void 0),o=(0,N.$gs)().isConnected,a=(0,j.useState)(N.y3$.Manage),c=a[0],d=a[1];return t?(0,eo.jsxs)(e1.u_,{closeOnOverlayClick:!1,isOpen:!0,onClose:i,size:"lg",children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{"data-testid":"workspace-permissions-prompt",children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"JzTAyU",values:{0:t.title}})}),(0,eo.jsx)(e4.o,{}),(0,eo.jsxs)(e6.f,{children:[(0,eo.jsx)(T.x,{mb:6,children:(0,eo.jsx)(w.cC,{id:"wKPcxh"})}),(0,eo.jsx)(i2.o$,{testId:"workspace",title:(0,eo.jsx)(w.cC,{id:"wtxjAY"}),subtitle:G.ag._({id:"aC87LX",values:{0:null==t?void 0:null===(n=t.organization)||void 0===n?void 0:n.name}}),isDisabled:!s||!o,img:(0,eo.jsx)(E.Cd,{color:"gray.800",textAlign:"center",bg:"gray.200",size:"32px",children:(0,eo.jsx)(F.G,{size:"1x",icon:i5.P8})}),disabledText:i2.Nj[c].title(),permissionsControl:(0,eo.jsx)(i2.t9,{selected:c,options:[N.y3$.Manage,N.y3$.Edit,N.y3$.Comment,N.y3$.View],onClick:function(e){d(e)}})})]}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",onClick:i,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{variant:"solid","data-testid":"workspace-permissions-submit",onClick:function(){r(c),i()},children:(0,eo.jsx)(w.cC,{id:"DPfwMq"})})]})})]})]}):(0,eo.jsx)(eo.Fragment,{})},i9=function(){var e=(0,O.q)({id:"workspacePermissionPromptDisclosure"}),n=e.onOpen,i=e.isOpen,r=e.onClose,t=(0,N.rIg)(),s=(0,eQ.Z)(t,1)[0],o=(0,l.SE)().currentWorkspace,a=(0,e0.p)(),c=(0,i3.Z)().addDocChannel,d=(0,j.useState)(null),u=d[0],x=d[1],h=(0,j.useState)(null),p=h[0],f=h[1],m=(0,l.we)(),g=(0,j.useCallback)(function(e,n){var i=(e.channels||[]).find(function(e){return e.id===n.id}),r=(0,i4.Gi)(e,o),t=m.cannot("manage",e)&&eB()(e.orgAccess);return r?(a({description:G.ag._({id:"doMS3L",values:{GAMMA_ARTIFACT_PROPER_NOUN:v.Yc}}),status:"warning",duration:5e3,isClosable:!0,position:"top"}),!1):t?(a({description:G.ag._({id:"81ZRAa",values:{GAMMA_ARTIFACT_PROPER_NOUN:v.Yc}}),status:"warning",duration:5e3,isClosable:!0,position:"top"}),!1):!i||(a({description:G.ag._({id:"FRsVHP",values:{GAMMA_ARTIFACT_PROPER_NOUN:v.Yc}}),status:"warning",duration:5e3,isClosable:!0,position:"top"}),!1)},[m,a,o]),b=(0,j.useCallback)(function(e){if(u&&p){var n=u.id;s({variables:{id:n,orgAccess:e},optimisticResponse:{updateDoc:i8(i8({},{id:n,orgAccess:e}),{},{__typename:"Doc"})}}).then(function(){c({doc:u,channel:p,existingChannels:null==u?void 0:u.channels})}).catch(function(e){console.error("[useAddDocToChannel.updatedocOrgAccess] Error setting doc orgAccess for doc id",n),a({title:G.ag._({id:"SlfejT"}),description:G.ag._({id:"x9Wysy",values:{0:e.message}}),status:"error"})})}},[c,u,p,a,s]),C=(0,j.useCallback)(function(e,i){g(e,i)&&(e.orgAccess?c({doc:e,channel:i,existingChannels:(null==e?void 0:e.channels)||[]}):(x(e),f(i),n()))},[c,n,g]);return{isOpen:i,onClose:(0,j.useCallback)(function(){f(null),x(null),r()},[r]),doc:u,handleAddDocToChannel:C,updateWorkspacePermissionThenAddToChannel:b}},re=i(81068),rn="ChannelDocDragItemType",ri=i(76035),rr=i(27302),rt=i(46034);function rs(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function ro(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?rs(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rs(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var rl=function(){var e=(0,e0.p)(),n=(0,N.ozD)(),i=(0,eQ.Z)(n,1)[0],r=(0,N.Oau)(),t=(0,eQ.Z)(r,1)[0],s=(0,N.dbz)(),o=(0,eQ.Z)(s,2),l=o[0],a=o[1],c=a.loading,d=a.error,u=(0,j.useCallback)(function(n){var r=n.channel;return i({variables:{channelId:r.id}}).then(function(){e({title:(0,eo.jsx)(w.cC,{id:"GCUxja",values:{0:null==r?void 0:r.name}}),description:(0,eo.jsx)(w.cC,{id:"SQY08b",values:{0:null==r?void 0:r.name}}),status:"success",duration:3e3,isClosable:!0,position:"top"})})},[i,e]);return{joinChannel:(0,j.useCallback)(function(n){var i=n.channel,r=n.workspaceId,s=i.name;return t({variables:{channelId:i.id},update:function(e,n){var i=n.data;null!=i&&i.joinChannel&&e.writeQuery({query:N.kTw,variables:{workspaceId:r},data:{channels:[i.joinChannel]}})},optimisticResponse:{joinChannel:ro({},i)}}).then(function(){e({title:(0,eo.jsx)(w.cC,{id:"WpOdvg",values:{name:s}}),description:(0,eo.jsx)(w.cC,{id:"/IOSvX",values:{name:s}}),status:"success",duration:3e3,isClosable:!0,position:"top"})}).catch(function(n){e({title:(0,eo.jsx)(w.cC,{id:"bLRa0l",values:{name:s}}),description:n.message,status:"error",duration:3e3,isClosable:!0,position:"top"})})},[t,e]),leaveChannel:u,createChannel:(0,j.useCallback)(function(n){var i=n.input;return l({variables:{input:i},update:function(e,n){var r=n.data;null!=r&&r.createChannel&&e.writeQuery({query:N.kTw,variables:{workspaceId:i.workspaceId},data:{channels:[r.createChannel]}})},optimisticResponse:{createChannel:ro(ro({id:"temp-id",slug:"temp-slug"},i),{},{createdTime:new Date().toISOString(),updatedTime:new Date().toISOString(),__typename:"Channel"})}}).then(function(n){var i,r=null==n?void 0:null===(i=n.data)||void 0===i?void 0:i.createChannel;null!=r&&r.name&&e({title:(0,eo.jsx)(w.cC,{id:"EbT81q",values:{0:r.name}}),status:"success",duration:3e3,isClosable:!0,position:"top"}),null!=r&&r.id&&null!=r&&r.slug?p().push((0,ib.j)({id:r.id,slug:r.slug})):console.error('[CreateChannelModal] Error generating channel URL. ID: "'.concat(null==r?void 0:r.id,'". Slug: "').concat(null==r?void 0:r.slug,'"'))}).catch(function(n){e({title:(0,eo.jsx)(w.cC,{id:"YeikaQ"}),description:n.message,status:"error",duration:3e3,isClosable:!0,position:"top"})})},[l,e]),createChannelLoading:c,createChannelError:d}},ra=i(38421),rc=i.n(ra),rd=function(e){var n=e.channelName,i=e.onCreateClick;return(0,eo.jsx)(rr.M,{minH:"sm",children:(0,eo.jsxs)(c.k,{direction:"column",justify:"center",align:"center",w:["100%","80%"],children:[(0,eo.jsx)(E.xu,{w:"80%",maxW:"250px",mb:6,alignContent:"center",children:(0,eo.jsx)(rc(),{src:"/images/Sal-Fishing-2x.png",width:"640",height:"361",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,eo.jsx)(D.X,{size:"md",mb:2,textAlign:"center",children:(0,eo.jsx)(w.cC,{id:"NmfOr+"})}),(0,eo.jsx)(T.x,{fontSize:"lg",color:"gray.400",textAlign:"center",children:(0,eo.jsx)(w.cC,{id:"cZOpR0",values:{channelName:n},components:{0:(0,eo.jsx)(eA.r,{onClick:i,color:"trueblue.500"})}})})]})})};function ru(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function rx(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ru(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ru(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var rh=function(e){var n=e.channels,i=e.workspaceId,r=rl(),t=r.leaveChannel,s=r.joinChannel,o=(0,j.useCallback)(function(e,n){e?s({channel:n,workspaceId:i}):t({channel:n})},[s,t,i]);return(0,eo.jsxs)(S.K,{spacing:0,children:[0===n.length&&(0,eo.jsxs)(c.k,{direction:"column",justify:"center",align:"center",w:"100%",my:6,children:[(0,eo.jsx)(E.xu,{w:"80%",maxW:"200px",mb:6,alignContent:"center",children:(0,eo.jsx)(P.E,{src:rt.Z.src,width:"725px",alt:"Sal, the Gamma mascot, painting in space"})}),(0,eo.jsx)(D.X,{size:"md",mb:2,textAlign:"center",children:(0,eo.jsx)(w.cC,{id:"PN1FMY"})}),(0,eo.jsx)(T.x,{fontSize:"lg",color:"gray.400",textAlign:"center",children:(0,eo.jsx)(w.cC,{id:"gdEwT8",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq},components:{0:(0,eo.jsx)("br",{})}})})]}),n.length>0&&n.map(function(e){var n=e.members,i=e.isMember,r=e.memberCount,t=e.name;return(0,eo.jsxs)(k.U,{spacing:4,px:4,py:2,_hover:{bg:"gray.100"},borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",children:[(0,eo.jsx)(E.xu,{p:2,color:i?"":"gray.400",children:(0,eo.jsx)(F.G,{icon:i?ri.faCircleCheck:eL.Ty})}),(0,eo.jsxs)(k.U,{flex:1,children:[(0,eo.jsxs)(S.K,{spacing:0,children:[(0,eo.jsx)(T.x,{children:t}),(0,eo.jsx)(T.x,{fontSize:"sm",color:"gray.400",children:e.isMember?(0,eo.jsx)(w.cC,{id:"tWPlLK",values:{0:r||0}}):(0,eo.jsx)(w.cC,{id:"pkIIls",values:{0:r||0}})})]}),(0,eo.jsx)(V.L,{}),(0,eo.jsx)(eO.NL,{size:"xs",overflowTooltipLabel:G.ag._({id:"25VyZX"}),avatars:n||[],max:3})]}),(0,eo.jsx)(A.z,{w:20,variant:i?"ghost":"plain",color:i?"gray.600":"plain",size:"sm",onClick:function(){o(!i,e)},children:i?(0,eo.jsx)(w.cC,{id:"Mv8CyJ"}):(0,eo.jsx)(w.cC,{id:"0wdd7X"})})]},e.id)})]})},rp=function(e){var n,i=e.isOpen,r=e.onClose,t=e.workspaceId,s=(0,j.useState)(""),o=s[0],l=s[1],a=(0,j.useState)(!1),c=a[0],d=a[1],u=(0,j.useState)(!1),x=u[0],h=u[1],p=(0,j.useRef)(null),f=rl(),m=f.createChannel,g=f.createChannelLoading,v=f.createChannelError,b=(0,j.useState)(null),C=b[0],y=b[1],O=(0,j.useState)(!1),I=O[0],D=O[1],P=(0,N.Un3)({variables:{workspaceId:t,first:20,sortBy:{field:N.Bhs.MemberCount,direction:N.SrV.Desc},query:o},skip:!t,nextFetchPolicy:"cache-only"}),E=P.data,_=P.loading,F=P.called,z=P.fetchMore,L=(0,j.useCallback)(function(e){var n=e.target.value;y(null),n?l(n):l("")},[]),R=!!(o&&(null==E?void 0:E.workspaceChannels.edges.length)===0),U=function(){t&&m({input:{name:o,workspaceId:t}}).then(function(){r()}).catch(function(e){y(e.message)})};(0,j.useEffect)(function(){_||d(R)},[_,R]),(0,j.useEffect)(function(){!F||_||x||h(!0)},[F,_,x]);var M=c&&R,W=(null==E?void 0:E.workspaceChannels.edges.map(function(e){return e.node}))||[],B=!o,Z=null==E?void 0:null===(n=E.workspaceChannels)||void 0===n?void 0:n.pageInfo,H=x&&(null==Z?void 0:Z.hasNextPage)&&(null==Z?void 0:Z.endCursor);return(0,eo.jsxs)(e1.u_,{isOpen:i,onClose:r,lockFocusAcrossFrames:!1,returnFocusOnClose:!1,size:"2xl",initialFocusRef:p,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{pb:0,children:(0,eo.jsx)(w.cC,{id:"Mxy55o"})}),(0,eo.jsxs)(T.x,{px:6,color:"gray.500",mb:2,children:[(0,eo.jsx)(w.cC,{id:"/eBcp2"}),"."]}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(e6.f,{children:(0,eo.jsxs)(S.K,{spacing:5,children:[(0,eo.jsxs)(k.U,{align:"flex-start",children:[(0,eo.jsxs)(nc.NI,{isInvalid:!!v&&o.length>0,children:[(0,eo.jsxs)(n5.B,{size:"md",children:[(0,eo.jsx)(n3.Z,{pointerEvents:"none",color:"gray.300",children:(0,eo.jsx)(n2.W,{})}),(0,eo.jsx)(nu.I,{value:o,onChange:L,placeholder:G.ag._({id:"iwm5Y3"}),_placeholder:{opacity:1},ref:p}),_&&(0,eo.jsx)(n3.x,{pointerEvents:"none",color:"gray.500",transitionProperty:"common",transitionDuration:"normal",children:(0,eo.jsx)(ey.$,{size:"sm"})})]}),C&&(0,eo.jsx)(na.J1,{children:C})]}),(0,eo.jsx)(A.z,{w:"300px",variant:"plain",onClick:U,isDisabled:0===o.length,isLoading:g,children:(0,eo.jsx)(w.cC,{id:"Oo7YVo"})})]}),(0,eo.jsxs)(eO.NZ,{children:[B&&(0,eo.jsx)(w.cC,{id:"LOzhoI"}),o&&(0,eo.jsx)(w.cC,{id:"mjEyky",values:{0:W.length}})]}),M&&(0,eo.jsx)(rd,{channelName:o,onCreateClick:U}),!x&&(0,eo.jsxs)(S.K,{children:[(0,eo.jsx)(eH.O,{height:"55px"}),(0,eo.jsx)(eH.O,{height:"55px"}),(0,eo.jsx)(eH.O,{height:"55px"}),(0,eo.jsx)(eH.O,{height:"55px"}),(0,eo.jsx)(eH.O,{height:"55px"})]}),x&&t&&!M&&(0,eo.jsx)(rh,{channels:W,workspaceId:t}),H&&(0,eo.jsx)(rr.M,{p:6,children:(0,eo.jsx)(A.z,{isLoading:I,onClick:function(){D(!0),z({variables:rx(rx({},0===o.length?{first:50}:{}),{},{after:null==Z?void 0:Z.endCursor})}).finally(function(){D(!1)})},size:"sm",children:(0,eo.jsx)(w.cC,{id:"yQ2kGp"})})})]})}),(0,eo.jsx)(e7.m,{children:(0,eo.jsx)(A.z,{variant:"solid",onClick:r,children:(0,eo.jsx)(w.cC,{id:"DPfwMq"})})})]})]})},rj=i(97084),rf=i(35617),rm=i(86273),rg=i(55580),rv=i(49294),rb=function(e){var n=e.channel,i=e.workspaceId,r=e.onClose,t=(0,N.HOP)(),s=(0,eQ.Z)(t,1)[0],o=(0,e0.p)(),l=(0,j.useCallback)(function(){if(!i||!(null!=n&&n.id)){console.error('[onDeleteChannelClick] Cannot delete channel. OrgId: "'.concat(i,'" channelId: "').concat(null==n?void 0:n.id,'"'));return}s({variables:{channelId:n.id,workspaceId:i}}).then(function(){o({title:(0,eo.jsx)(w.cC,{id:"j4JrT0"}),status:"success",duration:3e3,position:"top"})})},[n,o,s,i]);return(0,eo.jsxs)(e1.u_,{closeOnOverlayClick:!1,isOpen:!0,onClose:r,size:"lg",children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsxs)(e3.x,{children:["Delete ",n.name,"?"]}),(0,eo.jsx)(e4.o,{}),(0,eo.jsxs)(e6.f,{children:[(0,eo.jsx)(T.x,{mb:2,children:(0,eo.jsx)(w.cC,{id:"IkJ0gO"})}),(0,eo.jsx)(T.x,{mb:2,children:(0,eo.jsx)(w.cC,{id:"r5GL8F",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}})}),(0,eo.jsx)(T.x,{color:"red.500",children:(0,eo.jsx)(w.cC,{id:"2xOCJW"})})]}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",onClick:r,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{variant:"ghost",colorScheme:"red",onClick:function(){l(),r()},children:(0,eo.jsx)(w.cC,{id:"NbFtQm"})})]})})]})]})},rC=function(e){var n=e.channel,i=e.workspaceId,r=e.onClose,t=(0,e0.p)(),s=(0,j.useState)(function(){return null==n?void 0:n.name}),o=s[0],l=s[1],a=(0,N.tWW)(),d=(0,eQ.Z)(a,2),u=d[0],x=d[1].loading,h=(0,j.useState)(null),f=h[0],m=h[1],g=(0,j.useCallback)(function(e){l(e.target.value)},[]),v=(0,j.useRef)(null),b=!!f,C=(0,j.useCallback)(function(){if(!i||!(null!=n&&n.id)){console.error('[onRenameChannel] Cannot rename channel. OrgId: "'.concat(i,'" channelId: "').concat(null==n?void 0:n.id,'"'));return}u({variables:{input:{id:null==n?void 0:n.id,workspaceId:i,name:o}}}).then(function(e){var i,s=e.data;p().replace((0,ib.j)({id:null==n?void 0:n.id,slug:null==s?void 0:s.updateChannel.slug})),t({title:(0,eo.jsx)(w.cC,{id:"QJd4OZ",values:{0:null==s?void 0:null===(i=s.updateChannel)||void 0===i?void 0:i.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),r()}).catch(function(e){m(e.message)})},[i,null==n?void 0:n.id,u,o,t,r]);return(0,eo.jsxs)(e1.u_,{closeOnOverlayClick:!1,isOpen:!0,initialFocusRef:v,onClose:r,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"NZgZhv"})}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(e6.f,{children:(0,eo.jsx)(c.k,{mt:4,w:"100%",direction:"column",children:(0,eo.jsxs)(nc.NI,{isInvalid:b,children:[(0,eo.jsx)(nu.I,{value:o,ref:v,onChange:g,onKeyDown:function(e){"Enter"===e.key&&C()}}),b&&(0,eo.jsx)(na.J1,{children:f})]})})}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",onClick:r,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{isLoading:x,variant:"solid",onClick:C,children:(0,eo.jsx)(w.cC,{id:"2wxgft"})})]})})]})]})},ry=function(e){var n=e.channel,i=e.workspaceId,r=(0,O.q)({id:"deleteChannelModalDisclosure"}),t=r.isOpen,s=r.onOpen,o=r.onClose,l=(0,O.q)({id:"renameChannelModalDisclosure"}),a=l.isOpen,c=l.onOpen,d=l.onClose,u=(0,h.useRouter)().push,x=rl().leaveChannel,p=(0,e0.p)(),j=(0,rv.V)((0,ib.j)({id:null==n?void 0:n.id,slug:null==n?void 0:n.slug},!1)).onCopy;return(0,eo.jsxs)(K.v,{closeOnSelect:!1,isLazy:!0,children:[(0,eo.jsx)(q.j,{as:X.h,variant:"ghost",fontWeight:"600",color:"gray.700",icon:(0,eo.jsx)(F.G,{icon:rg.faEllipsis})}),(0,eo.jsxs)(Q.q,{zIndex:"popover",children:[(0,eo.jsx)(J.s,{icon:(0,eo.jsx)(F.G,{fixedWidth:!0,icon:rm.aJ}),onClick:c,children:(0,eo.jsx)(w.cC,{id:"NZgZhv"})}),(0,eo.jsx)($.R,{}),(0,eo.jsx)(J.s,{onClick:function(){j(),p({title:(0,eo.jsx)(w.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},icon:(0,eo.jsx)(F.G,{fixedWidth:!0,icon:rf.faShareFromSquare}),children:(0,eo.jsx)(w.cC,{id:"alYpud"})}),(0,eo.jsx)(J.s,{icon:(0,eo.jsx)(F.G,{fixedWidth:!0,icon:rj.WQ}),onClick:function(){x({channel:n}).then(function(){u("/")})},children:(0,eo.jsx)(w.cC,{id:"jC8TAY"})}),(0,eo.jsx)($.R,{}),(0,eo.jsx)(J.s,{color:"red.500",onClick:s,icon:(0,eo.jsx)(F.G,{fixedWidth:!0,icon:em.$}),children:(0,eo.jsx)(w.cC,{id:"NbFtQm"})})]}),a&&(0,eo.jsx)(rC,{channel:n,workspaceId:i,onClose:d}),t&&(0,eo.jsx)(rb,{channel:n,workspaceId:i,onClose:o})]})},rw=["tabKey","isSelected","isDropActive","href","target","children"];function rO(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function rk(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?rO(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rO(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var rS=j.forwardRef(function(e,n){var i=e.tabKey,r=e.isSelected,t=e.isDropActive,s=e.href,o=e.target,l=e.children,a=(0,iI.Z)(e,rw);return(0,eo.jsx)(en(),{href:s,passHref:!0,legacyBehavior:!0,children:(0,eo.jsx)(i$,rk(rk({ref:n,isSelected:r,isDropActive:void 0!==t&&t,dataTestId:"sidebar-".concat(i,"-tab").concat(r?"--selected":""),target:o},a),{},{children:l}))})});rS.displayName="SidebarItem";var rI=function(e){var n=e.icon,i=e.title,r=e.faClassName,t=e.w,s=e.badge;return(0,eo.jsxs)(k.U,{justify:"flex-start",w:"100%",pr:s?3:void 0,children:[n&&(0,eo.jsx)(F.G,{icon:n,fixedWidth:!0,className:r||void 0,size:"1x"}),(0,eo.jsx)(T.x,{textOverflow:"ellipsis",overflowX:"hidden",ml:2,w:t,children:i}),s&&(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(V.L,{}),s]})]})},rD=function(e){var n=e.isSelected;return e.hasActivity?i0.V1:n?eL.l7:eL.Ty},rP=function(e){var n=e.activity,i=e.user;if(!(null!=n&&n.activeUsers))return(0,eo.jsx)(eo.Fragment,{});var r=n1()(n.activeUsers,"id"),t=(0,re.Yc)(r,null==i?void 0:i.id);return(0,eo.jsx)(eO.NL,{overflowTooltipLabel:G.ag._({id:"25VyZX"}),position:"absolute",right:2,size:"xs",max:3,avatars:t.map(function(e){var n=e.displayName,i=e.profileImageUrl;return{name:n||"",id:e.id,profileImageUrl:i,color:"white",badge:{color:"green.500",size:"1em"}}}),onClick:function(e){e.preventDefault(),e.stopPropagation()}})},rT=function(e){var n,i,r=e.isPreview,t=e.channel,s=e.activeTab,o=e.currentChannelId,l=e.addDocToChannel,a=e.user,c=(0,eD.ye)("channelActivity"),d=(0,i1.L)(function(){return{accept:rn,drop:function(e){l(e,t)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}}),u=(0,eQ.Z)(d,2),x=u[0],h=x.canDrop,p=x.isOver,j=u[1],f=s===rN.CHANNEL&&t.id===o,m=c&&!!((null==t?void 0:null===(n=t.activity)||void 0===n?void 0:n.activeUsers)&&(null==t?void 0:null===(i=t.activity)||void 0===i?void 0:i.activeUsers.length)>0),g=rD({isSelected:f,hasActivity:m});return(0,eo.jsxs)(rS,{ref:j,"data-testid":"sidebar-item",tabKey:"".concat(rN.CHANNEL,"-").concat(t.id),isDropActive:p&&h,isSelected:f,href:(0,ib.j)({id:t.id,slug:t.slug}),opacity:r?"0.5":void 0,justifyContent:"space-between",w:"100%",children:[(0,eo.jsx)(rI,{icon:g,title:t.name,faClassName:f&&m?"fa-beat-fade":void 0,w:"18ch"}),m&&(0,eo.jsx)(rP,{activity:null==t?void 0:t.activity,user:a})]},t.id)},rA=function(e){var n=e.channelPreview,i=e.channels,r=e.activeTab,t=e.currentChannelId,s=e.isChannelsLoading,o=(0,l.SE)(),a=o.user,c=o.currentWorkspace,d=i9(),u=d.isOpen,x=d.onClose,h=d.doc,p=d.handleAddDocToChannel,j=d.updateWorkspacePermissionThenAddToChannel,f=(0,O.q)({id:"manageChannelsModalDisclosure"}),m=f.isOpen,g=f.onOpen,b=f.onClose;return s?(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(eH.O,{h:"30px",w:"100%"}),(0,eo.jsx)(eH.O,{h:"30px",w:"100%"}),(0,eo.jsx)(eH.O,{h:"30px",w:"100%"})]}):(0,eo.jsxs)(E.xu,{"data-testid":"sidebar-channels",w:"100%",children:[(0,eo.jsxs)(k.U,{justify:"space-between",children:[(0,eo.jsx)(eO.NZ,{textAlign:"left",mt:4,mb:3,paddingInlineStart:1,children:(0,eo.jsx)(w.cC,{id:"HSh8u/"})}),(0,eo.jsx)(eO.kH,{label:(0,eo.jsx)(w.cC,{id:"Mxy55o"}),children:(0,eo.jsx)(X.h,{"aria-label":G.ag._({id:"Mxy55o"}),size:"xs",isRound:!0,variant:"plain",icon:(0,eo.jsx)(F.G,{icon:y.r8}),onClick:g})})]}),n&&(0,eo.jsx)(rT,{isPreview:!0,channel:n,activeTab:r,currentChannelId:t,addDocToChannel:p,user:a},n.id),i.map(function(e){return(0,eo.jsx)(rT,{channel:e,activeTab:r,currentChannelId:t,addDocToChannel:p,user:a},e.id)}),0===i.length&&(0,eo.jsxs)(E.xu,{bgColor:"gray.50",textAlign:"center",p:4,mb:2,children:[(0,eo.jsx)(T.x,{fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"4G3U4C",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}})}),(0,eo.jsx)(T.x,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,eo.jsx)(eA.r,{color:"trueblue.600",href:"#",onClick:g,children:(0,eo.jsx)(w.cC,{id:"Mxy55o"})})})]}),(0,eo.jsx)(rp,{isOpen:m,onClose:b,workspaceId:null==c?void 0:c.id}),u&&(0,eo.jsx)(i7,{doc:h,onSubmit:j,onClose:x})]})},rE=i(8330),r_=function(e){var n=e.setIsSidebarVisible;return(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsxs)(S.K,{pt:2,children:[(0,eo.jsx)(nS,{}),(0,eo.jsx)(E.xu,{display:{sm:"lg",md:"none"},children:(0,eo.jsx)(X.h,{"aria-label":"Close Sidebar",size:"sm",variant:"ghost",icon:(0,eo.jsx)(F.G,{icon:rE.NB}),onClick:function(){return n(!1)}})}),(0,eo.jsx)(eH.O,{w:"100%",height:"36px"})]}),(0,eo.jsx)(eH.O,{w:"100%",height:"30px",mt:4}),(0,eo.jsx)(eH.O,{w:"100%",height:"20px",mt:8}),(0,eo.jsx)(eH.O,{w:"100%",height:"30px",mt:4}),(0,eo.jsx)(eH.O,{w:"100%",height:"30px",mt:2}),(0,eo.jsx)(eH.O,{w:"100%",height:"30px",mt:2}),(0,eo.jsx)(V.L,{}),(0,eo.jsx)(c.k,{justify:"center",align:"flex-end",children:(0,eo.jsx)(E.xu,{w:"30px",children:ek.TR})})]})};function rF(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}var rN={SHARED_WITH_ME:"shared-with-me",ALL:"all",CHANNEL:"channel",TRASH:"trash",TEMPLATES:"templates",INSPIRATION:"inspiration",THEMES:"themes",FONTS:"fonts",SITES:"sites"},rz=function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?rF(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rF(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}({},rN),rL=(r={},(0,ea.Z)(r,rN.SHARED_WITH_ME,{displayName:(0,eo.jsx)(w.cC,{id:"lIbchQ"}),ariaLabel:G.ag._({id:"rt/fuz"}),icon:ev.XC,showCreateButton:!1}),(0,ea.Z)(r,rN.ALL,{displayName:(0,eo.jsx)(w.cC,{id:"W10xDz",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}}),ariaLabel:G.ag._({id:"W10xDz",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}}),icon:W.s2,showCreateButton:!0}),(0,ea.Z)(r,rN.SITES,{displayName:(0,eo.jsx)(w.cC,{id:"QHZRmq"}),ariaLabel:G.ag._({id:"QHZRmq"}),icon:eg.g4,showCreateButton:!0}),(0,ea.Z)(r,rN.CHANNEL,{displayName:(0,eo.jsx)(w.cC,{id:"HSh8u/"}),ariaLabel:G.ag._({id:"HSh8u/"}),icon:eL.Ty,showCreateButton:!0}),(0,ea.Z)(r,rN.TRASH,{displayName:(0,eo.jsx)(w.cC,{id:"GQ3O42"}),ariaLabel:G.ag._({id:"GQ3O42"}),icon:em.$,showCreateButton:!1}),(0,ea.Z)(r,rN.TEMPLATES,{displayName:(0,eo.jsx)(w.cC,{id:"iTylMl"}),ariaLabel:G.ag._({id:"iTylMl"}),icon:ef.BD,showCreateButton:!1}),(0,ea.Z)(r,rN.INSPIRATION,{displayName:(0,eo.jsx)(w.cC,{id:"K2fjhl"}),ariaLabel:G.ag._({id:"K2fjhl"}),icon:ej.cn,showCreateButton:!1}),(0,ea.Z)(r,rN.THEMES,{displayName:(0,eo.jsx)(w.cC,{id:"fJ3EbT"}),ariaLabel:G.ag._({id:"fJ3EbT"}),icon:ep.q2,showCreateButton:!1,description:(0,eo.jsx)(w.cC,{id:"1kjnn4",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq},components:{0:(0,eo.jsx)("b",{}),1:(0,eo.jsx)("b",{})}})}),(0,ea.Z)(r,rN.FONTS,{displayName:(0,eo.jsx)(w.cC,{id:"E3KfxC"}),ariaLabel:G.ag._({id:"E3KfxC"}),icon:eh.gu,showCreateButton:!1,description:(0,eo.jsx)(w.cC,{id:"sWZ6Li",components:{0:(0,eo.jsx)("b",{})}})}),r),rR=function(e){var n=e.channelPreview,i=e.isSidebarVisible,r=e.setIsSidebarVisible,t=e.isReady,s=e.activeTab,o=e.currentChannelId,a=e.channels,d=e.isChannelsLoading,u=(0,eD.ye)("intercom"),x=(0,eN.fg)(),h=(0,eE.zc)().product,p=(0,ez.CG)(eI.Lj),j=(0,eT.G)(),f=(0,l.d3)(),m=(0,O.q)({id:"workspace-settings-modal"}),g=m.isOpen,v=m.onOpen,C=m.onClose,y=(0,O.q)({id:"ai-credits-modal"}),k=y.isOpen,I=y.onOpen,D=y.onClose;return iq({openModal:v}),(0,eo.jsxs)(c.k,{direction:"column",zIndex:"overlay",h:"100vh",position:{base:"fixed",md:"sticky"},top:0,w:"300px",minW:"300px",bg:"white",shadow:{base:i?"xl":"none",md:"none"},transform:i?{base:"translate(0,0px)",md:"translate(0,0)"}:{base:"translate(-100%,0px)",md:"translate(0,0)"},transition:"transform .2s ease",children:[(0,eo.jsx)(c.k,{overflowY:"auto",h:"100vh",p:6,py:2,direction:"column",alignContent:"space-between",children:t?(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsxs)(S.K,{children:[(0,eo.jsx)(c.k,{alignItems:"flex-start",justify:"flex-end",children:(0,eo.jsx)(E.xu,{display:{base:"block",md:"none"},children:(0,eo.jsx)(X.h,{size:"sm","aria-label":G.ag._({id:"62Ciis"}),variant:"ghost",icon:(0,eo.jsx)(eb.T,{w:3}),onClick:function(){return r(!1)},isRound:!0})})}),(0,eo.jsx)(nD,{onOpen:v}),(0,eo.jsx)(b.Pu,{})]}),(0,eo.jsx)(rU,{channelPreview:n,activeTab:s,currentChannelId:o,channels:a,isChannelsLoading:d}),(0,eo.jsx)(E.xu,{w:"100%",pt:1,pb:3,children:(0,eo.jsx)(eC.i,{})}),f&&(0,eo.jsx)(i$,{dataTestId:"invite-to-workspace",onClick:function(){v()},children:(0,eo.jsx)(rI,{icon:ex.FK,title:(0,eo.jsx)(w.cC,{id:"qVqqmP"})})}),!1===x&&(0,eo.jsx)(i$,{dataTestId:"ai-user-credits",onClick:I,children:(0,eo.jsx)(rI,{icon:eu.ow,title:null===p?(0,eo.jsx)(ey.$,{size:"xs"}):(0,eo.jsx)(w.cC,{id:"IniQ/K",values:{availableCredits:p}})})}),u&&(0,eo.jsx)(eO.kH,{label:(0,eo.jsx)(w.cC,{id:"+K37Nw"}),children:(0,eo.jsx)(i$,{dataTestId:"contact-button",onClick:j,children:(0,eo.jsx)(rI,{icon:ed.RR,title:(0,eo.jsx)(w.cC,{id:"Bhgd0l"})})})}),!u&&(0,eo.jsx)(i$,{dataTestId:"contact-button",href:"mailto:".concat(eP.p),children:(0,eo.jsx)(rI,{icon:ec.FU,title:(0,eo.jsx)(w.cC,{id:"A0C9La"})})}),(0,eo.jsx)(V.L,{}),null===h?(0,eo.jsx)(eF,{}):(0,eo.jsx)(c.k,{justify:"center",align:"flex-end",width:"100%",my:6,children:(0,eo.jsx)(E.xu,{fontSize:"12px",width:"30px",children:ek.TR})})]}):(0,eo.jsx)(r_,{setIsSidebarVisible:r})}),(0,eo.jsx)(iZ,{isOpen:g,onClose:C}),(0,eo.jsx)(eS.H,{isOpen:k,onClose:D,credits:p,onOpen:I})]})},rU=function(e){var n=e.channelPreview,i=e.activeTab,r=e.currentChannelId,t=e.channels,s=e.isChannelsLoading,o=(0,eD.ye)("customFonts"),l=(0,eN._O)();return(0,eo.jsxs)(ew.g,{"data-testid":"sidebar-tablist",mt:4,mb:2,w:"100%",spacing:1,children:[(0,eo.jsxs)(S.K,{spacing:0,w:"100%",children:[(0,eo.jsx)(rS,{tabKey:rN.ALL,isSelected:i===rN.ALL,href:"/#".concat(rN.ALL),children:(0,eo.jsx)(rI,{icon:rL[rN.ALL].icon,title:rL[rN.ALL].displayName})}),l&&!(0,iX.s2)()&&(0,eo.jsx)(rS,{pr:-1,tabKey:rN.SITES,isSelected:i===rN.SITES,href:"/#".concat(rN.SITES),children:(0,eo.jsx)(rI,{icon:rL[rN.SITES].icon,title:rL[rN.SITES].displayName,badge:(0,eo.jsx)(I.C,{mr:6,colorScheme:"green",lineHeight:"normal",fontSize:"xxs",children:(0,eo.jsx)(w.cC,{id:"YBt9YP"})})})})]}),(0,eo.jsx)(rA,{channelPreview:n,isChannelsLoading:s,channels:t,currentChannelId:r,activeTab:i}),(0,eo.jsx)(E.xu,{w:"100%",pt:1,pb:2,children:(0,eo.jsx)(eC.i,{})}),!(0,iX.s2)()&&(0,eo.jsx)(rS,{tabKey:rN.TEMPLATES,isSelected:i===rN.TEMPLATES,href:"/#".concat(rN.TEMPLATES),children:(0,eo.jsx)(rI,{icon:rL[rN.TEMPLATES].icon,title:rL[rN.TEMPLATES].displayName})}),(0,eo.jsx)(rS,{tabKey:rN.INSPIRATION,isSelected:i===rN.INSPIRATION,href:"/#".concat(rN.INSPIRATION),children:(0,eo.jsx)(rI,{icon:rL[rN.INSPIRATION].icon,title:rL[rN.INSPIRATION].displayName})}),!(0,iX.s2)()&&(0,eo.jsx)(rS,{tabKey:rN.THEMES,isSelected:i===rN.THEMES,href:"/#".concat(rN.THEMES),children:(0,eo.jsx)(rI,{icon:rL[rN.THEMES].icon,title:rL[rN.THEMES].displayName})}),o&&!(0,iX.s2)()&&(0,eo.jsx)(rS,{tabKey:rN.FONTS,isSelected:i===rN.FONTS,href:"/#".concat(rN.FONTS),children:(0,eo.jsx)(rI,{icon:rL[rN.FONTS].icon,title:rL[rN.FONTS].displayName})}),(0,eo.jsx)(rS,{tabKey:rN.TRASH,isSelected:i===rN.TRASH,href:"/#".concat(rN.TRASH),children:(0,eo.jsx)(rI,{icon:rL[rN.TRASH].icon,title:rL[rN.TRASH].displayName})})]})},rM=i(56648),rW=function(e){var n=e.setIsSidebarVisible,i=e.isSidebarVisible,r=e.children,t=(0,l.SE)().currentWorkspace;return(0,eo.jsxs)(E.xu,{w:"100%",mb:6,maxW:"100%",children:[(0,eo.jsxs)(E.xu,{w:"100%",display:{sm:"block",md:"none"},mb:4,children:[(0,eo.jsxs)(c.k,{align:"center",w:"100%",mb:2,justify:"space-between",children:[(0,eo.jsx)(X.h,{"aria-label":"Open Sidebar",variant:"ghost",icon:(0,eo.jsx)(F.G,{icon:rM.xi}),size:"sm",mr:2,ml:-2,onClick:function(){return n(!i)},isRound:!0}),(0,eo.jsxs)(c.k,{flex:"1",w:"100%",justify:"space-between",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:[(0,eo.jsx)(T.x,{fontSize:"lg",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",children:null==t?void 0:t.name}),(0,eo.jsx)(V.L,{}),(0,eo.jsx)(ek.DY,{})]})]}),(0,eo.jsx)(eC.i,{})]}),r]})},rG=function(e){var n=e.isSidebarVisible,i=e.setIsSidebarVisible,r=(0,z._O)(),t=(0,l.SE)().currentWorkspace,s=(0,O.q)({id:"create-site-modal"}),o=s.isOpen,a=s.onOpen,d=s.onClose,u=(0,N.bBo)({variables:{workspaceId:null==t?void 0:t.id},skip:!(null!=t&&t.id)}),x=u.data,h=u.loading,p=u.error,j=rL[rz.SITES],f=j.displayName,m=j.ariaLabel,g=j.icon,v=null==x?void 0:x.sites;return!v||0!==v.length||h||p?(0,eo.jsxs)(E.xu,{w:"100%","data-testid":"sites-view-container",children:[(0,eo.jsx)(rW,{isSidebarVisible:n,setIsSidebarVisible:i,children:(0,eo.jsxs)(S.K,{spacing:4,w:"fit-content",children:[(0,eo.jsxs)(D.X,{fontSize:"lg",fontWeight:"600","data-testid":"sites-view-header",children:[g&&(0,eo.jsx)(F.G,{icon:g,"aria-label":m})," ",(0,eo.jsx)(T.x,{as:"span",ml:2,children:f})]}),(0,eo.jsx)(A.z,{w:"auto","data-testid":"create-site-button",isDisabled:!r,variant:"solid",onClick:a,leftIcon:(0,eo.jsx)(F.G,{icon:y.r8}),children:(0,eo.jsx)(w.cC,{id:"h3eRam"})})]})}),(0,eo.jsx)(S.K,{children:(0,eo.jsx)(_.r,{templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)","2xl":"repeat(5, 1fr)"},gap:6,children:!h&&!p&&(null==v?void 0:v.map(function(e){return(0,eo.jsx)(el,{site:e},e.id)}))})}),(0,eo.jsx)(L.M,{isOpen:o,onClose:d})]}):(0,eo.jsxs)(k.U,{spacing:4,flex:1,h:"100%",maxW:"3xl",margin:"auto",children:[(0,eo.jsxs)(S.K,{align:"flex-start",justify:"center",spacing:6,flex:1,children:[(0,eo.jsx)(k.U,{children:(0,eo.jsx)(I.C,{colorScheme:"green",children:"Beta"})}),(0,eo.jsx)(D.X,{fontFamily:"p22-mackinac-pro",fontWeight:"700",children:(0,eo.jsx)(w.cC,{id:"2xMidw"})}),(0,eo.jsx)(c.k,{flex:1,display:{base:"flex",lg:"none"},children:(0,eo.jsx)(P.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg"})}),(0,eo.jsx)(T.x,{fontSize:"lg",children:(0,eo.jsx)(w.cC,{id:"Vg3hxF"})}),(0,eo.jsx)(k.U,{children:(0,eo.jsx)(A.z,{onClick:a,children:(0,eo.jsx)(w.cC,{id:"LgunCU"})})})]}),(0,eo.jsx)(c.k,{flex:1,display:{base:"none",lg:"flex"},children:(0,eo.jsx)(P.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg"})}),(0,eo.jsx)(L.M,{isOpen:o,onClose:d})]})},rB=i(46402),rZ=i(63840),rH=j.memo(function(e){var n=e.user,i=e.currentWorkspace,r=e.currentChannelId,t=e.viewPreference,s=(0,eD.ye)("screenshotsEnabled"),o=(0,j.useRef)(null),l=(0,j.useRef)(null),a=(0,j.useState)(null),d=a[0],u=a[1],x=(0,rB.N)().getMonitor();(0,j.useEffect)(function(){return x.subscribeToOffsetChange(function(){if(x.getItem()&&o.current&&l.current){var e=x.getClientOffset();if(e){var n=e.x,i=e.y;o.current.style.transform="translate(".concat(n,"px, ").concat(i,"px)")}}})},[x]),(0,j.useEffect)(function(){return x.subscribeToStateChange(function(){var e,n=x.getItemType(),i=x.getItem();if(n!==rn||null===i){u(null),o.current.style.transform="translate(0px, 0px)";return}var r=document.querySelector((e=i.id,'[data-doc-grid-item-id="'.concat(e,'"]')));if(r){var t=r.getBoundingClientRect();l.current.style.width="".concat(t.width,"px"),l.current.style.height="".concat(t.height,"px")}u(i)})},[x]);var h=(0,j.useMemo)(function(){if(!d)return null;var e,o,l,a,u,x=(0,i4.nZ)({doc:d,user:n,currentWorkspace:i,channelToExclude:r}),h={src:s?null===(e=d.titleCard)||void 0===e?void 0:e.previewUrl:er.Z.src,fallbackSrc:er.Z.src};return"list"===t?(0,eo.jsx)(ii.i,{width:"100%",children:(0,eo.jsxs)(it.Tr,{children:[(0,eo.jsx)(il.Td,{}),(0,eo.jsx)(il.Td,{w:"50%",children:d.title||""}),(0,eo.jsx)(il.Td,{children:(0,eo.jsx)(eO.MY,{tags:x,NextLink:en()})}),(0,eo.jsx)(il.Td,{color:"gray.600"}),(0,eo.jsx)(il.Td,{children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(eV.q,{shadow:"md",borderWidth:"1px",size:"xs",src:null==d?void 0:null===(a=d.createdBy)||void 0===a?void 0:a.profileImageUrl}),(0,eo.jsx)(T.x,{children:null==d?void 0:null===(u=d.createdBy)||void 0===u?void 0:u.displayName})]})})]})}):(0,eo.jsx)(rZ.F7,{id:"temp",title:d.title||"",thumbnailImageUrl:h,NextLink:c.k,createdTime:d.createdTime,href:"",editors:d.editors,tags:x,createdByName:(null===(o=d.createdBy)||void 0===o?void 0:o.displayName)||"",createdByProfileImageUrl:null===(l=d.createdBy)||void 0===l?void 0:l.profileImageUrl,createdByEmail:"",menuEnabled:!1})},[d,n,i,s,r,t]);return(0,eo.jsx)(Y.h,{children:(0,eo.jsx)(c.k,{ref:o,display:d?"block":"none",position:"fixed",pointerEvents:"none",zIndex:"overlay",left:0,top:0,children:(0,eo.jsx)(c.k,{ref:l,transform:"scale(".concat(d?.5:1,")"),transition:"transform .2s ease",transformOrigin:"0 0",children:h})})})});rH.displayName="DocGridItemCustomDragLayer";var rV=i(92843),rK=i(84153),rq=(0,j.memo)(function(e){var n=e.user,i=e.currentWorkspace,r=e.doc,t=e.currentChannelId,s=e.sortBy,o=e.filterBy,l=e.canDuplicate,a=e.canEditDoc,c=e.canManageDoc,d=e.createdByYou,u=e.cardThumbnails,x=e.fetchThumbnails,h=e.handleDuplicateDoc,p=e.handleFavoriteDoc,f=e.handleTrash,m=e.handlePermanentDelete,g=e.handleRestoreDoc,v=e.handleShareClick,b=e.handleRenameClick,C=e.handleRemoveFromChannel,y=r.id,w=r.title,O=r.createdTime,k=r.archived,S=r.titleCard,I=r.docUser,D=r.createdBy,P=sa({sortBy:s,docUser:I,filterBy:o,doc:r}),T=(0,eD.ye)("screenshotsEnabled"),A=(0,i4.nZ)({doc:r,user:n,currentWorkspace:i,channelToExclude:t}),E={src:T?null==S?void 0:S.previewUrl:er.Z.src,fallbackSrc:er.Z.src},_=!!t,F=(0,rV.c)({type:rn,item:function(){return r},options:{dropEffect:"copy",doc:r},collect:function(e){return{isDragging:e.isDragging()}}},[c,r]),N=(0,eQ.Z)(F,3),z=(N[0],N[1]),L=N[2];(0,j.useEffect)(function(){L((0,rK.r)())},[L]);var R=(0,j.useCallback)(function(){T&&x(r.id)},[r.id,x,T]);return(0,eo.jsx)(rZ.F7,{ref:z,id:y,title:w||"",thumbnailImageUrl:E,NextLink:en(),href:(0,ib.Gn)({docId:y}),createdByYou:d,createdTime:O,timestampDescription:P,createdByName:(null==D?void 0:D.displayName)||"",createdByProfileImageUrl:null==D?void 0:D.profileImageUrl,createdByEmail:(null==D?void 0:D.email)||"",isDuplicateEnabled:l,isShareEnabled:a,isRenameEnabled:a,isTrashAndRestoreEnabled:c,isTrashed:k,isFavorited:!!(null!=I&&I.favorited),isRemoveFromChannelEnabled:_,onDuplicate:function(){return h(r)},onFavorite:p(new Date,r),onUnfavorite:p(null,r),onTrash:function(){return f(r.id)},onPermanentDelete:m?function(){return m(r)}:void 0,onRestore:function(){return g(r.id)},onShareClick:function(){return v(r.id)},onRename:function(){return b(r)},onRemoveFromChannel:function(){return C(r,t)},tags:A,menuEnabled:!0,cardThumbnails:T?u:[],onMouseEnter:R},y)});rq.displayName="DocGridItemWrapper";var rX=i(78762),rY=i(56581),rQ=function(e){var n,i=e.sortBy,r=e.sortDirection,t=e.setSortBy,s=e.setSortDirection,o=e.size,l=void 0===o?"sm":o,a=e.dateDisplayOption,c=e.setDateDisplayOption,d=e.options,u=e.showSortOrderToggle;return(0,eo.jsxs)(e9.h,{variant:"ghost",colorScheme:"blackAlpha",size:l,ml:-3,children:[(0,eo.jsxs)(K.v,{closeOnSelect:!1,children:[(0,eo.jsx)(q.j,{as:A.z,variant:"ghost",size:l,rightIcon:(0,eo.jsx)(F.G,{icon:iN.pt,"aria-label":"Open menu"}),fontWeight:"600",color:"gray.500",children:(null===(n=d.find(function(e){return e.key===a}))||void 0===n?void 0:n.label)||"Date"}),(0,eo.jsx)(Y.h,{children:(0,eo.jsx)(Q.q,{minWidth:"240px",children:(0,eo.jsx)(eK._,{fontSize:"sm",defaultValue:"alpha",title:G.ag._({id:"IEY4J0"}),type:"radio",children:d.map(function(e){var n=a===e.key;return(0,eo.jsx)(J.s,{icon:n?(0,eo.jsx)(rY.n,{}):(0,eo.jsx)(E.xu,{w:3}),value:e.key,onClick:function(){c(e.key),t(e.key),s(N.SrV.Desc)},children:e.label},e.key)})})})})]}),u&&(0,eo.jsx)(eO.kH,{label:(0,eo.jsx)(w.cC,{id:"TZml21"}),children:(0,eo.jsx)(X.h,{color:"title"!==i?"gray.700":"gray.300","aria-label":"sort",onClick:function(){i!==N.IX5.Title?s(r===N.SrV.Asc?N.SrV.Desc:N.SrV.Asc):s(N.SrV.Desc),t(a)},icon:(0,eo.jsx)(F.G,{icon:rX.RX})})})]})},rJ=[{key:N.IX5.EditedTime,label:(0,eo.jsx)(w.cC,{id:"acZeX2"})},{key:N.IX5.CreatedTime,label:(0,eo.jsx)(w.cC,{id:"u46WEi"})}],r$=[{key:N.IX5.LastViewed,label:(0,eo.jsx)(w.cC,{id:"UOgIR2"})},{key:N.IX5.LastEdited,label:(0,eo.jsx)(w.cC,{id:"acZeX2"})},{key:N.IX5.Favorited,label:(0,eo.jsx)(w.cC,{id:"2TANrw"})}],r0=rz.ALL,r1=N.IX5.EditedTime,r2=[N.IX5.LastViewed,N.IX5.LastEdited,N.IX5.Favorited],r5=function(e){return"recent"===e||"favorites"===e},r3=function(e){return{all:{ready:!0,filter:{}},recent:{ready:!0,filter:{sortBy:{field:N.IX5.LastViewed,direction:N.SrV.Desc}}},private:{ready:!0,filter:{isPrivate:!0}},createdByYou:{ready:!!e,filter:{createdBy:null==e?void 0:e.id}},favorites:{ready:!0,filter:{sortBy:{field:N.IX5.Favorited,direction:N.SrV.Desc}}}}},r4=i(67453),r6=i(85982),r8=i(73871),r7=function(e){var n,i,r=e.doc,t=e.dateDisplayOption,s=null==r?void 0:r.updatedTime;t===N.IX5.LastViewed&&(s=null==r?void 0:null===(n=r.docUser)||void 0===n?void 0:n.lastViewed),t===N.IX5.Favorited&&(s=null==r?void 0:null===(i=r.docUser)||void 0===i?void 0:i.favorited),t===N.IX5.CreatedTime&&(s=null==r?void 0:r.createdTime);try{return"".concat((0,r8.Z)(new Date,(0,nG.Z)(s))," ago")}catch(e){return"--"}},r9=function(e){var n,i,r,t=e.doc,s=e.handleShareClick,o=e.dateDisplayOption,l=e.tags,a=e.handleFavoriteDoc,c=e.user,d=e.menu,u=e.canManageDoc,x=(0,ib.Gn)({docId:t.id}),h=r7({doc:t,dateDisplayOption:o}),p=(0,rV.c)({type:rn,item:function(){return t},options:{dropEffect:"copy",doc:t},collect:function(e){return{isDragging:e.isDragging()}}},[u,t]),f=(0,eQ.Z)(p,3),m=(f[0],f[1]),g=f[2];return(0,j.useEffect)(function(){g((0,rK.r)())},[g]),(0,eo.jsxs)(it.Tr,{ref:m,_hover:{bg:"blackAlpha.50"},role:"group","data-doc-list-item-id":t.id,children:[(0,eo.jsx)(il.Td,{children:a&&(0,eo.jsx)(rZ._6,{isFavorited:!!(null==t?void 0:null===(n=t.docUser)||void 0===n?void 0:n.favorited),onFavorite:a(new Date,t),onUnfavorite:a(null,t)})}),(0,eo.jsx)(il.Td,{minW:"280px",children:(0,eo.jsx)(en(),{href:x,passHref:!0,legacyBehavior:!0,children:(0,eo.jsx)(eA.r,{_hover:{color:"var(--chakra-colors-trueblue-500) !important"},children:t.title||""})})}),(0,eo.jsx)(il.Td,{zIndex:2,_groupHover:{opacity:1},children:(0,eo.jsxs)(r6.E,{_groupHover:{opacity:1},children:[(0,eo.jsx)(eO.MY,{tags:l,NextLink:en(),overflowButtonLabel:G.ag._({id:"K0UBDD"})}),(0,i4.uG)(t,c)?(0,eo.jsxs)(A.z,{size:"xs",variant:"ghost",colorScheme:"blackAlpha",fontWeight:"500",_hover:{color:"gray.800",bg:"blackAlpha.50"},opacity:0,_groupHover:{opacity:1},transitionProperty:"none",onClick:function(){return s(t.id)},children:[(0,eo.jsx)(w.cC,{id:"Z8lGw6"}),"…"]}):null]})}),(0,eo.jsx)(il.Td,{color:"gray.600",pr:-2,children:(0,eo.jsx)(T.x,{children:h})}),(0,eo.jsx)(il.Td,{alignContent:"center",pr:-2,children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(eV.q,{shadow:"md",borderWidth:"1px",size:"xs",src:null==t?void 0:null===(i=t.createdBy)||void 0===i?void 0:i.profileImageUrl}),(0,eo.jsx)(T.x,{children:null==t?void 0:null===(r=t.createdBy)||void 0===r?void 0:r.displayName})]})}),(0,eo.jsx)(il.Td,{isNumeric:!0,children:!!d&&d})]},t.id)},te=function(e,n){var i=r5(e),r=!i||"recent"===e&&n===N.IX5.LastViewed||"favorites"===e&&n===N.IX5.Favorited;return{displayOptions:i?r$:rJ,showSortOrderToggle:r,enableTitleSort:!i}},tn=function(e){var n=e.user,i=e.currentWorkspace,r=e.userHasNoWorkspaces,t=e.docs,s=e.currentChannelId,o=e.dateDisplayOption,a=e.sortBy,c=e.sortDirection,d=e.setDateDisplayOption,u=e.setSortBy,x=e.setSortDirection,h=e.filterBy,p=e.handleDuplicateDoc,j=e.handleFavoriteDoc,f=e.handleTrash,m=e.handlePermanentDelete,g=e.handleRestoreDoc,v=e.handleShareClick,b=e.handleRenameClick,C=e.handleRemoveFromChannel,y=(0,l.we)(),O=te(h,o),k=O.displayOptions,S=O.showSortOrderToggle,I=O.enableTitleSort;return(0,eo.jsx)(ik.x,{pt:4,maxW:"100%",children:(0,eo.jsxs)(ii.i,{colorScheme:"blackAlpha",size:"sm",whiteSpace:"normal",variant:"simple",children:[(0,eo.jsx)(ir.h,{children:(0,eo.jsxs)(it.Tr,{color:"gray.800",children:[(0,eo.jsx)(is.Th,{w:4}),(0,eo.jsxs)(is.Th,{justifyContent:"space-between",minW:"280px",children:[I&&(0,eo.jsx)(A.z,{ml:-3,size:"sm",color:"gray.500",variant:"ghost",colorScheme:"blackAlpha","aria-label":"sort",onClick:function(){u(N.IX5.Title),x(c===N.SrV.Asc?N.SrV.Desc:N.SrV.Asc)},rightIcon:(0,eo.jsx)(E.xu,{color:a===N.IX5.Title?"gray.700":"gray.300",children:(0,eo.jsx)(F.G,{icon:a===N.IX5.Title?c===N.SrV.Asc?iO.eW:iw.l1:iy.Cm})}),children:(0,eo.jsx)(w.cC,{id:"MHrjPM"})}),!I&&"Title"]}),(0,eo.jsx)(is.Th,{children:(0,eo.jsx)(w.cC,{id:"HSh8u/"})}),(0,eo.jsx)(is.Th,{w:32,pr:-2,children:(0,eo.jsx)(rQ,{size:"sm",sortBy:a,sortDirection:c,setSortBy:u,setSortDirection:x,options:k,showSortOrderToggle:S,exclude:[N.IX5.Title],dateDisplayOption:o,setDateDisplayOption:d})}),(0,eo.jsx)(is.Th,{w:32,children:(0,eo.jsx)(w.cC,{id:"UE2beD"})}),(0,eo.jsx)(is.Th,{})]})}),(0,eo.jsx)(io.p,{children:null==t?void 0:t.map(function(e){var t,l,a,c=y.can("view",e)&&!r,d=y.can("manage",e)&&!r,u=y.can("edit",e)&&!r,x=(0,i4.nZ)({doc:e,user:n,currentWorkspace:i,channelToExclude:s}),h=!!s;return(0,eo.jsx)(r9,{canManageDoc:d,user:n,tags:x,doc:e,dateDisplayOption:o,handleFavoriteDoc:j,handleShareClick:v,menu:(0,eo.jsx)(rZ.Ot,{href:(0,ib.Gn)({docId:e.id}),title:(0,r4.$)(e.title),createdByName:(null==e?void 0:null===(t=e.createdBy)||void 0===t?void 0:t.displayName)||"",createdByEmail:(null==e?void 0:null===(l=e.createdBy)||void 0===l?void 0:l.email)||"",createdTime:e.createdTime,isDuplicateEnabled:c,isTrashAndRestoreEnabled:d,isRenameEnabled:u,isRemoveFromChannelEnabled:h,isShareEnabled:u,isTrashed:!!(null==e?void 0:e.archived),isFavorited:null===(a=e.docUser)||void 0===a?void 0:a.favorited,onDuplicate:function(){return p(e)},onFavorite:j(new Date,e),onUnfavorite:j(null,e),onTrash:function(){return f(e.id)},onPermanentDelete:m?function(){return m(e)}:void 0,onRestore:function(){return g(e.id)},onShareClick:function(){return v(e.id)},onRename:function(){return b(e)},onRemoveFromChannel:function(){return C(e,s)}})},e.id)})})]})})},ti=i(92931);function tr(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function tt(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?tr(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tr(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var ts=function(e){var n=e.refetchQueries,i=(0,l.SE)().user,r=(0,e0.p)(),t=(0,N.LT4)({refetchQueries:n}),s=(0,eQ.Z)(t,1)[0],o=(0,N.y2l)({refetchQueries:n}),a=(0,eQ.Z)(o,2),c=a[0],d=a[1].loading,u=(0,N.iX9)({refetchQueries:n}),x=(0,eQ.Z)(u,1)[0],h=(0,N.$4k)({refetchQueries:n}),p=(0,eQ.Z)(h,1)[0],f=(0,j.useCallback)(function(e,n){return function(){if(i&&n){var r={input:{docId:n.id,userId:null==i?void 0:i.id,favorited:e}};p({variables:r,update:function(e,i){var r=i.data;e.writeFragment({id:"Doc:".concat(n.id),fragment:N.VRt,data:{docUser:null==r?void 0:r.updateDocUser}})},optimisticResponse:{updateDocUser:tt(tt({},n.docUser),{},{favorited:r.input.favorited,__typename:"DocUser"})}})}}},[p,i]),m=(0,j.useCallback)(function(e){var n={id:e};x({variables:n,optimisticResponse:{unarchiveDoc:tt(tt({},n),{},{archived:!1,__typename:"Doc"})}}).then(function(){r({title:(0,eo.jsx)(w.cC,{id:"nRyNMz"}),status:"success",duration:1e4,position:"top"})})},[x,r]),g=(0,j.useCallback)(function(e){var n={id:e};s({variables:n,optimisticResponse:{archiveDoc:tt(tt({},n),{},{archived:!0,__typename:"Doc"})}}).then(function(){r({title:(0,eo.jsxs)(T.x,{children:[(0,eo.jsx)(w.cC,{id:"i3Wq9L",values:{GAMMA_ARTIFACT_PROPER_NOUN:v.Yc}})," ",(0,eo.jsx)(eA.r,{textDecoration:"underline",onClick:function(){return m(e)},children:(0,eo.jsx)(w.cC,{id:"9uI/rE"})})]}),status:"success",duration:3e3,position:"top",isClosable:!0})})},[s,m,r]);return{favoriteDoc:f,restoreDoc:m,trashDoc:g,permanentlyDeleteDoc:(0,j.useCallback)(function(e){return c({variables:{id:e},update:function(n){n.evict({id:n.identify({__typename:"Doc",id:e})}),n.gc()},optimisticResponse:{deleteDoc:e}}).then(function(){r({title:(0,eo.jsx)(w.cC,{id:"sOg7tZ",values:{GAMMA_ARTIFACT_PROPER_NOUN:v.Yc}}),position:"top",status:"success",duration:3e3})}).catch(function(){r({title:(0,eo.jsx)(w.cC,{id:"SlfejT"}),description:(0,eo.jsx)(w.cC,{id:"fWsBTs"}),status:"error",duration:3e3,position:"top",isClosable:!0})})},[c,r]),isPermanentlyDeletingDoc:d}},to=function(e){var n=e.onClose,i=e.doc,r=ts({refetchQueries:["GetDocs","GetChannelDocActivity"]}),t=r.permanentlyDeleteDoc,s=r.isPermanentlyDeletingDoc,o=(0,j.useCallback)(function(){t&&t(i.id).then(n)},[i.id,n,t]);return(0,eo.jsxs)(e1.u_,{onClose:n,isOpen:!0,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"u85NBF"})}),(0,eo.jsx)(e4.o,{isDisabled:s}),(0,eo.jsx)(e6.f,{children:(0,eo.jsxs)(S.K,{spacing:4,children:[(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"dLUUOA",values:{0:i.title}})}),(0,eo.jsx)(T.x,{color:"red.500",children:(0,eo.jsx)(w.cC,{id:"2xOCJW"})})]})}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",onClick:n,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{variant:"ghost",colorScheme:"red",onClick:o,isLoading:s,children:(0,eo.jsx)(w.cC,{id:"0Lbaux"})})]})})]})]})},tl=i(35330),ta=i(87063),tc=i(64368);function td(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function tu(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?td(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):td(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var tx=function(e){var n,i,r=e.activeTab,t=e.currentChannelId,s=e.channelPreview,o=e.filterBy,l=e.sortBy,a=e.sortDirection,c=e.user,d=e.currentWorkspace,u=(0,eD.ye)("channelActivity"),x={filter:{},ready:!0};t?x={filter:tu({channelId:t},r3(c)[o].filter),ready:!0}:r===rz.ALL?x=r3(c)[o]:r===rz.TRASH&&(x={filter:{archived:!0,includePages:!0},ready:!0});var h=tu(tu({workspaceId:null==d?void 0:d.id,first:50,archived:!1},x.filter),{sortBy:{field:r===rz.TRASH?r2.includes(l)?N.IX5.EditedTime:l:"recent"===o?N.IX5.LastViewed:"favorites"===o?N.IX5.Favorited:l,direction:a}}),p=!!(null==s?void 0:s.id),f=t||(null==s?void 0:s.id),m=(0,N.HHH)({variables:h,skip:!c||!x.ready||p,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0}),g=m.data,v=m.networkStatus,b=m.fetchMore,C=(0,N.sCo)({variables:{first:50,channelId:null==s?void 0:s.id},skip:!p}).data,y=!u||!f,w=(0,N.nJh)({variables:{first:50,channelId:f},skip:y,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),O=w.data,k=w.subscribeToMore;(0,j.useEffect)(function(){if(k&&!y)return k({document:N.EMb,variables:{channelId:f},updateQuery:function(e,n){var i=n.subscriptionData;return i.data&&i.data.channelDocActivity?{channelDocActivity:{edges:i.data.channelDocActivity.slice(0,50).map(function(e){return{node:e}}),pageInfo:e.channelDocActivity.pageInfo,__typename:"DocActivityConnection"}}:e}})},[f,k,y]);var S=p?null==C?void 0:C.previewChannelDocs:null==g?void 0:g.docs,I=(null==O?void 0:null===(n=O.channelDocActivity)||void 0===n?void 0:n.edges)&&(null==O?void 0:null===(i=O.channelDocActivity)||void 0===i?void 0:i.edges.map(function(e){return e.node}).filter(function(e){return e.editors&&e.editors.length>0||e.presenters&&e.presenters.length>0}))||void 0,D=null==S?void 0:S.edges.map(function(e){return e.node}).filter(function(e){var n;return!t||(null==e?void 0:null===(n=e.channels)||void 0===n?void 0:n.find(function(e){return e.id===t}))}),P=null==g?void 0:g.docs.pageInfo,T=null==P?void 0:P.endCursor,A=(0,j.useCallback)(function(){return b({variables:{after:T}})},[b,T]),E=[tc.I.loading,tc.I.setVariables].includes(v),_=!E&&(null==P?void 0:P.hasNextPage)&&(null==P?void 0:P.endCursor);return console.debug("%c[useDocsData]","background-color:aqua",{sortBy:l,sortDirection:a,filterInfo:x,variables:h,networkStatus:v,docs:D}),{docs:D,loading:E,pageInfo:P,fetchMore:A,showPaginationControls:_,activeDocs:I}},th=i(93858),tp=i(49392),tj=function(e){var n=e.currentChannelId,i=e.activeTab,r=(0,th._)(tp.H.viewPreferences,"grid"),t=(0,eQ.Z)(r,2),s=t[0],o=t[1],l=(0,j.useState)(N.IX5.EditedTime),a=l[0],c=l[1],d=(0,j.useState)(N.SrV.Desc),u=d[0],x=d[1],h=(0,j.useState)(function(){return n?"all":"recent"}),p=h[0],f=h[1],m=(0,j.useState)(r1),g=m[0],v=m[1];return(0,j.useEffect)(function(){i===rz.ALL?f("recent"):f("all")},[n,i,f]),(0,j.useEffect)(function(){"createdByYou"===p?(v(N.IX5.CreatedTime),c(N.IX5.CreatedTime)):"recent"===p?v(N.IX5.LastViewed):"favorites"===p?v(N.IX5.Favorited):(c(N.IX5.EditedTime),v(N.IX5.EditedTime))},[p,c,v]),{viewPreference:s,setViewPreference:o,sortBy:a,setSortBy:c,sortDirection:u,filterBy:p,setFilterBy:f,setSortDirection:x,dateDisplayOption:g,setDateDisplayOption:v}},tf=function(){return(0,eo.jsx)(rr.M,{minH:"sm",children:(0,eo.jsxs)(c.k,{direction:"column",justify:"center",align:"center",children:[(0,eo.jsx)(E.xu,{w:"80%",maxW:"250px",mb:6,alignContent:"center",children:(0,eo.jsx)(rc(),{src:"/images/Sal-Fishing-2x.png",width:"640",height:"361",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,eo.jsx)(D.X,{size:"md",mb:2,textAlign:"center",children:(0,eo.jsx)(w.cC,{id:"ZxwTXP",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq}})}),(0,eo.jsx)(T.x,{fontSize:"lg",color:"gray.400",textAlign:"center",children:(0,eo.jsx)(w.cC,{id:"y1jRzK",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:v.aq},components:{0:(0,eo.jsx)(eA.r,{as:en(),color:"trueblue.500",href:"/#".concat(r0)})}})})]})})},tm=[,,].fill(1),tg=[,,,,].fill(1),tv=function(e){var n=e.viewPreference;return"grid"===(void 0===n?"grid":n)?(0,eo.jsx)(E.xu,{width:"100%","data-testid":"docs-view-skeleton",children:(0,eo.jsx)(_.r,{templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)","2xl":"repeat(5, 1fr)"},gap:6,children:tm.map(function(e,n){return(0,eo.jsx)(Z.P,{bg:"linen.50",borderRadius:"5px",height:"240px",as:eH.O},n)})})}):(0,eo.jsx)(E.xu,{width:"100%","data-testid":"docs-view-skeleton",children:(0,eo.jsx)(ik.x,{pt:4,maxW:"100%",children:(0,eo.jsx)(ii.i,{colorScheme:"blackAlpha",size:"sm",whiteSpace:"normal",variant:"simple",children:(0,eo.jsx)(io.p,{children:tg.map(function(e,n){return(0,eo.jsx)(it.Tr,{children:(0,eo.jsx)(il.Td,{as:eH.O,height:"36px",mb:2})},n)})})})})})},tb=i(34961),tC=i(22697),ty=i(14366),tw=i(53110),tO=i(68871);function tk(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function tS(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?tk(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tk(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var tI={all:{label:(0,eo.jsx)(w.cC,{id:"N40H+G"}),ariaLabel:G.ag._({id:"N40H+G"}),icon:W.s2},recent:{label:(0,eo.jsx)(w.cC,{id:"AOvC3b"}),ariaLabel:G.ag._({id:"AOvC3b"}),icon:tO.SZ},private:{label:(0,eo.jsx)(w.cC,{id:"zwBp5t"}),ariaLabel:G.ag._({id:"zwBp5t"}),icon:tw.by},createdByYou:{label:(0,eo.jsx)(w.cC,{id:"WZTg05"}),ariaLabel:G.ag._({id:"WZTg05"}),icon:ty.m0},favorites:{label:(0,eo.jsx)(w.cC,{id:"X9kySA"}),ariaLabel:G.ag._({id:"X9kySA"}),icon:tC.T}},tD=["all","recent","createdByYou","favorites"].map(function(e){return tS({key:e},tI[e])}),tP=["all","recent","createdByYou","favorites"].map(function(e){return tS({key:e},tI[e])}),tT=function(e){var n,i=e.currentChannelId,r=e.filterBy,t=e.setFilterBy,s=(0,eY.i)({base:!0,xl:!1}),o=i?tP:tD,l=null==tI?void 0:null===(n=tI[r])||void 0===n?void 0:n.label;return(0,eo.jsx)(r6.E,{id:"filter-by-dropdown",zIndex:"3",width:["100%","auto"],mt:[4,0],children:s?(0,eo.jsxs)(K.v,{closeOnSelect:!0,children:[(0,eo.jsx)(q.j,{as:A.z,variant:"ghost",size:"sm",rightIcon:(0,eo.jsx)(F.G,{icon:iN.pt}),fontWeight:"600",color:"gray.700",leftIcon:(0,eo.jsx)(F.G,{icon:tb.G_}),children:l}),(0,eo.jsx)(Q.q,{minWidth:"240px",children:(0,eo.jsx)(eK._,{defaultValue:r,title:G.ag._({id:"MwX53Z"}),type:"radio",onChange:t,value:r,children:o.map(function(e){return(0,eo.jsx)(eq.i,{value:e.key,children:e.label},e.key)})})})]}):o.map(function(e){var n=e.key===r;return(0,eo.jsx)(r6.U,{children:(0,eo.jsx)(A.z,{fontWeight:"600",color:n?"trueblue.500":"gray.600",bg:n?"trueblue.50":"transparent",size:"sm",leftIcon:(0,eo.jsx)(F.G,{icon:e.icon,"aria-label":e.ariaLabel}),variant:"ghost",onClick:function(){return t(e.key)},children:e.label})},e.key)})})},tA=function(e){var n,i=e.filterBy,r=e.sortBy,t=e.sortDirection,s=e.setSortBy,o=e.setSortDirection,l=e.size,a=void 0===l?"sm":l,c=r5(i),d=c?r$:rJ.concat({key:N.IX5.Title,label:"Title"});return(0,eo.jsxs)(e9.h,{variant:"ghost",size:a,zIndex:"2",children:[!(0,iX.s2)()&&!c&&(0,eo.jsxs)(K.v,{closeOnSelect:!0,children:[(0,eo.jsx)(q.j,{as:A.z,variant:"ghost",size:a,rightIcon:(0,eo.jsx)(F.G,{icon:iN.pt,"aria-label":"Open menu"}),fontWeight:"600",color:"gray.700",children:(null==d?void 0:null===(n=d.find(function(e){return e.key===r}))||void 0===n?void 0:n.label)||(0,eo.jsx)(w.cC,{id:"acZeX2"})}),(0,eo.jsx)(Y.h,{children:(0,eo.jsx)(Q.q,{minWidth:"240px",zIndex:"overlay",children:(0,eo.jsx)(eK._,{defaultValue:"alpha",title:G.ag._({id:"/HgF9q"}),type:"radio",children:d.map(function(e){var n=r===e.key;return(0,eo.jsx)(J.s,{icon:n?(0,eo.jsx)(rY.n,{}):(0,eo.jsx)(E.xu,{w:3}),value:e.key,onClick:function(){return s(e.key)},children:e.label},e.key)})})})})]}),(c||d.find(function(e){return e.key===r}))&&(0,eo.jsx)(eO.kH,{label:(0,eo.jsx)(w.cC,{id:"TZml21"}),children:(0,eo.jsx)(X.h,{color:"gray.700","aria-label":"sort",onClick:function(){return o(t===N.SrV.Asc?N.SrV.Desc:N.SrV.Asc)},icon:(0,eo.jsx)(F.G,{icon:rX.RX})})})]})},tE=function(e){var n=e.currentChannelId,i=e.filterBy,r=e.sortBy,t=e.sortDirection,s=e.viewPreference,o=e.setFilterBy,l=e.setSortBy,a=e.setSortDirection,c=e.setViewPreference,d=e.shouldShowCategoryFilters,u=e.shouldShowSortOptions,x=e.shouldShowViewToggle;return d||u||x?(0,eo.jsxs)(S.K,{direction:"row",alignItems:"center",children:[d&&(0,eo.jsx)(tT,{filterBy:i,setFilterBy:o,currentChannelId:n}),(0,eo.jsx)(V.L,{}),(0,eo.jsxs)(k.U,{alignItems:"center",children:[u&&(0,eo.jsx)(tA,{filterBy:i,sortBy:r,sortDirection:t,setSortBy:l,setSortDirection:a}),x&&(0,eo.jsx)(tF,{viewPreference:s,setViewPreference:c})]})]}):(0,eo.jsx)(eo.Fragment,{})},t_=i(61309),tF=function(e){var n=e.viewPreference,i=e.setViewPreference,r="list"===n;return(0,eo.jsxs)(k.U,{spacing:0,bg:"gray.200",p:.5,borderRadius:"md",children:[(0,eo.jsx)(A.z,{size:"sm","data-testid":"view-toggle-grid",variant:r?"ghost":"plain",color:r?"gray.600":"trueblue.500",onClick:function(){return i("grid")},children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(F.G,{icon:t_.em}),(0,eo.jsx)(T.x,{display:["none","none","none","none","block"],children:(0,eo.jsx)(w.cC,{id:"CXDHcv"})})]})}),(0,eo.jsx)(A.z,{size:"sm","data-testid":"view-toggle-list",variant:r?"plain":"ghost",color:r?"trueblue.500":"gray.600",onClick:function(){return i("list")},children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(F.G,{icon:rM.xi}),(0,eo.jsx)(T.x,{display:["none","none","none","none","block"],children:(0,eo.jsx)(w.cC,{id:"2BBAbc"})})]})})]})},tN=i(55562),tz=i(95498),tL=i(83727),tR=i(87999),tU=i(24890),tM=i(8783),tW=i(91930),tG=i(82863),tB=i(33954);function tZ(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function tH(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?tZ(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tZ(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var tV=function(e){var n=(0,eD.ye)("docImport"),i=(0,eD.ye)("pptImport");return n||i?(0,eo.jsx)(tG.rg,{clientId:eX.v.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,eo.jsx)(tK,tH({},e))}):null},tK=function(e){var n=e.handleImport,i=e.isDisabled,r=e.buttonProps;e.helpTip;var t=(0,O.q)({id:"import-plain-modal"}),s=t.isOpen,o=t.onOpen,l=t.onClose,a=(0,h.useRouter)().push;return(0,eo.jsxs)(K.v,{children:[(0,eo.jsx)(q.j,tH(tH({as:A.z,onFocus:function(e){return e.preventDefault()},"data-testid":"import-doc-button",isDisabled:i,leftIcon:(0,eo.jsx)(F.G,{icon:tM.Vm}),rightIcon:(0,eo.jsx)(F.G,{icon:eW.gc}),sx:{span:{flexGrow:0}}},r),{},{children:(0,eo.jsx)(w.cC,{id:"l3s5ri"})})),(0,eo.jsx)(Y.h,{children:(0,eo.jsx)(Q.q,{maxW:"350px",zIndex:"tooltip",children:(0,eo.jsxs)(tW.k,{title:G.ag._({id:"F6aY4g"}),children:[(0,eo.jsx)(J.s,{icon:(0,eo.jsx)(F.G,{icon:tU.Jy,fixedWidth:!0}),onClick:function(){a("/create/import?ref=dashboard")},children:(0,eo.jsxs)(k.U,{align:"flex-start",children:[(0,eo.jsxs)(S.K,{spacing:0,children:[(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"QIFgHt"})}),(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.700",children:(0,eo.jsx)(w.cC,{id:"Aqrkal"})})]}),(0,eo.jsx)(V.L,{}),(0,eo.jsx)(I.C,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,eo.jsx)(w.cC,{id:"jsQZMk"})})]})}),(0,eo.jsx)(J.s,{icon:(0,eo.jsx)(F.G,{icon:tM.Vm,fixedWidth:!0}),onClick:o,children:(0,eo.jsxs)(S.K,{spacing:0,children:[(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"yCc/Nz"})}),(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.700",children:(0,eo.jsx)(w.cC,{id:"exXmrP"})})]})})]})})}),(0,eo.jsxs)(e1.u_,{isOpen:s,onClose:l,size:"2xl",children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{bg:"gray.50",children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsxs)(k.U,{spacing:3,children:[(0,eo.jsx)(F.G,{icon:tM.Vm}),(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"F6aY4g"})})]})}),(0,eo.jsx)(eC.i,{}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(e6.f,{py:4,px:{base:4,md:6},children:(0,eo.jsxs)(S.K,{spacing:4,justifyContent:"flex-start",children:[(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"bQtlIq"})}),(0,eo.jsx)(tB.v,{onImportComplete:n,hidePasteLink:!0})]})}),(0,eo.jsx)(e7.m,{children:(0,eo.jsx)(A.z,{variant:"ghost",onClick:l,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})})})]})]})]})},tq=i(72338),tX=i(82477),tY=i(74993),tQ=i(86297),tJ=function(e,n){var i,r,t=(0,tX.e)(),s=(0,tq.J1)(t),o=(0,tY.T)(e,s,n,!1).slice,l=(null===(i=o.toJSON())||void 0===i?void 0:i.content)||[];if(l.every(function(e){return"card"===e.type}))r=(0,tQ.vL)(void 0,l);else{var a=l.filter(function(e){return s.nodes[e.type].isBlock})||[];r=(0,tQ.vL)(void 0,[{type:"card",content:a}])}return console.debug("Parsing imported doc",{doc:r,slice:o,splitContent:l,html:e}),r},t$=i(58565),t0=i(5766),t1=i(25237),t2=i.n(t1),t5=i(8661),t3=i(30118),t4=["isDisabled","handleNewWithAIClick"],t6=t2()(function(){return Promise.all([i.e(2274),i.e(6678),i.e(1724),i.e(3612),i.e(6046),i.e(5626),i.e(2724)]).then(i.bind(i,60684)).then(function(e){return e.AdvancedModeDrawer})},{ssr:!1,loadableGenerated:{webpack:function(){return[60684]}}}),t8={guided:{title:(0,eo.jsx)(w.cC,{id:"ziAjHi"}),description:(0,eo.jsx)(w.cC,{id:"Gss0U9",components:{0:(0,eo.jsx)("strong",{}),1:(0,eo.jsx)("strong",{}),2:(0,eo.jsx)("strong",{})}}),icon:"/_next/static/media/guided-thumb.a7ac0faa.png"},advanced:{title:(0,eo.jsx)(w.cC,{id:"Fw72lu"}),description:(0,eo.jsx)(w.cC,{id:"NuYgvQ",components:{0:(0,eo.jsx)("strong",{}),1:(0,eo.jsx)("strong",{})}}),icon:"/_next/static/media/text-to-deck-thumb.2c69fa96.png"}},t7=function(e){var n=e.title,i=e.description,r=e.beta,t=e.icon,s=e.onClick;return(0,eo.jsx)(Z.P,{position:"relative",padding:"6",border:"2px solid",borderColor:"gray.100",cursor:"pointer",boxSizing:"border-box",background:"white",shadow:"sm",transitionProperty:"common",transitionDuration:"normal",_hover:{bg:"trueblue.50",borderColor:"trueblue.400",boxShadow:"xl",textDecoration:"none"},role:"group",onClick:s,as:A.z,variant:"unstyled",borderRadius:8,height:"revert",fontWeight:"unset",whiteSpace:"normal",textAlign:"left",alignItems:"start",display:"flex",children:(0,eo.jsxs)(S.K,{children:[(0,eo.jsx)(c.k,{height:"40",mb:"2",justify:"top",alignItems:"top",borderRadius:"md",top:0,left:0,bottom:0,right:0,fontSize:"3rem",transitionProperty:"all",transitionDuration:"normal",bgImage:t,bgSize:"cover"}),(0,eo.jsxs)(k.U,{align:"center",pt:2,children:[(0,eo.jsx)(T.x,{mt:0,fontSize:"xl",fontWeight:"bold",lineHeight:"short",children:n}),(0,eo.jsx)(V.L,{}),r&&(0,eo.jsx)(I.C,{fontSize:"0.75em",colorScheme:"green",mt:"-6px !important",children:(0,eo.jsx)(w.cC,{id:"YBt9YP"})})]}),(0,eo.jsxs)(T.x,{fontSize:"sm",children:[" ",i]})]})})},t9=function(e){var n=e.isDisabled,i=e.handleNewWithAIClick;(0,iI.Z)(e,t4);var r=(0,eD.ye)("aiWizardAdvanced"),t=(0,eD.ye)("createv2"),s=(0,h.useRouter)().push,o=(0,t3.M)({id:"aiWizardAdvancedDrawer"}),l=o.isOpen,a=o.onClose,c=o.onOpen,d=(0,t3.M)({id:"newWithAiModal"}),u=d.isOpen,x=d.onClose,p=d.onOpen,f=(0,j.useCallback)(function(){i?i():(x(),s(t5.ET))},[i,x,s]),m=(0,j.useCallback)(function(){i?i():(x(),c())},[i,x,c]),g=t?function(){return s("/create")}:f;return(0,iX.s2)()||!r||t?(0,eo.jsx)(A.z,{"data-testid":"create-from-aipartner-button",isDisabled:n,variant:"solid",onClick:g,leftIcon:(0,eo.jsx)(F.G,{icon:y.r8}),rightIcon:(0,eo.jsx)(I.C,{colorScheme:"trueblue",textShadow:"none",children:"AI"}),children:(0,eo.jsx)(w.cC,{id:"BOqY23"})}):(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsxs)(e1.u_,{isOpen:u,onClose:x,size:"xl",blockScrollOnMount:!1,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsxs)(e3.x,{children:[(0,eo.jsx)(F.G,{icon:t$.dd})," ",(0,eo.jsx)(w.cC,{id:"6L5VYJ"})]}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(e6.f,{children:(0,eo.jsx)(t0.M,{columns:[1,2],spacing:5,mb:6,children:Object.entries(t8).map(function(e){var n=(0,eQ.Z)(e,2),i=n[0],r=n[1],t=r.description,s=r.title,o=r.beta,l=r.icon,a="guided"===i?f:m;return(0,eo.jsx)(t7,{description:t,title:s,beta:o,icon:l,onClick:a},i)})})})]})]}),(0,eo.jsx)(A.z,{leftIcon:(0,eo.jsx)(F.G,{icon:y.r8}),rightIcon:(0,eo.jsx)(I.C,{colorScheme:"trueblue",textShadow:"none",children:(0,eo.jsx)(w.cC,{id:"jsQZMk"})}),variant:"solid",onClick:p,children:(0,eo.jsx)(w.cC,{id:"BOqY23"})}),(0,eo.jsx)(t6,{isOpen:l,onClose:a})]})},se=function(e){var n=e.currentWorkspace,i=e.description,r=e.ariaLabel,t=e.displayName,s=e.icon,o=e.showCreateButton,l=e.channel,a=e.isChannelPreview,d=(0,O.q)({id:"template-browser-modal"}),u=d.isOpen,x=(d.onOpen,d.onClose),p=(0,O.q)({id:"ai-credits-modal"}),f=p.isOpen,m=p.onOpen,g=p.onClose,v=(0,eD.ye)("aiWizard"),b=(0,eD.ye)("createv2"),I=(0,C.z$)();(0,h.useRouter)().push;var P=(0,tz.q)(),_=P.credits,N=P.hasEnoughCreditsToGenerateDeck,z=(0,tN.c)(),L=(0,eQ.Z)(z,2),R=L[0],U=L[1],M=U.data,W=U.loading||!!((null==M?void 0:M.createDoc)||!n),G=(0,j.useCallback)(function(e){var n=e.html,i=e.filename,r=e.source;if(n){var t="GoogleDocs"===r||"DocxUpload"===r,s=tJ(n,{splitOnHeadings:t,splitOnDividers:!0,nested:t});null==I||I.track(C.AA.DOC_IMPORTED,{source:r}),R({document:s,channelId:null==l?void 0:l.id,title:i,source:"import"})}},[null==l?void 0:l.id,R,I]),B=(0,j.useCallback)(function(){R({channelId:null==l?void 0:l.id,source:"blank"})},[null==l?void 0:l.id,R]);return(0,eo.jsxs)(c.k,{flex:"1",mb:(0,iX.s2)()?0:4,direction:"column",children:[(0,eo.jsxs)(E.xu,{w:["100%","auto"],children:[(0,eo.jsxs)(k.U,{h:"1.5em",children:[(0,eo.jsxs)(D.X,{fontSize:"lg",fontWeight:"600","data-testid":"docs-view-header",children:[s&&(0,eo.jsx)(F.G,{icon:s,"aria-label":r})," ",(0,eo.jsx)(T.x,{as:"span",ml:2,children:t})]}),(0,eo.jsx)(V.L,{}),!a&&l&&(0,eo.jsx)(ry,{channel:l,workspaceId:null==n?void 0:n.id})]}),i&&(0,eo.jsx)(T.x,{color:"gray.600",fontSize:"sm",children:i}),l&&(0,eo.jsxs)(S.K,{direction:"row",alignItems:"center",mt:4,children:[(0,eo.jsx)(eO.NL,{overflowTooltipLabel:"See everyone",size:"xs",avatars:(null==l?void 0:l.members)||[],max:6}),(0,eo.jsx)(T.x,{fontSize:"sm",color:"gray.400",ml:2,children:(0,eo.jsx)(w.cC,{id:"pkIIls",values:{0:l.memberCount||0}})})]})]}),o&&(0,eo.jsxs)(S.K,{direction:{base:"column",lg:"row"},spacing:2,mt:4,children:[v&&(0,eo.jsx)(t9,{isDisabled:W,handleNewWithAIClick:N?void 0:m}),!(0,iX.s2)()&&(0,eo.jsx)(A.z,{"data-testid":"create-doc-button",isDisabled:W,variant:"plain",onClick:B,leftIcon:(0,eo.jsx)(F.G,{icon:y.r8}),children:(0,eo.jsx)(w.cC,{id:"exOjhh"})}),o&&!(0,iX.s2)()&&!b&&(0,eo.jsx)(tR.g,{handleImport:G,isDisabled:W,helpTip:(0,eo.jsx)(T.x,{fontSize:"sm",color:"gray.500",children:(0,eo.jsx)(w.cC,{id:"GjtYid",components:{0:(0,eo.jsx)(A.z,{variant:"link",onClick:B,size:"sm"})}})})}),o&&!(0,iX.s2)()&&b&&(0,eo.jsx)(tV,{handleImport:G,isDisabled:W})]}),(0,eo.jsx)(eS.H,{credits:_,isOpen:f,onClose:g,onOpen:m}),(0,eo.jsx)(tL.UB,{isOpen:u,onClose:x,forceChannelId:null==l?void 0:l.id})]})},sn=function(){var e=(0,j.useState)(null),n=e[0],i=e[1],r=(0,N.t1J)({variables:{docId:n,maxDepth:1,archived:!1},returnPartialData:!0,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),t=(0,eQ.Z)(r,2),s=t[0],o=t[1].data;(0,j.useEffect)(function(){!n||(0,iX.s2)()||s({variables:{docId:n,maxDepth:1}})},[n,s]);var l=(0,j.useMemo)(function(){return[]},[]),a=(0,j.useMemo)(function(){var e,i;return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(e.length<=n)return e;for(var i=Math.floor(e.length/n),r=[],t=0;t<e.length&&(r.push(e[t]),r.length!==n);t+=i);return r}((null==o?void 0:o.docCards)!==void 0&&(null==o?void 0:null===(e=o.docCards[0])||void 0===e?void 0:e.docId)===n?null==o?void 0:null===(i=o.docCards)||void 0===i?void 0:i.filter(function(e){return!!e.previewUrl}):l)},[null==o?void 0:o.docCards,n,l]);return{fetchThumbnails:(0,j.useCallback)(function(e){i(e)},[]),getThumbnails:(0,j.useCallback)(function(e){return n===e?a:l},[a,n,l])}},si=function(e){var n=e.editors,i=e.user,r=(0,re.Yc)(n,null==i?void 0:i.id);return(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(eO.NL,{size:"xs",overflowTooltipLabel:G.ag._({id:"25VyZX"}),shouldAnimate:!1,max:3,avatars:r.map(function(e){var n=e.displayName,i=e.profileImageUrl;return{name:n||"",id:e.id,profileImageUrl:i,color:"white"}})}),(0,eo.jsx)(S.K,{spacing:0,children:(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.500",children:(0,eo.jsx)(w.cC,{id:"27Yldc",values:{0:r.length}})})})]})},sr=function(e){var n=e.presenters,i=e.user,r=(0,re.Yc)(n,null==i?void 0:i.id);return(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(eO.NL,{overflowTooltipLabel:G.ag._({id:"25VyZX"}),shouldAnimate:!1,size:"xs",max:3,avatars:r.map(function(e){var n=e.displayName,i=e.profileImageUrl;return{name:n||"",id:e.id,profileImageUrl:i,color:"white"}})}),(0,eo.jsx)(S.K,{spacing:0,children:(0,eo.jsx)(T.x,{fontSize:"xs",color:"gray.500",children:(0,eo.jsx)(w.cC,{id:"u2htxq",values:{0:r.length}})})})]})},st=function(e){var n=e.activeDocs;e.filterBy;var i=sn(),r=i.fetchThumbnails,t=i.getThumbnails,s=(0,eD.ye)("screenshotsEnabled"),o=(0,l.SE)().user,a=ts({refetchQueries:["GetDocs","GetChannelDocActivity"]}).favoriteDoc;return(0,eo.jsxs)(E.xu,{bg:"blackAlpha.100",my:4,pt:2,borderRadius:"md",border:"1px solid #000",borderColor:"blackAlpha.100",children:[(0,eo.jsxs)(T.x,{px:6,fontSize:"sm",fontWeight:"600",color:"gray.600",mt:2,children:[(0,eo.jsx)(F.G,{icon:i0.V1})," ",(0,eo.jsx)(w.cC,{id:"/sL1z7"})]}),(0,eo.jsx)(_.r,{templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)","2xl":"repeat(5, 1fr)"},gap:6,p:6,pt:3,children:null==n?void 0:n.map(function(e){var n,i=e.doc,l=e.editors,c=e.presenters,d=i.title,u=i.id,x=i.titleCard,h=i.createdTime,p={src:s?null==x?void 0:x.previewUrl:er.Z,fallbackSrc:er.Z.src},j=c&&c.length>0,f=!j&&l&&l.length>0,m=(0,ib.Gn)({docId:u}),g=(0,eo.jsxs)(k.U,{px:2,py:1,bg:"green.100",borderRadius:"md",w:"100%",children:[f&&(0,eo.jsx)(si,{editors:l,user:o}),j&&(0,eo.jsx)(sr,{presenters:c,user:o})]}),v=t(i.id);return(0,eo.jsx)(rZ.F7,{createdTime:h,title:d,NextLink:en(),href:m,id:u,thumbnailImageUrl:p,isFavorited:null===(n=i.docUser)||void 0===n?void 0:n.favorited,onFavorite:a(new Date,i),onUnfavorite:a(null,i),menuEnabled:!1,activity:g,cardThumbnails:s?v:[],onMouseEnter:function(){s&&r(i.id)}},u)})})]})},ss=(0,j.memo)(function(e){var n=e.activeTab,i=e.channel,r=e.isChannelPreview,t=e.activeDocs,s=e.sortDirection,o=e.sortBy,a=e.filterBy,c=e.viewPreference,d=e.setSortBy,u=e.setSortDirection,x=e.setViewPreference,h=e.setFilterBy,p=!(0,iX.s2)()&&n!==rN.TEMPLATES,j=!!(n===rN.ALL||i),f=(0,l.SE)().currentWorkspace,m=rL[n],g=m.displayName,v=m.description,b=m.ariaLabel,C=m.icon,y=m.showCreateButton,w=(null==i?void 0:i.name)||g;return(0,eo.jsxs)(E.xu,{w:"100%",mb:6,children:[(0,eo.jsx)(se,{displayName:w,ariaLabel:b,description:v,icon:C,showCreateButton:y&&!r,currentWorkspace:f,channel:i,isChannelPreview:r}),t&&t.length>0&&(0,eo.jsx)(st,{activeDocs:t,filterBy:a}),(0,eo.jsx)(tE,{filterBy:a,sortBy:o,sortDirection:s,setViewPreference:x,setFilterBy:h,setSortBy:d,setSortDirection:u,viewPreference:c,shouldShowCategoryFilters:j,currentChannelId:(null==i?void 0:i.id)||null,shouldShowSortOptions:p&&"grid"===c,shouldShowViewToggle:p})]})});ss.displayName="DocsViewTopbar";var so=i(65742),sl=function(e){var n=e.onClose,i=e.doc,r=(0,N.D1_)(),t=(0,eQ.Z)(r,2),s=t[0],o=t[1].loading,l=(0,e0.p)(),a=(0,j.useState)(function(){return i.title}),d=a[0],u=a[1],x=(0,j.useState)("Untitled"),h=x[0],p=x[1],f=(0,j.useState)(null),m=f[0],g=f[1],b=(0,j.useCallback)(function(e){u(e.target.value)},[]),C=(0,j.useRef)(null),y=(0,N.EDv)({variables:{docId:i.id,snapshotId:i.currentSnapshotId},skip:!(null!=i&&i.currentSnapshotId)||!(null!=i&&i.id)}).data,O=!!m;(0,j.useEffect)(function(){null!=y&&y.snapshot&&p((null==y?void 0:y.snapshot)&&(0,so.getCardTitle)(y.snapshot.content.default.content[0].content[0])||G.ag._({id:"wja8aL"}))},[null==y?void 0:y.snapshot]);var k=(0,j.useCallback)(function(){var e=!!(d&&d.length);s({variables:{id:i.id,titleEdited:e,title:e?d:h}}).then(function(){l({title:(0,eo.jsx)(w.cC,{id:"ZYAPMn",values:{0:d.length>0?d:h,GAMMA_ARTIFACT_PROPER_NOUN:v.Yc}}),position:"top",status:"success",duration:5e3}),g(null),n()}).catch(function(e){console.error(e),g(e.message)})},[i.id,n,d,l,s,h]);return(0,eo.jsxs)(e1.u_,{closeOnOverlayClick:!1,isOpen:!0,initialFocusRef:C,onClose:n,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"2wxgft"})}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(e6.f,{children:(0,eo.jsx)(c.k,{mt:4,w:"100%",direction:"column",children:(0,eo.jsxs)(nc.NI,{isInvalid:O,children:[(0,eo.jsx)(nu.I,{value:d,placeholder:h,ref:C,_placeholder:{opacity:1,color:"gray.300"},onKeyDown:function(e){"Enter"===e.key&&k()},onChange:b}),O&&(0,eo.jsx)(na.J1,{children:m})]})})}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",onClick:n,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{isLoading:o,variant:"solid",onClick:k,children:(0,eo.jsx)(w.cC,{id:"2wxgft"})})]})})]})]})},sa=function(e){var n,i=e.sortBy,r=e.filterBy,t=e.docUser,s=e.doc;if("favorites"===r)return(0,eo.jsx)(w.cC,{id:"8a9FIL",values:{0:(0,et.Dw)(null==t?void 0:t.favorited)}});if("recent"===r)return(0,eo.jsx)(w.cC,{id:"yJynx8",values:{0:(0,et.Dw)(null==t?void 0:t.lastViewed)}});var o=(n={},(0,ea.Z)(n,N.IX5.LastViewed,(0,eo.jsx)(w.cC,{id:"yJynx8",values:{0:(0,et.Dw)(null==t?void 0:t.lastViewed)}})),(0,ea.Z)(n,N.IX5.CreatedTime,(0,eo.jsx)(w.cC,{id:"oJFw5Q",values:{0:(0,et.Dw)(null==s?void 0:s.createdTime)}})),(0,ea.Z)(n,N.IX5.EditedTime,(0,eo.jsx)(w.cC,{id:"yxz5Og",values:{0:(0,et.Dw)(null==s?void 0:s.editedTime)}})),n);return(null==o?void 0:o[i])||(0,eo.jsx)(w.cC,{id:"yxz5Og",values:{0:(0,et.Dw)(null==s?void 0:s.editedTime)}})},sc=function(e){var n=e.userHasNoWorkspaces,i=e.isSidebarVisible,r=e.setIsSidebarVisible,t=e.currentChannelId,s=e.activeChannel,o=e.channelPreview,a=e.activeTab,c=(0,l.SE)(),d=c.user,u=c.currentWorkspace,x=(0,j.useState)(!1),h=x[0],p=x[1],f=(0,j.useState)(null),m=f[0],g=f[1],v=(0,j.useState)(null),b=v[0],C=v[1],y=(0,O.q)({id:"ConfirmPermanentlyDeleteModal"}),k=y.isOpen,S=y.onOpen,I=y.onClose,D=(0,j.useState)(null),P=D[0],T=D[1],_=(0,N.WMx)({variables:{id:m},returnPartialData:!0,nextFetchPolicy:"cache-first"}),F=(0,eQ.Z)(_,2),z=F[0],L=F[1].data,R=ts({refetchQueries:["GetDocs","GetChannelDocActivity"]}),U=R.favoriteDoc,M=R.trashDoc,W=R.restoreDoc,G=(0,ta.e)(),B=(0,i3.Z)().removeDocChannel,Z=(0,l.we)(),H=(0,tl.y)(),V=H.isSharePanelOpen,K=H.onSharePanelOpen,q=H.onSharePanelClose,X=H.view,Y=H.setView,Q=(0,O.q)({id:"RenameDocModalDisclosure"}),J=Q.isOpen,$=Q.onOpen,ee=Q.onClose,en=(0,eD.ye)("permanentlyDeleteDoc"),ei=tj({currentChannelId:t,activeTab:a}),er=ei.viewPreference,et=ei.setViewPreference,es=ei.sortBy,el=ei.setSortBy,ea=ei.sortDirection,ec=ei.filterBy,ed=ei.setFilterBy,eu=ei.setSortDirection,ex=ei.dateDisplayOption,eh=ei.setDateDisplayOption,ep=tx({filterBy:ec,activeTab:a,currentChannelId:t,channelPreview:o,user:d,currentWorkspace:u,sortBy:es,sortDirection:ea}),ej=ep.docs,ef=ep.loading,em=ep.showPaginationControls,eg=ep.fetchMore,ev=ep.activeDocs;(0,j.useEffect)(function(){m&&z({variables:{id:m}})},[m,z]);var eb=(0,j.useCallback)(function(e){C(e),S()},[S]),eC=en?eb:void 0,ey=(0,j.useCallback)(function(e){g(e),K()},[K]),ew=(0,j.useCallback)(function(e,n){B(e,n)},[B]),eO=(0,j.useCallback)(function(e){G({docId:e.id,source:"dashboard_docs_view_duplicate"})},[G]),ek=(0,j.useCallback)(function(e){T(e),$()},[$]),eS=!ef&&ej&&(null==ej?void 0:ej.length)>0,eI=sn(),eP=eI.fetchThumbnails,eT=eI.getThumbnails;return(0,eo.jsxs)(E.xu,{width:"100%",children:[!n&&(0,eo.jsx)(rW,{isSidebarVisible:i,setIsSidebarVisible:r,children:(0,eo.jsx)(ss,{activeTab:a,channel:o||s,activeDocs:ev,isChannelPreview:!!o,sortDirection:ea,sortBy:es,filterBy:ec,viewPreference:er,setSortBy:el,setSortDirection:eu,setViewPreference:et,setFilterBy:ed})}),(0,eo.jsxs)(E.xu,{width:"100%","data-testid":"docs-view-container",children:[(0,eo.jsx)(rH,{user:d,currentWorkspace:u,currentChannelId:t,viewPreference:er}),ef&&(0,eo.jsx)(tv,{viewPreference:er}),!ef&&(null==ej?void 0:ej.length)===0&&(0,eo.jsx)(tf,{}),"list"===er&&eS&&(0,eo.jsx)(tn,{dateDisplayOption:ex,setDateDisplayOption:eh,user:d,currentWorkspace:u,userHasNoWorkspaces:n,filterBy:ec,docs:ej,currentChannelId:t,sortBy:es,sortDirection:ea,setSortBy:el,setSortDirection:eu,handleDuplicateDoc:eO,handleFavoriteDoc:U,handleTrash:M,handlePermanentDelete:eC,handleRestoreDoc:W,handleShareClick:ey,handleRenameClick:ek,handleRemoveFromChannel:ew}),"grid"===er&&eS&&(0,eo.jsx)(ti.G,{"data-testid":"docs-view-doc-grid",children:ej.map(function(e){var i,r=Z.can("view",e)&&!n,s=Z.can("edit",e)&&!n,o=Z.can("manage",e)&&!n,l=eT(e.id);return(0,eo.jsx)(rq,{user:d,currentWorkspace:u,doc:e,currentChannelId:t,sortBy:es,filterBy:ec,canDuplicate:r,createdByYou:(null==e?void 0:null===(i=e.createdBy)||void 0===i?void 0:i.id)===(null==d?void 0:d.id),handleDuplicateDoc:eO,handleFavoriteDoc:U,handleTrash:M,handlePermanentDelete:eC,handleRenameClick:ek,handleRemoveFromChannel:ew,handleRestoreDoc:W,handleShareClick:ey,fetchThumbnails:eP,cardThumbnails:l,canEditDoc:s,canManageDoc:o},e.id)})}),V&&(0,eo.jsx)(i2.WQ,{doc:null==L?void 0:L.doc,isSharePanelOpen:V,onSharePanelClose:function(){g(null),q()},onSharePanelOpen:K,view:X,setView:Y}),J&&(0,eo.jsx)(sl,{doc:P,onClose:ee}),em&&(0,eo.jsx)(rr.M,{p:6,children:(0,eo.jsx)(A.z,{isLoading:h,onClick:function(){p(!0),eg().finally(function(){p(!1)})},size:"sm",children:(0,eo.jsx)(w.cC,{id:"yQ2kGp"})})}),en&&k&&b&&(0,eo.jsx)(to,{doc:b,onClose:I})]})]})},sd=i(91128),su=i(42763),sx=function(e){var n=(0,N.r$k)(),i=(0,eQ.Z)(n,1)[0],r=(0,N.NuY)(),t=(0,eQ.Z)(r,1)[0];return(0,j.useCallback)(function(n){var r=n.uploadFontFiles.filter(function(e){return("existing"===e.status||"created"===e.status)&&e.fontFile.sourceUrl}).map(function(e){var n=e.fontFile,i={name:n.name,weight:n.weight,isItalic:n.isItalic,fileType:n.fileType,sourceUrl:n.sourceUrl};return"existing"===e.status&&e.fontFile.id&&(i.id=e.fontFile.id),i});if("edit"!==n.mode)return i({variables:{input:{name:n.fontName,fontFiles:r,workspaceId:e}},refetchQueries:["GetWorkspaceFonts"]});var s=[{op:N.bPF.Add,path:"/name",value:n.fontName},{op:N.bPF.Replace,path:"/fontFiles",value:r}];return t({variables:{input:{id:n.fontId,workspaceId:e,data:s}},refetchQueries:["GetWorkspaceFonts"]})},[i,e,t])},sh=function(e){var n,i=(0,e0.p)(),r=(0,N.xUs)(),t=(0,eQ.Z)(r,2),s=t[0],o=t[1].loading;return{archiveFontFn:(0,j.useCallback)((n=(0,nz.Z)(nU().mark(function n(r,t){return nU().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s({variables:{id:r,workspaceId:e},refetchQueries:["GetWorkspaceFonts"]}).then(function(e){return i({title:(0,eo.jsx)(w.cC,{id:"w+hpl4",values:{name:t}}),status:"success",duration:2e3,isClosable:!0,position:"top"}),e}));case 1:case"end":return n.stop()}},n)})),function(e,i){return n.apply(this,arguments)}),[s,e,i]),isArchiving:o}},sp=function(e){var n=e.onClose,i=e.font,r=sh(e.orgId),t=r.archiveFontFn,s=r.isArchiving,o=(0,j.useCallback)(function(){t(i.id,i.name).then(n).catch(function(e){console.error("[FontDeleteModal] Error deleting font",e)})},[t,i.id,i.name,n]);return(0,eo.jsxs)(e1.u_,{onClose:n,isOpen:!0,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"Tf88pC",values:{0:i.name}})}),(0,eo.jsx)(e4.o,{isDisabled:s}),(0,eo.jsx)(e6.f,{children:(0,eo.jsxs)(S.K,{spacing:4,children:[(0,eo.jsx)(T.x,{fontWeight:"bold",children:(0,eo.jsx)(w.cC,{id:"GG34Oa"})}),(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"AYXLSv"})}),(0,eo.jsx)(T.x,{color:"red.600",children:(0,eo.jsx)(w.cC,{id:"U99rVM"})})]})}),(0,eo.jsx)(e7.m,{children:(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",onClick:n,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{variant:"ghost",color:"red.600",onClick:o,isLoading:s,children:(0,eo.jsx)(w.cC,{id:"04FTaq"})})]})})]})]})},sj=["children"];function sf(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function sm(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?sf(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sf(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var sg=function(e){var n=e.children,i=(0,iI.Z)(e,sj);return(0,eo.jsx)(c.k,sm(sm({border:"1px solid",borderColor:"gray.200",minH:36,maxH:36,minW:"100%",borderRadius:"lg",alignItems:"center",justifyContent:"center",transition:"all",transitionDuration:"normal",_hover:{background:"white",color:"trueblue.600",cursor:"pointer"}},i),{},{children:n}))},sv=i(25344),sb=i(58499),sC=function(){return(0,eo.jsxs)(e$.b,{status:"warning",children:[(0,eo.jsx)(im.z,{}),(0,eo.jsxs)(T.x,{children:[(0,eo.jsxs)("strong",{children:[(0,eo.jsx)(w.cC,{id:"S89SGJ"})," ",(0,eo.jsx)("span",{role:"img","aria-label":"Crying emoji",children:"\uD83D\uDE22"}),"."]})," ",(0,eo.jsx)(w.cC,{id:"5FjY+D",components:{0:(0,eo.jsx)(sb.E,{colorScheme:"purple"}),1:(0,eo.jsx)(sb.E,{colorScheme:"pink"})}})]})]})},sy=i(13061),sw=function(e){var n=e.fileExtension;return(0,eo.jsx)(sy.Vp,{size:"sm",justifyContent:"center",background:n===N.sA6.Ttf?"trueblue.100":"shocking.100",children:n.toUpperCase()})},sO=function(e){var n=e.fontFamily,i=e.fontWeight,r=e.isItalic,t=e.headingText;return(0,eo.jsx)(D.X,{fontFamily:'"'.concat(n,'"'),noOfLines:1,lineHeight:"base",fontWeight:i,fontStyle:r?"italic":"normal",children:t||n})};function sk(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function sS(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?sk(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sk(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var sI=function(e){var n=e.reduce(function(e,n){var i=e.findIndex(function(e){return e.isItalic===n.isItalic&&e.weight===n.weight});if(-1===i)return[].concat((0,n$.Z)(e),[n]);if(e[i].fileType===n.fileType)return e;var r=sS(sS({},n),{},{fileTypes:[n.fileType,e[i].fileType]});return[].concat((0,n$.Z)(e.slice(0,i)),[r],(0,n$.Z)(e.slice(i+1)))},[]),i=(0,n$.Z)(n);return i.sort(function(e,n){return e.weight!==n.weight?e.weight-n.weight:e.isItalic!==n.isItalic?!1===e.isItalic?-1:1:0}),i},sD=function(e){var n,i=e.font,r=e.onClose,t=e.onEditClick,s=e.onDeleteClick,o=(0,j.useMemo)(function(){return sI(i.fontFiles||[])},[i.fontFiles]);return(0,eo.jsxs)(e1.u_,{isOpen:!0,onClose:r,size:"3xl",blockScrollOnMount:!1,children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:i.name}),(0,eo.jsx)(e4.o,{}),(0,eo.jsx)(eC.i,{mb:"4"}),(0,eo.jsx)(e6.f,{children:(0,eo.jsxs)(ew.g,{mb:4,spacing:6,align:"stretch",children:[(null===(n=i.fontFiles)||void 0===n?void 0:n.length)===0&&(0,eo.jsx)(sC,{}),o.map(function(e){var n,r,t=!!(e.fileType===N.sA6.Otf||(null===(n=e.fileTypes)||void 0===n?void 0:n.includes(N.sA6.Otf))),s=!!(e.fileType===N.sA6.Ttf||(null===(r=e.fileTypes)||void 0===r?void 0:r.includes(N.sA6.Ttf)));return(0,eo.jsx)(sP,{fontName:i.name,weight:e.weight,isItalic:e.isItalic,hasOTF:t,hasTTF:s},e.id)})]})}),(0,eo.jsxs)(e7.m,{justifyContent:"space-between",children:[(0,eo.jsx)(A.z,{variant:"ghost",colorScheme:"red",onClick:s,children:(0,eo.jsx)(w.cC,{id:"cnGeoo"})}),(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"plain",onClick:t,children:(0,eo.jsx)(w.cC,{id:"ePK91l"})}),(0,eo.jsx)(A.z,{variant:"solid",onClick:r,children:(0,eo.jsx)(w.cC,{id:"DPfwMq"})})]})]})]})]})},sP=function(e){var n=e.fontName,i=e.weight,r=e.isItalic,t=e.hasOTF,s=e.hasTTF,o=(0,eo.jsxs)(eo.Fragment,{children:[(0,sv.d)()[i]," ",r?(0,eo.jsx)(w.cC,{id:"pzutoc"}):""]}),l=(0,eo.jsxs)(eo.Fragment,{children:[n," ",o]}),a=(0,eo.jsxs)(eo.Fragment,{children:[i," - ",o]});return(0,eo.jsxs)(c.k,{justify:"space-between",gap:"10px",children:[(0,eo.jsxs)(S.K,{spacing:2,children:[(0,eo.jsx)(T.x,{color:"gray.600",children:a}),(0,eo.jsx)(sO,{fontFamily:n,fontWeight:i.toString(),isItalic:r,headingText:l})]}),(0,eo.jsxs)(k.U,{align:"center",children:[s&&(0,eo.jsx)(sw,{fileExtension:N.sA6.Ttf}),t&&(0,eo.jsx)(sw,{fileExtension:N.sA6.Otf})]})]})},sT=i(47457),sA=i(65897),sE=i(92686),s_=function(e){var n=e.font,i=e.onClick,r=e.onEditClick,t=e.onDeleteClick,s=(0,sE.x_)((null==n?void 0:n.fontFiles)||[]),o=(0,sE.B_)(n.fontFiles||[]),l=(0,sE.QP)(o,700)||700,a=(0,sE.Sd)(null==n?void 0:n.fontFiles);return(0,eo.jsxs)(S.K,{children:[(0,eo.jsx)(sg,{bg:"white",justifyContent:"flex-start",p:6,onClick:i,children:(0,eo.jsxs)(S.K,{maxW:"100%",children:[(0,eo.jsx)(sO,{fontWeight:l.toString(),isItalic:a,fontFamily:n.name,headingText:n.name}),(0,eo.jsx)(w.cC,{id:"B2DVf/",values:{styleCount:s},components:{0:(0,eo.jsx)(T.x,{color:"orange.600"}),1:(0,eo.jsx)(E.xu,{as:"span",mr:1}),2:(0,eo.jsx)(F.G,{icon:sT.e7})}})]})}),(0,eo.jsxs)(c.k,{children:[(0,eo.jsx)(T.x,{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:n.name}),(0,eo.jsx)(V.L,{}),(0,eo.jsxs)(K.v,{children:[(0,eo.jsx)(q.j,{as:X.h,isRound:!0,size:"sm",variant:"ghost",icon:(0,eo.jsx)(F.G,{icon:M.cN}),"aria-label":G.ag._({id:"eqqNgX"})}),(0,eo.jsxs)(Q.q,{children:[(0,eo.jsx)(J.s,{icon:(0,eo.jsx)(F.G,{icon:sA.Xc,fixedWidth:!0}),onClick:r,children:(0,eo.jsx)(w.cC,{id:"ePK91l"})}),(0,eo.jsx)($.R,{}),(0,eo.jsx)(J.s,{color:"red.500",icon:(0,eo.jsx)(F.G,{icon:em.$,fixedWidth:!0}),onClick:t,children:(0,eo.jsx)(w.cC,{id:"cnGeoo"})})]})]})]})]})},sF=i(37164),sN=i(4038);function sz(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function sL(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?sz(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sz(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var sR={existingFont:null,mode:"create",fontId:void 0,hasUploadedFonts:!1,fontName:"",uploadFontFiles:[]};function sU(e,n){switch(n.type){case"NEW_FONT_UPLOAD":case"RESET_FONT_UPLOAD":return sR;case"EDIT_EXISTING_FONT":var i=n.data.font;return{existingFont:i,mode:"edit",fontId:i.id,fontName:i.name,hasUploadedFonts:!0,uploadFontFiles:i.fontFiles.map(function(e){return{fontFile:e,uploadId:e.id,status:"existing",errorMessage:null}})};case"EDIT_FONT_NAME":var r=n.data.fontName;return sL(sL({},e),{},{fontName:r});case"UPLOAD_FONT_FILE_UPLOAD_STARTED":var t=n.data,s={fontFile:{id:t.uploadId,name:t.name,weight:t.weight,isItalic:t.isItalic,fileType:t.fileType},uploadId:t.uploadId,status:"uploading",errorMessage:null},o=e.fontName?e.fontName:t.familyName;return sL(sL({},e),{},{fontName:o,hasUploadedFonts:!0,uploadFontFiles:[].concat((0,n$.Z)(e.uploadFontFiles),[s])});case"UPLOAD_FONT_FILE_UPLOAD_ERROR":var l=n.data,a=l.uploadId,c=l.errorMessage;return sL(sL({},e),{},{uploadFontFiles:e.uploadFontFiles.map(function(e){return a===e.uploadId?sL(sL({},e),{},{status:"error",errorMessage:c}):e})});case"UPLOAD_FONT_FILE_UPLOAD_SUCCESS":var d=n.data,u=d.uploadId,x=d.sourceUrl;return sL(sL({},e),{},{uploadFontFiles:e.uploadFontFiles.map(function(e){if(u===e.uploadId){var n=sL(sL({},e.fontFile),{},{sourceUrl:x});return sL(sL({},e),{},{status:"created",errorMessage:null,fontFile:n})}return e})});case"EDIT_UPLOAD_FONT_FILE_WEIGHT":var h=n.data,p=h.uploadId,j=h.weight;return sL(sL({},e),{},{uploadFontFiles:e.uploadFontFiles.map(function(e){return e.uploadId===p?sL(sL({},e),{},{fontFile:sL(sL({},e.fontFile),{},{weight:j})}):e})});case"EDIT_UPLOAD_FONT_FILE_STYLE":var f=n.data,m=f.uploadId,g=f.isItalic;return sL(sL({},e),{},{uploadFontFiles:e.uploadFontFiles.map(function(e){return e.uploadId===m?sL(sL({},e),{},{fontFile:sL(sL({},e.fontFile),{},{isItalic:g})}):e})});case"DELETE_UPLOAD_FONT_FILE":var v=n.data.uploadId;return sL(sL({},e),{},{uploadFontFiles:e.uploadFontFiles.filter(function(e){return e.uploadId!==v})});default:throw Error("Unhandled action type: ".concat(n))}}var sM=i(31975),sW=i(31186),sG=function(e){var n=e.fontFiles,i=e.fontWeight,r=e.dispatch,t=(0,j.useState)(!1),s=t[0],o=t[1];if(!n)return null;var l=(0,eo.jsxs)(eo.Fragment,{children:[i," - ",(0,sv.d)()[i]]}),a=(0,sE.cC)(n),c=!!Object.keys(a).length;return(0,eo.jsx)(ik.x,{mt:8,children:(0,eo.jsxs)(ii.i,{colorScheme:"blackAlpha",mb:8,borderRadius:"md",children:[(0,eo.jsx)(ir.h,{children:(0,eo.jsx)(eO.kH,{placement:"top",isDisabled:!c,label:(0,eo.jsx)(w.cC,{id:"KXcsLu"}),shouldWrapChildren:!0,children:(0,eo.jsxs)(eO.NZ,{mb:"2",cursor:c?"help":void 0,color:c?"yellow.600":void 0,children:[c&&(0,eo.jsx)(F.G,{icon:sT.e7})," ",l]})})}),(0,eo.jsx)(io.p,{children:n.map(function(e){return(0,eo.jsx)(sB,{uploadFontFile:e,dispatch:r,duplicates:a,isHoveringOnADuplicate:s,setIsHoveringOnADuplicate:o},e.uploadId)})})]})})},sB=function(e){var n=e.uploadFontFile,i=e.duplicates,r=e.isHoveringOnADuplicate,t=e.setIsHoveringOnADuplicate,s=e.dispatch,o=(0,e0.p)(),l=n.fontFile,a=n.errorMessage,c=n.uploadId,d=void 0===l.sourceUrl&&!a,u=i[c],x=(0,sE.ZN)(Object.keys((0,sv.d)())),h=r&&u?"yellow.100":u?"yellow.50":"blackAlpha.50",p=(0,j.useCallback)(function(){s({type:"DELETE_UPLOAD_FONT_FILE",data:{uploadId:c}}),o({title:(0,eo.jsx)(w.cC,{id:"NHHKzo",values:{0:l.name}}),status:"info",duration:1e3,isClosable:!0,position:"top"})},[s,l.name,o,c]),f=u?l.isItalic?(0,eo.jsx)(w.cC,{id:"yvnLC0",values:{0:l.weight}}):(0,eo.jsx)(w.cC,{id:"QiSKej",values:{0:l.weight}}):"";return(0,eo.jsxs)(it.Tr,{minH:12,width:"100%",background:h,children:[(0,eo.jsx)(il.Td,{py:1,fontSize:"sm",textOverflow:"ellipsis",width:80,pl:0,children:(0,eo.jsxs)(k.U,{ml:4,spacing:3,children:[(0,eo.jsx)(sw,{fileExtension:l.fileType||N.sA6.Ttf}),(0,eo.jsx)(eO.kH,{placement:"right",label:f,children:(0,eo.jsxs)(S.K,{width:"100%",pl:1,spacing:0,cursor:u?"help":"auto",onMouseOver:function(){t(u)},onMouseOut:function(){t(!1)},children:[(0,eo.jsx)(eO.kH,{label:(0,eo.jsx)(w.cC,{id:"e3mFaa"}),placement:"top",isDisabled:!a,children:(0,eo.jsxs)(T.x,{color:a?"red.600":void 0,children:[l.name," ",d?(0,eo.jsx)(ey.$,{ml:1,size:"xs",color:"gray"}):a&&(0,eo.jsx)(E.xu,{as:"span",color:"red.600",children:(0,eo.jsx)(F.G,{icon:sT.e7})})]})}),u&&(0,eo.jsx)(T.x,{fontSize:"xs",color:"yellow.700",children:(0,eo.jsx)(w.cC,{id:"mAsucF"})})]})})]})}),(0,eo.jsx)(il.Td,{py:1,minW:12,children:(0,eo.jsx)(eO.kH,{"aria-label":G.ag._({id:"+7pOZT"}),label:(0,eo.jsx)(w.cC,{id:"+7pOZT"}),placement:"top",children:(0,eo.jsx)(E.xu,{children:(0,eo.jsx)(e8.X,{size:"sm",isChecked:l.isItalic,onChange:function(e){s({type:"EDIT_UPLOAD_FONT_FILE_STYLE",data:{uploadId:c,isItalic:e.target.checked}})},children:(0,eo.jsx)(T.x,{fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"pzutoc"})})})})})}),(0,eo.jsx)(il.Td,{minW:"16",py:"1",pr:"2",children:(0,eo.jsx)(sW.P,{bg:"revert",value:l.weight,size:"sm",onChange:function(e){s({type:"EDIT_UPLOAD_FONT_FILE_WEIGHT",data:{uploadId:c,weight:parseInt(e.target.value,10)}})},children:(0,eo.jsx)("optgroup",{label:G.ag._({id:"rgzUkd"}),children:x.map(function(e){return(0,eo.jsxs)("option",{value:e,children:[e," - ",(0,sv.d)()[e]]},e)})})})}),(0,eo.jsx)(il.Td,{py:"1",px:"0",children:(0,eo.jsx)(eO.kH,{placement:"top",label:(0,eo.jsx)(w.cC,{id:"9cmpNe"}),children:(0,eo.jsx)(X.h,{"aria-label":G.ag._({id:"9cmpNe"}),colorScheme:"red",icon:(0,eo.jsx)(F.G,{icon:em.$}),variant:"ghost",onClick:p})})})]})},sZ=function(e){var n=e.fontFiles,i=e.dispatch,r=(0,j.useMemo)(function(){return Object.fromEntries(Object.entries((0,sE.Av)(n)).map(function(e){var n=(0,eQ.Z)(e,2),i=n[0],r=n[1],t=(0,n$.Z)(r);return t.sort(function(e,n){return e.fontFile.fileType!==n.fontFile.fileType?e.fontFile.fileType===N.sA6.Ttf?-1:1:e.fontFile.isItalic!==n.fontFile.isItalic?!1===e.fontFile.isItalic?-1:1:0}),[i,t]}))},[n]);if(!n)return null;var t=(0,sE.ZN)(Object.keys((0,sv.d)()));return(0,eo.jsxs)(eo.Fragment,{children:[0===n.length&&(0,eo.jsx)(sC,{}),t.map(function(e){var n=r[e];return n?(0,eo.jsx)(sG,{fontFiles:n,dispatch:i,fontWeight:e},e):null})]})},sH=function(e){var n=e.fontName,i=e.fontFiles,r=e.dispatch,t=e.onFontFileUploadClick,s=(0,j.useCallback)(function(e){r({type:"EDIT_FONT_NAME",data:{fontName:e.target.value}})},[r]),o=0===n.length;return(0,eo.jsx)(e6.f,{children:(0,eo.jsxs)(ew.g,{align:"stretch",mb:"4",children:[(0,eo.jsxs)(c.k,{justifyContent:"space-between",gap:6,children:[(0,eo.jsxs)(nc.NI,{isInvalid:o,flex:2,children:[(0,eo.jsx)(nd.l,{children:(0,eo.jsx)(w.cC,{id:"5qk/OL"})}),(0,eo.jsx)(nu.I,{type:"text",placeholder:G.ag._({id:"NFz66a"}),value:n,onChange:s}),o&&(0,eo.jsx)(na.J1,{alignSelf:"flex-start",children:(0,eo.jsx)(w.cC,{id:"YtAPjw"})})]}),(0,eo.jsxs)(S.K,{mt:8,flex:1,children:[(0,eo.jsx)(A.z,{leftIcon:(0,eo.jsx)(F.G,{icon:sd.A$}),onClick:t,children:(0,eo.jsx)(w.cC,{id:"BLNAld"})}),(0,eo.jsx)(T.x,{textAlign:"center",fontSize:"xs",color:"gray.600",children:(0,eo.jsx)(w.cC,{id:"GYK/1H",values:{GAMMA_PROPER_NOUN:v.N6}})})]})]}),(0,eo.jsx)(sZ,{fontFiles:i,dispatch:r})]})})},sV=i(89596),sK=i(23418),sq=function(e){var n=e.uploadTip,i=e.children;return(0,eo.jsxs)(ew.g,{align:"stretch",children:[(0,eo.jsx)(c.k,{width:"100%",alignItems:"center",justifyContent:"center",minH:32,userSelect:"none",background:"gray.50",borderRadius:"md",p:4,mb:1,children:(0,eo.jsx)(S.K,{spacing:0,children:i})}),(0,eo.jsx)(T.x,{color:"gray.700",fontSize:"sm",children:n})]})},sX=function(){return(0,eo.jsx)(e$.b,{status:"warning",margin:"0 auto",maxW:412,lineHeight:"var(--chakra-lineHeights-base)",children:(0,eo.jsx)(T.x,{fontSize:"xs",color:"yellow.800",children:(0,eo.jsx)(w.cC,{id:"ULVfg0",components:{0:(0,eo.jsx)("strong",{})}})})})},sY=function(e){var n=e.onFontFileUploadClick;return(0,eo.jsx)(e6.f,{children:(0,eo.jsxs)(ew.g,{mb:"4",spacing:"8",borderRadius:"md",children:[(0,eo.jsxs)(D.X,{textAlign:"center",size:"md",fontWeight:"600",children:[(0,eo.jsx)("span",{role:"img","aria-label":"idea",children:"\uD83D\uDCA1"})," ",(0,eo.jsx)(w.cC,{id:"O70dt2"})]}),(0,eo.jsxs)(t0.M,{columns:{base:1,md:3},spacing:4,width:"100%",children:[(0,eo.jsx)(sq,{uploadTip:(0,eo.jsx)(eo.Fragment,{children:(0,eo.jsx)(w.cC,{id:"F/H43B",components:{0:(0,eo.jsx)("strong",{})}})}),children:(0,eo.jsx)(D.X,{fontSize:"3xl",fontWeight:"bold",children:"Inter"})}),(0,eo.jsxs)(sq,{uploadTip:(0,eo.jsx)(eo.Fragment,{children:(0,eo.jsx)(w.cC,{id:"b2oYEF",components:{0:(0,eo.jsx)("strong",{})}})}),children:[(0,eo.jsxs)(T.x,{children:["inter-",(0,eo.jsx)("strong",{children:"regular"}),".ttf"," ",(0,eo.jsx)(E.xu,{color:"green.400",as:"span",children:(0,eo.jsx)(F.G,{icon:sK.LE})})]}),(0,eo.jsxs)(T.x,{children:["inter-",(0,eo.jsx)("strong",{children:"italic"}),".ttf"," ",(0,eo.jsx)(E.xu,{color:"green.400",as:"span",children:(0,eo.jsx)(F.G,{icon:sK.LE})})]}),(0,eo.jsxs)(T.x,{children:["inter-",(0,eo.jsx)("strong",{children:"bold"}),".ttf"," ",(0,eo.jsx)(E.xu,{color:"green.400",as:"span",children:(0,eo.jsx)(F.G,{icon:sK.LE})})]})]}),(0,eo.jsxs)(sq,{uploadTip:(0,eo.jsx)(eo.Fragment,{children:(0,eo.jsx)(w.cC,{id:"xjFrIG",components:{0:(0,eo.jsx)("strong",{}),1:(0,eo.jsx)("strong",{})}})}),children:[(0,eo.jsxs)(T.x,{children:[(0,eo.jsx)(T.x,{color:"gray.600",as:"span",children:(0,eo.jsx)(F.G,{icon:sV.faFileLines})})," ","...-regular",(0,eo.jsx)(sb.E,{colorScheme:"purple",children:".ttf"})]}),(0,eo.jsxs)(T.x,{children:[(0,eo.jsx)(T.x,{color:"gray.600",as:"span",children:(0,eo.jsx)(F.G,{icon:sV.faFileLines})})," ","...-regular",(0,eo.jsx)(sb.E,{colorScheme:"pink",children:".otf"})]})]})]}),(0,eo.jsxs)(ew.g,{spacing:4,children:[(0,eo.jsx)(A.z,{leftIcon:(0,eo.jsx)(F.G,{icon:sd.A$}),variant:"solid",onClick:n,children:(0,eo.jsx)(w.cC,{id:"NQrqa1"})}),(0,eo.jsx)(T.x,{textAlign:"center",fontSize:"xs",color:"gray.600",children:(0,eo.jsx)(w.cC,{id:"GYK/1H",values:{GAMMA_PROPER_NOUN:v.N6}})}),(0,eo.jsx)(sX,{})]})]})})},sQ=i(8980),sJ=i(35541);function s$(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}var s0=function(e){var n=e.uploadFontFiles.every(function(e){return("created"===e.status||"existing"===e.status)&&e.fontFile.sourceUrl});return e.fontName&&n},s1=function(e){var n=e.onClose,i=e.orgId,r=e.font,t=j.useReducer(sU,sR),s=(0,eQ.Z)(t,2),o=s[0],l=s[1],a=(0,e0.p)();(0,j.useEffect)(function(){r?l({type:"EDIT_EXISTING_FONT",data:{font:r}}):l({type:"NEW_FONT_UPLOAD"})},[l,r]);var d=(0,j.useState)(!1),u=d[0],x=d[1],h=s0(o),p=sx(i),f=(0,sE.UK)(o),m=(0,j.useCallback)(function(){l({type:"RESET_FONT_UPLOAD"}),n()},[l,n]),g=(0,j.useCallback)(function(e){var n;Promise.all(e.map((n=(0,nz.Z)(nU().mark(function e(n){var r,t,s,o;return nU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,sF.x0)(),e.prev=1,e.next=4,(0,sE.zn)(n);case 4:t=e.sent,l({type:"UPLOAD_FONT_FILE_UPLOAD_STARTED",data:function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?s$(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s$(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}({uploadId:r,fileType:(0,sE.CZ)(n.name),name:n.name},t)}),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),console.error("[FontUploadModal] There was an error parsing ".concat(n.name),n,e.t0),a({title:(0,eo.jsx)(w.cC,{id:"zr0u7y",values:{0:n.name}}),description:(0,eo.jsx)(w.cC,{id:"SuKrYu"}),status:"error",isClosable:!0,position:"top",duration:null}),e.abrupt("return");case 13:return e.prev=13,e.next=16,(0,sM.uO)(function(){return(0,sQ.m)(i,n)},{maxRetries:3,timeout:2e4});case 16:s=e.sent,l({type:"UPLOAD_FONT_FILE_UPLOAD_SUCCESS",data:{uploadId:r,sourceUrl:s}}),e.next=24;break;case 20:e.prev=20,e.t1=e.catch(13),o=e.t1 instanceof Error?e.t1.message:"There was an error uploading ".concat(n.name),l({type:"UPLOAD_FONT_FILE_UPLOAD_ERROR",data:{uploadId:r,errorMessage:o}});case 24:case"end":return e.stop()}},e,null,[[1,8],[13,20]])})),function(e){return n.apply(this,arguments)}))).catch(function(e){console.error("[FontUploadModal] error while uploading font files",e)})},[l,i,a]),v=(0,sJ.E)({handleFilesCallback:g,multiple:!0,accept:sN.Ge.join(",")}),b=v.onClick,C=v.inputElement,y=(0,j.useCallback)(function(){x(!0),p(o).then(function(){"create"===o.mode?a({title:(0,eo.jsx)(w.cC,{id:"MXSt4t",values:{0:o.fontName}}),status:"success",duration:1e3,isClosable:!0,position:"top"}):"edit"===o.mode&&a({title:(0,eo.jsx)(w.cC,{id:"P2ieni",values:{0:o.fontName}}),status:"success",duration:2e3,isClosable:!0,position:"top"})}).catch(function(e){a({title:"edit"===o.mode?(0,eo.jsx)(w.cC,{id:"K45zvU"}):(0,eo.jsx)(w.cC,{id:"FL7N1y",values:{0:o.fontName}}),status:"error",duration:5e3,isClosable:!0,position:"top"}),console.error("[FontUploadModal] error ".concat("edit"===o.mode?"editing":"creating"," font"),e)}).finally(function(){x(!1),n()})},[n,p,o,a]),O=(0,sE.x_)(o.uploadFontFiles.map(function(e){return e.fontFile}));return(0,eo.jsxs)(e1.u_,{isOpen:!0,closeOnOverlayClick:!1,onClose:m,size:"3xl",children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:o.hasUploadedFonts?o.fontName?o.fontName:(0,eo.jsx)(w.cC,{id:"yT14LZ"}):(0,eo.jsx)(w.cC,{id:"O7HGjV"})}),(0,eo.jsx)(e4.o,{isDisabled:u}),(0,eo.jsx)(eC.i,{mb:"4"}),C,o.hasUploadedFonts?(0,eo.jsx)(sH,{fontFiles:o.uploadFontFiles,fontName:o.fontName,dispatch:l,onFontFileUploadClick:b}):(0,eo.jsx)(sY,{onFontFileUploadClick:b}),(0,eo.jsx)(eC.i,{mb:1}),(0,eo.jsx)(e7.m,{children:o.hasUploadedFonts?(0,eo.jsxs)(c.k,{flex:1,mb:"2",alignItems:"center",justifyContent:"space-between",children:[(0,eo.jsx)(T.x,{children:(0,eo.jsx)(w.cC,{id:"yDnXlV",values:{numOfStyles:O}})}),(0,eo.jsxs)(e9.h,{children:[(0,eo.jsx)(A.z,{variant:"ghost",onClick:n,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})}),(0,eo.jsx)(A.z,{isDisabled:!h||!f,variant:"solid",onClick:y,isLoading:u,children:"edit"===o.mode?(0,eo.jsx)(w.cC,{id:"tfDRzk"}):(0,eo.jsx)(w.cC,{id:"N/mjN3"})})]})]}):(0,eo.jsx)(A.z,{variant:"ghost",onClick:n,children:(0,eo.jsx)(w.cC,{id:"dEgA5A"})})})]})]})},s2=i(63248),s5=function(e){var n=e.label,i=e.icon,r=e.onClick;return(0,eo.jsx)(sg,{bg:"gray.50",onClick:r,children:(0,eo.jsxs)(S.K,{align:"center",children:[(0,eo.jsx)(T.x,{fontSize:"x-large",children:i}),(0,eo.jsx)(T.x,{children:n}),(0,eo.jsx)(e_.U,{productFeature:"custom_fonts"})]})})},s3=function(e){var n=e.isSidebarVisible,i=e.setIsSidebarVisible;(0,su.G)("customFonts");var r=(0,l.SE)().currentWorkspace,t=(0,eE.zc)().openUpsellModal,s=(0,eN.lo)(),o=(0,j.useState)(null),a=o[0],c=o[1],d=(0,N.LkU)({variables:{workspaceId:null==r?void 0:r.id,archived:!1},skip:!r}),u=d.data,x=d.error,h=d.loading,p=(0,O.q)(),f=p.isOpen,m=p.onOpen,g=p.onClose,v=(0,O.q)(),b=v.isOpen,y=v.onOpen,k=v.onClose,I=(0,O.q)(),P=I.isOpen,A=I.onOpen,_=I.onClose,z=(0,j.useCallback)(function(e,n){return function(){if(!s){t({segmentEvent:C.AA.GAMMA_PRO_UPSELL_CALLOUT_CUSTOM_FONTS});return}c(e),"edit"===n?m():(y(),g()),_()}},[s,t,y,_,m,g]),L=(0,j.useCallback)(function(){if(!s){t({segmentEvent:C.AA.GAMMA_PRO_UPSELL_CALLOUT_CUSTOM_FONTS});return}c(null),m()},[s,t,m]),R=(0,j.useCallback)(function(e){return function(){c(e),A()}},[A]),U=rL[rz.FONTS],M=U.displayName,W=U.description,G=U.ariaLabel,B=U.icon,Z=((null==u?void 0:u.fonts)||[]).filter(function(e){return!e.archived}),H=Z.map(function(e){return{id:e.id,name:e.name,url:e.cssUrl}}),V=Z.length;return(0,eo.jsxs)(E.xu,{w:"100%","data-testid":"fonts-view-container",children:[(0,eo.jsx)(s2.J,{fonts:H}),(0,eo.jsxs)(rW,{isSidebarVisible:n,setIsSidebarVisible:i,children:[(0,eo.jsxs)(D.X,{fontSize:"lg",fontWeight:"600","data-testid":"fonts-view-header",children:[B&&(0,eo.jsx)(F.G,{icon:B,"aria-label":G})," ",(0,eo.jsx)(T.x,{as:"span",ml:2,children:M})]}),(0,eo.jsx)(T.x,{fontSize:"md",mt:"2",mb:"6",color:"gray.600",children:W})]}),(0,eo.jsxs)(S.K,{children:[(0,eo.jsx)(T.x,{color:"gray.600",children:(0,eo.jsx)(w.cC,{id:"GOR0mG",values:{numOfFonts:V}})}),(0,eo.jsxs)(t0.M,{columns:{base:1,md:2,xl:3,"2xl":4},spacing:6,children:[(0,eo.jsx)(s5,{label:(0,eo.jsx)(w.cC,{id:"O7HGjV"}),icon:(0,eo.jsx)(F.G,{icon:sd.A$}),onClick:L}),!h&&!x&&Z.map(function(e){return(0,eo.jsx)(s_,{font:e,onEditClick:z(e,"edit"),onDeleteClick:z(e,"delete"),onClick:R(e)},e.id)})]})]}),f&&r&&(0,eo.jsx)(s1,{onClose:g,orgId:r.id,font:a}),b&&r&&a&&(0,eo.jsx)(sp,{onClose:k,orgId:r.id,font:a}),P&&a&&(0,eo.jsx)(sD,{onClose:_,onEditClick:z(a,"edit"),onDeleteClick:z(a,"delete"),font:a})]})},s4=i(26384),s6=i(1368),s8=function(e){var n=e.title,i=e.body,r=e.accentColor,t=e.href,s=e.icon,o=e.isNew,l=e.onClick;return(0,eo.jsx)(en(),{href:t,passHref:!0,legacyBehavior:!0,children:(0,eo.jsx)(Z.P,{as:eA.r,position:"relative",padding:"6",border:"2px solid",borderColor:"gray.100",borderRadius:"8",cursor:"pointer",boxSizing:"border-box",background:"white",shadow:"sm",transitionProperty:"common",transitionDuration:"normal",_hover:{borderColor:"".concat(r,".400"),boxShadow:"xl",textDecoration:"none"},role:"group",onClick:l,children:(0,eo.jsxs)(S.K,{children:[(0,eo.jsx)(c.k,{height:"40",mb:"2",justify:"center",alignItems:"center",borderRadius:"md",top:0,left:0,bottom:0,right:0,background:"".concat(r,".100"),fontSize:"3rem",color:"".concat(r,".300"),transitionProperty:"all",transitionDuration:"normal",_groupHover:{color:"".concat(r,".400"),fontSize:"3.125rem"},children:(0,eo.jsx)(E.xu,{children:(0,eo.jsx)(F.G,{icon:s,className:"fa-xl"})})}),(0,eo.jsxs)(T.x,{mt:2,fontSize:"xl",fontWeight:"bold",lineHeight:"short",children:[n,o&&(0,eo.jsxs)(eo.Fragment,{children:[" ",(0,eo.jsx)(I.C,{fontSize:"0.75em",colorScheme:"green",children:(0,eo.jsx)(w.cC,{id:"YBt9YP"})})]})]}),(0,eo.jsx)(T.x,{fontSize:"sm",children:i})]})})})},s7=i(9809),s9=i(32993),oe=i(50679),on=i(45338),oi={createFromAI:{title:(0,eo.jsx)(w.cC,{id:"ks31i0"}),body:(0,eo.jsx)(w.cC,{id:"y3x+dr"}),colorScheme:"pink",icon:t$.dd,action:"createFromAI",isNew:!0},createDeck:{title:(0,eo.jsx)(w.cC,{id:"17dkjV"}),body:(0,eo.jsx)(w.cC,{id:"EHsEUm"}),colorScheme:"purple",icon:on.RL,action:"blankDeck",isNew:!1},viewTemplates:{title:(0,eo.jsx)(w.cC,{id:"M4C2N9"}),body:(0,eo.jsx)(w.cC,{id:"hO9+rY"}),colorScheme:"salmon",icon:oe.BD,action:"templates",isNew:!1},tipsAndTricks:{title:(0,eo.jsx)(w.cC,{id:"ZOGX27"}),body:(0,eo.jsx)(w.cC,{id:"mgn8Bj"}),colorScheme:"teal",icon:s9.s2,action:"welcomeDoc",isNew:!1},inspiration:{title:(0,eo.jsx)(w.cC,{id:"IR0bRg"}),body:(0,eo.jsx)(w.cC,{id:"QbmT2X"}),colorScheme:"orchid",icon:s7.cn,action:"inspiration",isNew:!1}},or="getStarted",ot=function(){var e=(0,h.useRouter)(),n=e.push,i=e.query,r=e.pathname,t=(0,tN.c)(),s=(0,eQ.Z)(t,1)[0],o=!!i[or],l=(0,j.useCallback)(function(e){var i=new URL(window.location.href).searchParams;i.delete(or),e?e.startsWith("/#")?p().replace(e):((0,s6.lO)({query:Object.fromEntries(i.entries())}),n(e)):p().replace({pathname:r,query:i.toString()},void 0,{shallow:!0})},[r,n]),a=(0,j.useCallback)(function(){var e=new URL(window.location.href).searchParams;e.delete(or),(0,s6.lO)({query:Object.fromEntries(e.entries())}),s({source:"get_started_modal"})},[s]);return o?(0,eo.jsx)(ol,{onClose:l,onCreateDoc:a}):null},os=function(e){var n=e.isMobile,i=e.aiWizardEnabled,r="DOWN"==e.openAiStatus;return n?[].concat((0,n$.Z)(i&&!r?[oi.createFromAI]:[]),[oi.tipsAndTricks,oi.inspiration]):[].concat((0,n$.Z)(i&&!r?[oi.createFromAI]:[]),[oi.createDeck,oi.viewTemplates,oi.tipsAndTricks]).slice(0,3)},oo={createFromAI:"create_from_ai",welcomeDoc:"welcome_doc",templates:"templates",inspiration:"inspiration",blankDeck:"create_doc"},ol=function(e){var n,i,r=e.onClose,t=e.onCreateDoc,s=(0,C.z$)(),o=(0,th._)(tp.H.welcomeDocId,null),a=(0,eQ.Z)(o,1)[0],c=(0,eD.ye)("aiWizard"),d=(0,eD.ye)("openAiStatus"),u=(0,eY.i)(["full","full","3xl","4xl"]),x=(0,l.SE)(),h=x.user,p=x.currentWorkspace,f=x.setSettings,m=null==h?void 0:h.id,g=os({isMobile:(0,iX.s2)(),aiWizardEnabled:c,openAiStatus:d});(0,j.useEffect)(function(){null==f||f({remove:["showGetStarted"]})},[f]);var v=(0,N.HHH)({variables:{workspaceId:null==p?void 0:p.id,first:1,createdBy:m,sortBy:{field:N.IX5.CreatedTime,direction:N.SrV.Asc}},skip:!!(!m||a)}),b=v.data,y=v.loading,O=v.called,S=a||(null==h?void 0:null===(n=h.settings)||void 0===n?void 0:n.welcomeDocId)||(null==b?void 0:null===(i=b.docs.edges[0])||void 0===i?void 0:i.node.id),I=(0,j.useCallback)(function(e){switch(e){case"welcomeDoc":S?r("/docs/".concat(S)):console.warn("[StartingModal] No welcomeDoc");break;case"templates":r("/#templates");break;case"inspiration":r("/#inspiration");break;case"blankDeck":t();break;case"createFromAI":r(t5.ET);break;default:console.warn("[StartingModal] Unknown action",e)}},[r,t,S]);return(0,eo.jsxs)(e1.u_,{isOpen:!0,size:u,trapFocus:!1,onClose:function(){null==s||s.track(C.AA.GET_STARTED_CLICKED,{target:"dismiss",variation:"new"}),r()},children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"h0sjMM"})}),(0,eo.jsx)(e4.o,{}),(0,iX.s2)()?(0,eo.jsx)(E.xu,{padding:"4",background:"salmon.100",mb:"4",children:(0,eo.jsxs)(k.U,{spacing:"5",paddingLeft:"2",children:[(0,eo.jsx)(E.xu,{color:"salmon.600",children:(0,eo.jsx)(F.G,{icon:s4.tc,className:"fa-xl"})}),(0,eo.jsxs)(ew.g,{align:"flex-start",spacing:"0",children:[(0,eo.jsx)(T.x,{fontWeight:"600",fontSize:"lg",children:(0,eo.jsx)(w.cC,{id:"2aP3e7"})}),(0,eo.jsx)(T.x,{fontSize:"sm",children:(0,eo.jsx)(w.cC,{id:"WsGA8K"})})]})]})}):(0,eo.jsx)(eC.i,{mb:"4"}),(0,eo.jsx)(e6.f,{children:(0,eo.jsx)(t0.M,{columns:[1,1,3],spacing:5,children:g.map(function(e,n){var i=e.icon,r=e.colorScheme,t=e.title,o=e.body,l=e.action,c=e.isNew;if("welcomeDoc"===l&&!a&&O&&!y&&!b)return console.error("[GetStartedModalContent] Unexpectedly cant find a welcomeDocId"),null;var d="blankDeck"===l?"/new":"templates"===l?"/#templates":"inspiration"===l?"/#inspiration":"welcomeDoc"===l?"/docs/".concat(S):"createFromAI"===l?t5.ET:"/";return(0,eo.jsx)(s8,{accentColor:r||"trueblue",title:t,body:o,href:d,icon:i,isNew:c,onClick:function(e){null==s||s.track(C.AA.GET_STARTED_CLICKED,{target:oo[l],variation:"new"}),e.metaKey||(e.preventDefault(),I(l))}},n)})})}),(0,eo.jsx)(e7.m,{})]})]})},oa=i(2920),oc=i(65189),od=function(e){var n=e.deck,i=(0,oa.Lq)(n),r=(0,ib.Gn)({docId:i,path:"example"});return(0,eo.jsx)(rZ.F7,{title:n.title||"",menuEnabled:!0,href:r,id:i,createdTime:new Date().toISOString(),thumbnailImageUrl:{src:null==n?void 0:n.previewImageUrl,fallbackSrc:er.Z.src},NextLink:en(),onFavorite:void 0,isTrashAndRestoreEnabled:!1,createdByName:(null==n?void 0:n.authorDisplayName)||"Gamma",createdByProfileImageUrl:(null==n?void 0:n.authorImageUrl)||oc.Z.src,isDuplicateEnabled:!1},i)},ou=function(e){var n=e.category;if(!n)return(0,eo.jsx)(eo.Fragment,{});var i=n.decks;return(0,eo.jsxs)(E.xu,{mb:8,children:[(0,eo.jsx)(tL.Im,{category:n}),(0,eo.jsx)(rZ.Gd,{children:null==i?void 0:i.map(function(e){return(0,eo.jsx)(od,{deck:e},e.docId)})})]},n.id)},ox=function(e){var n=e.isSidebarVisible,i=e.setIsSidebarVisible,r=(0,tL.jn)(),t=r.categories,s=r.loading,o=rL[rz.INSPIRATION],l=o.displayName,a=o.ariaLabel,c=(o.description,o.icon);return(0,eo.jsxs)(E.xu,{w:"100%","data-testid":"inspiration-view-container",children:[(0,eo.jsx)(rW,{isSidebarVisible:n,setIsSidebarVisible:i,children:(0,eo.jsxs)(D.X,{fontSize:"lg",fontWeight:"600","data-testid":"docs-view-header",children:[c&&(0,eo.jsx)(F.G,{icon:c,"aria-label":a})," ",(0,eo.jsx)(T.x,{as:"span",ml:2,children:l})]})}),s&&(0,eo.jsx)(E.xu,{width:"100%","data-testid":"inspiration-skeleton",children:(0,eo.jsxs)(rZ.Gd,{children:[(0,eo.jsx)(Z.P,{bg:"linen.50",borderRadius:"5px",height:"240px",as:eH.O},1),(0,eo.jsx)(Z.P,{bg:"linen.50",borderRadius:"5px",height:"240px",as:eH.O},2),(0,eo.jsx)(Z.P,{bg:"linen.50",borderRadius:"5px",height:"240px",as:eH.O},3)]})}),!s&&t&&(null==t?void 0:t.length)>0&&(null==t?void 0:t.map(function(e){return(0,eo.jsx)(ou,{category:e},e.id)}))]})},oh=function(){return(0,eo.jsxs)(c.k,{flex:1,w:"100%",direction:"column",children:[(0,eo.jsx)(eH.O,{w:"50%",h:"48px",mb:4}),(0,eo.jsx)(E.xu,{w:"100%",children:(0,eo.jsxs)(_.r,{templateColumns:["repeat(2, 1fr)","repeat(3, 1fr)"],gap:6,children:[(0,eo.jsx)(Z.P,{bg:"linen.50",borderRadius:"5px",height:"200px",as:eH.O}),(0,eo.jsx)(Z.P,{bg:"linen.50",borderRadius:"5px",height:"200px",as:eH.O}),(0,eo.jsx)(Z.P,{bg:"linen.50",borderRadius:"5px",height:"200px",as:eH.O})]})})]})},op=function(e){var n=e.category;if(!n)return(0,eo.jsx)(eo.Fragment,{});var i=n.decks;return(0,eo.jsxs)(E.xu,{mb:8,children:[(0,eo.jsx)(tL.Im,{category:n}),(0,eo.jsx)(rZ.Gd,{children:null==i?void 0:i.map(function(e){return(0,eo.jsx)(tL.nL,{deck:e},e.docId)})})]},n.id)},oj=function(e){var n=e.isSidebarVisible,i=e.setIsSidebarVisible,r=(0,tL.tk)(),t=r.categories,s=r.loading,o=(0,O.q)({id:"template-browser-modal"}),l=o.isOpen,a=(o.onOpen,o.onClose);if((0,iX.s2)())return p().replace("/"),null;var c=rL[rz.TEMPLATES],d=c.displayName,u=c.ariaLabel,x=c.icon;return(0,eo.jsxs)(E.xu,{w:"100%","data-testid":"templates-view-container",children:[(0,eo.jsx)(rW,{isSidebarVisible:n,setIsSidebarVisible:i,children:(0,eo.jsxs)(D.X,{fontSize:"lg",fontWeight:"600","data-testid":"docs-view-header",children:[x&&(0,eo.jsx)(F.G,{icon:x,"aria-label":u})," ",(0,eo.jsx)(T.x,{as:"span",ml:2,children:d})]})}),s&&(0,eo.jsx)(oh,{}),!s&&t&&(null==t?void 0:t.length)>0&&(null==t?void 0:t.map(function(e){return(0,eo.jsx)(op,{category:e},e.id)})),l&&(0,eo.jsx)(tL.UB,{isOpen:!0,onClose:a})]})},of=i(26006),om=i(53865),og=i(78050),ov=i(82634),ob=i(4685),oC=i(35910),oy=function(e){var n=e.label,i=e.icon,r=e.onClick;return(0,eo.jsx)(c.k,{alignItems:"center",justifyContent:"center",border:"1px solid",borderColor:"gray.200",borderRadius:"lg",background:"gray.50",minH:36,minW:"100%",_hover:{background:"white",color:"trueblue.600",cursor:"pointer"},onClick:r,children:(0,eo.jsxs)(S.K,{textAlign:"center",children:[(0,eo.jsx)(T.x,{fontSize:"xl",children:i}),(0,eo.jsx)(T.x,{children:n})]})})};function ow(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}var oO=function(e){var n=e.isSidebarVisible,i=e.setIsSidebarVisible,r=(0,j.useState)("custom"),t=r[0],s=r[1],o=(0,ob.g)(),a=(0,eQ.Z)(o,2),c=a[0],d=a[1],u=(0,l.SE)().currentWorkspace,x=(0,t3.M)({id:"themeEditor"}),h=x.isOpen,p=x.onOpen,f=x.onClose,m=(0,j.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?n?d({type:"SET_NEW_THEME_FOR_SELECTING",data:{theme:e}}):d({type:"SET_THEME_EDITING",data:{theme:e}}):d({type:"NEW_BLANK_THEME"}),p()},[d,p]),g=(0,j.useCallback)(function(){d({type:"THEME_RESET"}),f()},[d,f]),v=(0,N.BCl)({variables:{workspaceId:null==u?void 0:u.id,archived:!1},skip:!u}),b=v.data,C=v.loading,y=v.called,O=(0,N.BCl)({variables:{workspaceId:null,archived:!1}}).data,S=(0,N.T_w)({variables:{workspaceId:null==u?void 0:u.id,archived:!0},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),I=(0,eQ.Z)(S,2),P=I[0],_=I[1],z=_.data,L=_.loading;(0,j.useEffect)(function(){"archived"===t&&u&&P()},[u,t,P]);var R=(null==z?void 0:z.themes)||[],U=(null==b?void 0:b.themes)||[],M=(null==O?void 0:O.themes)||[],W=(0,j.useMemo)(function(){return(0,om.QB)(null==O?void 0:O.themes)},[O]),B=rL[rz.THEMES],H=B.displayName,V=B.description,X=B.ariaLabel,Y=B.icon,J=(0,eY.i)({base:!0,xl:!1}),$=null===om.oN||void 0===om.oN?void 0:om.oN[t],ee=om.rd.map(function(e){return function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?ow(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ow(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}({key:e},om.oN[e])}),en="custom"===t?U:"archived"===t?R:M;return(0,eo.jsxs)(E.xu,{w:"100%","data-testid":"themes-view-container",children:[(0,eo.jsx)(oC.Y,{}),(0,eo.jsxs)(rW,{isSidebarVisible:n,setIsSidebarVisible:i,children:[(0,eo.jsxs)(D.X,{fontSize:"lg",fontWeight:"600","data-testid":"themes-view-header",children:[Y&&(0,eo.jsx)(F.G,{icon:Y,"aria-label":X})," ",(0,eo.jsx)(T.x,{as:"span",ml:2,children:H})]}),(0,eo.jsx)(T.x,{fontSize:"md",mt:"2",mb:"6",color:"gray.600",children:V}),(0,eo.jsx)(r6.E,{id:"filter-by-dropdown",zIndex:"3",width:["100%","auto"],mt:[4,0],children:J?(0,eo.jsxs)(K.v,{closeOnSelect:!0,children:[(0,eo.jsx)(q.j,{as:A.z,variant:"ghost",size:"sm",rightIcon:(0,eo.jsx)(F.G,{icon:iN.pt}),fontWeight:"600",color:"gray.700",leftIcon:(0,eo.jsx)(F.G,{icon:tb.G_}),children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(E.xu,{boxSize:4,children:$.icon}),(0,eo.jsx)(E.xu,{children:$.label})]})}),(0,eo.jsx)(Q.q,{minWidth:"240px",children:(0,eo.jsx)(eK._,{defaultValue:t,title:G.ag._({id:"MwX53Z"}),type:"radio",onChange:function(e){s(e)},value:t,children:ee.map(function(e){return(0,eo.jsx)(eq.i,{value:e.key,children:(0,eo.jsxs)(k.U,{children:[(0,eo.jsx)(E.xu,{w:5,children:e.icon}),(0,eo.jsx)(E.xu,{children:e.label})]})},e.key)})})})]}):ee.map(function(e){var n=e.key===t;return(0,eo.jsx)(r6.U,{children:(0,eo.jsx)(A.z,{fontWeight:"600",color:n?"trueblue.500":"gray.600",bg:n?"trueblue.50":"transparent",size:"sm",leftIcon:e.icon,variant:"ghost",onClick:function(){return s(e.key)},children:e.label})},e.key)})})]}),!y||C||L?(0,eo.jsx)(E.xu,{width:"100%","data-testid":"themes-skeleton",children:(0,eo.jsx)(t0.M,{columns:[1,2,2,3,5],spacing:6,children:[1,2,3,4,5,6,7,8].map(function(e){return(0,eo.jsx)(Z.P,{bg:"linen.50",borderRadius:"5px",height:"144px",as:eH.O},e)})})}):0===en.length&&"custom"!==t?(0,eo.jsx)(eo.Fragment,{children:(0,eo.jsx)(w.cC,{id:"h+6hB/"})}):(0,eo.jsx)(eo.Fragment,{children:(0,eo.jsx)(ok,{themes:en,openThemeEditor:m,type:t,defaultNewTheme:W})}),(0,eo.jsx)(og.z,{isOpen:h,onClose:g,state:c,dispatch:d,disableDrawerTransition:!0})]})},ok=function(e){var n=e.themes,i=e.type,r=e.defaultNewTheme,t=e.openThemeEditor,s="custom"===i,o=(0,j.useCallback)(function(){t&&r&&t(r,!0)},[t,r]),l=(0,j.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n){e?null==t||t((0,om.mg)(n,!0)):null==t||t(n)}},[t]);return(0,eo.jsx)(S.K,{children:(0,eo.jsxs)(t0.M,{columns:[1,2,2,3,5],spacing:6,children:[s&&(0,eo.jsx)(oy,{label:(0,eo.jsx)(w.cC,{id:"FiwgR9"}),icon:(0,eo.jsx)(F.G,{icon:of.EQ}),onClick:o}),(0,n$.Z)(n).sort(om.qb).map(function(e){return(0,eo.jsx)(ov.o,{type:i,theme:e,isChecked:!1,onEditClick:l(!s),onThemeClicked:s?l(!s):void 0},e.id)})]})})},oS=i(55114),oI=i(10498),oD=function(){var e=(0,O.q)(),n=e.onClose,i=e.onOpen,r=e.isOpen,t=(0,l.SE)(),s=t.user,o=t.isUserLoading,a=!!(s&&!o&&!s.jobFunction);return((0,j.useEffect)(function(){a&&setTimeout(i,1e3)},[a,i]),r)?(0,eo.jsxs)(e1.u_,{isOpen:r,onClose:n,closeOnEsc:!1,closeOnOverlayClick:!1,size:"lg",children:[(0,eo.jsx)(e2.Z,{}),(0,eo.jsxs)(e5.h,{children:[(0,eo.jsx)(e3.x,{children:(0,eo.jsx)(w.cC,{id:"H8aFPr"})}),(0,eo.jsx)(e6.f,{children:(0,eo.jsxs)(S.K,{children:[(0,eo.jsx)(c.k,{height:32,justifyContent:"center",background:"radial-gradient(circle at center, var(--chakra-colors-pink-200) 0, var(--chakra-colors-salmon-200) 110%)",borderRadius:"md",pt:4,px:4,children:(0,eo.jsx)(P.E,{src:oI.Z.src,alt:"Sal floating on a pink gradient"})}),(0,eo.jsx)(T.x,{fontSize:"lg",pb:0,pt:4,children:(0,eo.jsx)(w.cC,{id:"arCM97"})}),(0,eo.jsxs)(T.x,{fontSize:"sm",color:"gray.500",textAlign:"center",children:["(",(0,eo.jsx)(w.cC,{id:"H50C1I"})," ",(0,eo.jsx)("span",{role:"img","aria-label":"stopwatch",children:"⏱"}),")"]}),(0,eo.jsx)(oS.a,{context:"modal",onSuccess:n})]})})]})]}):(0,eo.jsx)(eo.Fragment,{})};function oP(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}var oT=function(e){var n=e.currentChannelId,i=e.channelPreview,r=e.workspaceId,t=e.joinChannel,s=e.toastId,o=(0,e0.p)();return s?(0,eo.jsxs)(c.k,{bg:"white",p:3,px:6,m:4,justify:"center",align:"center",borderRadius:"md",shadow:"md",children:[(0,eo.jsx)(T.x,{fontSize:"sm",mr:4,children:(0,eo.jsx)(w.cC,{id:"HPr8I3",values:{0:i.name},components:{0:(0,eo.jsx)("strong",{})}})}),(0,eo.jsxs)(e9.h,{size:"sm",alignItems:"center",children:[(0,eo.jsx)(A.z,{maxW:"xs",display:"block",noOfLines:1,onClick:function(){if(!n||!i){console.error("No active channel id");return}t({channel:function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?oP(Object(i),!0).forEach(function(n){(0,ea.Z)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oP(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}({},i),workspaceId:r}).then(function(){o.close(s)})},variant:"solid",children:(0,eo.jsx)(w.cC,{id:"0wdd7X"})}),(0,eo.jsx)(X.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":G.ag._({id:"1QfxQT"}),icon:(0,eo.jsx)(eb.T,{}),onClick:function(){o.close(s),p().replace("/#".concat(r0))}})]})]}):null},oA=function(e){var n=e.currentChannelId,i=e.activeChannel,r=e.workspaceId,t=(0,j.useRef)(),s=(0,e0.p)(),o=rl().joinChannel,l=(0,N.aw6)({variables:{id:n,workspaceId:r},skip:i||!n||!r}),a=l.data,c=l.called,d=l.error,u=l.loading,x=n&&!i&&null!=a&&a.channel?a.channel:null;return(0,j.useEffect)(function(){d&&console.error("[useChannelsData] Error fetching channelPreview",d),(d||c&&x&&x.archived)&&p().replace("/#".concat(r0))},[d,x,c,u]),(0,j.useEffect)(function(){var e=n&&x;return!e&&t.current&&(s.close(t.current),t.current=void 0),e&&(t.current?t.current&&s.update(t.current,{duration:null,render:function(){return(0,eo.jsx)(oT,{workspaceId:r,currentChannelId:n,channelPreview:x,joinChannel:o,toastId:t.current})}}):t.current=s({duration:null,render:function(){return(0,eo.jsx)(oT,{workspaceId:r,currentChannelId:n,channelPreview:x,joinChannel:o,toastId:t.current})}})),function(){t.current&&s.close(null==t?void 0:t.current)}},[n,x,o,s,r]),{channelPreview:x}},oE=function(e){var n=e.workspaceId,i=e.user,r=(0,h.useRouter)().query,t=Array.isArray(r.channelSlug)?r.channelSlug[0]:r.channelSlug,s=t?t.slice(-15):null,o=(0,N.uCJ)({variables:{workspaceId:n},skip:!i||!i.workspaceMemberships||!n,returnPartialData:!0}),l=o.data,a=o.loading,c=o.subscribeToMore;(0,j.useEffect)(function(){if(c&&n)return c({document:N.olB,variables:{workspaceId:n}})},[c,n]);var d=((null==l?void 0:l.channels)||[]).filter(function(e){return e.isMember&&!e.archived}).sort(function(e,n){return e.slug.localeCompare(n.slug,"en")}),u=d.find(function(e){return e.id===s});return{channelPreview:oA({currentChannelId:s,activeChannel:u,workspaceId:n}).channelPreview,currentChannelId:s,channels:d,isChannelsLoading:a,activeChannel:u}},o_=function(e){var n=e.currentChannel,i=e.currentWorkspaceId,r=(0,h.useRouter)().replace;(0,j.useEffect)(function(){i&&n&&n.workspaceId!==i&&r("/")},[n,i,r])},oF={fontWeight:"bold",backgroundImage:"linear-gradient(50deg, #F658A8, #ff5b8a 49%, #ff5b8a 53%, #ff5b8a 55%, #fba64b 77%, #f99b52)",backgroundClip:"text",color:"transparent"},oN=function(){return(0,eo.jsx)(c.k,{bg:"#1A013F",direction:"column",mb:4,children:(0,eo.jsxs)(c.k,{py:4,px:8,direction:["column","row"],children:[(0,eo.jsxs)(S.K,{mr:[0,4],children:[(0,eo.jsx)(T.x,{fontSize:"xl",sx:oF,children:"Meet Gamma, the fast alternative to slides"}),(0,eo.jsx)(T.x,{color:"gray.200",children:"Write like a doc, present like a deck."})]}),(0,eo.jsx)(V.L,{}),(0,eo.jsxs)(k.U,{mt:[2,0],children:[(0,eo.jsx)(A.z,{as:"a",href:"/signup",children:"Make your own"}),(0,eo.jsx)(A.z,{as:"a",cursor:"pointer",variant:"ghost",colorScheme:"whiteAlpha",onClick:function(){window.location.href="".concat(eX.v.API_HOST,"/logout")},children:"Sign out"})]})]})})},oz=function(){var e,n=(0,j.useState)(!1),i=n[0],r=n[1],t=(0,l.SE)(),s=t.user,o=t.currentWorkspace,a=(0,h.useRouter)().isReady,u=!!(s&&0===s.workspaceMemberships.length),y=(e=(0,ib.AE)(),Object.values(rz).find(function(n){return n===e})),w=oE({workspaceId:null==o?void 0:o.id,user:s}),O=w.channelPreview,k=w.channels,S=w.activeChannel,I=w.currentChannelId,D=w.isChannelsLoading;o_({currentChannel:O||S,currentWorkspaceId:null==o?void 0:o.id});var P=I?rz.CHANNEL:y||r0;return(0,j.useEffect)(function(){a&&(u?p().replace("/#".concat(rz.SHARED_WITH_ME)):setTimeout(function(){return r(!1)},150))},[y,I,u,a]),(0,C.If)(function(e){e.track(C.AA.HOME_TAB_VIEWED,{tab:P})},[P]),(0,eo.jsxs)(f.W,{backend:m.PD,children:[(0,eo.jsxs)(c.k,{"data-testid":"home",width:"100%",height:"100%",position:"relative",children:[(0,eo.jsx)(x(),{children:(0,eo.jsx)("title",{children:y?"".concat(rL[y].ariaLabel," - ").concat(v.N6):"".concat(v.N6)})}),(0,eo.jsx)(b.H9,{}),(0,eo.jsx)(ot,{}),u?null:(0,eo.jsx)(rR,{channelPreview:O,isSidebarVisible:i,setIsSidebarVisible:r,user:s,isReady:!!s,activeTab:P,currentChannelId:I,channels:k,isChannelsLoading:D}),(0,eo.jsxs)(c.k,{"data-testid":"doc-root-main",flex:"1",px:u?0:(0,iX.s2)()?2:6,py:u?0:(0,iX.s2)()?2:6,w:"calc(100vw - 300px - var(--chakra-sizes-4))",bg:"gray.100",borderTopLeftRadius:"15px",borderBottomLeftRadius:"15px",direction:"column",marginLeft:{base:"0"},minH:"var(--100vh)",pb:"10em",transition:"margin .2s ease",children:[u&&(0,eo.jsx)(oN,{}),(0,eo.jsx)(d.W,{maxW:"80em",p:(0,iX.s2)()?2:void 0,h:"100%",children:P===rN.TEMPLATES?(0,eo.jsx)(oj,{isSidebarVisible:i,setIsSidebarVisible:r}):P===rN.INSPIRATION?(0,eo.jsx)(ox,{isSidebarVisible:i,setIsSidebarVisible:r}):P===rN.THEMES?(0,eo.jsx)(oO,{isSidebarVisible:i,setIsSidebarVisible:r}):P===rN.FONTS?(0,eo.jsx)(s3,{isSidebarVisible:i,setIsSidebarVisible:r}):P===rN.SITES?(0,eo.jsx)(rG,{isSidebarVisible:i,setIsSidebarVisible:r}):(0,eo.jsx)(sc,{activeTab:P,userHasNoWorkspaces:u,isSidebarVisible:i,setIsSidebarVisible:r,currentChannelId:I,activeChannel:S,channelPreview:O})})]})]}),(0,eo.jsx)(g.C,{showShortcuts:!1}),(0,eo.jsx)(oD,{})]})},oL=function(){var e=(0,j.useState)(!1),n=e[0],i=e[1];return(0,eo.jsxs)(c.k,{"data-testid":"home",width:"100%",height:"100%",children:[(0,eo.jsx)(x(),{children:(0,eo.jsx)("title",{children:"Gamma"})}),(0,eo.jsx)(c.k,{direction:"column",zIndex:"overlay",h:"100%",position:{base:"fixed",md:"sticky"},top:0,w:"300px",minW:"300px",bg:"white",shadow:{sm:"lg",md:"none"},transform:n?{base:"translate(0,0px)",md:"translate(0,0)"}:{base:"translate(-100%,0px)",md:"translate(0,0)"},transition:"transform .2s ease",children:(0,eo.jsx)(c.k,{overflowY:"auto",h:"100vh",p:6,py:2,direction:"column",alignContent:"space-between",children:(0,eo.jsx)(r_,{setIsSidebarVisible:i})})}),(0,eo.jsx)(c.k,{"data-testid":"doc-root-main",flex:"1",px:2,py:6,w:"100vw",bg:"gray.100",borderTopLeftRadius:"15px",borderBottomLeftRadius:"15px",direction:"column",marginLeft:{base:"0"},minH:"var(--100vh)",transition:"margin .2s ease",children:(0,eo.jsxs)(d.W,{maxW:"80em",children:[(0,eo.jsx)(eH.O,{height:"42px",w:"30%",mb:2}),(0,eo.jsx)(eH.O,{height:"24px",w:"100%",mb:2}),(0,eo.jsx)(eH.O,{height:"24px",w:"100%",mb:10}),(0,eo.jsx)(c.k,{width:"100%",children:(0,eo.jsx)(tv,{})})]})})]})},oR=i(98666),oU=function(){(0,t.useRouter)().push,(0,l.SE)().userStatus;var e=(0,oR.gF)();return((0,o.X)(!0),(0,a.o)(),e)?(0,eo.jsx)(oz,{},"home-v2"):(0,eo.jsx)(oL,{},"home-skeleton")},oM=(0,s.wI)(oU)},87314:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(55754)}])},10498:function(e,n){"use strict";n.Z={src:"/_next/static/media/Sal-Tether.5de34fdf.svg",height:1352,width:3061,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[9025,5333,4424,8707,146,3661,3016,116,507,9497,9097,2991,1091,817,5063,8022,1893,9244,6364,6544,9849,8721,2286,5910,8163,8219,3005,6510,4999,9774,2888,179],function(){return e(e.s=87314)}),_N_E=e.O()}]);
//# sourceMappingURL=index-04d10bd9c354e375.js.map