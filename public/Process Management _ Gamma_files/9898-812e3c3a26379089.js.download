"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9898],{69232:function(e,n,t){t.d(n,{W:function(){return c}});var r=t(47457),o=t(91012),i=t(49929),s=t(52322),c=function(e){var n=e.length,t=e.idealLength,c=e.maxLength;return(0,s.jsxs)(o.x,{fontSize:"xs",color:n>=c?"red.400":"gray.500",children:[n>=c&&(0,s.jsx)(i.G,{icon:r.e7})," ",n,"/",t]})}},87796:function(e,n,t){t.d(n,{U:function(){return o},V:function(){return i}});var r=t(95148),o=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n?e||"Untitled":e?"".concat(e," | Gamma"):"Gamma"},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e||(n?"":r.D)}},21061:function(e,n,t){t.d(n,{Av:function(){return S},U8:function(){return k}});var r=t(95235),o=t(393),i=t(11919),s=t(2784),c=t(43997),a=t(58118),l=t(46358),d=t(13720),u=t(72043),f=t(53738),p=t(12436),h=t.n(p),x=t(73062),m=t(52322);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var j=function(e){var n=e.setWidth,t=e.width,r=e.position,o=e.onClose,c=e.panelRef,l=e.initialWidth,d=e.isDragging,u=e.setIsDragging,p=(0,s.useMemo)(function(){return(0,x.n)()},[])>0&&"right"===r,v=(0,s.useState)(t),j=v[0],b=v[1],C=(0,s.useState)(null),y=C[0],O=C[1],w=h()(function(e){var n,t=Math.min(Math.max(n="left"===r?e.clientX:-((e.clientX-y)*1)+j,a.pn),a.ZQ);n<=a.Nh?(c.current.style.transitionProperty="width",c.current.style.transitionDuration="var(--chakra-transition-duration-normal)",t=0):t>a.pn&&(c.current.style.transitionProperty="",c.current.style.transitionDuration=""),c.current.style.width="".concat(t,"px")},30),k=function e(){u(!1),O(null);var t=c.current.style.width;"0px"===t?(o(),n(l)):n(parseInt(t.replace("px",""),10)),c.current.style.transitionProperty="",c.current.style.transitionDuration="",window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",e)};(0,s.useEffect)(function(){return y&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",k)),function(){window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",k)}},[y]);var S={};return S="left"===r?{right:-4,position:"absolute"}:p?{position:"relative"}:{left:-4,position:"absolute"},(0,m.jsx)(i.k,g(g({h:"100%",bg:p?"gray.200":d?"blackAlpha.200":"rgba(0,0,0,0)",w:p?2:4,justifyContent:"center",alignItems:"center",cursor:"col-resize",_hover:{bg:p?"gray.400":"blackAlpha.200"},transitionProperty:"common",transitionDuration:"normal",role:"group",onMouseDown:function(e){e.preventDefault(),u(!0),O(e.clientX),b(t)},position:"absolute",display:["none","none","none","flex"]},S),{},{children:!p&&(0,m.jsx)(f.xu,{bg:"white",borderRadius:"full",w:1,h:10,opacity:d?1:".5",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1}})}))},b=t(59115);function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var O={ifPanelHasRoomToOpen:function(e,n){return{base:n,xl:e}}},w=function(e){var n,t=e.position,f=e.panelLifecycle,p=(0,s.useRef)(),h=(0,s.useState)(!1),x=h[0],v=h[1],g=(0,c.I0)(),C=(0,l.CG)((0,b.SL)(t)),w=(0,l.CG)((0,b.Fw)(t)),k=(0,l.CG)((0,b.CO)(t)),S=(0,l.CG)((0,b.eh)(t)),P=null!==(n=null==S?void 0:S.canCollapse)&&void 0!==n&&n,I=(0,s.useCallback)(function(){g((0,b.sR)({position:t}))},[g,t]),E=(0,s.useCallback)(function(){g((0,b.Yp)({component:S}))},[S,g]),D=(0,s.useCallback)(function(e){g((0,b.UG)({width:e,position:t})),f.emit("resize",{})},[g,f,t]),A=(0,r.Z)({zIndex:Number((0,o.dQ)("zIndices","overlay"))+1,position:O.ifPanelHasRoomToOpen("relative","fixed"),height:"100%",top:0,bottom:0},t,0);w||x||(A.transitionProperty="width",A.transitionDuration="normal"),(0,s.useEffect)(function(){var e=function(e){"width"===e.propertyName&&f.emit("resize",{})};return p.current.addEventListener("transitionend",e),function(){p.current&&p.current.removeEventListener("transitionend",e)}},[f,p]);var T=(0,d.i)(O.ifPanelHasRoomToOpen(!0,!1))||!1;return(0,s.useEffect)(function(){C&&!T&&P&&I()},[T,C,I,P]),(0,m.jsxs)(i.k,y(y({ref:p},A),{},{style:{width:C||P?k:0},maxW:"100%","data-print-hidden":!0,children:[C&&"right"===t&&(0,m.jsx)(j,{isDragging:x,setIsDragging:v,position:t,width:k,setWidth:D,panelRef:p,onClose:I,initialWidth:a.Ld}),(0,m.jsx)(u.Mn.Provider,{value:f,children:S&&(C||P)&&(0,m.jsx)(S,{isDragging:x,isOpen:C,closePanel:I,openPanel:E,panelRef:p,lifecycle:f,hasRoomToOpen:T})}),C&&"left"===t&&(0,m.jsx)(j,{isDragging:x,setIsDragging:v,position:t,width:k,setWidth:D,panelRef:p,onClose:I,initialWidth:a.X9})]}))},k=(0,s.memo)(function(e){return(0,m.jsx)(w,y({position:"right"},e))});k.displayName="RightPanelContainer";var S=(0,s.memo)(function(e){return(0,m.jsx)(w,y({position:"left"},e))});S.displayName="LeftPanelContainer"},53923:function(e,n,t){t.d(n,{Pp:function(){return d},UV:function(){return l},Xy:function(){return u},nO:function(){return a}});var r=t(2784),o=t(43997),i=t(46358),s=t(72043),c=t(59115),a=function(){return(0,i.CG)((0,c.CO)("left"))},l=function(){return(0,i.CG)((0,c.CO)("right"))},d=function(e){var n=e.panelPosition,t=(0,o.I0)(),s=(0,i.CG)((0,c.OC)(e)),a=(0,r.useCallback)(function(){t((0,c.uJ)({component:e}))},[e,t]);return{togglePanel:(0,r.useCallback)(function(r){var o=!s;(null==r?void 0:r.override)==="open"?o=!0:(null==r?void 0:r.override)==="closed"&&(o=!1),o?t((0,c.Yp)({component:e,disableTransition:!!(null==r?void 0:r.disableTransition)})):t((0,c.sR)({position:n}))},[e,n,s,t]),initPanel:a,isPanelOpen:s}},u=function(){var e=(0,r.useMemo)(function(){return new s.st},[]),n=(0,r.useMemo)(function(){return new s.st},[]),t=(0,r.useMemo)(function(){return new s.st},[]);return(0,r.useEffect)(function(){if(t&&e&&n){var r=e.pipe(t),o=n.pipe(t);return function(){r(),o()}}},[e,n,t]),{leftPanelLifecycle:e,rightPanelLifecycle:n,globalPanelLifecycle:t}}},97873:function(e,n,t){t.d(n,{q:function(){return w}});var r=t(95235),o=t(20406),i=t(81333),s=t(31145),c=t(76035),a=t(28526),l=t.n(a),d=t(55452),u=t(55479),f=t(53738),p=t(8283),h=t(91012),x=t(45650),m=t(97907),v=t(49929),g=t(2784),j=t(21010),b=t(42879),C=t(52322);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var w=function(e){var n,t,r,a,y=e.doc,w=e.site,k=e.path,S=(0,u.p)(),P=(0,j.zU5)(),I=(0,i.Z)(P,1)[0],E=(0,j.sIg)(),D=(0,i.Z)(E,1)[0],A=(0,j.odt)(),T=(0,i.Z)(A,1)[0],_=(0,j.L24)(),R=(0,i.Z)(_,1)[0],L=(0,j.kui)(),z=(0,i.Z)(L,2),M=z[0],G=z[1].loading,N=(0,j.V$$)(),Z=(0,i.Z)(N,2),F=Z[0],W=Z[1].loading,U=null==y?void 0:y.id,V=null==y?void 0:null===(r=y.organization)||void 0===r?void 0:r.id,B=(0,b.mn)({domain:null==w?void 0:null===(a=w.domains)||void 0===a?void 0:a[0],path:k}),H=null==w?void 0:w.id,q=(0,g.useCallback)((0,o.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,b.iL)(U);case 4:return e.next=6,D({variables:{id:U},refetchQueries:["GetDoc"]}).then(function(){S({render:function(){return(0,C.jsx)(f.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,C.jsxs)(p.U,{spacing:4,children:[(0,C.jsx)(f.xu,{children:(0,C.jsx)(v.G,{icon:c.faCircleCheck})}),(0,C.jsx)(h.x,{fontWeight:"semibold",children:"Your changes have been published."}),B&&(0,C.jsx)(x.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:B,rightIcon:(0,C.jsx)(v.G,{icon:s.faArrowUpRightFromSquare}),children:"View site"}),(0,C.jsx)(m.P,{onClick:function(){return S.closeAll()}})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(e){S({title:(0,C.jsx)(d.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)});case 6:case"end":return e.stop()}},e)})),[U,D,S,B]);return{publishSite:(0,g.useCallback)((0,o.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=2;break}return e.abrupt("return");case 2:if(!U){e.next=5;break}return e.next=5,(0,b.iL)(U);case 5:return e.next=7,I({variables:{id:H},update:function(e,n){var t=n.data,r=null==t?void 0:t.publishSite;r&&r.routes.forEach(function(n){e.updateQuery({query:j.yE1,variables:{id:n.docId}},function(e){var t,r,o;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null!=e&&e.doc)?{doc:O(O({},e.doc),{},{publishedTime:null===(t=n.doc)||void 0===t?void 0:t.publishedTime,publishedSnapshotId:null===(r=n.doc)||void 0===r?void 0:r.publishedSnapshotId,currentSnapshotId:null===(o=n.doc)||void 0===o?void 0:o.currentSnapshotId})}:e})})}}).then(function(){S({render:function(){return(0,C.jsx)(f.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,C.jsxs)(p.U,{spacing:4,children:[(0,C.jsx)(f.xu,{children:(0,C.jsx)(v.G,{icon:c.faCircleCheck})}),(0,C.jsx)(h.x,{fontWeight:"semibold",children:"Your changes have been published."}),B&&(0,C.jsx)(x.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:B,rightIcon:(0,C.jsx)(v.G,{icon:s.faArrowUpRightFromSquare}),children:"View site"}),(0,C.jsx)(m.P,{onClick:function(){return S.closeAll()}})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(e){S({title:(0,C.jsx)(d.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)});case 7:case"end":return e.stop()}},e)})),[H,U,I,S,B]),publishDoc:q,addDomain:(0,g.useCallback)((n=(0,o.Z)(l().mark(function e(n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!H||!U)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,M({variables:{input:{siteId:H,name:n}},refetchQueries:["GetSites","GetDoc"]});case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Error adding domain:",e.t0),S({status:"error",title:(0,C.jsx)(d.cC,{id:"HugOMA"}),isClosable:!0,position:"top"});case 11:case"end":return e.stop()}},e,null,[[2,7]])})),function(e){return n.apply(this,arguments)}),[M,U,H,S]),isAddingDomain:G,createSite:(0,g.useCallback)((t=(0,o.Z)(l().mark(function e(n){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=2;break}return e.abrupt("return");case 2:F({variables:{input:{workspaceId:V,name:n,routes:[]}},refetchQueries:["GetSites","GetDoc"]}).catch(function(e){console.error("Error creating site:",e.message)});case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[U,V,F]),isCreatingSite:W,unpublishDoc:(0,g.useCallback)((0,o.Z)(l().mark(function e(){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!H||!U)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,R({variables:{id:U},update:function(e,n){var t=n.data,r=null==t?void 0:t.unpublishDoc;r&&e.updateQuery({query:j.yE1,variables:{id:r.id}},function(e){return null!=e&&e.doc?{doc:O(O({},e.doc),{},{publishedSnapshotId:null})}:e})}}).then(function(){return T({variables:{input:{siteId:H,routes:(0,b.kj)({docId:U,routes:(null==w?void 0:w.routes)||[],path:null})}}})}).then(function(){S({description:null!=w&&w.name?(0,C.jsx)(d.cC,{id:"Qv0Wgn",values:{0:null==w?void 0:w.name}}):(0,C.jsx)(d.cC,{id:"3fkTmP"}),status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(function(e){S({title:(0,C.jsx)(d.cC,{id:"uMOlnl"}),status:"error",position:"top",isClosable:!0}),console.error("Error unpublishing site:",e.message)});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}},e)})),[H,U,R,null==w?void 0:w.routes,null==w?void 0:w.name,T,S]),updateRoutes:(0,g.useCallback)((0,o.Z)(l().mark(function e(){var n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!U||!H)){e.next=2;break}return e.abrupt("return");case 2:return n=(0,b.kj)({routes:(null==w?void 0:w.routes)||[],docId:U,path:k}),e.next=5,T({variables:{input:{siteId:H,routes:n}}});case 5:case"end":return e.stop()}},e)})),[T,U,null==w?void 0:w.routes,H,k])}}},71007:function(e,n,t){t.d(n,{t:function(){return G}});var r=t(95235),o=t(2885),i=t(55452),s=t(11919),c=t(93319),a=t(71354),l=t(27302),d=t(91012),u=t(45650),f=t(49929),p=t(2784),h=t(46358),x=t(3334),m=t(29705),v=t(72360),g=t(48322),j=t(53738),b=t(66724),C=t(18751),y=t(84103),O=t(75085),w=t(53865),k=t(16686),S=t(52322),P=function(e){var n=e.openThemeEditor;return(0,S.jsxs)(a.K,{bg:"gray.100",p:4,textAlign:"left",spacing:4,borderRadius:"md",my:2,children:[(0,S.jsx)(d.x,{textAlign:"center",fontWeight:"700",children:(0,S.jsx)(i.cC,{id:"yNvg2Q"})}),(0,S.jsx)(d.x,{fontSize:"sm",color:"gray.700",children:(0,S.jsx)(i.cC,{id:"qYwzxB"})}),(0,S.jsx)(u.z,{onClick:n,variant:"solid",leftIcon:(0,S.jsx)(f.G,{icon:k.Jy}),"data-testid":"new-theme-button",children:(0,S.jsx)(i.cC,{id:"srRMnJ"})})]})},I=t(79204),E=t(12741),D=t(27440),A=t(82634),T=function(e){var n=e.themes,t=e.currentThemeId,r=e.setTheme,o=e.openThemeEditor;return(0,S.jsx)(D.r,{gap:1,flex:1,my:2,templateColumns:{base:"repeat(2, minmax(0, 1fr))"},children:(0,E.Z)(n).map(function(e){return(0,S.jsx)(A.o,{theme:e,isChecked:!!(t&&e.id===t),onEditClick:o,onThemeClicked:r,variant:"ghost"},e.id)})})},_=(0,p.memo)(function(e){var n=e.currentTheme,t=e.setTheme,r=e.openThemeEditor,o=e.openThemeEditorWithDefaultTheme,s=(0,h.CG)(I.Y3);return!(0,h.CG)(I.C0)&&r?(0,S.jsxs)(a.K,{spacing:8,children:[o&&(0,S.jsx)(P,{openThemeEditor:o}),(0,S.jsx)(T,{themes:s,currentThemeId:null==n?void 0:n.id,setTheme:t,openThemeEditor:r})]}):(0,S.jsxs)(S.Fragment,{children:[null!=n&&n.archived?(0,S.jsxs)(v.b,{status:"warning",mb:4,children:[(0,S.jsx)(g.z,{}),(0,S.jsxs)(j.xu,{children:[(0,S.jsx)(b.C,{children:(0,S.jsx)(i.cC,{id:"i7yZxh",values:{GAMMA_ARTIFACT_PROPER_NOUN:O.Yc}})}),(0,S.jsx)(C.X,{children:(0,S.jsx)(i.cC,{id:"jH2g5C",components:{0:(0,S.jsx)(y.r,{textDecoration:"underline",isExternal:!0,href:w.oH}),1:(0,S.jsx)(m.h,{mx:"2px"})}})})]})]}):null,(0,S.jsx)(a.K,{spacing:2,children:(0,S.jsx)(j.xu,{width:"100%",mx:0,children:(0,S.jsx)(T,{themes:s,currentThemeId:null==n?void 0:n.id,setTheme:t,openThemeEditor:r})})})]})});_.displayName="ThemePickerBodyInner";var R=t(98666),L=t(41767);function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var G=function(e){var n=e.setTheme,t=e.openThemeEditor,r=e.openThemeEditorWithDefaultTheme,m=e.currentTheme,v=e.openBackgroundPanel,g=e.shouldScrollToCurrent,j=void 0===g||g,b=e.flexProps,C=(0,L.a)().isLoadingThemes,y=(0,h.CG)(I.FM);return(0,R.vm)(function(){j&&!C&&"search"!==y&&(C||requestAnimationFrame(function(){var e;return null===(e=document.querySelector('[data-theme-id="'.concat(null==m?void 0:m.id,'"]')))||void 0===e?void 0:e.scrollIntoView()}))},[C,null==m?void 0:m.id,y,j],[C,y]),(0,p.useEffect)(function(){var e;null===(e=document.querySelector("[data-theme-picker-scroll-container]"))||void 0===e||e.scrollTo(0,0)},[y]),(0,S.jsxs)(s.k,M(M({direction:"column",flex:1,h:"100%"},b),{},{children:[C?(0,S.jsx)(x.S,{size:4}):(0,S.jsx)(_,{currentTheme:m,setTheme:n,openThemeEditor:t,openThemeEditorWithDefaultTheme:r}),v&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(c.L,{}),(0,S.jsxs)(a.K,{mx:-8,mt:12,p:8,pb:4,spacing:4,bgColor:"gray.50",align:"center",justifyContent:"center",children:[(0,S.jsx)(l.M,{children:(0,S.jsx)(d.x,{fontSize:"sm",children:(0,S.jsx)(i.cC,{id:"UNfHm4"})})}),(0,S.jsx)(u.z,{size:"sm",w:"fit-content",leftIcon:(0,S.jsx)(f.G,{icon:o.UH}),onClick:v,children:(0,S.jsx)(i.cC,{id:"+EZioz"})})]})]})]}))}},17621:function(e,n,t){t.d(n,{v:function(){return L}});var r=t(95235),o=t(81333),i=t(12741),s=t(52561),c=t(49626),a=t(55452),l=t(87254),d=t(24624),u=t(71354),f=t(50390),p=t(93319),h=t(45650),x=t(64827),m=t(53738),v=t(76648),g=t(67887),j=t(49747),b=t(27777),C=t(85982),y=t(13061),O=t(49929),w=t(2784),k=t(89782),S=t(46358),P=t(79204),I=t(62141),E=t(10710),D=t(98666),A=t(52322);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var R={dark:{label:(0,A.jsx)(a.cC,{id:"pvnfJD"})},light:{label:(0,A.jsx)(a.cC,{id:"1njn7W"})},professional:{label:(0,A.jsx)(a.cC,{id:"Oojfbh"})},colorful:{label:(0,A.jsx)(a.cC,{id:"Op7PhG"})}},L=(0,w.memo)(function(e){var n=e.title,t=e.description,r=e.showDrawerCloseButton,T=e.openThemeEditorWithDefaultTheme,L=e.stackProps,z=(0,S.TL)(),M=(0,S.CG)(P.FM),G=(0,S.CG)(P.s1),N=(0,w.useRef)(null),Z=(0,E.SE)().currentWorkspace,F=(0,w.useState)(""),W=F[0],U=F[1],V=(0,S.CG)(I.Pu),B=(0,S.CG)(P.C0),H=(0,w.useCallback)(function(){z((0,P.uG)({activeView:"search"})),setTimeout(function(){var e;null===(e=N.current)||void 0===e||e.focus()},200)},[z]),q=(0,w.useCallback)(function(e){z((0,P.ql)({searchQuery:e}))},[z]),K=(0,D.Kt)(q,500),Y=(0,w.useCallback)(function(e){U(e),K(e)},[K]),Q=(0,w.useCallback)(function(e){var n=(0,i.Z)(G);G.includes(e)?n=n.filter(function(n){return n!==e}):n.push(e),z((0,P.LT)({filterKeywords:n}))},[G,z]);return(0,D.vm)(function(){"search"!==M&&(V&&V.workspaceId?z((0,P.uG)({activeView:"custom"})):z((0,P.uG)({activeView:"standard"})))},[z,V,M],[V]),(0,w.useEffect)(function(){return function(){z((0,P.mc)())}},[]),(0,A.jsxs)(u.K,_(_({spacing:4},L),{},{children:[(0,A.jsxs)(u.K,{spacing:8,children:[(0,A.jsxs)(u.K,{spacing:4,children:[(0,A.jsxs)(u.K,{direction:"row",width:"100%",pr:r?10:void 0,children:[(0,A.jsx)(f.X,{fontSize:"3xl",children:n}),(0,A.jsx)(p.L,{}),!!T&&Z&&B&&(0,A.jsx)(h.z,{size:"sm",variant:"solid",leftIcon:(0,A.jsx)(O.G,{icon:c.r8}),onClick:T,"data-testid":"new-theme-button",children:(0,A.jsx)(a.cC,{id:"FiwgR9"})}),r&&(0,A.jsx)(x.o,{})]}),t?(0,A.jsx)(m.xu,{children:t}):(0,A.jsx)(A.Fragment,{})]}),B&&(0,A.jsxs)(v.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,A.jsx)(h.z,{borderRadius:"full",w:"50%",leftIcon:(0,A.jsx)(O.G,{icon:s.D0,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===M?"trueblue":"gray",bg:"custom"===M?"trueblue.100":"gray.100",onClick:function(){return z((0,P.uG)({activeView:"custom"}))},children:(0,A.jsx)(a.cC,{id:"8Tg/JR"})}),(0,A.jsx)(h.z,{borderRadius:"full",w:"50%",leftIcon:(0,A.jsx)(m.xu,{w:3.5,children:(0,A.jsx)(k.Y,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===M?"trueblue":"gray",bg:"standard"===M?"trueblue.100":"gray.100",onClick:function(){return z((0,P.uG)({activeView:"standard"}))},children:(0,A.jsx)(a.cC,{id:"TJBHlP"})}),(0,A.jsx)(g.h,{icon:(0,A.jsx)(d.G,{}),isRound:!0,"data-theme-picker-active-view-button":"search","aria-label":l.ag._({id:"A1taO8"}),variant:"ghost",colorScheme:"search"===M?"trueblue":"gray",bg:"search"===M?"trueblue.100":"gray.100",onClick:H})]})]}),(0,A.jsx)(j.U,{in:"search"===M,children:(0,A.jsx)(b.I,{ref:N,w:"100%",placeholder:l.ag._({id:"L0fOnm"}),value:W,onChange:function(e){Y(e.target.value)}})}),(0,A.jsx)(j.U,{in:"standard"===M,children:(0,A.jsx)(C.E,{children:Object.entries(R).map(function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1].label,i=G.includes(t);return(0,A.jsx)(y.Vp,{size:"md",letterSpacing:"normal",cursor:"pointer",onClick:function(){Q(t)},_hover:{bgColor:i?"trueblue.200":"blackAlpha.200"},colorScheme:i?"trueblue":"blackAlpha",children:r},t)})})})]}))});L.displayName="ThemePickerHeader"},42048:function(e,n,t){t.d(n,{B:function(){return D}});var r=t(55452),o=t(87254),i=t(78116),s=t(56915),c=t(16796),a=t(64827),l=t(92619),d=t(2167),u=t(80353),f=t(45650),p=t(55966),h=t(2784),x=t(95235),m=t(82269),v=t(2046),g=t(70287),j=t(60807),b=t(53738),C=t(98666),y=t(69297),O=t(52322),w=["label","initialValue","updateValue","helperText","language"];function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var S=function(e){var n=e.label,r=e.initialValue,o=e.updateValue,i=e.helperText,s=e.language,c=(0,m.Z)(e,w),a=(0,h.useState)(void 0===r?"":r),l=a[0],d=a[1],u=(0,h.useState)(null),f=u[0],p=u[1],S=(0,C.Kt)(o,100),P=(0,h.useState)(),I=P[0],E=P[1];(0,h.useEffect)(function(){"css"===s?Promise.all([t.e(8917),t.e(7120),t.e(6214)]).then(t.bind(t,65284)).then(function(e){E(e.css())}):"html"===s&&Promise.all([t.e(8917),t.e(7120),t.e(6214),t.e(4100),t.e(2163)]).then(t.bind(t,22163)).then(function(e){E(e.html())})},[s]),(0,C.vm)(function(){p(null),S(l)},[l,S],[l]);var D=[I].filter(Boolean);return(0,O.jsxs)(v.NI,{isInvalid:!!f,children:[(0,O.jsx)(g.l,{children:n}),f&&(0,O.jsx)(j.J1,{children:f}),i&&(0,O.jsx)(v.Q6,{children:i}),(0,O.jsx)(b.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,O.jsx)(h.Suspense,{fallback:(0,O.jsx)("span",{}),children:(0,O.jsx)(y.B,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach(function(n){(0,x.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({value:l,extensions:D,onChange:d},c))})})]})},P=t(46358),I=t(62141),E=t(21529),D=(0,h.memo)(function(e){var n=e.isOpen,t=e.onClose,x=e.editor,m=(0,E.A)(x),v=(0,P.CG)(I.$p).bodyStart,g=(0,h.useCallback)(function(e){null==x||x.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[x]);return(0,O.jsx)(p.Wk,{isDark:!1,children:(0,O.jsxs)(i.d,{returnFocusOnClose:!1,isOpen:n,placement:"right",onClose:t,size:"lg",children:[(0,O.jsx)(s.Z,{background:"none"}),(0,O.jsxs)(c.s,{onKeyDown:m,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,O.jsx)(a.o,{}),(0,O.jsx)(l.x,{children:(0,O.jsx)(r.cC,{id:"E16GGw"})}),(0,O.jsx)(d.f,{overflowX:"hidden",children:(0,O.jsx)(S,{label:o.ag._({id:"fC5kYg"}),helperText:o.ag._({id:"0AZNtw"}),initialValue:v,updateValue:g,language:"html",height:"600px"})}),(0,O.jsx)(u.m,{children:(0,O.jsx)(f.z,{w:"100%",variant:"solid",onClick:t,children:(0,O.jsx)(r.cC,{id:"DPfwMq"})})})]})]})})});D.displayName="CustomCodeDrawer"},99083:function(e,n,t){t.d(n,{n:function(){return c}});var r=t(46358),o=t(3915),i=t(51823),s=t(62141),c=function(){var e,n,t=(0,r.CG)(s.yx),c=(0,o.SE)().user,a=(0,o.py)("manage",t)&&!!c,l=null==t?void 0:null===(e=t.docGenerateInput)||void 0===e?void 0:e.docGeneration;if(t&&l&&(null===(n=t.createdBy)||void 0===n?void 0:n.id)===(null==c?void 0:c.id)&&a)return(0,i.Xn)(l)}},59734:function(e,n,t){t.d(n,{_i:function(){return A._},eT:function(){return J}});var r,o,i,s,c,a=t(95235),l=t(81333),d=t(55452),u=t(55479),f=t(67904),p=t(5632),h=t(2784),x=t(23313),m=t(77381),v=t(70204),g=t(46358),j=t(10710),b=t(68941),C=t(69209),y=function(e){var n=(0,g.TL)(),t=(0,j.SE)().currentWorkspace;(0,h.useEffect)(function(){if(e)return b.VH.updateWorkspaceInLdContext(e).then(function(){n((0,C.vH)({isDocWorkspaceSet:!0}))}),function(){b.VH.updateWorkspaceInLdContext(t).then(function(){n((0,C.vH)({isDocWorkspaceSet:!1}))})}},[t,n,e])},O=t(1368),w=t(7328),k=t(57981),S=(0,k.Ps)(r||(r=(0,w.Z)(["\n  fragment DefaultCardFields on Card {\n    id\n    archived\n    docId\n    title\n    text\n    previewUrl\n    createdTime\n    updatedTime\n  }\n"])));(0,k.Ps)(o||(o=(0,w.Z)(["\n  mutation CreateCard($id: ID!, $docId: ID!) {\n    createCard(id: $id, docId: $docId) {\n      id\n    }\n  }\n"]))),(0,k.Ps)(i||(i=(0,w.Z)(["\n  ","\n  query GetCard($id: ID!, $docId: ID!) {\n    card(id: $id, docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),S),(0,k.Ps)(s||(s=(0,w.Z)(["\n  ","\n  query GetCards($docId: ID!) {\n    docCards(docId: $docId, archived: false) {\n      ...DefaultCardFields\n    }\n  }\n"])),S);var P=(0,k.Ps)(c||(c=(0,w.Z)(["\n  ","\n  subscription SubscribeToCards($docId: ID!) {\n    docCards(docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),S),I=t(51823),E=t(61701),D=t(68197),A=t(46732),T=t(75944),_=t(46988),R=t(20010),L=t(56915),z=t(48273),M=t(92619),G=t(64827),N=t(2167),Z=t(71354),F=t(91012),W=t(80353),U=t(76648),V=t(45650),B=t(52322),H=t(29677),q=function(e){var n,t=(null===(n=(0,g.CG)((0,_.oH)(e||"")))||void 0===n?void 0:n.status)==="running",r=(0,h.useRef)(t);r.current=t;var o=(0,h.useState)(function(){return new H.B}),i=o[0],s=o[1],c=(0,h.useCallback)(function(){i.resolve()},[i]),a=(0,T.q)(),l=a.isOpen,d=a.onOpen,u=a.onClose;return{confirmNavigationFn:(0,h.useCallback)(function(){if(!r.current)return Promise.resolve();var e=new H.B;return s(e),d(),e.promise},[d]),confirmNavigationModalProps:{isOpen:l,onClose:u,onConfirm:c}}},K=function(e){var n=e.isOpen,t=e.onClose,r=e.onConfirm;return(0,B.jsxs)(R.u_,{onClose:t,isOpen:n,isCentered:!0,children:[(0,B.jsx)(L.Z,{}),(0,B.jsxs)(z.h,{children:[(0,B.jsx)(M.x,{children:(0,B.jsx)(d.cC,{id:"YeK6T+"})}),(0,B.jsx)(G.o,{}),(0,B.jsx)(N.f,{children:(0,B.jsxs)(Z.K,{spacing:4,children:[(0,B.jsx)(F.x,{fontWeight:"bold",children:(0,B.jsx)(d.cC,{id:"Wr6Y7m"})}),(0,B.jsx)(F.x,{children:(0,B.jsx)(d.cC,{id:"n0Fn6S"})})]})}),(0,B.jsx)(W.m,{children:(0,B.jsxs)(U.h,{children:[(0,B.jsx)(V.z,{variant:"ghost",onClick:t,children:(0,B.jsx)(d.cC,{id:"dEgA5A"})}),(0,B.jsx)(V.z,{variant:"ghost",color:"red.600",onClick:r,children:(0,B.jsx)(d.cC,{id:"QxM8i/"})})]})})]})]})};function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach(function(n){(0,a.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var X=function(e){var n=e.children,t=(0,u.p)(),r=(0,j.we)(),o=(0,g.CG)(D.XV),i=(0,j.SE)(),s=i.user,c=i.userStatus,a=(0,h.useRef)(null),b=(0,g.TL)(),C=(0,p.useRouter)(),w=C.push,k=C.replace,S=(0,g.CG)(D.yx),T=(0,I.NO)(),_=(0,l.Z)(T,3),R=_[0],L=_[1],z=_[2],M=L&&L.match(I.sg),G=M?M[0]:null,N=q(G),Z=N.confirmNavigationFn,F=N.confirmNavigationModalProps,W=(0,h.useState)({isUnauthorized:void 0,setCollaborativeEditorInstance:function(e){a.current=e,V(function(n){return Q(Q({},n),{},{editor:e})})},getCollaborativeEditorInstance:function(){return a.current},confirmNavigation:Z,editor:void 0}),U=W[0],V=W[1];(0,m.ts)(S),y(null==S?void 0:S.organization);var H=(0,x.WMx)({variables:{id:G},returnPartialData:!0,nextFetchPolicy:"cache-only"}),Y=(0,l.Z)(H,2),X=Y[0],J=Y[1],$=J.data,ee=J.loading,en=J.called,et=J.subscribeToMore,er=(0,j.py)("view",null==$?void 0:$.doc),eo=(0,j.Is)("edit",null==$?void 0:$.doc);(0,j.$K)(X),(0,h.useEffect)(function(){if(et&&U.docId&&en)return et({document:E.dU,variables:{id:U.docId},updateQuery:function(e,n){var t=n.subscriptionData;return t.data&&t.data.doc&&e.doc?{doc:Q(Q(Q({},e.doc),t.data.doc),{},{__typename:"Doc"})}:e}})},[U.docId,et,en]);var ei=(0,x.WBF)({variables:{docId:G},returnPartialData:!0,nextFetchPolicy:"cache-only"}),es=(0,l.Z)(ei,2),ec=es[0],ea=es[1],el=ea.data,ed=ea.called,eu=ea.subscribeToMore;return((0,v.p)(null==el?void 0:el.docCards,U.editor),(0,h.useEffect)(function(){if(eu&&U.docId&&ed)return eu({document:P,variables:{docId:U.docId},updateQuery:function(e,n){var t=n.subscriptionData;return t.data&&t.data.docCards?t.data:e}})},[U.docId,eu,ed]),(0,h.useEffect)(function(){if(U.docId!==G&&L){if(!G){t({id:"invalid_doc_id_error",title:(0,B.jsx)(d.cC,{id:"742lf1"}),description:"",status:"error",position:"top",isClosable:!1,duration:null});return}X(),ec(),V(function(e){return Q(Q({},e),{},{docId:G})})}},[U.docId,L,G,X,ec,b,t]),(0,h.useEffect)(function(){if("loading"!==c&&en&&!ee&&L){if(!$||!$.doc||!1===er){"loggedOut"===c&&w("/signin?redirect_to=".concat(encodeURIComponent(window.location.href))),V(function(e){return Q(Q({},e),{},{isUnauthorized:!0})});return}if($&&null===$.doc.currentSnapshotId&&eo){V(function(e){return Q(Q({},e),{},{isUnauthorized:!0})});return}if(!o&&$.doc.archived){k("/");return}V(function(e){return!1===e.isUnauthorized?e:Q(Q({},e),{},{isUnauthorized:!1})}),b((0,D.pl)({doc:$.doc}))}},[r,er,eo,$,ee,L,en,o,c,w,b,k,s]),(0,h.useEffect)(function(){return function(){b((0,D.mc)())}},[b]),(0,h.useEffect)(function(){if(S&&G){var e="".concat(S.title?"".concat((0,f.lV)(S.title),"-"):"").concat(G);L!==e&&(0,O.lO)({pathname:"".concat(R,"/").concat(e).concat(z||""),emitChange:!1})}},[S,G,L,R,z]),U.docId)?(0,B.jsxs)(A.r.Provider,{value:U,children:[n,(0,B.jsx)(K,Q({},F))]}):(0,B.jsx)(B.Fragment,{})};function J(e){return(0,h.memo)(function(n){return(0,B.jsx)(X,{children:(0,B.jsx)(e,Q({},n))})})}},30174:function(e,n,t){t.d(n,{m:function(){return s}});var r=t(11919);t(2784);var o=t(35910),i=t(52322),s=function(e){var n=e.children;return(0,i.jsxs)(r.k,{alignSelf:"stretch",position:"relative",height:"var(--100vh)",direction:"column",children:[(0,i.jsx)(o.Y,{}),n]})}},1005:function(e,n,t){t.d(n,{m:function(){return F}});var r=t(81333),o=t(55452),i=t(87254),s=t(11919),c=t(53738),a=t(94659),l=t(36895),d=t(50390),u=t(91012),f=t(55966),p=t(2784),h=t(23313),x=t(43602),m=t(9846),v=t(46358),g=t(80318),j=t(6010),b=t(62141),C=t(10710),y={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},O=t(81188),w=t(83906),k=t(9088),S=t(30893),P=t(45650),I=t(40771),E=t(63849),D=t(2575),A=t(97907),T=t(65903),_=t.n(T),R=t(52322),L=function(e){var n=e.count,t=e.onClose,r=e.commentStatusFilter,c=e.setCommentStatusFilter,a=r===h.Ux9.Open?i.ag._({id:"Kz1TxG"}):i.ag._({id:"kywJax"});return(0,R.jsxs)(s.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,R.jsx)(d.X,{size:"md",flex:1,noOfLines:1,children:(0,R.jsx)(o.cC,{id:"eiUA4k",values:{count:n}})}),(0,R.jsxs)(k.v,{closeOnSelect:!0,children:[(0,R.jsx)(S.j,{as:P.z,size:"sm",rightIcon:(0,R.jsx)(w.v,{}),mr:8,children:_()(a)}),(0,R.jsx)(I.q,{zIndex:3,children:(0,R.jsxs)(E._,{defaultValue:r,title:i.ag._({id:"0cVgUw"}),type:"radio",children:[(0,R.jsx)(D.i,{onClick:function(){return c(h.Ux9.Open)},value:"open",children:(0,R.jsx)(o.cC,{id:"1TNIig"})}),(0,R.jsx)(D.i,{onClick:function(){return c(h.Ux9.Closed)},value:"closed",children:(0,R.jsx)(o.cC,{id:"D87pha"})})]})})]}),(0,R.jsx)(A.P,{position:"absolute",top:2,right:2,onClick:t,"data-comment-feed-close-button":!0})]})},z=t(95235),M=t(50350);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach(function(n){(0,z.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Z=function(e){var n=e.user,t=e.editor,r=(0,p.useState)(function(){var e=(0,g.W1)(t,M.Et);return e&&e.length?e[0]:(0,g.xN)(function(){return M.Et},t,"")}),o=r[0],i=r[1];(0,p.useEffect)(function(){if(o&&t)return function(){var e,n;null===(e=(n=t.commands).createDraftComment)||void 0===e||e.call(n,o)}},[o,t]);var s=(0,g.iZ)({draftComment:o,clearDraftComment:function(){o&&(null===(r=(s=t.commands).removeDraftComments)||void 0===r||r.call(s,[o]));var e,n,r,s,c=(0,g.xN)(function(){return M.Et},t,"");null===(e=(n=t.commands).createDraftComment)||void 0===e||e.call(n,c),i(c)},editor:t}),c=(0,p.useCallback)(function(e){var n=e.editor;i(function(e){return e?N(N({},e),{},{json:n.view.state.doc.toJSON(),text:n.view.state.doc.textContent}):e})},[]);return(0,R.jsx)(g.Ag,{draftComment:o,user:n,onCommentDraftUpdate:c,onCommentSave:s,commentIdToHighlight:null})},F=function(e){var n,t=e.onClose,w=e.editor,k=(0,v.CG)(b.yx),S=(0,h.$gs)().isConnected,P=(0,p.useState)(h.Ux9.Open),I=P[0],E=P[1],D=null==k?void 0:k.comments,A=null==k?void 0:null===(n=k.comments)||void 0===n?void 0:n.filter(function(e){return e.status===I}),T=(0,v.CG)(b.gh),_=(0,C.py)("comment",k)&&S,z=(0,C.SE)().user,M=(0,x.$m)(k,z),G=(0,p.useMemo)(function(){return(0,O.yd)({items:A||[],sortBy:O.Yz,latestTimeGetterFn:O.z3})},[A]);return D&&k&&w?(0,R.jsxs)(s.k,{direction:"column",h:"100%",overflowX:"hidden",className:j.G,w:"100%",children:[(0,R.jsx)(L,{commentStatusFilter:I,setCommentStatusFilter:E,count:(null==A?void 0:A.length)||0,onClose:t}),(0,R.jsxs)(s.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,R.jsx)(m.V,{label:(0,R.jsx)(o.cC,{id:"pQvCbR"}),isConnected:S,mx:6}),M&&!z&&k&&(0,R.jsx)(g.IZ,{doc:k,accessLink:M}),_&&(0,R.jsx)(c.xu,{px:6,py:2,children:(0,R.jsx)(Z,{user:z,editor:w})}),!(null!=A&&A.length)&&(0,R.jsxs)(a.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,R.jsx)(c.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,R.jsx)(l.E,{src:y.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,R.jsxs)(c.xu,{children:[(0,R.jsx)(d.X,{size:"xs",mb:2,children:"open"===I?(0,R.jsx)(o.cC,{id:"W7i5f5"}):(0,R.jsx)(o.cC,{id:"mpDN1V"})}),(0,R.jsx)(u.x,{fontSize:"sm",children:(0,R.jsx)(o.cC,{id:"iB9OEi"})})]})]}),Object.entries(G).filter(function(e){return(0,r.Z)(e,2)[1].length}).map(function(e){var n=(0,r.Z)(e,2),o=n[0],c=n[1];return(0,R.jsxs)(s.k,{direction:"column",children:[(0,R.jsx)(f.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:{today:i.ag._({id:"ecUA8p"}),thisWeek:i.ag._({id:"yByRxz"}),earlier:i.ag._({id:"HPqZkW"})}[o]}),(0,R.jsx)(s.k,{direction:"column",children:c.map(function(e){return(0,R.jsx)(g.q5,{instanceType:"feed",userCanComment:_,editor:w,comment:e,selfUser:z,docId:null==k?void 0:k.id,editorMode:T,onClose:t,isRootComment:!0,pt:6,px:6,pb:4},e.id)})})]},o)})]})]}):null}},80405:function(e,n,t){t.d(n,{s:function(){return x}});var r=t(95235),o=t(82269),i=t(2784),s=t(56692),c=t(76903),a=t(2875),l=t(46732),d=t(1005),u=t(52322),f=["closePanel"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var x=function(e){var n=e.closePanel,t=(0,o.Z)(e,f),r=(0,l._)().editor;return(0,i.useEffect)(function(){var e=function(e){e.open&&n()};return a.pw.on(a.TI.POPUP_COMMENT_TOGGLED,e),function(){a.pw.on(a.TI.POPUP_COMMENT_TOGGLED,e)}},[n]),(0,i.useEffect)(function(){return s.F7.on("keydown","COMMENT_FEED_PANEL",function(e){return!!document.activeElement.closest('[data-panelid="comment-feed-panel"]')&&("Escape"===e.key&&n(),!0)})},[n]),(0,u.jsx)(c.s,h(h({},t),{},{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,u.jsx)(d.m,{onClose:n,editor:r})}))};x.panelPosition="right"},3476:function(e,n,t){t.d(n,{Rr:function(){return ex},QK:function(){return eh}});var r=t(95235),o=t(82269),i=t(11919),s=t(87202),c=t(2784),a=t(98875),l=t(56692),d=t(76903),u=t(46358),f=t(2875),p=t(62141),h=t(46732),x=t(71961),m=t(64629),v=t(55452),g=t(71354),j=t(76648),b=t(67887),C=t(49929),y=t(55966),O=t(39097),w=t.n(O),k=t(19674),S=t(75085),P=t(30341),I=t(32333),E=t(17033),D=t(99083),A=t(9734),T=t(86733),_=t(36895),R=t(91012),L=t(45650),z=t(72360),M=t(66724),G=t(18751),N=t(88299),Z=t(52322),F=function(e){var n=e.onClose;return(0,Z.jsxs)(g.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,Z.jsx)(_.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,Z.jsx)(N.K,{children:(0,Z.jsx)(R.x,{children:(0,Z.jsx)(v.cC,{id:"jVQv+Q"})})}),(0,Z.jsx)(L.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,Z.jsx)(C.G,{icon:T.faXmark}),onClick:n,children:(0,Z.jsx)(v.cC,{id:"pqZJT2"})})]})},W=function(){return(0,Z.jsxs)(z.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,Z.jsx)(M.C,{children:(0,Z.jsx)(v.cC,{id:"rvbk/4"})}),(0,Z.jsx)(G.X,{children:(0,Z.jsx)(v.cC,{id:"XNkIFY"})})]})},U=t(12677),V=t(87254),B=t(8283),H=t(21891),q=t(25793),K=t(94659),Y=t(27191),Q=t(68740),X=t(95498),J=t(74586),$=t(21819),ee="40px",en=function(e){var n=e.value,t=e.onChange,r=e.onSubmit,o=e.isLoading,i=e.editor;e.resetMessages,(0,$.F1)(i);var s=i.state,a=s.selection,l=s.doc.textBetween(a.from,a.to,"\n"),d=(0,X.q)().hasEnoughCreditsToChat,u=(0,J.fg)(),f=(0,c.useRef)(null),p=(0,c.useState)(!1),h=p[0],x=p[1],m=a instanceof Y.qv,v=a instanceof Y.Bs,g=m&&"card"===a.node.type.name,j=a.empty||g?V.ag._({id:"XrfE9D"}):m?V.ag._({id:"CsUli9"}):v&&l?V.ag._({id:"+NPPZN",values:{0:l.length>50?l.slice(0,50)+"...":l}}):V.ag._({id:"/fY1js"}),O=(0,c.useCallback)(function(){f.current&&(f.current.style.height=ee,f.current.style.height="".concat(f.current.scrollHeight,"px"))},[]);return(0,c.useEffect)(function(){return i.on("selectionUpdate",O),function(){i.off("selectionUpdate",O)}},[i,O]),(0,c.useEffect)(function(){h?O():setTimeout(function(){x(!0),O()},400)},[h,j,O,n]),(0,Z.jsxs)(B.U,{align:"end",children:[(0,Z.jsx)(H.B,{size:"md",children:(0,Z.jsx)(q.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:ee,minH:ee,ref:f,resize:"none",maxH:h?32:ee,bg:"white",shadow:"md",autoFocus:!0,isDisabled:!d,placeholder:j,value:n,onKeyPress:function(e){"Enter"===e.key&&n.length>0&&!o&&(e.preventDefault(),r())},onChange:function(e){return t(e.target.value)},pr:12})}),(0,Z.jsx)(y.kH,{placement:"top",label:(0,Z.jsxs)(K.g,{spacing:0,children:[(0,Z.jsx)(R.x,{children:"Send request"}),!u&&(0,Z.jsxs)(R.x,{color:"gray.400",children:[(0,Z.jsx)(Q.J,{type:"chatSuggestion",ml:0})," if successful"]}),(0,Z.jsx)(y.f2,{shortcut:"Enter"})]}),children:(0,Z.jsx)(b.h,{"aria-label":"Send message",isDisabled:!n||o,size:"sm",h:ee,w:ee,variant:"solid",icon:(0,Z.jsx)(C.G,{icon:U.Fz,fixedWidth:!0}),onClick:r})})]})},et=t(76949),er=t(70548),eo=t(27563);function ei(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var es=function(e){var n=e.editor,t=e.scrollSelector,o=e.onClose,s=(0,c.useState)(""),l=s[0],d=s[1],f=(0,a.ye)("openAiStatus"),p=(0,u.TL)(),h=(0,P.As)("editor"),O=(0,u.qr)(),T=(0,u.CG)(er.AZ),_=(0,u.CG)(er.Q_),R=(0,c.useState)(null),L=R[0],z=R[1],M=(0,c.useCallback)(function(){return(0,er.AZ)(O.getState())},[O]),G=(0,c.useCallback)(function(e){var n=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ei(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ei(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({timestamp:Date.now()},e);p((0,er.Hz)({message:n}))},[p]),N=(0,c.useCallback)(function(){p((0,er.mc)())},[p]),U=(0,eo.n)({addMessage:G,getMessageHistory:M,editor:n}),V=U.status,B=U.sendMessage;(0,c.useEffect)(function(){var e=t&&document.querySelector(t);e&&requestAnimationFrame(function(){e.scrollTop=e.scrollHeight})},[t,T]);var H="idle"!==V;(0,c.useEffect)(function(){if(_.length&&!H){var e=_[0],n=e.task,t=e.id;!1===n.submit?d(n.message):B({message:n.message}),p((0,er.VB)({id:t}))}},[H,B,p,_]);var q=(0,c.useCallback)(function(){if(L&&n){var e=document.querySelector('[data-card-id="'.concat(L,'"]')),t=(0,P.v4)(e,100);null!=t&&t.yAxisInView||h.scrollElementIntoView({element:e})}},[n,h,L]),K=(0,c.useCallback)(function(e){q(),B({message:e})},[q,B]),Y=(0,c.useCallback)(function(){K(l),d("")},[K,l]);(0,c.useEffect)(function(){if(n){var e=function(){var e=(0,E.AQ)(n,n.state.selection.from);e&&z(e.node.attrs.id)};return e(),n.on("selectionUpdate",e),function(){n.off("selectionUpdate",e)}}},[n]);var Q=(0,D.n)();return n?"DOWN"===f?(0,Z.jsx)(F,{onClose:o}):(0,Z.jsxs)(i.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===f&&(0,Z.jsx)(W,{}),(0,Z.jsx)(et.rN,{scrollSelector:t,messages:T,editor:n,sendMessage:K,isLoading:H,onClose:o}),(0,Z.jsxs)(g.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,Z.jsx)(en,{editor:n,value:l,onChange:d,onSubmit:Y,isLoading:H,resetMessages:N}),(0,Z.jsx)(k.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:I.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,Z.jsxs)(j.h,{position:"absolute",left:4,top:1,variant:"ghost",colorScheme:"blackAlpha",children:[(0,Z.jsx)(y.kH,{label:(0,Z.jsx)(v.cC,{id:"5eg0kp"}),placement:"top",children:(0,Z.jsx)(b.h,{color:"currentColor","aria-label":"reset-chat",icon:(0,Z.jsx)(C.G,{icon:m.Yc}),onClick:N,isRound:!0})}),Q&&(0,Z.jsx)(y.kH,{label:(0,Z.jsx)(v.cC,{id:"JrXBQr",values:{GAMMA_ARTIFACT_PROPER_NOUN:S.Yc}}),placement:"top",children:(0,Z.jsx)(b.h,{color:"currentColor","aria-label":"source-prompt",icon:(0,Z.jsx)(C.G,{icon:x.Fz}),as:w(),href:Q,target:(0,A.Q5)()?"_self":"_blank",isRound:!0})})]})]}):null},ec=t(81234),ea=t(97907),el=function(e){var n=e.onClose;return(0,Z.jsx)(i.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,Z.jsx)(ea.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,right:6,zIndex:1,onClick:n})})},ed=["closePanel"];function eu(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ef(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eu(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eu(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ep="design-partner-panel-wrapper",eh=function(e){var n=e.toggleDesignPartnerPanel,t=e.isDesignPartnerPanelOpen,r=e.editor,o=(0,a.ye)("aiChat"),i=(0,u.TL)();(0,c.useEffect)(function(){return function(){i((0,er.mc)())}},[]);var d=(0,u.CG)(p.hN);(0,c.useEffect)(function(){!d&&t&&n()},[d,t,n]),(0,c.useEffect)(function(){var e,n;r&&(null===(e=(n=r.commands).setSalOpen)||void 0===e||e.call(n,t))},[r,t]),(0,c.useEffect)(function(){if(o)return ec.T.on("toggle",function(e){n(e.config)})},[n,o]),(0,c.useEffect)(function(){if(o)return f.pw.on("queueDesignPartnerTask",function(e){i((0,er.Lj)({task:e})),n({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",e)})},[i,o,n]),(0,c.useEffect)(function(){if(o&&d){var e=(0,s.ZP)("mod+shift+S");return l.F7.on("keydown","DESIGN_PARTNER_PANEL",function(t){return!!e(t)&&(n(),!0)})}},[n,o,d])},ex=function(e){var n=e.closePanel,t=(0,o.Z)(e,ed),r=(0,h._)().editor;return(0,c.useEffect)(function(){return l.F7.on("keydown","DESIGN_PARTNER_PANEL",function(e){return!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(n(),!0)})},[n]),(0,Z.jsx)(d.s,ef(ef({},t),{},{bgColor:"gray.50","data-panelid":"design-partner-panel",borderLeftWidth:"1px",children:(0,Z.jsxs)(i.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:ep,w:"100%",children:[(0,Z.jsx)(el,{onClose:n}),(0,Z.jsx)(es,{editor:r,scrollSelector:".".concat(ep),onClose:n})]})}))};ex.panelPosition="right"},92761:function(e,n,t){t.d(n,{m:function(){return $}});var r,o=t(95235),i=t(82269),s=t(55452),c=t(11919),a=t(76648),l=t(45650),d=t(84103),u=t(36895),f=t(55966),p=t(2784),h=t(75085),x=t(74586),m=t(32333),v=t(96368),g=t(59734),j=t(9734),b=t(12741),C=t(81333),y=t(73906),O=t(87254),w=t(75944),k=t(67887),S=t(55479),P=t(34638),I=t(20010),E=t(56915),D=t(48273),A=t(92619),T=t(64827),_=t(2167),R=t(71354),L=t(91012),z=t(49248),M=t(78361),G=t(49747),N=t(25793),Z=t(80353),F=t(49929),W=t(21010),U=t(93858),V=t(49392),B=t(52322),H=(r={},(0,o.Z)(r,W.pyi.Spam,{title:(0,B.jsx)(s.cC,{id:"Y5QK1F"})}),(0,o.Z)(r,W.pyi.Inappropriate,{title:(0,B.jsx)(s.cC,{id:"Zeb01n"})}),(0,o.Z)(r,W.pyi.Other,{title:(0,B.jsx)(s.cC,{id:"/IX/7x"})}),r),q=[W.pyi.Spam,W.pyi.Inappropriate,W.pyi.Other],K=function(e){var n=e.docId,t=(0,U._)(V.H.abuseReports,[]),r=(0,C.Z)(t,1)[0],o=(0,p.useState)(r.includes(n)),i=o[0],c=o[1],a=(0,w.q)({id:"report-page-modal"}),l=a.isOpen,d=a.onOpen,u=a.onClose,h=(0,p.useCallback)(function(){c(!0),u()},[u]),x=!i;return(0,B.jsxs)(B.Fragment,{children:[x&&l&&(0,B.jsx)(Y,{isOpen:!0,onClose:u,onSubmit:h}),x&&(0,B.jsx)(f.kH,{label:(0,B.jsx)(s.cC,{id:"ch68HI"}),children:(0,B.jsx)(k.h,{"aria-label":"Report this page",borderLeftWidth:"0px",color:"gray.600",variant:"plain",size:"sm",borderLeftRadius:0,icon:(0,B.jsx)(F.G,{icon:y.L1,size:"sm"}),onClick:d})})]})},Y=function(e){var n=e.isOpen,t=e.onClose,r=e.onSubmit,o=(0,U._)(V.H.abuseReports,[]),i=(0,C.Z)(o,2),c=i[0],d=i[1],u=(0,p.useState)(),h=u[0],x=u[1],m=(0,W.mvg)(),v=(0,C.Z)(m,1)[0],j=(0,p.useState)(),y=j[0],w=j[1],k=(0,S.p)(),F=(0,g._i)().docId,K=(0,p.useCallback)(function(){h&&v({variables:{input:{docId:F,reason:h,description:y}}}).then(function(){d([].concat((0,b.Z)(c),[F])),k({title:(0,B.jsx)(s.cC,{id:"7sBcV9"}),description:(0,B.jsx)(s.cC,{id:"m02YqD"}),status:"success",duration:5e3,isClosable:!0,position:"top"}),r()})},[h,v,F,y,d,c,k,r]),Y=(0,P.ff)("gray.800","gray.200");return(0,B.jsxs)(I.u_,{isOpen:n,onClose:t,trapFocus:!1,children:[(0,B.jsx)(E.Z,{}),(0,B.jsxs)(D.h,{color:Y,children:[(0,B.jsx)(A.x,{children:(0,B.jsx)(s.cC,{id:"ch68HI"})}),(0,B.jsx)(T.o,{}),(0,B.jsx)(_.f,{children:(0,B.jsxs)(R.K,{spacing:0,children:[(0,B.jsx)(L.x,{mb:6,children:(0,B.jsx)(s.cC,{id:"oNyQYO"})}),(0,B.jsx)(z.E,{onChange:function(e){x(e)},value:h,children:(0,B.jsx)(R.K,{children:q.map(function(e){var n=H[e];return(0,B.jsx)(M.Y,{value:e,children:null==n?void 0:n.title},e)})})}),(0,B.jsx)(G.U,{in:h===W.pyi.Other,children:(0,B.jsx)(N.g,{onChange:function(e){w(e.target.value)},maxLength:200,placeholder:O.ag._({id:"1ULmtx"}),mt:4})})]})}),(0,B.jsx)(Z.m,{children:(0,B.jsxs)(a.h,{children:[(0,B.jsx)(l.z,{colorScheme:"gray",onClick:t,variant:"ghost",children:(0,B.jsx)(s.cC,{id:"dEgA5A"})}),(0,B.jsx)(f.kH,{label:(0,B.jsx)(s.cC,{id:"h7+4yF"}),isDisabled:!!h,shouldWrapChildren:!0,children:(0,B.jsx)(l.z,{onClick:K,variant:"plain",colorScheme:"red.400",color:"red",_hover:{color:"red.600"},isDisabled:!h,children:(0,B.jsx)(s.cC,{id:"ovTgfk"})})})]})})]})]})},Q=["docWorkspace","forceShow","abuseReportingEnabled"];function X(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?X(Object(t),!0).forEach(function(n){(0,o.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var $=function(e){var n=e.docWorkspace,t=e.forceShow,r=e.abuseReportingEnabled,o=(0,i.Z)(e,Q),b=(0,g._i)().docId,C=(0,v.Yy)(),y=(0,m.z$)(),O=(0,p.useCallback)(function(){null==y||y.track(m.AA.MADE_WITH_GAMMA_CLICKED,{doc_id:b})},[y,b]),w=(0,x.dU)(n);return!1===(void 0!==t&&t)&&!1!==w?null:(0,B.jsx)(c.k,J(J(J({},(0,j.s2)()?{display:"flex",justifyContent:"center",m:6,position:"relative"}:{position:"fixed",right:[1,6],bottom:[1,4]}),o),{},{children:(0,B.jsx)(f.Wk,{isDark:C,children:(0,B.jsxs)(a.h,{isAttached:!0,sx:{".chakra-button":{borderRightRadius:"none","&:last-child":{borderRightRadius:"md"}}},children:[(0,B.jsx)(l.z,{as:d.r,onClick:O,variant:"plain",target:"_blank",href:"https://gamma.app/?utm_source=made-with-gamma&utm_medium=content",textDecoration:"none !important",leftIcon:(0,B.jsx)(u.E,{src:"/_next/static/media/GammaLogoGradient.43edb67f.svg",h:"1em"}),size:"sm",children:(0,B.jsx)(s.cC,{id:"vo61Ld",values:{GAMMA_PROPER_NOUN:h.N6}})}),(void 0===r||r)&&(0,B.jsx)(K,{docId:b})]})})}))}},96302:function(e,n,t){t.d(n,{VN:function(){return f},rJ:function(){return d},us:function(){return u}});var r=t(2784),o=t(98875),i=t(46358),s=t(74418),c=t(62141),a=t(14115),l="disable-card-size-animations",d=function(){var e=(0,o.ye)("autoZoomToFit"),n=(0,i.CG)(c.Kk);return null!=n?n:e},u=function(){var e=(0,i.CG)(c.i2),n=(0,r.useRef)(),t=d(),o=!a.Pv&&t;(0,r.useEffect)(function(){var t=!n.current;n.current=e;var r=t?s.nY:s.id/4;e&&o&&setTimeout(function(){document.body.classList.add(l),f(),setTimeout(function(){document.body.classList.remove(l)},s.id/2)},r)},[e,o])},f=function(){var e=(0,i.bh)(),n=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');t&&(e.dispatch((0,c.Ic)({zoomLevel:1})),setTimeout(function(){var r=t.scrollHeight,o=n/r;if(a.QX)o=Math.max(n/r,.7);else{if(o<.7)return;o=Math.floor(10*o)/10}e.dispatch((0,c.Ic)({zoomLevel:o})),console.debug("[zoomPresentModeToFit] zooming",JSON.stringify({viewportHeight:n,cardHeight:r,targetZoom:o}))}))}},50376:function(e,n,t){t.d(n,{Z:function(){return en}});var r=t(81333),o=t(55452),i=t(87254),s=t(81927),c=t(8848),a=t(24798),l=t(11919),d=t(91012),u=t(4036),f=t(53738),p=t(73848),h=t(45650),x=t(55479),m=t(78116),v=t(56915),g=t(16796),j=t(64827),b=t(92619),C=t(2167),y=t(89190),O=t(80353),w=t(76648),k=t(55966),S=t(65742),P=t(31807),I=t(65903),E=t.n(I),D=t(2784),A=t(24021),T=t(23313),_=t(75085),R=t(8388),L=t(51331),z=t(49922),M=t(32333),G=t(36738),N=t(74418),Z=t(35910);function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var W=function(e,n){var t=[];return!function e(r){if(n(r)&&t.push(r),r.content){var o,i=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return F(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F(e,n)}}(e))){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw i}}}}(r.content);try{for(i.s();!(o=i.n()).done;){var s=o.value;e(s)}}catch(e){i.e(e)}finally{i.f()}}}(e),t},U=t(59734),V=t(81188),B=t(67453),H=t(52322),q=function(){return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(s.O,{w:"350px",h:12}),(0,H.jsx)(c.N,{mt:3,w:64,noOfLines:1})]})},K=function(e){var n=e.createdTime,t=e.editors,r=e.isLatest,i=e.onClick,s=e.showPaywall,c=e.paywallCount;if(!t||!t.length)return(0,H.jsx)(H.Fragment,{});var p=s?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",h=(0,H.jsxs)(a.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:p,maskImage:p},border:"none",isDisabled:s,opacity:"1 !important",onClick:i,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,H.jsxs)(l.k,{w:"100%",direction:"column",children:[(0,H.jsx)(d.x,{fontSize:"sm",children:E()((0,V.P9)(n))}),(0,H.jsx)(d.x,{fontSize:"xs",flex:1,children:t[0].displayName})]}),r&&(0,H.jsx)(u.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,H.jsx)(o.cC,{id:"wL3cK8"})})]});return s?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(k.kH,{placement:"top",isDisabled:!s,label:s?(0,H.jsx)(o.cC,{id:"PYTBm5",values:{paywallCount:c}}):void 0,children:(0,H.jsx)(f.xu,{mb:4,children:h})}),(0,H.jsx)(z.m,{isNarrow:!0,segmentEvent:M.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,H.jsx)(o.cC,{id:"mVKYtH"})})]}):h},Y=function(e){var n,t=(0,L.Yt)(),r=(0,D.useMemo)(function(){if("unlimited"===t)return{items:e,paywalledItems:[]};var n=parseInt(t),r=e.filter(function(e,t){return 0===t||(0,P.Z)(e.createdTime)>=new Date(Date.now()-864e5*n)}),o=e.slice(r.length,e.length),i=o.length?o[0]:null;return{items:r.concat(i?[i]:[]),paywalledItems:o}},[t,e]),o=r.items,i=r.paywalledItems;return{groupedSnapshots:(0,D.useMemo)(function(){return(0,V.yd)({items:o,sortBy:"createdTime"})},[o]),paywalledSnapshotId:null===(n=i[0])||void 0===n?void 0:n.id,paywallCount:i.length}},Q=function(e){var n=e.groupedSnapshots,t=e.paywalledSnapshotId,s=e.paywallCount,c=e.onClick,a=e.showFetchMore,l=e.onFetchMoreClick,d=e.isFetchingMore;return(0,H.jsxs)(p.t,{w:"100%",children:[Object.entries(n).filter(function(e){return(0,r.Z)(e,2)[1].length}).map(function(e,n){var o=(0,r.Z)(e,2),a=o[0],l=o[1];return(0,H.jsxs)(D.Fragment,{children:[(0,H.jsx)(k.NZ,{px:4,py:2,mx:0,mt:2,children:{today:i.ag._({id:"ecUA8p"}),thisWeek:i.ag._({id:"yByRxz"}),earlier:i.ag._({id:"HGg4T/"})}[a]}),l.map(function(e,r){var o=e.createdTime,i=e.editors,a=e.id;return(0,H.jsx)(K,{onClick:function(){return c(a)},isLatest:0===n&&0===r,createdTime:o,editors:i,showPaywall:t===a,paywallCount:s},a)})]},a)}),a&&(0,H.jsx)(h.z,{isLoading:d,onClick:l,children:(0,H.jsx)(o.cC,{id:"yQ2kGp"})})]})},X=function(){return(0,H.jsxs)(p.t,{w:"100%",children:[(0,H.jsx)(s.O,{h:16}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2})]})},J=function(e){var n=e.title,t=e.createdBy,r=e.createdTime,i=e.numSnapshots;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(d.x,{mt:1,children:(0,H.jsx)(o.cC,{id:"yf//Op",values:{0:(0,R.Dw)(r),1:(0,R.Dw)(r),numSnapshots:i}})}),(0,H.jsx)(d.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,H.jsx)(o.cC,{id:"JVHTIo",values:{0:null!=t&&t.displayName?null==t?void 0:t.displayName:"Unknown",1:(0,R.p6)(r,"PPp"),title:n}})})]})},$="snapshot-editor-root",ee=function(e){var n=e.id,t=e.doc,r=e.content,o=(0,D.useMemo)(function(){if(r)return W(r,function(e){return e.type===N.W4}).map(function(e){var n;return{__typename:"Card",id:(null===(n=e.attrs)||void 0===n?void 0:n.id)||"",docId:t.id,title:(0,S.getCardTitle)(e),createdTime:t.createdTime,updatedTime:t.updatedTime,archived:!1}})},[r,t]);return(0,H.jsx)(G.fb,{reduxData:{cards:o},initialContent:r,doc:t,docId:t.id,scrollingParentSelector:".".concat($),isInsideDrawer:!0},n)},en=function(e){var n=e.isOpen,t=e.onClose,i=e.doc,s=(0,x.p)(),c=(0,U._i)().getCollaborativeEditorInstance,a=(0,D.useState)(!1),d=a[0],u=a[1],p=(0,T.pfN)({variables:{docId:i.id,first:25},skip:!i||!n,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),S=p.loading,P=p.data,I=p.called,E=p.fetchMore,L=(0,T.opq)({nextFetchPolicy:"cache-only"}),z=(0,r.Z)(L,2),M=z[0],G=z[1],N=G.loading,F=G.data,W=(null==P?void 0:P.snapshots.edges.map(function(e){return e.node}))||[],V=Y(W),K=V.groupedSnapshots,en=V.paywalledSnapshotId,et=V.paywallCount,er=null==P?void 0:P.snapshots.pageInfo,eo=!!(!en&&I&&(null==er?void 0:er.hasNextPage)&&(null==er?void 0:er.endCursor)),ei=(0,D.useCallback)(function(){null!=er&&er.hasNextPage&&null!=er&&er.endCursor&&(u(!0),E({variables:{after:er.endCursor}}).finally(function(){u(!1)}))},[E,null==er?void 0:er.endCursor,null==er?void 0:er.hasNextPage]),es=W[0];(0,D.useEffect)(function(){null!=es&&es.id&&M({variables:{snapshotId:es.id,docId:i.id}})},[i.id,M,null==es?void 0:es.id]);var ec=(0,B.$)(null==i?void 0:i.title),ea=null==i?void 0:i.createdBy,el=null==i?void 0:i.createdTime,ed=null==F?void 0:F.snapshot,eu=ed&&ed.id===i.currentSnapshotId;return(0,H.jsx)(k.Wk,{isDark:!1,children:(0,H.jsxs)(m.d,{placement:"bottom",onClose:t,isOpen:n,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,H.jsx)(v.Z,{}),(0,H.jsxs)(g.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,H.jsx)(j.o,{}),(0,H.jsxs)(b.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[S&&(0,H.jsx)(q,{}),i&&W&&(0,H.jsx)(J,{numSnapshots:(null==W?void 0:W.length)||0,createdBy:ea,createdTime:el,title:ec})]}),(0,H.jsx)(C.f,{p:0,h:"100%",children:(0,H.jsxs)(l.k,{direction:"row",h:"100%",children:[(0,H.jsx)(f.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,H.jsxs)(y.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[S&&(0,H.jsx)(X,{}),!S&&W&&(0,H.jsx)(Q,{onClick:function(e){M({variables:{snapshotId:e,docId:i.id}})},groupedSnapshots:K,paywalledSnapshotId:en,paywallCount:et,showFetchMore:eo,onFetchMoreClick:ei,isFetchingMore:d})]})}),(0,H.jsx)(l.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:$,css:{"--editor-width":"100%"},children:(0,H.jsxs)(l.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,H.jsx)(Z.Y,{}),(!ed||N)&&(0,H.jsx)(A.AA,{}),ed&&!N&&(0,H.jsx)(ee,{id:ed.id,doc:i,content:null==ed?void 0:ed.content.default})]})})]})}),(0,H.jsx)(O.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,H.jsxs)(w.h,{spacing:4,children:[(0,H.jsx)(h.z,{variant:"ghost",onClick:t,children:(0,H.jsx)(o.cC,{id:"dEgA5A"})}),(0,H.jsx)(k.kH,{label:eu?(0,H.jsx)(o.cC,{id:"HJo72u"}):(0,H.jsx)(o.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,H.jsx)(h.z,{variant:"solid",isDisabled:!ed||eu,onClick:function(){if(ed){var e,n=null==W?void 0:null===(e=W.find(function(e){return e.id===ed.id}))||void 0===e?void 0:e.createdTime,r=c();if(r){r.commands.setContent(ed.content.default,!0);var i=ed.content.annotationsAbsolute;i?r.commands.restoreAnnotations(i):r.commands.clearAnnotations(),t(),s({title:(0,H.jsx)(o.cC,{id:"7ovf4C"}),description:(0,H.jsx)(o.cC,{id:"DTim6X",values:{0:n?(0,R.p6)(n,"PPp"):"selected snapshot",GAMMA_ARTIFACT_PROPER_NOUN:_.Yc}}),status:"success",duration:5e3,isClosable:!0})}}},children:(0,H.jsx)(o.cC,{id:"yKu/3Y"})})})]})})]})]})})}},74624:function(e,n,t){t.d(n,{U:function(){return M}});var r=t(81333),o=t(60670),i=t(54728),s=t(51434),c=t(94301),a=t(91333),l=t(10344),d=t(49929),u=t(2784),f=t(23313),p=t(26087),h=t(2875),x=t(10710),m=t(51839),v=t(23015),g=t(98666),j=t(51823),b=t(25298),C=t(53738),y=t(71354),O=t(98841),w=t(25925),k=t(6563),S=t(52322),P=(0,O.E)(C.xu),I=function(e){var n=e.commentFeedItems,t=e.editor,r=e.doc,o=e.user;return t&&o?(0,S.jsx)(y.K,{p:2,children:(0,S.jsx)(w.M,{initial:!1,children:n.map(function(e){return(0,S.jsx)(P,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,S.jsx)(k.q,{comment:e,editor:t,selfUser:o,docId:r.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id)})})}):null},E=t(95235),D=t(55479),A=t(38140),T=t(37914);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach(function(n){(0,E.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var L=function(e){return!!e.comment&&null!==e.timeout},z=function(e){var n=e.user,t=e.docId,o=e.docComments,i=void 0===o?[]:o,s=e.pauseExiration,c=void 0!==s&&s,a=e.duration,l=void 0===a?5e3:a,d=(0,D.p)(),p=null==n?void 0:n.id,h=(0,u.useMemo)(function(){if(!p)return null;var e=new A.default(T.v.KNOCK_PUBLIC_KEY);return e.authenticate(p),e},[p]),x=(0,u.useState)({}),m=x[0],v=x[1],g=(0,u.useRef)(!0),j=(0,u.useRef)(c);j.current=c,(0,u.useEffect)(function(){return function(){g.current=!1}},[]);var b=(0,u.useCallback)(function(){return v({})},[]),C=(0,u.useCallback)(function(e){v(function(n){return Object.entries(n).reduce(function(n,t){var o=(0,r.Z)(t,2),i=o[0],s=o[1];return(!0===e?-1===s.timeout:i===e)||(n[i]=s),n},{})})},[]);return(0,u.useEffect)(function(){c||C(!0)},[C,c]),(0,u.useEffect)(function(){Object.entries(m).forEach(function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1],s=o.entry;if(null===o.timeout){var c=s.data.commentId,a=null==i?void 0:i.find(function(e){return e.id===c});if(a){var d=setTimeout(function(){g.current&&(j.current?v(function(e){var n=R({},e);return n[t].timeout=-1,n}):C(t))},l);v(function(e){return R(R({},e),{},(0,E.Z)({},t,{entry:s,comment:a,timeout:d}))})}}})},[m,i,l,C]),(0,u.useEffect)(function(){if(h&&t){var e=h.feeds.initialize(T.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),n=e.listenForUpdates();e.on("messages.new",function(n){var o=n.entries,i=(0,r.Z)(o,1)[0];i.data.docId===t&&(v(function(e){return R(R({},e),{},(0,E.Z)({},i.id,{entry:i,timeout:null}))}),e.markAsSeen(i).then(function(){console.debug("New notification marked as seen")}).catch(function(e){console.error("Unable to mark notification as seen",e)}))});var o=f.C9N.on("status",function(e){var n=e.isConnected,t=h.client();n?t.connectSocket():t.disconnectSocket()});return function(){o(),n()}}},[t,d,h]),{reset:b,comments:Object.values(m).filter(L).map(function(e){return e.comment})}},M=function(e){var n,t=e.toggleCommentsPanel,C=e.isCommentsPanelOpen,y=e.doc,O=e.mode,w=(0,x.SE)().user,k=(0,m._i)().editor,P=(0,g.XI)(),E=(0,r.Z)(P,2),D=E[0],A=E[1],T=z({user:w,docId:null==y?void 0:y.id,docComments:null==y?void 0:y.comments,pauseExiration:A}),_=T.comments,R=T.reset,L=!!(k&&y&&y.comments);(0,u.useEffect)(function(){if(L){var e=(0,j.sY)().commentId;e&&h.pw.emit(h.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})}},[L]),(0,u.useEffect)(function(){(C||O===p.q.SLIDE_VIEW)&&R()},[C,R,O]);var M=!!_.length&&!C&&O!==p.q.SLIDE_VIEW,G=(null==y?void 0:null===(n=y.comments)||void 0===n?void 0:n.filter(function(e){return e.status===f.Ux9.Open}).length)||0;return(0,S.jsxs)(i.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:M,placement:"bottom",children:[(0,S.jsx)(s.x,{children:(0,S.jsx)(b.h,{onMouseDown:v.br,onClick:t,icon:(0,S.jsx)(d.G,{icon:o.Mz}),isActive:C,"aria-label":C?"Hide comments":"Show comments",borderRadius:5,children:G})}),(0,S.jsx)(c.h,{children:y&&(0,S.jsxs)(a.y,{bg:"white",shadow:"lg",border:"none",ref:D,children:[(0,S.jsx)(l.Q,{bg:"white"}),(0,S.jsx)(I,{editor:k,user:w,commentFeedItems:_,doc:y})]})})]})}},5735:function(e,n,t){t.d(n,{u:function(){return u}});var r=t(16686),o=t(55452),i=t(11919),s=t(49929),c=t(55966),a=t(81234),l=t(25298),d=t(52322),u=function(){return(0,d.jsx)(i.k,{children:(0,d.jsx)(c.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,d.jsx)(o.cC,{id:"EVnzPs"}),children:(0,d.jsx)(l.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",onClick:function(){a.T.emit("toggle",{})},icon:(0,d.jsx)(s.G,{icon:r.Jy})})})})}},45390:function(e,n,t){t.d(n,{a:function(){return d}});var r=t(53738),o=t(98841),i=t(25925),s=t(46358),c=t(62141),a=t(52322),l=(0,o.E)(r.xu),d=function(){var e=(0,s.CG)(c.WI),n=(0,s.CG)(c.yn);return(0,a.jsx)(i.M,{initial:!1,children:e&&n&&(0,a.jsx)(l,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})}},47090:function(e,n,t){t.d(n,{T:function(){return eB}});var r=t(95235),o=t(60697),i=t(2885),s=t(47557),c=t(55452),a=t(20372),l=t(78116),d=t(56915),u=t(16796),f=t(64827),p=t(92619),h=t(2167),x=t(89190),m=t(73848),v=t(24798),g=t(53738),j=t(84520),b=t(95085),C=t(49929),y=t(55966),O=t(2784),w=t(30118),k=t(46358),S=t(2875),P=t(21529),I=t(62141),E=t(6985),D=t(81333),A=t(8097),T=t(60831),_=t(69943),R=t(97968),L=t(34302),z=t(87254),M=t(71354),G=t(40110),N=t(9088),Z=t(30893),F=t(45650),W=t(40771),U=t(63849),V=t(2575),B=t(91012),H=t(4036),q=t(8283),K=t(50390),Y=t(71193),Q=t(54336),X=t(11919),J=t(81170),$=t(52322);function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function en(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var et=function(e){var n=e.updateDocSetting,t=(0,k.CG)(I.US),r=t.defaultFullBleed,o=t.defaultContentWidth,s=t.presentBackdrop,a=t.cardDimensions,l=(0,J.l)(a);return(0,$.jsxs)(M.K,{spacing:5,mt:4,divider:(0,$.jsx)(G.i,{}),children:[(0,$.jsx)(er,{title:z.ag._({id:"jBvtuq"}),description:z.ag._({id:"Q3Qdcd"}),icon:L.qn,control:(0,$.jsxs)(N.v,{isLazy:!0,children:[(0,$.jsx)(Z.j,{minW:36,textAlign:"left",as:F.z,size:"sm",variant:"plain",leftIcon:(0,$.jsx)(C.G,{icon:l.icon,fixedWidth:!0}),rightIcon:(0,$.jsx)(C.G,{icon:A.pt}),style:{marginLeft:"1rem"},children:l.label()}),(0,$.jsx)(W.q,{maxW:"400px",children:(0,$.jsx)(U._,{value:a||"fluid",type:"radio",onChange:function(e){n("cardDimensions",e)},children:Object.entries(J.b).map(function(e){var n=(0,D.Z)(e,2),t=n[0],r=n[1],o=r.label,i=r.description;return(0,$.jsxs)(V.i,{value:t,children:[(0,$.jsxs)(B.x,{children:[o(),"fluid"===t&&(0,$.jsxs)($.Fragment,{children:[" ",(0,$.jsx)(H.C,{colorScheme:"gray",ml:1,children:(0,$.jsx)(c.cC,{id:"ovBPCi"})})]})]}),(0,$.jsx)(B.x,{fontSize:"xs",color:"gray.500",children:i()})]},t)})})})]})}),(0,$.jsx)(er,{title:z.ag._({id:"lklIf1"}),description:z.ag._({id:"aJ+ISV"}),icon:R.dH,value:"lg"===o,onChange:function(e){return n("defaultContentWidth",e?"lg":void 0)}}),(0,$.jsx)(er,{title:z.ag._({id:"lsVq2Z"}),description:z.ag._({id:"u/0NJZ"}),icon:_.r9,value:"full"===r,onChange:function(e){return n("defaultFullBleed",e?"full":void 0)}}),(0,$.jsx)(er,{title:z.ag._({id:"7VfbQM"}),description:z.ag._({id:"XZHPlI"}),icon:i.UH,value:s,onChange:function(e){return n("presentBackdrop",e)}}),(0,$.jsxs)(M.K,{children:[(0,$.jsx)(B.x,{fontSize:"xs",color:"gray.600",children:(0,$.jsx)(c.cC,{id:"ymPKi7"})}),(0,$.jsxs)(q.U,{alignItems:"flex-start",spacing:"4",children:[(0,$.jsx)(ei,{label:z.ag._({id:"wl99H6"}),cardDimensions:l,isWide:"lg"===o,showBackdrop:"full"!==r,scaleCardUp:!1}),(0,$.jsx)(ei,{label:z.ag._({id:"GWjDlt"}),cardDimensions:l,isWide:"lg"===o,showBackdrop:s&&"full"!==r,scaleCardUp:!s||"full"===r})]})]})]})},er=function(e){var n=e.title,t=e.description,r=e.icon,o=e.children,i=e.helpDescription,s=e.value,c=e.onChange,a=e.control;return(0,$.jsxs)(q.U,{alignItems:"flex-start",spacing:2,children:[r&&(0,$.jsx)(B.x,{fontSize:"lg",width:8,maxW:8,children:(0,$.jsx)(C.G,{icon:r,fixedWidth:!0})}),(0,$.jsxs)(M.K,{spacing:4,flex:1,children:[(0,$.jsxs)(M.K,{spacing:1,children:[(0,$.jsxs)(K.X,{size:"sm",fontWeight:"semibold",children:[n," ",i?(0,$.jsx)(y.Yq,{label:i,ml:1}):null]}),(0,$.jsx)(B.x,{fontSize:"xs",color:"gray.600",children:t})]}),o]}),c&&(0,$.jsx)(Y.r,{isChecked:s,onChange:function(e){return c(e.target.checked)}}),a]})},eo=function(e){var n=e.hideExtraLines;return(0,$.jsxs)(M.K,{w:"100%",py:2,px:2.5,children:[(0,$.jsx)(g.xu,{w:20,h:1.5,bg:"gray.200"}),(0,$.jsxs)(q.U,{flex:"1",alignItems:"flex-start",children:[(0,$.jsx)(Q.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,$.jsx)(g.xu,{fontSize:"lg",children:(0,$.jsx)(C.G,{icon:T.Vm})})}),(0,$.jsxs)(M.K,{flex:"1",spacing:"1",children:[(0,$.jsx)(g.xu,{h:1,bg:"gray.200"}),(0,$.jsx)(g.xu,{h:1,bg:"gray.200"}),(0,$.jsx)(g.xu,{h:1,bg:"gray.200"}),(0,$.jsx)(g.xu,{w:n?"80%":"100%",h:1,bg:"gray.200"}),!n&&(0,$.jsx)(g.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},ei=function(e){var n=e.cardDimensions,t=e.showBackdrop,r=e.isWide,o=e.label,i=e.scaleCardUp,s={boxShadow:"".concat(t?"sm":""),w:"".concat(r?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(i?"scale(1.15)":"none")};return(0,$.jsxs)(M.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,$.jsx)(X.k,{bg:t?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:n.aspectRatio?(0,$.jsx)(Q.o,en(en({},s),{},{ratio:n.aspectRatio,children:(0,$.jsx)(g.xu,{children:(0,$.jsx)(eo,{hideExtraLines:r})})})):(0,$.jsx)(M.K,en(en({},s),{},{children:(0,$.jsx)(eo,{hideExtraLines:r})}))}),(0,$.jsx)(B.x,{fontSize:"xs",color:"gray.700",children:o})]})},es=t(72360),ec=t(48322),ea=t(35634),el=t(74928),ed=t(35258),eu=function(e){var n=e.editor,t=(0,k.CG)(I.Pu),r=(0,k.CG)(I.XV),o=(0,O.useCallback)(function(e){null==n||n.commands.updateNestedAttributesAtPos(0,e)},[n]);return(0,$.jsx)(ed.o,{editor:n,background:r,updateNestedAttributes:o,defaultMessage:(0,$.jsxs)(es.b,{children:[(0,$.jsx)(ec.z,{}),(0,$.jsx)(c.cC,{id:"dyXYfJ"})]}),isDark:(0,ea.wj)(t),isValidSource:el.Rr})},ef=t(2046),ep=t(70287),eh=t(27777),ex=t(25793),em=t(69232),ev=t(23313),eg=t(65185),ej=t(87796),eb=t(51331),eC=t(78308),ey=t(52596),eO=t(85041),ew=t(55479),ek=t(93319),eS=t(21891),eP=t(92936),eI=t(79821),eE=t(76648),eD=t(60807),eA=t(84103),eT=t(67904),e_=t(74586),eR=t(13419),eL=t(42879),ez=t(68197),eM=t(47827),eG=function(e,n){var t;return null==e?void 0:null===(t=e.routes.find(function(e){return e.docId===n}))||void 0===t?void 0:t.path},eN=function(){var e=(0,ew.p)(),n=(0,eM.AA)().openPageSetup,t=(0,e_._O)(),r=(0,k.CG)(ez.yx),o=(0,k.CG)(eR.lH),i=(0,ev.qbt)(),s=(0,D.Z)(i,2),a=s[0],l=s[1].loading,d=eG(o,null==r?void 0:r.id),u=(0,O.useState)(function(){return(0,eL.es)(d||"")}),f=u[0],p=u[1],h=(0,O.useState)(function(){return(0,eL.es)(d||"")}),x=h[0],m=h[1],v=(0,eL.gT)({routes:(null==o?void 0:o.routes)||[],path:(0,eL.fJ)(f),docId:null==r?void 0:r.id}),j=!!v,b=x!==f&&!j,C=(0,O.useCallback)(function(){p(x)},[x]),y=(0,O.useCallback)(function(){if(b){if(!(null!=o&&o.id)||!(null!=r&&r.id)){console.error("Missing site or doc");return}var n=(0,eL.Is)(f);a({variables:{input:{siteId:o.id,docId:r.id,path:n}},refetchQueries:["GetSite"]}).then(function(){m((0,eL.es)(n)),p((0,eL.es)(n))}).catch(function(n){e({status:"error",title:(0,$.jsx)(c.cC,{id:"dl5vwx"}),description:n.message}),console.error("[UrlSlugForm] Error setting route",n.message)})}},[b,null==r?void 0:r.id,f,a,null==o?void 0:o.id,e]);return t?(0,$.jsxs)(M.K,{pb:6,children:[(0,$.jsx)(M.K,{direction:"row",children:(0,$.jsxs)(B.x,{children:[(0,$.jsx)(c.cC,{id:"dq8+qI"})," "]})}),(0,$.jsx)(ek.L,{}),(0,$.jsx)(M.K,{spacing:2,children:(0,$.jsx)(q.U,{spacing:1,children:(0,$.jsxs)(ef.NI,{as:"fieldset",isInvalid:j,children:[(0,$.jsx)(q.U,{children:(0,$.jsxs)(eS.B,{children:[(0,$.jsx)(eP.Ui,{children:"/"}),(0,$.jsx)(eh.I,{isDisabled:l,bg:"white",flex:2,value:f,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),y())},onChange:function(e){p((0,eT.IR)(e.currentTarget.value))}}),(0,$.jsx)(eI.R,{in:b,unmountOnExit:!0,children:(0,$.jsx)(g.xu,{ml:2,children:(0,$.jsxs)(eE.h,{w:"100%",children:[(0,$.jsx)(F.z,{variant:"solid",isLoading:l,isDisabled:j,onClick:y,children:(0,$.jsx)(c.cC,{id:"tfDRzk"})}),(0,$.jsx)(F.z,{onClick:C,children:(0,$.jsx)(c.cC,{id:"dEgA5A"})})]})})})]})}),v?(0,$.jsx)(eD.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,$.jsx)(B.x,{fontSize:"xs",children:(0,$.jsx)(c.cC,{id:"DQaTdC",components:{0:(0,$.jsx)(eA.r,{textDecoration:"underline",onClick:function(){return n(v.docId,"preview")}})}})})}):(0,$.jsx)(ef.Q6,{fontSize:"sm",children:(0,$.jsx)(M.K,{alignContent:"flex-start",justifyContent:"space-between",direction:"row",w:"100%",children:(0,$.jsx)(M.K,{spacing:1,children:(0,$.jsx)(B.x,{color:"gray.500",children:(0,$.jsx)(c.cC,{id:"ZMlbHK"})})})})})]})})})]}):(0,$.jsx)($.Fragment,{})},eZ=t(98666),eF=function(e){var n=e.updateDocSetting,t=(0,k.CG)(I.US).metaDescription,r=(0,k.CG)(I.yx),o=(0,k.CG)(eg.cn),i=(0,k.CG)(eg.$4),s=(0,O.useState)(function(){return(null==r?void 0:r.title)||""}),a=s[0],l=s[1],d=(0,O.useState)(function(){return t||""}),u=d[0],f=d[1],p=(0,ev.D1_)(),h=(0,D.Z)(p,1)[0],x=(0,O.useCallback)(function(e){r&&h({variables:{id:r.id,title:e}})},[r,h]),m=(0,eZ.Kt)(x,300),v=(0,O.useCallback)(function(e){l(e.target.value.substring(0,eO.S8)),m(e.target.value.substring(0,eO.S8))},[m]),j=(0,O.useCallback)(function(e){n("metaDescription",e)},[n]),b=(0,eZ.Kt)(j,300),C=(0,k.CG)(eg.NN),y=null==C?void 0:C.previewUrl,w=(0,eb.dU)(null==r?void 0:r.organization),S=(0,ej.U)(a||o,w),P=(0,ej.V)(u||i,w);return(0,$.jsxs)(M.K,{spacing:4,children:[(0,$.jsxs)(ef.NI,{children:[(0,$.jsxs)(q.U,{justifyContent:"center",children:[(0,$.jsx)(ep.l,{flex:"1",children:(0,$.jsx)(c.cC,{id:"MHrjPM"})}),(0,$.jsx)(em.W,{length:a.length||0,idealLength:eO.si,maxLength:eO.S8})]}),(0,$.jsx)(eh.I,{value:a,placeholder:o||z.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:function(e){"Enter"===e.key&&x(a)},onChange:v,"data-title-input":!0})]}),(null==r?void 0:r.site)&&(0,$.jsx)(eN,{}),(0,$.jsxs)(ef.NI,{children:[(0,$.jsxs)(q.U,{justifyContent:"center",children:[(0,$.jsx)(ep.l,{flex:"1",children:(0,$.jsx)(c.cC,{id:"Nu4oKW"})}),(0,$.jsx)(em.W,{length:u.length||0,idealLength:eO.cl,maxLength:eO.Us})]}),(0,$.jsx)(ex.g,{bg:"white",rows:4,value:u,placeholder:i||z.ag._({id:"2VBqT4"}),onChange:function(e){f(e.target.value.substring(0,eO.Us)),b(e.target.value.substring(0,eO.Us))}})]}),(0,$.jsxs)(g.xu,{p:4,pt:3,bg:"gray.100",borderRadius:"md",children:[(0,$.jsxs)(M.K,{spacing:2,mb:4,children:[(0,$.jsx)(B.x,{size:"sm",children:(0,$.jsx)(c.cC,{id:"h8sMnd"})}),(0,$.jsx)(eW,{title:S,description:P,screenshotUrl:y})]}),(0,$.jsxs)(M.K,{spacing:2,children:[(0,$.jsx)(B.x,{size:"sm",children:(0,$.jsx)(c.cC,{id:"d3xOlk"})}),(0,$.jsx)(eU,{title:S,description:P,screenshotUrl:y}),(0,$.jsx)(B.x,{fontSize:"sm",color:"gray.500",children:(0,$.jsx)(c.cC,{id:"Ubf8D8"})})]})]}),(0,$.jsx)(ey.V,{label:(0,$.jsx)(c.cC,{id:"SDyz5I"}),segmentEvent:eC.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:r})]})},eW=function(e){var n=e.title,t=e.description,r=e.screenshotUrl;return(0,$.jsxs)(g.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,$.jsx)(Q.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,$.jsx)(g.xu,{bgColor:"gray.200",bgImage:"url(".concat(r,")"),backgroundSize:"cover",position:"relative"})}),(0,$.jsxs)(M.K,{px:4,py:3,spacing:1,children:[(0,$.jsx)(B.x,{fontSize:"md",fontWeight:"bold",noOfLines:2,children:n}),(0,$.jsx)(B.x,{fontSize:"xs",noOfLines:2,children:t})]})]})},eU=function(e){var n=e.title,t=e.description;return(0,$.jsxs)(M.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,$.jsx)(B.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:n}),(0,$.jsx)(B.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:t})]})},eV=["cards","background","preview"],eB=function(e){var n=e.editor,t=(0,k.CG)(I.ke),D=(0,w.M)({id:"pageSetupDisclosure"}),A=D.isOpen,T=D.onClose,_=D.onOpen,R=(0,O.useState)(0),L=R[0],z=R[1];(0,O.useEffect)(function(){var e=function(e){z(eV.indexOf(e)),_()},n=E.T.on("openPageSetup",e),t=S.pw.on(S.TI.OPEN_PAGE_SETUP,e);return function(){n(),t()}},[_,T]);var M=(0,P.A)(n),G=(0,O.useCallback)(function(e,t){null==n||n.commands.updateNestedAttributesAtPos(0,{settings:(0,r.Z)({},e,t)})},[n]),N=(0,a.S)({base:"calc(100% - 1rem)",lg:"auto"}),Z=(0,a.S)({base:"bottom",lg:"right"})||"right";return(0,$.jsx)(y.Wk,{isDark:!1,children:(0,$.jsxs)(l.d,{returnFocusOnClose:!1,isOpen:A,placement:Z,onClose:T,size:"md",blockScrollOnMount:!1,children:[(0,$.jsx)(d.Z,{background:{base:void 0,lg:"none"}}),(0,$.jsxs)(u.s,{"data-testid":"page-setup-drawer",onKeyDown:M,h:N,borderTopRadius:{base:"xl",lg:"none"},p:0,children:[(0,$.jsx)(f.o,{}),(0,$.jsx)(p.x,{children:(0,$.jsx)(c.cC,{id:"fvaOtb"})}),(0,$.jsx)(h.f,{overflowX:"hidden",children:(0,$.jsxs)(x.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:L,onChange:z,children:[(0,$.jsxs)(m.t,{children:[(0,$.jsxs)(v.O,{children:[(0,$.jsx)(g.xu,{mr:2,children:(0,$.jsx)(C.G,{icon:s.s2})}),(0,$.jsx)(c.cC,{id:"Ccpbzh"})]}),(0,$.jsxs)(v.O,{children:[(0,$.jsx)(g.xu,{mr:2,children:(0,$.jsx)(C.G,{icon:i.UH})}),(0,$.jsx)(c.cC,{id:"GtJbUa"})]}),(0,$.jsxs)(v.O,{children:[(0,$.jsx)(g.xu,{mr:2,children:(0,$.jsx)(C.G,{icon:o.g4})}),(0,$.jsx)(c.cC,{id:"rdUucN"})]})]}),(0,$.jsxs)(j.n,{children:[(0,$.jsx)(b.x,{p:2,mt:4,children:(0,$.jsx)(et,{editor:n,updateDocSetting:G},t)}),(0,$.jsx)(b.x,{p:2,mt:4,children:(0,$.jsx)(eu,{editor:n,updateDocSetting:G},t)}),(0,$.jsx)(b.x,{p:2,mt:4,children:(0,$.jsx)(eF,{editor:n,updateDocSetting:G},t)})]})]})})]})]})})}},10939:function(e,n,t){t.d(n,{OM:function(){return w},Zd:function(){return O},rU:function(){return k}});var r=t(55452),o=t(55479),i=t(11919),s=t(12221),c=t(91012),a=t(54073),l=t.n(a),d=t(18149),u=t.n(d),f=t(2784),p=t(98621),h=t.n(p),x=t(53923),m=t(46358),v=t(30341),g=t(62141),j=t(95472),b=t(59131),C=t(17477),y=t(52322),O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",t=(0,m.TL)(),r=(0,v.As)("editor"),o=(0,x.nO)(),i=(0,m.CG)(g.yn,u()),s=(0,m.CG)(g.k8,u()),c=!!(null==s?void 0:s.pos);(0,f.useEffect)(function(){if(e){var n=l()(function(){i&&t((0,g.Qx)({attached:!1}))},500,{leading:!0}),r=(0,C.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",n,!0),function(){r(),n.cancel(),document.removeEventListener("wheel",n,!0)}}},[e,t,i,c,n]);var a=(0,m.CG)(g.ks,u());(0,f.useEffect)(function(){if(e&&!a){var n=l()(function(){if(!r.inProgress){var n=(0,j.lI)(e,100,o);if(!n){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}t((0,g.Us)(n))}},250,{trailing:!0,maxWait:500}),i=l()(function(){if(!(e.state.selection instanceof b.c)){var n=document.querySelector(r.scrollSelector||""),o=null==n?void 0:n.getBoundingClientRect(),i=e.state.selection.from,s=(0,j.Sh)(e,i);if(!n||!o||!s){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:s});return}var c=s.getBoundingClientRect(),a=parseFloat(((e.view.coordsAtPos(i).top-c.y)/c.height).toFixed(2));t((0,g.Us)({pos:i,pct:a}))}},250,{trailing:!0,maxWait:500});return n(),e.on("selectionUpdate",i),window.addEventListener("scroll",n,!0),function(){e.off("selectionUpdate",i),window.removeEventListener("scroll",n,!0)}}},[e,t,r,a,o])},w=function(){var e=(0,o.p)(),n=(0,m.TL)();return(0,f.useCallback)(function(t){var o=t.collaborator,a=t.localIsFollowing,l=t.localIsAttached,d={attached:!0};a?l?d.following=null:e.closeAll():(d.following=o.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,y.jsxs)(i.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,y.jsx)(s.q,{size:"sm",src:o.profileImageUrl,border:"solid 2px ".concat(o.color),color:h()(o.color).isDark()?"white":"black",bg:o.color}),(0,y.jsx)(c.x,{ml:2,children:(0,y.jsx)(r.cC,{id:"lULvWe",values:{0:o.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(o.name,". Setting following to ").concat(d)),n((0,g.Qx)(d))},[e,n])},k=function(e){var n=e.editor,t=e.collaborators,r=e.user,o=(0,f.useRef)(!1),i=w(),s=new URLSearchParams(window.location.search),c=s.get("following_id"),a=s.get("follow_on_start");(0,f.useEffect)(function(){if(!o.current&&a&&(null==r?void 0:r.id)!==c&&n){var e=t.find(function(e){return e.id===c});e&&(i({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),o.current=!0)}},[c,a,n,t,r,i])}},34684:function(e,n,t){t.d(n,{J:function(){return C},P:function(){return b}});var r=t(55452),o=t(55479),i=t(87202),s=t(2784),c=t(46358),a=t(30341),l=t(47592),d=t(34264),u=t(42734),f=t(47191),p=t(62141),h=t(95472),x=t(51839),m=t(17477),v=t(52322),g=(0,i.ZP)("mod+S"),j=(0,i.ZP)("mod+shift+O"),b=function(){var e=(0,o.p)();(0,s.useEffect)(function(){var n=function(n){g(n)&&(n.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,v.jsx)(r.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},t=(0,m.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",n),function(){null==t||t(),window.removeEventListener("keydown",n)}},[e])},C=function(){var e=(0,c.qr)(),n=(0,c.TL)(),t=(0,x._i)().editor;(0,s.useEffect)(function(){if(t){var r=function(r){if(j(r)){r.preventDefault();var o=e.getState(),i=o.TipTap,s=i.cardIdMap,c=i.cardIds,a=i.memoState.expandedCards,d=(0,p.i2)(o),u=c.reduce(function(e,n){var t=!0===a[n],r=s.parents[n]||[],o=r.length>0,i=!d||r.includes(d);return o&&i&&(e.cardIds.push(n),e.total++,e.expanded+=t?1:0),e},{total:0,expanded:0,cardIds:[]}),f=u.total,h=u.expanded,x=u.cardIds;n((0,p.bj)({disable:!0})),setTimeout(function(){n((0,p.bj)({disable:!1}))},100);var m=f===h;y(t,100,!m),(0,l.Nn)(x,m)}};return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}},[n,e,t])},y=function(e,n,t){for(var r=(0,a.cC)("editor"),o=void 0,i=200;i>0;i-=25){var s,c=(0,h.Je)(e,r.scrollSelector,i);if(null!==(s=c.pos)&&void 0!==s&&s.pos){var l=void 0;e.state.doc.nodeAt(c.pos.pos)?l=c.pos.pos:e.state.doc.nodeAt(c.pos.inside)&&(l=c.pos.inside),l&&(!o||l>o)&&(o=l)}}if(!o){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}var d=O(e,o,t);if(!d){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,m.wO)({element:d,requiredCookie:"cardCollapseDebug=true"});var u=+new Date,f=r.scroller.scrollTop,p=(0,m.LY)(d,r.scrollSelector),x=f-p,v=x<0?0:Math.max(x+200,0);!function e(){if(d){var t=(0,m.LY)(d,r.scrollSelector);r.scroller.scroll({top:f+(t-p-v)}),+new Date-u<n&&requestAnimationFrame(e)}}()},O=function(e,n,t){var r,o=e.state.doc.resolve(n),i=e.state.doc.nodeAt(n),s=(0,h.Sh)(e,n);if(!i){console.warn("[getElementToPin] nodeAt null for $pos",o);return}var c=(0,h.nv)(o,function(){return!0}).reverse();for(c.push({start:o.start(o.depth+1),pos:n,depth:o.depth,node:i});c.length;){var a=c.shift();if(a){var l=(0,d.KH)(a.node),p=(0,u.SA)(a.node),x=(0,f.CU)(a.node),m=l||a.node.isAtom?a.pos:a.start;if(s=(0,h.Sh)(e,m),!t&&l&&a.depth>2||p||x)break}}for(;(null===(r=s)||void 0===r?void 0:r.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s}},28615:function(e,n,t){t.d(n,{j:function(){return h}});var r=t(5632),o=t(2784),i=t(1368),s=t(46358),c=t(74418),a=t(28463),l=t(62141),d=t(26087),u=t(43227),f=t(59734),p=t(51823),h=function(){var e=(0,f._i)().editor,n=(0,r.useRouter)(),t=(0,s.qr)();(0,o.useEffect)(function(){if(e){n.beforePopState(function(e){return!e.as.startsWith("/docs/")});var r=i.fI.on("changed",function(n){var r,o=(0,p.sY)(n.url).cardId,i=t.getState(),s=(0,l.gh)(i);if(console.debug("[useHandleCardHash][handleURLChange]",{payload:n,cardId:o}),s===d.q.DOC_VIEW&&null!==(r=n.state)&&void 0!==r&&r.fromPos&&"pop"===n.method){var u=n.state,f=u.fromPos,h=u.fromPct;e.chain().scrollToPositionInCard(f,h||void 0).command(function(e){var n=e.tr;return(0,a.B0)(f)(n),!0}).run()}else{var x=(0,l.xb)(i)[0];(0,c.YS)({cardId:o||x,editor:e})}});return function(){n.beforePopState(function(){return!0}),r()}}},[e,n,t]),(0,o.useEffect)(function(){if(e){var n=(0,p.sY)(window.location.href).cardId;n&&(0,u.D)({cardId:n,method:"replace"})}},[e])}},51839:function(e,n,t){t.d(n,{dM:function(){return uP},Ur:function(){return ua},nz:function(){return uq},_i:function(){return tl._i}});var r,o,i,s,c,a,l,d,u,f=t(95235),p=t(93812),h=t(55452),x=t(87254),m=t(11919),v=t(91012),g=t(53738),j=t(34676),b=t(49929),C=t(55966),y=t(97729),O=t.n(y),w=t(2784),k=t(43997),S=t(23313),P=t(43602),I=t(64288),E=t(87796),D=t(11197),A=t(81333),T=t(29106),_=t(75944),R=t(54728),L=t(51434),z=t(67887),M=t(91333),G=t(83897),N=t(96412),Z=t(13089),F=t(41701),W=t(90129),U=t(29017),V=t(48200),B=t(30733),H=t.n(B),q=t(12436),K=t.n(q),Y=function(e){(0,W.Z)(r,e);var n,t=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,V.Z)(r);if(n){var o=(0,V.Z)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,U.Z)(this,e)});function r(){var e;return(0,N.Z)(this,r),e=t.call(this),(0,f.Z)((0,F.Z)(e),"throttled",void 0),e.throttled=K()(function(n){e.emit("move",n)},200,{leading:!0}),document.addEventListener("mousemove",e.throttled),e}return(0,Z.Z)(r,[{key:"cleanup",value:function(){document.removeEventListener("mousemove",this.throttled)}}]),r}(t(98555).v),Q=H()(function(){return new Y}),X=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=Q(),r=(0,w.useState)(!1),o=r[0],i=r[1],s=(0,w.useRef)(n);return(0,w.useEffect)(function(){s.current=n},[n]),(0,w.useEffect)(function(){return t.on("move",function(n){s.current||i(e(n))})},[t,e]),o},J=t(46358),$=t(62141),ee=t(93858),en=t(49392),et=t(8812),er=t(17815),eo=t(35232),ei=t(63613),es=t(80891),ec=t(61374),ea=t(8283),el=t(96530),ed=t(71354),eu=t(50390),ef=t(5766),ep=t(40110),eh=t(45650),ex=t(52322),em=function(e){var n=e.label,t=e.shortcuts;return(0,ex.jsxs)(ea.U,{children:[t.map(function(e,n){return(0,ex.jsx)(el.T,{padding:1,children:e},n)}),(0,ex.jsx)(v.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:n})]})},ev=function(e){var n=e.onClose;return(0,ex.jsx)(g.xu,{children:(0,ex.jsxs)(ed.K,{spacing:6,children:[(0,ex.jsxs)(ed.K,{spacing:1,children:[(0,ex.jsxs)(ea.U,{color:"gray.500",children:[(0,ex.jsx)(b.G,{icon:T.UF})," ",(0,ex.jsx)(eu.X,{size:"xs",fontWeight:"normal",children:(0,ex.jsx)(h.cC,{id:"h7MgpO"})})]}),(0,ex.jsx)(eu.X,{size:"md",children:(0,ex.jsx)(h.cC,{id:"UodEcE"})})]}),(0,ex.jsxs)(ef.M,{spacing:3,columns:1,children:[(0,ex.jsx)(em,{label:(0,ex.jsx)(h.cC,{id:"9xCxY6"}),shortcuts:[(0,ex.jsx)(b.G,{icon:ec.ac},"left"),(0,ex.jsx)(b.G,{icon:es.eF},"right")]}),(0,ex.jsx)(em,{label:(0,ex.jsx)(h.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,ex.jsx)(em,{label:(0,ex.jsx)(h.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,ex.jsx)(ep.i,{borderColor:"gray.300"}),(0,ex.jsx)(em,{label:(0,ex.jsx)(h.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,ex.jsx)(em,{label:(0,ex.jsx)(h.cC,{id:"/5i2oX"}),shortcuts:[(0,ex.jsx)(b.G,{icon:ei.FP},"up"),(0,ex.jsx)(b.G,{icon:eo.r5},"down")]}),(0,ex.jsx)(em,{label:(0,ex.jsx)(h.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,ex.jsx)(eh.z,{size:"sm",variant:"solid",onClick:n,children:(0,ex.jsx)(h.cC,{id:"76gPWk"})})]})},"coach-bar")};function eg(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ej(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?eg(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eg(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var eb=(0,w.memo)(function(){var e=(0,_.q)(),n=e.isOpen,t=e.onToggle,r=e.onClose,o=(0,ee._)(en.H.hasSeenCoachBar,!1),i=(0,A.Z)(o,2),s=i[0],c=i[1],a=(0,J.CG)($.Tf),l=(0,w.useCallback)(function(){s||c(!0),r()},[s,r,c]),d=!s||n,u=X((0,w.useCallback)(function(e){return e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150},[]));return(0,ex.jsx)(er.H,{mr:a&&s&&!d&&!u?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,ex.jsxs)(R.J,{returnFocusOnClose:!1,isOpen:d,onClose:l,closeOnBlur:!0,children:[(0,ex.jsx)(L.x,{children:(0,ex.jsx)(z.h,{onClick:function(){n&&c(!0),t()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,ex.jsx)(b.G,{icon:T.UF})})}),(0,ex.jsx)(M.y,ej(ej({},et.Ro),{},{children:(0,ex.jsx)(G.b,{children:(0,ex.jsx)(ev,{onClose:l})})}))]})})});eb.displayName="PresentModeHelpWidget";var eC=t(75085),ey=t(51331),eO=t(53923),ew=t(21061),ek=t(72043),eS=t(59115),eP=t(15087),eI=t(96368),eE=t(36738),eD=t(74637),eA=t(94301),eT=t(35741),e_=t(82269),eR=t(20299),eL=t(46974),ez=t(48798),eM=t(85249),eG=t(20176),eN=t(36471),eZ=t(1410),eF=t(46510),eW=t(80304),eU=t(55479),eV=t(84103),eB=t(49294),eH=t(34638),eq=t(56143),eK=t(65742),eY=t(50381),eQ=t.n(eY),eX=t(97705),eJ=t(93506),e$=t(98841),e0=t(25925),e1=["children","style"];function e2(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function e5(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?e2(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e2(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var e3={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},e4="custom"in e$.E?e$.E.custom(eX.m.div):(0,e$.E)(eX.m.div),e6=(0,w.forwardRef)(function(e,n){var t,r,o=e.children,i=e.style,s=(0,e_.Z)(e,e1),c=(0,eJ.jC)("Menu",s);return(0,ex.jsx)(eX.m.div,e5(e5({ref:n,__css:{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:null===(r=c.list)||void 0===r?void 0:r.zIndex},style:e5({},i)},s),{},{children:(0,ex.jsx)(e0.M,{children:(0,ex.jsx)(e4,{className:(0,j.cx)("chakra-menu__menu-list"),variants:e3,style:{transformOrigin:"top left"},initial:e3.exit,animate:e3.enter,exit:e3.exit,__css:e5({outline:0},c.list),children:o})})}))}),e8=t(17107),e7=["type"],e9=["icon","iconSpacing","command","commandSpacing","children"],ne=["className","children"],nn=["className"];function nt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nt(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var no=(0,e8.G)(function(e,n){var t=e.type,r=(0,e_.Z)(e,e7),o=(0,eJ.jC)("Menu",r),i=r.as?null!=t?t:void 0:"button",s=nr({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0},o.item);return(0,ex.jsx)(eX.m.button,nr(nr({ref:n,type:i},r),{},{__css:s,_hover:o.item._focus}))}),ni=(0,e8.G)(function(e,n){var t=e.icon,r=e.iconSpacing,o=e.command,i=e.commandSpacing,s=e.children,c=(0,e_.Z)(e,e9),a=t||o?(0,ex.jsx)("span",{style:{pointerEvents:"none",flex:1},children:s}):s;return(0,ex.jsxs)(no,nr(nr({},c),{},{className:(0,j.cx)("chakra-menu__menuitem"),children:[t&&(0,ex.jsx)(ns,{fontSize:"0.8em",marginEnd:void 0===r?"0.75rem":r,children:t}),a,o&&(0,ex.jsx)(nc,{marginStart:void 0===i?"0.75rem":i,children:o})]}))});ni.displayName="MenuItem";var ns=function(e){var n=e.className,t=e.children,r=(0,e_.Z)(e,ne),o=w.Children.only(t),i=w.isValidElement(o)?w.cloneElement(o,{focusable:"false","aria-hidden":!0,className:(0,j.cx)("chakra-menu__icon",o.props.className)}):null,s=(0,j.cx)("chakra-menu__icon-wrapper",n);return(0,ex.jsx)(eX.m.span,nr(nr({className:s},r),{},{__css:{flexShrink:0},children:i}))};ns.displayName="MenuIcon";var nc=(0,e8.G)(function(e,n){var t=(0,eJ.jC)("Menu",e);return(0,ex.jsx)(eX.m.span,nr(nr({ref:n},e),{},{__css:t.command,className:"chakra-menu__command"}))});nc.displayName="MenuCommand";var na=function(e){var n=e.className,t=(0,e_.Z)(e,nn),r=(0,eJ.jC)("Menu",e);return(0,ex.jsx)(eX.m.hr,nr(nr({role:"separator","aria-orientation":"horizontal",className:(0,j.cx)("chakra-menu__divider",n)},t),{},{__css:r.divider}))};na.displayName="MenuDivider";var nl=t(23015),nd=t(583),nu=t(81212),nf=t(29787),np=["editor","openStyleDrawer","cardUrl","getPos","isNested","isFirstCard","isCollapsed","hasCardBackground","onClose","updateAttributes","previewContent"];function nh(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nx(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nh(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nh(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nm=(0,ex.jsx)(b.G,{icon:eW.TX,fixedWidth:!0}),nv=(0,ex.jsx)(b.G,{icon:eF.WM,fixedWidth:!0}),ng=(0,ex.jsx)(b.G,{icon:eZ.O4,fixedWidth:!0}),nj=(0,ex.jsx)(b.G,{icon:eN.$,fixedWidth:!0}),nb=(0,ex.jsx)(b.G,{icon:eG.FP,fixedWidth:!0}),nC=(0,ex.jsx)(b.G,{icon:eM.oK,fixedWidth:!0}),ny=(0,ex.jsx)(b.G,{icon:ez.re,fixedWidth:!0}),nO=(0,ex.jsx)(b.G,{icon:eL.z1,fixedWidth:!0}),nw=(0,ex.jsx)(b.G,{icon:eR.UP,fixedWidth:!0}),nk=(0,w.forwardRef)(function(e,n){var t=e.editor,r=e.openStyleDrawer,o=e.cardUrl,i=e.getPos,s=e.isNested,c=e.isFirstCard,a=e.isCollapsed,l=e.hasCardBackground,d=e.onClose,u=e.updateAttributes,f=e.previewContent,p=(0,e_.Z)(e,np);console.debug("%c [<ManageCardMenu />] RENDER","background-color: limegreen");var g=(0,eU.p)(),j=(0,nf.K)(),b=(0,w.useCallback)(function(){u&&u({previewContent:null===f?"":null})},[u,f]),C=(0,w.useCallback)(function(){var e=i();if(e&&t){var n=t.state.doc.nodeAt(e),r=n&&(0,eK.getCardTitle)(n.toJSON());t.chain().deleteCard(e).focus().run();var o=x.ag._({id:"0MWv65",values:{displayTitle:r?'"'.concat(r,'"'):"card"}}),s=x.ag._({id:"9uI/rE"}),c=g({title:(0,ex.jsxs)(ea.U,{children:[(0,ex.jsx)(v.x,{noOfLines:1,children:o}),(0,ex.jsx)(eV.r,{textDecoration:"underline",onClick:function(){(0,eq.Yw)(t.state),g.close(c)},children:s})]}),status:"info",duration:3e3,position:"top"})}},[t,i,g]),y=(0,w.useCallback)(function(){var e=i();e&&(null==t||t.commands.duplicateCard(e))},[t,i]),O=(0,w.useCallback)(function(){var e=i();e&&(null==t||t.commands.unnestCard(e))},[t,i]),k=(0,w.useCallback)(function(){var e=i();e&&(null==t||t.chain().mergeCardsAtPos(e).focus().run())},[t,i]),S=(0,w.useCallback)(function(){r(0)},[r]),P=(0,w.useCallback)(function(){r(1)},[r]),I=(0,J.CG)($.hN),E=(0,eB.V)(o).onCopy,D=(0,eH.ff)("red.500","red.300"),A=(0,w.useCallback)(function(e){var n;if(e.target&&null!==(n=e.target)&&void 0!==n&&n.closest('[data-testid="open-share"]')){e.preventDefault();return}E(),g({title:x.ag._({id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[E,g]),T=(0,w.useCallback)(function(){var e=i();if(e&&t){var n=(0,nd.PZ)(t,e);if(!n){g({title:x.ag._({id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}eQ()(n,{format:"text/html"}),g({title:x.ag._({id:"LHDpRL"}),status:"success",duration:3e3,position:"top"})}},[t,i,g]);return(0,ex.jsxs)(e6,nx(nx({},p),{},{zIndex:"popover",ref:n,onClick:d,"data-testid":"manage-card-menu",children:[(0,ex.jsx)(ni,{icon:(0,ex.jsx)(nu.x,{isLocked:!j}),onClick:A,"data-testid":"copy-card-link",children:(0,ex.jsx)(h.cC,{id:"F0YmUY"})}),(0,ex.jsx)(ni,{icon:ng,onClick:T,children:(0,ex.jsx)(h.cC,{id:"Bq0HJ4"})}),(0,ex.jsxs)(m.k,{direction:"column",display:I?"flex":"none",children:[(0,ex.jsx)(na,{}),(0,ex.jsx)(ni,{icon:nv,onClick:y,"data-testid":"duplicate-card",children:(0,ex.jsx)(h.cC,{id:"euc6Ns"})}),u&&s&&a&&(0,ex.jsx)(ni,{icon:""===f?nO:nw,onClick:b,"data-testid":"hide-preview",children:""===f?(0,ex.jsx)(h.cC,{id:"dK2evu"}):(0,ex.jsx)(h.cC,{id:"691flv"})}),r&&void 0!==l&&!a&&(0,ex.jsx)(ni,{icon:ny,onClick:S,onMouseDown:nl.br,"data-testid":"card-background",children:l?(0,ex.jsx)(h.cC,{id:"sIpTuZ"}):(0,ex.jsx)(h.cC,{id:"T6eZ9z"})}),r&&!a&&(0,ex.jsx)(ni,{icon:nm,onClick:P,onMouseDown:nl.br,"data-testid":"card-style",children:(0,ex.jsx)(h.cC,{id:"k7zVgS"})}),s?(0,ex.jsx)(ni,{icon:nC,onClick:O,"data-testid":"merge-into-parent-card",children:(0,ex.jsx)(h.cC,{id:"b+J8Wt"})}):!1!=s||c?null:(0,ex.jsx)(ni,{icon:nb,onClick:k,"data-testid":"merge-into-card-above",children:(0,ex.jsx)(h.cC,{id:"kV34zB"})}),(0,ex.jsx)(na,{}),(0,ex.jsx)(ni,{icon:nj,color:D,onClick:C,"data-testid":"delete-card",children:(0,ex.jsx)(h.cC,{id:"cnGeoo"})})]})]}))}),nS=t(62490);function nP(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function nI(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nP(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nP(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var nE=(0,w.memo)(function(e){var n=e.editor,t=(0,J.CG)(nS.tk),r=t.isOpen,o=t.ref,i=t.options,s=(0,w.useState)(null),c=s[0],a=s[1],l=(0,eT.D)(o,c,{placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,8]}}],strategy:"absolute"}).styles,d=(0,k.I0)(),u=(0,w.useCallback)(function(){d((0,nS.kG)({saveRef:!0}))},[d]),f=(0,w.useCallback)(function(){d((0,nS.kG)({saveRef:!1}))},[d]);return(0,eD.O)({ref:{current:c},handler:function(){r&&(u(),setTimeout(function(){d((0,nS.gQ)())},0))}}),(0,w.useEffect)(function(){return function(){return f()}},[]),(0,ex.jsx)(eA.h,{children:r&&i&&(0,ex.jsx)(nk,nI(nI({},i),{},{style:nI({},l.popper),onClose:f,ref:a,editor:n}))})}),nD=t(25756),nA=t(40618),nT=t(32333),n_=t(67769),nR=t(84636),nL=t.n(nR),nz=t(54073),nM=t.n(nz),nG=t(72338),nN=t(30341),nZ=t(34264),nF=t(17477),nW=t(26087),nU=function(e,n,t,r,o){var i=r-t,s=Math.max(i-Math.max(e-t,0)-Math.max(r-n,0),0),c=s/i,a=c>0&&s==n-e;return{overlap:c,viewing:o&&(a||c>.5||s>400),only:a}};function nV(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var nB=function(e,n){var t=(0,nN.As)("editor"),r=(0,w.useState)(null),o=r[0],i=r[1],s=(0,w.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),c=(0,J.CG)($.gh),a=(0,J.CG)($.i2);(0,w.useEffect)(function(){s.current.presentingCardId=null!=a?a:null},[a]);var l=(0,J.CG)($.Q5);(0,w.useEffect)(function(){s.current.expandedCards=l},[l]),(0,w.useEffect)(function(){var e=document.querySelector(t.scrollSelector);if(e){i(e);var n=e.getBoundingClientRect().height;s.current.scrollTop=e.scrollTop,s.current.containerHeight=n}},[t.scrollSelector,s]),(0,w.useEffect)(function(){var e=nM()(function(){o&&(s.current.scrollTop=o.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),function(){return window.removeEventListener("scroll",e,!0)}},[o]),(0,w.useEffect)(function(){var e=nM()(function(){o&&(s.current.containerHeight=o.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[o]),(0,w.useEffect)(function(){if(e){if(c===nW.q.SLIDE_VIEW){var r=setInterval(function(){n.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return function(){return clearInterval(r)}}var o=setInterval(function(){if(!document.hidden){var r=s.current,o=r.scrollTop,i=r.containerHeight,c=r.expandedCards,a=o+i;nL()((0,nG.N2)(e.state.doc,nZ.KH),function(e){return e.node.attrs.id}).map(function(n){var r,i=n.node.attrs.id,s=c[i];if(!s)return null;try{r=e.view.nodeDOM(n.pos)}catch(e){return null}if(r instanceof HTMLElement){var l=(0,nF.LY)(r,t.scrollSelector),d=r.offsetHeight+l;return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?nV(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nV(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({id:i},nU(o,a,l,d,s))}return null}).filter(function(e){return!!(null!=e&&e.viewing)}).forEach(function(e){n.emit("cardViewed",{cardId:e.id,interval:1e3})})}},1e3);return function(){return clearInterval(o)}}},[c,e,s,n,t.scrollSelector])},nH=function(e){var n=e.editor,t=e.backoffFactor,r=void 0===t?1:t,o=(0,nT.z$)(),i=(0,w.useState)(15e3),s=i[0],c=i[1];nB(n,n_.f);var a=(0,w.useCallback)(function(){n_.f.flush(),c(Math.min(s*r,12e4))},[r,s]);return(0,w.useEffect)(function(){if(o){n_.f.initialize(),n_.f.on("flush",function(e){for(var n=e.viewed,t=0,r=Object.entries(n);t<r.length;t++){var i=(0,A.Z)(r[t],2),s=i[0],c=i[1];o.trackDocEvent(nT.AA.CARD_VIEWED,{card_id:s,duration:c})}});var e=setInterval(function(){return a()},s);return function(){clearInterval(e),n_.f.destroy()}}},[o,s,a]),null},nq=t(10710),nK=t(46973),nY=t(7289),nQ=t(97907),nX=t(94659),nJ=t(89634),n$=t(76903),n0=t(60075),n1=t(41290),n2=t(6057),n5=function(){var e=(0,w.useState)(null),n=e[0],t=e[1],r=(0,J.CG)(n0.Vy),o=r.destroyEditor,i=r.mountEditor;return((0,w.useEffect)(function(){return i&&t(i()),function(){null==o||o()}},[o,i]),(0,w.useEffect)(function(){n&&n.commands.focus("end")},[n]),n)?(0,ex.jsx)(g.xu,{className:n2.pL,overflowY:"auto",border:"1px solid",borderColor:"gray.200",borderRadius:"sm",py:2,px:3,sx:{".ProseMirror":{flex:1}},children:(0,ex.jsx)(n1.k,{editor:n,className:"highlight-mask",style:{display:"flex",flexDirection:"column"}})}):null},n3=t(18149),n4=t.n(n3),n6=t(8635),n8=t(92147),n7=function(e){var n=(0,J.CG)(n0.AD),t=(0,n6.T)({cardId:n||void 0}).title,r=(0,J.CG)($.pN,function(){return n4().apply(void 0,arguments)}),o=r.indexOf(n||""),i=(0,w.useCallback)(function(n){return function(){if(e){var t,i,s=null!==(t=r[o+(n?1:-1)])&&void 0!==t?t:r[o],c=null===(i=(0,nZ.Bw)(e,s))||void 0===i?void 0:i.pos;c&&!(0,n8.vS)(e,c)&&e.commands.selectInsideNodeAtPos(c)}}},[o,e,r]);return{cardId:n,title:t||"Untitled",canGoForward:o<r.length-1,canGoBack:o>0,goToNextCard:i(!0),goToPreviousCard:i(!1)}},n9=t(41267),te=t(98875),tn=t(74418),tt=function(e){var n=(0,n9.t)(e).selection,t=(0,te.ye)("cardNotes");(0,w.useEffect)(function(){if(e&&t){var n=(0,tn.AQ)(e,e.state.selection.from);n&&n.node&&((0,n8.Qp)(n.node)||(0,n8.Fi)(e,n.pos))}},[t,e,n])},tr=function(e){var n=e.closePanel,t=(0,tl._i)().editor,r=n7(t),o=r.canGoBack,i=r.canGoForward,s=r.title,c=r.goToNextCard,a=r.goToPreviousCard,l=(0,J.TL)();return tt(t),(0,w.useEffect)(function(){return nJ.F7.on("keydown","CARD_NOTES_PANEL",function(e){var t=document.activeElement;return!!(t instanceof HTMLElement&&t.closest('[data-panelid="card-notes-panel"]'))&&"Escape"===e.key&&(n(),!0)})},[n,l]),(0,ex.jsx)(n$.s,{bgColor:"white","data-panelid":"card-notes-panel",children:(0,ex.jsxs)(m.k,{direction:"column",h:"100%",flex:1,children:[(0,ex.jsx)(nQ.P,{"data-card-notes-close-button":!0,position:"absolute",top:2,right:3,onClick:n}),(0,ex.jsxs)(ea.U,{px:6,py:4,spacing:4,children:[(0,ex.jsx)(eu.X,{fontSize:"3xl",fontWeight:800,letterSpacing:-1,children:"Card notes"}),(0,ex.jsx)(C.Yq,{label:(0,ex.jsx)(h.cC,{id:"us6sYJ"})})]}),(0,ex.jsxs)(nX.g,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,children:[(0,ex.jsx)(v.x,{fontWeight:"600",color:"gray.700",noOfLines:2,children:s}),(0,ex.jsx)(n5,{}),(0,ex.jsxs)(ea.U,{children:[(0,ex.jsx)(z.h,{"aria-label":x.ag._({id:"nElKO3"}),icon:(0,ex.jsx)(b.G,{icon:nY.ac}),onClick:a,isDisabled:!o,flex:1}),(0,ex.jsx)(z.h,{"aria-label":x.ag._({id:"zqTURC"}),icon:(0,ex.jsx)(b.G,{icon:nK.eF}),onClick:c,isDisabled:!i,flex:1})]})]})]})})};tr.panelPosition="right";var to=t(95076),ti=t(21819),ts=function(e){var n=e.toggleCardNotesPanel,t=e.isCardNotesPanelOpen,r=(0,J.TL)(),o=(0,te.ye)("cardNotes"),i=(0,J.CG)($.hN),s=(0,ti.Br)("edit"),c=o&&s&&i;(0,w.useEffect)(function(){t&&!c&&n()},[c,t,n]),(0,w.useEffect)(function(){t||r((0,n0.mK)({isOpen:!1}))},[r,t,n]),(0,w.useEffect)(function(){if(c)return to.T.on("toggle",function(e){var o=e.config;t||(n(o),r((0,n0.mK)({isOpen:!t})))})},[r,t,c,n])},tc=t(28916),ta=t(62517),tl=t(59734),td=t(68197),tu=t(20406),tf=t(28526),tp=t.n(tf),th=t(78116),tx=t(56915),tm=t(16796),tv=t(64827),tg=t(2167),tj=t(80353),tb=t(76648),tC=t(58125),ty=t(30764),tO=t(24021),tw=t(66825),tk=t(53865),tS=t(35634),tP=t(95876),tI=t(82477),tE=t(91465),tD=t(35910),tA=t(35231),tT=t(98666);function t_(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var tR=w.createContext({enabled:!1,registerEditor:function(e,n){},getAllCards:function(){return[]},userMessage:"",setUserMessage:function(e){}});function tL(){return(0,w.useContext)(tR)}var tz=function(e){var n=e.children,t=(0,w.useRef)(new Map),r=(0,w.useRef)(""),o=(0,w.useRef)(function(e,n){t.current.set(e,n)}),i=(0,w.useRef)(function(){return Array.from(t.current.values()).map(function(e){var n,t;return null===(n=e.state.doc.firstChild)||void 0===n?void 0:null===(t=n.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)}),s=(0,w.useCallback)(function(e){r.current=e},[]);return(0,ex.jsx)(tR.Provider,{value:{enabled:!0,registerEditor:o.current,getAllCards:i.current,userMessage:r.current,setUserMessage:s},children:n})},tM=t(82511),tG=t(69936),tN=t(56581),tZ=t(27302),tF=t(420),tW=t(86297),tU=function(e){var n=e.cardId,t=e.onClick,r=(0,J.CG)((0,tM.NB)(n)),o=(0,J.CG)($.Pu);return r?(0,ex.jsxs)(ed.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[r.variants.map(function(e){if(!e)return null;var i=e.label,s=e.card,c=e.id;return(0,ex.jsx)(tV,{theme:o,isSelected:r.selected===c,label:i,card:s,onClick:function(){t({cardId:n,variationId:c})}},c)}),r.variants.length<2&&(0,ex.jsx)(tZ.M,{children:(0,ex.jsx)(tF.$,{})})]}):null},tV=function(e){var n=e.label,t=e.card,r=e.theme,o=e.isSelected,i=void 0!==o&&o,s=e.onClick,c=(0,w.useMemo)(function(){return(0,tW.vL)({docFlags:{cardLayoutsEnabled:!0}},[t])},[t]);return(0,ex.jsxs)(ed.K,{align:"start",children:[(0,ex.jsx)(m.k,{borderRadius:"md",bg:"white",shadow:i?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:void 0===s?function(){}:s,children:(0,ex.jsx)(m.k,{sx:tE.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,ex.jsx)(tE.m,{content:c,theme:r,isThumbnail:!0})})}),(0,ex.jsxs)(v.x,{fontSize:"sm",children:[i&&(0,ex.jsx)(tN.n,{boxSize:3,mr:2}),n]})]})};function tB(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tH(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tB(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tB(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tq="ai-wizard-editor-root",tK=function(e){var n=e.doc,t=e.cards,r=e.theme,o=void 0===r?tk.mU:r,i=(0,tA.R5)(o),s=(0,tS.wj)(o),c=(0,tA.wh)(i,s),a=(0,J.TL)(),l=tL().registerEditor;return((0,w.useEffect)(function(){return function(){a((0,tM.mc)())}},[a]),n)?(0,ex.jsxs)(m.k,tH(tH({bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:tq},c),{},{children:[(0,ex.jsx)(tD.Y,{}),t.map(function(e,t){var r,o=null===(r=e.attrs)||void 0===r?void 0:r.id;return o?(0,ex.jsx)(tY,{doc:n,cardId:o,cardIndex:t,cardJSON:e,onCreate:function(e){l(o,e)}},o):null})]})):null},tY=function(e){var n=e.cardId,t=e.cardIndex,r=e.cardJSON,o=e.doc,i=e.onCreate,s=(0,J.TL)(),c=(0,w.useState)(null),a=c[0],l=c[1],d=tL().userMessage,u=(0,tG.b)({editor:a});(0,w.useEffect)(function(){a&&u({doc:a.state.doc,cardId:n,message:d})},[u,a,n,t,d]);var f=(0,w.useMemo)(function(){return(0,tP.vL)({docFlags:{cardLayoutsEnabled:!0}},[r])},[r]),p=(0,J.CG)((0,tM.a4)(n));(0,tT.vm)(function(){if(a&&p){var e=(0,nZ.Bw)(a,n);e&&a.commands.command(function(n){var t=n.tr,r=ty.NB.fromJSON(a.schema,p.card);return t.replaceWith(e.pos,e.pos+e.node.nodeSize,r),!0})}},[a,p,n],[p]);var h=(0,w.useCallback)(function(e){var t=e.cardId,r=e.variationId;a&&t===n&&s((0,tM.dx)({cardId:n,variantId:r}))},[s,a,n]);return null!=o&&o.id?(0,ex.jsxs)(m.k,{className:"ai-variation-editor-".concat(n),alignItems:"flex-start",sx:tE.n,my:-8,children:[(0,ex.jsx)(tU,{cardId:n,onClick:h}),(0,ex.jsx)(tI.y,{initialContent:f,onCreate:function(e){var n=e.editor;l(n),i(n)},doc:o,docId:o.id,scrollingParentSelector:".".concat(tq),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null},tQ=t(30118);function tX(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function tJ(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?tX(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tX(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var t$=function(e){var n=(0,tQ.M)({id:"cardSuggestionDrawer"}),t=n.isOpen,r=n.onClose,o=n.onOpen,i=(0,J.CG)($.Pu),s=(0,w.useState)(function(){return(0,tC.xC)({reducer:J.Ct})})[0];return(0,ex.jsx)(k.zt,{store:s,children:(0,ex.jsx)(t0,tJ(tJ({},e),{},{isOpen:t,onClose:r,onOpen:o,theme:i}))})},t0=(r=function(e){var n,t=e.doc,r=e.editor,o=e.theme,i=e.isOpen,s=e.onClose,c=e.onOpen,a=(0,w.useState)([]),l=a[0],d=a[1],u=(0,w.useState)(null),f=u[0],p=u[1],x=tL(),m=x.getAllCards,v=x.setUserMessage,g=(0,w.useCallback)(function(){s(),d([]),p(null)},[s]),j=(0,w.useCallback)(function(){if(g(),r){var e={type:"document",content:m()};console.log("[handleConfirm] contentToUse",e);var n=1,t=r.state.doc.nodeSize-2,o=(0,nZ.Bw)(r,f);if(o){t=(n=o.pos)+o.node.nodeSize;var i=e.content.find(function(e){var n;return(null===(n=e.attrs)||void 0===n?void 0:n.id)===f});if(!i){console.warn("[handleConfirm] Count not find card to use");return}e=i}r.commands.command(function(o){return o.tr.replaceRangeWith(n,t,ty.NB.fromJSON(r.schema,e)),!0})}},[g,r,f,m]),b=(0,w.useCallback)((n=(0,tu.Z)(tp().mark(function e(n,t,r){return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(),p(t),d(n.toJSON().content[0].content.filter(function(e){var n;return null===t||(null===(n=e.attrs)||void 0===n?void 0:n.id)===t})),v(r);case 5:case"end":return e.stop()}},e)})),function(e,t,r){return n.apply(this,arguments)}),[c,v]);return(0,w.useEffect)(function(){if(r)return tw.T.on("openSuggestionEditor",function(e){var n=e.cardId,t=e.userMessage;b(r.view.state.doc,n,t)})},[r,b]),(0,ex.jsxs)(th.d,{placement:"bottom",onClose:s,isOpen:i,trapFocus:!0,isFullHeight:!0,children:[(0,ex.jsx)(tx.Z,{}),(0,ex.jsxs)(tm.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,ex.jsx)(tv.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,ex.jsx)(tg.f,{p:0,h:"100%",children:l.length>0&&t?(0,ex.jsx)(tK,{doc:t,cards:l,theme:o}):(0,ex.jsx)(tO.AA,{})}),(0,ex.jsx)(tj.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,ex.jsxs)(tb.h,{spacing:4,children:[(0,ex.jsx)(eh.z,{variant:"ghost",onClick:s,children:(0,ex.jsx)(h.cC,{id:"dEgA5A"})}),(0,ex.jsx)(eh.z,{variant:"solid",onClick:j,children:(0,ex.jsx)(h.cC,{id:"7VpPHA"})})]})})]})]})},(0,w.memo)(function(e){return(0,ex.jsx)(tz,{children:(0,ex.jsx)(r,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?t_(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):t_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},e))})})),t1=t(80405),t2=t(3476),t5=t(61751),t3=t(71961),t4=t(49626),t6=t(49747),t8=t(56133),t7=t(39097),t9=t.n(t7),re=t(46988),rn=t(20252),rt=t(38876),rr=t(99083),ro=t(9734),ri=t(51823),rs=t(76035),rc=t(50281),ra=t(54119),rl=t(77779),rd=t(2046),ru=t(70287),rf=t(25793),rp=t(14304),rh=t.n(rp),rx=t(6201),rm=[{key:"bad",label:(0,ex.jsx)(h.cC,{id:"XSfVsn"}),ariaLabel:function(){return x.ag._({id:"XSfVsn"})},icon:rl.Kf,color:"red"},{key:"meh",label:(0,ex.jsx)(h.cC,{id:"0ASQJH"}),ariaLabel:function(){return x.ag._({id:"0ASQJH"})},icon:ra.C4,color:"yellow"},{key:"good",label:(0,ex.jsx)(h.cC,{id:"9ZYnL5"}),ariaLabel:function(){return x.ag._({id:"9ZYnL5"})},icon:rc.I3,color:"green"}],rv=function(e){var n=e.docId,t=e.isDark,r=e.interactionId,o=(0,w.useState)(null),i=o[0],s=o[1],c=(0,w.useState)(!1),a=c[0],l=c[1],d=(0,w.useState)(""),u=d[0],f=d[1],p=(0,w.useRef)(null),x=(0,eU.p)(),m=(0,w.useCallback)(function(e){s(e),(0,rx.fM)({rating:e,doc_id:n,interactionId:r}),x({title:(0,ex.jsx)(h.cC,{id:"2gZOCV"}),status:"success",position:"top",duration:1e3}),setTimeout(function(){var e;null==p||null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},200)},[n,r,x]),j=(0,w.useCallback)(function(e){e||((0,rx.XH)({feedback:rh().sanitize(u),doc_id:n,interactionId:r}),x({title:(0,ex.jsx)(h.cC,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0})),l(!0)},[n,u,r,x]);return(0,ex.jsx)(g.xu,{p:4,borderRadius:"lg",border:"1px solid",borderColor:t?"whiteAlpha.100":"gray.200",position:"relative",children:a?(0,ex.jsxs)(v.x,{color:t?"green.400":"green.600",textAlign:"center",children:[(0,ex.jsx)(b.G,{icon:rs.faCircleCheck})," ",(0,ex.jsx)(h.cC,{id:"SOk0EB"})]}):(0,ex.jsxs)(ed.K,{spacing:4,children:[(0,ex.jsxs)(ed.K,{alignItems:"center",spacing:"1",children:[(0,ex.jsx)(v.x,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:(0,ex.jsx)(h.cC,{id:"E47gBS"})}),i?(0,ex.jsxs)(v.x,{textAlign:"center",color:t?"green.400":"green.600",children:[(0,ex.jsx)(b.G,{icon:rs.faCircleCheck})," ",(0,ex.jsx)(h.cC,{id:"SOk0EB"})]}):(0,ex.jsx)(v.x,{children:(0,ex.jsx)(h.cC,{id:"cguR5Y"})})]}),(0,ex.jsx)(ea.U,{fontSize:"xl",width:"100%",children:rm.map(function(e){var n=e.key,r=e.ariaLabel,o=e.label,s=e.icon,c=e.color,a=i===n;return(0,ex.jsx)(rg,{ariaLabel:r,label:o,icon:s,color:c,onClick:function(){return m(n)},isSelected:a,isDisabled:!!(i&&!a),isDark:t},n)})}),i&&(0,ex.jsxs)(rd.NI,{textAlign:"center",children:[(0,ex.jsx)(ru.l,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:"good"===i?(0,ex.jsx)(h.cC,{id:"AmM8eQ"}):(0,ex.jsx)(h.cC,{id:"8+bwIa"})}),(0,ex.jsx)(rf.g,{value:u,onChange:function(e){f(e.target.value)},placeholder:"",size:"sm",mb:"4"}),(0,ex.jsxs)(tb.h,{spacing:"4",ref:p,children:[(0,ex.jsx)(eh.z,{variant:"text",onClick:function(){j(!0)},children:(0,ex.jsx)(h.cC,{id:"6Uau97"})}),(0,ex.jsx)(eh.z,{variant:"solid",isDisabled:""===u,onClick:function(){return j(!1)},children:(0,ex.jsx)(h.cC,{id:"hQRttt"})})]})]})]})})},rg=function(e){var n=e.label,t=e.ariaLabel,r=e.icon,o=e.color,i=e.isSelected,s=e.onClick,c=e.isDisabled,a=e.isDark;return(0,ex.jsx)(C.kH,{label:n,placement:"top",children:(0,ex.jsx)(z.h,{"aria-label":t(),boxShadow:"none",bg:i?a?"".concat(o,".200"):"".concat(o,".100"):a?"whiteAlpha.300":"gray.50",_disabled:{opacity:"".concat(i?1:.5),cursor:"not-allowed"},color:i?a?"".concat(o,".600"):"".concat(o,".500"):a?"whiteAlpha.800":"gray.500",_hover:{backgroundColor:"".concat(o,".100"),color:"".concat(o,".500")},flex:1,icon:(0,ex.jsx)(v.x,{fontSize:"2xl",children:(0,ex.jsx)(b.G,{icon:r})}),isDisabled:c,variant:"plain",onClick:s})})},rj=t(8661),rb=t(1368),rC=["90%","360px"],ry=function(e){var n=e.onClose,t=e.eyebrowText,r=e.mainText,o=e.callsToAction;return(0,ex.jsxs)(g.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:rC,maxW:rC,position:"relative",children:[(0,ex.jsx)(nQ.P,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,ex.jsxs)(ed.K,{spacing:4,children:[(0,ex.jsxs)(ed.K,{spacing:1,paddingEnd:3,children:[!(0,ro.s2)()&&(0,ex.jsx)(v.x,{fontSize:"sm",color:"gray.600",children:t}),(0,ex.jsx)(v.x,{fontSize:"md",children:r})]}),(0,ex.jsx)(g.xu,{w:"100%",children:o})]})]})},rO=function(e){var n=e.onClose,t=e.startTour;return(0,ex.jsx)(ry,{eyebrowText:(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,ex.jsx)(h.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}})]}),mainText:(0,ex.jsx)(h.cC,{id:"ntWFEH"}),onClose:n,callsToAction:(0,ex.jsx)(eh.z,{size:"md",w:"100%",variant:"solid",onClick:function(){t(0),n()},children:(0,ex.jsx)(h.cC,{id:"VzFYDl"})})})},rw=t(77245),rk=["90%","360px"],rS=function(e){var n=e.onClose,t=(0,w.useState)(!0),r=t[0],o=t[1];return(0,w.useEffect)(function(){setTimeout(function(){o(!1)},3e3)},[]),(0,ex.jsxs)(g.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:rk,maxW:rk,position:"relative",children:[(0,ex.jsx)(nQ.P,{size:"md",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,ex.jsxs)(ed.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,ex.jsx)(g.xu,{color:"trueblue.300",children:(0,ex.jsx)(b.G,{icon:rw.tc,size:"2x",className:r?"fa-bounce":void 0})}),(0,ex.jsxs)(ed.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,ex.jsx)(v.x,{fontSize:"sm",color:"gray.600",children:(0,ex.jsx)(h.cC,{id:"eoDgVo"})}),(0,ex.jsx)(v.x,{fontSize:"md",children:(0,ex.jsx)(h.cC,{id:"p7dFyi"})})]})]})]})};function rP(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rI(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rP(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rP(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rE="source",rD="desktop-tour-toast",rA="switch-from-mobile-to-desktop-toast",rT=function(e){var n,t=e.editor,r=(0,eU.p)(),o=(0,J.CG)(td.yx),i=(0,I.c8)().startTour,s=(0,nq.SE)(),c=s.user,a=s.setSettings,l=(0,w.useState)(!1),d=l[0],u=l[1],p=(0,w.useRef)(!1),h=!!(null!=c&&null!==(n=c.settings)&&void 0!==n&&n.needsEditorOnboarding),x=(0,J.CG)((0,re.oH)(null==t?void 0:t.gammaDocId)),m=!!x&&"running"===x.status,v=!!x&&("complete"===x.status||"error"===x.status),g=(0,nN.As)("editor"),j=(0,w.useState)(null),b=j[0],C=j[1],y=(0,w.useState)(function(){return(0,ri.SJ)()[rE]===rj.VY})[0],O=(0,w.useState)(function(){return y&&(0,ro.s2)()})[0],k=y&&v;return(0,w.useEffect)(function(){t&&u(!m&&!(0,ro.s2)()&&y&&h)},[t,y,m,h]),(0,w.useEffect)(function(){setTimeout(function(){(0,rb.lO)({query:rI(rI({},(0,ri.SJ)()),{},(0,f.Z)({},rE,void 0)),emitChange:!1})})},[]),(0,w.useEffect)(function(){return d&&!r.isActive(rD)&&setTimeout(function(){r({id:rD,position:"bottom-left",render:function(e){var n=e.onClose;return rO({onClose:function(){null==a||a({remove:["needsEditorOnboarding"]}),n()},startTour:i})},isClosable:!0,duration:null})},2e3),function(){r.isActive(rD)&&r.close(rD)}},[a,d,i,r]),(0,w.useEffect)(function(){if((0,ro.s2)()){var e=document.querySelector(g.scrollSelector);if(e){C(e);var n=function(){b&&(0,ro.s2)()&&(null==b?void 0:b.scrollTop)>=(null==b?void 0:b.scrollHeight)/4&&O&&!r.isActive(rA)&&!p.current&&(p.current=!0,r({id:rA,position:"top",render:function(e){return rS({onClose:e.onClose})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",n,!0),function(){window.removeEventListener("scroll",n,!0),r.isActive(rA)&&r.close(rA)}}}},[o,b,g.scrollSelector,O,r]),{showDocWizardFooter:k}};function r_(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function rR(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r_(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rL=(0,w.memo)(function(e){var n,t=e.interactionId,r=(0,J.CG)(td.yx),o=null!=r&&!!r.theme&&(0,tk.wj)(null==r?void 0:r.theme),i=(0,w.useState)(!1),s=i[0],c=i[1],a=(0,te.ye)("createv2"),l=(0,eU.p)(),d=null==r?void 0:null===(n=r.accessLinks)||void 0===n?void 0:n[0],u=(0,w.useMemo)(function(){return(0,ri.Gn)({docTitle:null==r?void 0:r.title,docId:null==r?void 0:r.id,token:null==d?void 0:d.token,absolute:!0})},[r,null==d?void 0:d.token]),f=(0,eB.V)(u).onCopy,p=(0,w.useCallback)(function(){(0,rn.J)({docId:null==r?void 0:r.id,source:"docWizardFooter",type:"tokenUrl"}),f(),l({title:(0,ex.jsx)(h.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==r?void 0:r.id,f,l]),x=(0,w.useCallback)(function(){c(!0)},[]),v=(0,rr.n)();return r?(0,ex.jsx)(C.Wk,{isDark:o,children:(0,ex.jsx)(m.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,ro.s2)()?void 0:"-".concat(rt.m),children:(0,ex.jsx)(t6.U,{in:!s,style:{width:"100%"},unmountOnExit:!0,children:(0,ex.jsx)(m.k,rR(rR({pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative"},o?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"}),{},{children:(0,ex.jsx)(t8.W,{maxW:"420px",children:(0,ex.jsxs)(ed.K,{spacing:8,children:[(0,ex.jsxs)(ed.K,{spacing:4,textAlign:"center",children:[(0,ex.jsx)(eu.X,{size:"md",children:(0,ex.jsx)(h.cC,{id:"bB+DHs"})}),(0,ex.jsx)(eh.z,{as:t9(),target:(0,ro.Q5)()?"_self":"_blank",variant:"solid",colorScheme:o?"blackAlpha":"whiteAlpha",leftIcon:(0,ex.jsx)(b.G,{icon:t4.r8}),href:a?"/create":"/generate",children:(0,ex.jsx)(h.cC,{id:"xFxi2V"})}),v?(0,ex.jsx)(eh.z,{leftIcon:(0,ex.jsx)(b.G,{icon:t3.Fz}),variant:"plain",as:t9(),target:(0,ro.Q5)()?"_self":"_blank",href:v,children:(0,ex.jsx)(h.cC,{id:"550oRP"})}):(0,ex.jsx)(eh.z,{leftIcon:(0,ex.jsx)(b.G,{icon:t5.nN}),variant:"plain",onClick:p,children:(0,ex.jsx)(h.cC,{id:"RGCCrg"})})]}),(0,ex.jsx)(rv,{docId:r.id,isDark:o,interactionId:t}),(0,ex.jsx)(tZ.M,{pt:[0,0,4],w:"100%",children:(0,ex.jsx)(eh.z,{size:"sm",onClick:x,variant:"text",colorScheme:"blackAlpha",children:(0,ex.jsx)(h.cC,{id:"vLyv1R"})})})]})})}))})})}):null});rL.displayName="DocWizardFooterInner";var rz=function(e){var n=e.editor,t=rT({editor:n}).showDocWizardFooter,r=(0,J.CG)((0,re.oH)(null==n?void 0:n.gammaDocId)),o=null==r?void 0:r.id;return t&&o?(0,ex.jsx)(rL,{interactionId:o}):(0,ex.jsx)(ex.Fragment,{})},rM=t(98537),rG=t.n(rM),rN=t(87063),rZ=function(e){var n=e.onCloneClick,t=e.onSignupClick,r=e.isLoggedIn;return(0,ex.jsx)(g.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:r?(0,ex.jsxs)(ea.U,{children:[(0,ex.jsxs)(v.x,{mr:1,children:[(0,ex.jsx)(h.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc},components:{0:(0,ex.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,ex.jsx)(eh.z,{variant:"solid",onClick:n,children:(0,ex.jsx)(h.cC,{id:"he3ygx"})})]}):(0,ex.jsxs)(ea.U,{children:[(0,ex.jsxs)(v.x,{mr:1,children:[(0,ex.jsx)(h.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc,GAMMA_PROPER_NOUN:eC.N6},components:{0:(0,ex.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,ex.jsx)(t9(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,ex.jsx)(eh.z,{as:eV.r,onClick:t,variant:"solid",textDecoration:"none !important",children:(0,ex.jsx)(h.cC,{id:"e+RpCP"})})})]})})},rF=function(e){var n=!(0,ro.s2)(),t=(0,nq.SE)().user,r=(0,eU.p)(),o=(0,w.useRef)(),i=(0,rN.e)(),s=(0,w.useCallback)(function(){e&&(null===nT.co||void 0===nT.co||nT.co.track(nT.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),c=(0,w.useCallback)(function(){i({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,i]);(0,w.useEffect)(function(){return function(){o.current&&r.close(o.current)}},[r]);var a=n&&e,l=!!t;(0,tT.vm)(function(){o.current&&r.close(o.current),a&&(o.current=r({position:"bottom",render:function(){return rZ({onCloneClick:c,isLoggedIn:l,onSignupClick:s})},isClosable:!0,duration:null}))},[e,n,c,s,a,t,r,l],[a,l])},rW=t(99703),rU=t(91718),rV=t(92761),rB="sessionId1",rH=nG.hj.create({addStorage:function(){return{user:{}}},addCommands:function(){var e=this;return{user:function(n){return function(){var t=(0,J.bh)();return e.storage.user=rG()({},e.storage.user,n),t.dispatch((0,$.MU)({sessionId:rB})),t.dispatch((0,$.Tx)({collaborators:[e.storage.user]})),!0}}}}}),rq=function(e){var n,t=e.docId,r=e.snapshotId,o=e.scrollingParentSelector,i=e.onCreate,s=(0,J.CG)(td.yx);rF(s);var c=(0,w.useState)(function(){return[rU.$1.configure({scrollerSelector:o}),rH,rW._g]})[0],a=(0,nq.SE)(),l=a.user,d=a.anonymousUser,u=a.isUserLoading,f=a.color,p=(0,w.useState)(),h=p[0],x=p[1],v=(0,S.EDv)({variables:{docId:t,snapshotId:r},skip:!r}),j=v.data,b=v.loading,C=v.error;(0,w.useEffect)(function(){!u&&h&&h.commands.user({id:(null==l?void 0:l.id)||d.id,color:f.value,sessionId:rB,idleSince:null,name:(null==l?void 0:l.displayName)||d.displayName||"",profileImageUrl:(null==l?void 0:l.profileImageUrl)||"",isReady:!u})},[h,l,f,u,d]);var y=j&&void 0!==j.snapshot&&!b&&s;return(0,ex.jsxs)(g.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!y||C?(0,ex.jsxs)(m.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!y&&(0,ex.jsx)(tF.$,{}),C&&(0,ex.jsxs)(tZ.M,{h:"100%",children:["There was an error loading this ",eC.Yc,":"," ",C.message]})]}):(0,ex.jsx)(g.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:y?1:0,children:(0,ex.jsx)(eE.yE,{doc:s,editorId:"main",docId:t,extensions:c,onCreate:function(e){var n=e.editor;x(n),setTimeout(function(){i&&i(n)},10)},readOnly:!0,initialContent:null===(n=j.snapshot)||void 0===n?void 0:n.content.default,scrollingParentSelector:o})}),(0,ex.jsx)(rV.m,{forceShow:!0,abuseReportingEnabled:!1})]})},rK=t(10939),rY="sessionId1",rQ=nG.hj.create({addStorage:function(){return{user:{}}},addCommands:function(){var e=this;return{user:function(n){return function(){var t=(0,J.bh)();return e.storage.user=rG()({},e.storage.user,n),t.dispatch((0,$.MU)({sessionId:rY})),t.dispatch((0,$.Tx)({collaborators:[e.storage.user]})),!0}}}}}),rX=function(e){var n,t=e.docId,r=e.snapshotId,o=e.scrollingParentSelector,i=e.onCreate,s=e.theme,c=e.hideMadeWithGammaBadge,a=(0,w.useState)(function(){return[rU.$1.configure({scrollerSelector:o}),rQ,rW._g]})[0],l=(0,nq.SE)(),d=l.user,u=l.isUserLoading,f=l.anonymousUser,p=l.color,h=(0,w.useState)(),x=h[0],v=h[1],j=(0,S.EDv)({variables:{docId:t,snapshotId:r},skip:!r}),b=j.data,C=j.loading,y=j.error,O=(0,J.CG)(td.yx);(0,w.useEffect)(function(){!u&&x&&x.commands.user({id:(null==d?void 0:d.id)||f.id,color:p.value,sessionId:rY,idleSince:null,name:(null==d?void 0:d.displayName)||f.displayName||"",profileImageUrl:(null==d?void 0:d.profileImageUrl)||"",isReady:!u})},[x,d,p,u,f]);var k=b&&void 0!==b.snapshot&&!C&&O;return(0,ex.jsxs)(g.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!k||y?(0,ex.jsxs)(m.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!k&&(0,ex.jsx)(tF.$,{}),y&&(0,ex.jsxs)(tZ.M,{h:"100%",children:["There was an error loading this ",eC.Yc,":"," ",y.message]})]}):(0,ex.jsx)(g.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:k?1:0,children:(0,ex.jsx)(eE.yE,{doc:O,editorId:"main",docId:t,theme:s||void 0,extensions:a,onCreate:function(e){var n=e.editor;v(n),setTimeout(function(){i&&i(n)},10)},readOnly:!0,initialContent:null===(n=b.snapshot)||void 0===n?void 0:n.content.default,scrollingParentSelector:o})}),x&&(0,ex.jsx)(nH,{editor:x,backoffFactor:2}),!(void 0!==c&&c)&&(0,ex.jsx)(rV.m,{docWorkspace:null==O?void 0:O.organization})]})},rJ=t(16019);function r$(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function r0(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r$(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r$(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var r1=(l={},(0,f.Z)(l,nW.q.DOC_VIEW,"doc"),(0,f.Z)(l,nW.q.SLIDE_VIEW,"present"),l),r2=function(e){var n=(0,k.I0)(),t=(0,ri.SJ)().mode,r=(0,J.CG)($.gh),o=(0,w.useCallback)(function(e){var n=e||r,t=(0,ri.SJ)().mode,o=r1[n];t!==o&&(0,rb.lO)({query:r0(r0({},(0,ri.SJ)()),{},{mode:o}),emitChange:!1})},[r]);(0,rJ.r)(o,[r]),(0,w.useEffect)(function(){return rb.fI.on("changed",function(){return o()})},[o]),(0,tT.vm)(function(){if(e){var r=t===r1.SLIDE_VIEW?nW.q.SLIDE_VIEW:nW.q.DOC_VIEW,i=(0,ri.sY)().cardId;r===nW.q.SLIDE_VIEW&&(i?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",i),e.commands.spotlightCardById(i)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),n((0,$.PM)({mode:r})),o(r)}},[e,n,t,o],[e])},r5=t(87202),r3=t(56692),r4=t(96302),r6=t(10469),r8=t(27440),r7=t(71170),r9=t(56241),oe=t(99336),on=t(92527),ot=t(89814),or=t(56261),oo=(0,r5.ZP)("mod+Escape"),oi=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),os=function(e,n){var t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=(0,nN.cC)("editor"),o=r.scroller;if(o){e.commands.turnOffSpotlight();var i=o.scrollHeight-o.offsetHeight;if("down"===n){if(!(r.isAtBottom(90)&&t&&e.commands.spotlightNextCard(!1,"top"))){var s=o.scrollTop+.5*o.offsetHeight;s>i-150&&(s=i),r.scrollTo({top:s})}}else if(!(r.isAtTop(90)&&t&&e.commands.spotlightNextCard(!0,"bottom"))){var c=o.scrollTop-.5*o.offsetHeight;c<150&&(c=0),r.scrollTo({top:c})}}},oc=function(e){var n=e.enabled,t=e.setActiveKey,r=(0,nT.z$)(),o=(0,J.TL)(),i=(0,tl._i)().editor,s=(0,J.CG)(oe.C),c=(0,ot.g)(i),a=c.enabled,l=c.pos,d=(0,w.useCallback)(function(){a?null==i||i.commands.turnOffSpotlight():null==i||i.commands.spotlightNextBlock()},[null==i?void 0:i.commands,a]);return(0,w.useEffect)(function(){if(n)return r3.F7.on("keydown","NAVIGATION_CONTROLS",function(e){var n,o,c=(0,J.bh)(),u=e.target,f=Object.keys((0,$.X9)(c.getState()).tree);if(!i||null!=u&&null!==(n=u.closest)&&void 0!==n&&n.call(u,"[data-gamma-child-tiptap-editor]")||null!=u&&null!==(o=u.closest)&&void 0!==o&&o.call(u,"input")||e.metaKey||s)return!1;switch(oi.has(e.key)&&("s"!==e.key&&(t(e.key),setTimeout(function(){t(null)},100)),e.preventDefault()),e.key){case"s":return d(),!0;case"l":case"ArrowRight":return(0,on.p7)(),c.dispatch((0,$.Qx)({attached:!1})),null==r||r.trackDocEvent(nT.AA.PRESENT_MODE_NAVIGATED,{direction:nT.xQ.CARD_NEXT,method:nT.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextCard();case"h":case"ArrowLeft":return(0,on.p7)(),c.dispatch((0,$.Qx)({attached:!1})),null==r||r.trackDocEvent(nT.AA.PRESENT_MODE_NAVIGATED,{direction:nT.xQ.CARD_PREV,method:nT.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextCard(!0);case"j":case"ArrowDown":case"PageDown":if((0,on.p7)(),c.dispatch((0,$.Qx)({attached:!1})),!a){var p=(0,rW.ei)(i.state.selection);return i.commands.goToNextExpandableNode()||os(i,"down",!p),!0}return null==r||r.trackDocEvent(nT.AA.PRESENT_MODE_NAVIGATED,{direction:nT.xQ.TELEPROMPTER_DOWN,method:nT.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextBlock();case"k":case"ArrowUp":case"PageUp":if((0,on.p7)(),c.dispatch((0,$.Qx)({attached:!1})),!a){var h=(0,rW.ei)(i.state.selection);return i.commands.goToNextExpandableNode(!0)||os(i,"up",!h),!0}return null==r||r.trackDocEvent(nT.AA.PRESENT_MODE_NAVIGATED,{direction:nT.xQ.TELEPROMPTER_UP,method:nT.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextBlock(!0);case"r":if(f[0])return(0,on.p7)(),i.commands.spotlightCardById(f[0]),c.dispatch((0,$.Qx)({attached:!1})),!0;return!1;case"Escape":if(oo(e))return!1;var x=a&&l;if(i.commands.spotlightCollapseNearestExpandableNode(x?l:null))return i.commands.reHighlightExpandableNode(),!0;if(a)return i.commands.turnOffSpotlight(),!0;return c.dispatch((0,$.Qx)({attached:!1})),null==r||r.track(nT.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),i.commands.ascendUpToParentCard(!1);case"Enter":var m=a&&l;if(i.commands.expandOrCollapseExpandableNode(m?l:null))return!0;if(m){var v=i.state.doc.resolve(l).parent;if(v&&(0,or.AH)(v))return(0,or.xB)(v.attrs.id,!1),i.commands.spotlightNextBlock(!0),!0;return i.commands.spotlightCollapseNearestExpandableNode(l)}return!1;default:return!1}})},[i,o,r,n,d,a,l,s,t]),a},oa=function(e){var n=new KeyboardEvent("keydown",{key:e});t.g.dispatchEvent(n)},ol={ArrowUp:{icon:ei.FP,label:(0,ex.jsx)(h.cC,{id:"VbggDE"}),ariaLabel:function(){return x.ag._({id:"VbggDE"})},shortcuts:["↑","K"],key:"ArrowUp",onClick:function(){oa("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:ec.ac,label:(0,ex.jsx)(h.cC,{id:"4jciC3"}),ariaLabel:function(){return x.ag._({id:"4jciC3"})},shortcuts:["←","H"],key:"ArrowLeft",onClick:function(){oa("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:eo.r5,label:(0,ex.jsx)(h.cC,{id:"e3GOIZ"}),ariaLabel:function(){return x.ag._({id:"e3GOIZ"})},shortcuts:["↓","J"],key:"ArrowDown",onClick:function(){oa("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:es.eF,label:(0,ex.jsx)(h.cC,{id:"ZjQRVw"}),ariaLabel:function(){return x.ag._({id:"ZjQRVw"})},shortcuts:["→","L"],key:"ArrowRight",onClick:function(){oa("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:r6.GT,label:(0,ex.jsx)(h.cC,{id:"Xon9jp"}),ariaLabel:function(){return x.ag._({id:"Xon9jp"})},shortcuts:["S"],key:"S",onClick:function(){oa("s")},gridPos:[1,3]}},od=function(e){var n=e.shortcuts;return(0,ex.jsx)(v.x,{as:"span",color:"gray.400",ml:2,children:n.map(function(e,t){return(0,ex.jsxs)(w.Fragment,{children:[e,t===n.length-1?null:(0,ex.jsx)(v.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e)})})},ou=function(e){var n=e.activeKey,t=e.spotlightingByBlock;return(0,ex.jsx)(eA.h,{children:(0,ex.jsxs)(g.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,ex.jsx)(eu.X,{children:(0,ex.jsx)(h.cC,{id:"wja8aL"})}),(0,ex.jsx)(r8.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(ol).map(function(e){var r=e.gridPos,o=e.icon,i=e.label,s=e.ariaLabel,c=e.shortcuts,a=e.key,l=e.onClick,d=n===a;return(0,ex.jsx)(r7.P,{gridColumn:r[1],gridRow:r[0],children:(0,ex.jsx)(r9.u,{hasArrow:!0,placement:"top",label:(0,ex.jsxs)(v.x,{whiteSpace:"nowrap",children:[i,(0,ex.jsx)(od,{shortcuts:c})]}),children:(0,ex.jsx)(z.h,{m:1,shadow:"base",size:"md",variant:"S"==a&&t?"solid":"plain",isActive:d||"S"===a&&t,onClick:l,onMouseDown:function(e){return e.preventDefault()},"aria-label":s(),icon:(0,ex.jsx)(b.G,{icon:o})})})},a)})})]})})},of=t(5751),op=t(26721),oh=t(9088),ox=t(30893),om=t(40771),ov=t(8022),og=t(95258),oj=t(63849),ob=t(2575),oC=t(17651),oy=t(72466),oO=t(6185),ow=t.n(oO),ok=t(68642),oS=t(27875),oP=t.n(oS),oI=t(74542),oE={easeOutLinear:oI.gA,easeOutSine:oI.vh,easeOutCubic:oI.w2,easeOutCirc:oI.ei,easeOutQuad:oI.hl,easeOutQuart:oI.Y3,easeOutExpo:oI.ad,bezierCustom1:ow()(.13,.97,.035,.73),bezierCustom2:ow()(.105,1.15,.15,.355)},oD={UP:"up",DOWN:"down"},oA=function(e){return e?+new Date-+new Date(e):1/0},oT=function(e,n){var t=(0,w.useMemo)(function(){return new ok.Lethargy(6,120,.3,150)},[]),r=n||{},o=r.easing,i=void 0===o?"easeOutCubic":o,s=r.touchpadFactor,c=void 0===s?1.5:s,a=r.triggerThreshold,l=void 0===a?1200:a,d=(0,nN.As)("editor"),u=(0,J.CG)($.i2),f=(0,w.useRef)(null),p=(0,w.useRef)(null),h=(0,w.useRef)(null),x=(0,w.useRef)(!1),m=(0,w.useRef)(null),v=(0,w.useRef)(null),g=(0,w.useState)(!1),j=g[0],b=g[1],C=(0,w.useState)(!1),y=C[0],O=C[1],k=(0,w.useRef)({counterTarget:0,counterCurrent:0,direction:oD.DOWN}),S=(0,w.useCallback)(function(){if(f.current){var e,n=k.current.counterTarget/l*100,t=(null!=n?n:0)*2.64,r="".concat(t," ").concat(264-t),o=null===(e=f.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,i=f.current.querySelector(".chakra-progress__indicator");i&&i.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(n.toFixed(0),"%"))}},[l]),P=(0,w.useCallback)(function(){var e=h.current,n=p.current;if(n&&e){var t=e.querySelector(".chakra-progress__indicator"),r=n.querySelector(".chakra-progress__indicator");if(t&&r){var o=k.current.counterCurrent/l,s=(550>oA(v.current)?1:null!=o?o:0)*264,c="".concat(s," ").concat(264-s),a=Math.max(56-56*oE[i](Math.min(o,1)),0);e.style.transform="translateY(".concat(a,"px)"),n.style.transform="translateY(-".concat(a,"px)"),r.setAttribute("stroke-dasharray",c),t.setAttribute("stroke-dasharray",c)}}},[i,l]),I=(0,w.useCallback)(function(){if(!x.current){var e;requestAnimationFrame(function n(t){var r=e?t-e:0;if(e=t,.1>Math.abs(k.current.counterTarget-k.current.counterCurrent)){k.current.counterCurrent=k.current.counterTarget,P(),x.current=!1;return}k.current.counterCurrent=(0,oI.t7)(k.current.counterCurrent,k.current.counterTarget,oP()(.3*(60/(r?1e3/r:60)),.3,1)),P(),requestAnimationFrame(n)})}},[P]),E=(0,w.useCallback)(function(){k.current.counterTarget=0,b(!1),O(!1),S(),I()},[I,S]);return(0,w.useEffect)(function(){if(!u||!e)return E();var n,r,o=document.querySelector((0,n2.U8)(u));if(!o)return E();var i=function(n){if(!n.target.closest("[data-comments-wrapper]")){var o=t.check(n);if(null!==h.current&&null!==p.current){var i=oA(m.current);if(!(i<500)&&(!(i<1e3)||!1!==o)){var s=oA(v.current);if(!(s<500)&&(!(s<1e3)||!1!==o)){var a=0===Math.abs(n.deltaY)?k.current.direction:n.deltaY>0?oD.DOWN:oD.UP;if("down"===a?d.isAtBottom():d.isAtTop()){clearTimeout(r);var u=n.wheelDeltaY?n.wheelDeltaY===-3*n.deltaY:0===n.deltaMode,f=Math.abs(void 0!==n.deltaY?n.deltaY:40)*(u?c:1);if(a!==k.current.direction){k.current.direction=a,E();return}O(a===oD.DOWN),b(a===oD.UP),k.current.counterTarget+=f,k.current.direction=a,k.current.counterTarget/l>=1?(e.commands.spotlightNextCard(a===oD.UP,a===oD.UP?"bottom":"top"),v.current=+new Date,setTimeout(function(){E(),S()},250),setTimeout(function(){v.current=null},1e3)):r=setTimeout(E,500),I(),S()}}}}}},s=function(){m.current=+new Date,clearTimeout(n),E(),n=setTimeout(function(){m.current=null},1e3)};return o.addEventListener("scroll",s),o.addEventListener("wheel",i,{passive:!0}),S(),function(){o.removeEventListener("scroll",s),o.removeEventListener("wheel",i)}},[e,t,I,i,c,l,d,S,P,E,u]),{debugRef:f,nextCardRef:h,prevCardRef:p,showNextCard:y,showPrevCard:j}},o_=function(e){var n=e.editor,t=(0,te.ye)("debugLogging"),r=(0,w.useState)("easeOutExpo"),o=r[0],i=r[1],s=(0,w.useState)(1.5),c=s[0],a=s[1],l=(0,w.useState)(1200),d=l[0],u=l[1],f=oT(n,{easing:o,touchpadFactor:c,triggerThreshold:d}),p=f.debugRef,h=f.nextCardRef,x=f.prevCardRef,m=f.showNextCard,v=f.showPrevCard,g=(0,J.CG)(function(e){var n=(0,$.i2)(e)||"",t=(0,$.X9)(e),r=Object.keys((t.parents[n]||[]).reduce(function(e,n){return e[n]},t.tree)),o=null,i=null;return r.forEach(function(e,s){if(e===n){var c=t.parents[n];0===s?c.length&&(o={cardId:c[c.length-1],isSibling:!1}):o={cardId:r[s-1],isSibling:!0},s===r.length-1?c.length&&(i={cardId:c[c.length-1],isSibling:!1}):i={cardId:r[s+1],isSibling:!0}}}),{prevCard:o,nextCard:i}},n4()),j=g.prevCard,b=g.nextCard,C=null==b?void 0:b.cardId,y=null==j?void 0:j.cardId,O=(0,w.useMemo)(function(){var e=null,t=null;return n&&n.state.doc.descendants(function(n){return!(0,nZ.KH)(n)||(n.attrs.id===y?e=n:n.attrs.id===C&&(t=n),!!(!e&&y)||!!(!t&&C))}),{prev:e,next:t}},[n,C,y]);return(0,ex.jsxs)(ex.Fragment,{children:[t&&(0,ex.jsx)(oR,{ref:p,setEasing:i,setTouchpadFactor:a,setTriggerThreshold:u}),(0,ex.jsx)(oL,{ref:x,direction:"up",node:O.prev,enabled:v,offset:16}),(0,ex.jsx)(oL,{ref:h,direction:"down",node:O.next,enabled:m,offset:24})]})},oR=w.forwardRef(function(e,n){var t=e.setEasing,r=e.setTouchpadFactor,o=e.setTriggerThreshold;return(0,ex.jsxs)(m.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,ex.jsxs)(oh.v,{closeOnSelect:!1,children:[(0,ex.jsx)(ox.j,{as:eh.z,colorScheme:"trueblue",children:"Options"}),(0,ex.jsxs)(om.q,{minWidth:"240px",children:[(0,ex.jsx)(C.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,ex.jsxs)(v.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,ex.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,ex.jsxs)(ov.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:function(e,n){return o(n)},children:[(0,ex.jsx)(ov.zu,{}),(0,ex.jsxs)(ov.Fi,{children:[(0,ex.jsx)(ov.WQ,{}),(0,ex.jsx)(ov.Y_,{})]})]}),(0,ex.jsx)(og.R,{}),(0,ex.jsx)(C.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,ex.jsxs)(v.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,ex.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,ex.jsxs)(ov.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:function(e,n){return r(n)},children:[(0,ex.jsx)(ov.zu,{}),(0,ex.jsxs)(ov.Fi,{children:[(0,ex.jsx)(ov.WQ,{}),(0,ex.jsx)(ov.Y_,{})]})]}),(0,ex.jsx)(og.R,{}),(0,ex.jsxs)(oj._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:function(e){return t(e)},children:[(0,ex.jsx)(ob.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,ex.jsx)(ob.i,{value:"easeOutSine",children:"easeOutSine"}),(0,ex.jsx)(ob.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,ex.jsx)(ob.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,ex.jsx)(ob.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,ex.jsx)(ob.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,ex.jsx)(ob.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,ex.jsx)(ob.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,ex.jsx)(ob.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,ex.jsx)(m.k,{ref:n,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,ex.jsx)(oC.D,{value:40,color:"trueblue.500",children:(0,ex.jsx)(oy.i,{})})})]})});oR.displayName="PeekDebugger";var oL=w.forwardRef(function(e,n){var t=e.direction,r=e.enabled,o=e.node,i=e.offset,s=(0,w.useState)(!1),c=s[0],a=s[1],l=(0,w.useState)(o),d=l[0],u=l[1];(0,w.useEffect)(function(){a(!0);var e=setTimeout(function(){a(!1),u(o)},550);return function(){clearTimeout(e)}},[o]);var f=(0,w.useMemo)(function(){return d?(0,eK.getCardTitle)(d.toJSON()):""},[d]),p=!!d;return(0,ex.jsx)(m.k,{ref:n,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===t?"".concat(i,"px"):"inherit",bottom:"down"===t?"".concat(i,"px"):"inherit",children:(0,ex.jsxs)(m.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:r?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,ex.jsx)(oC.D,{display:p?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,ex.jsx)(oy.i,{visibility:c?"visible":"hidden",children:(0,ex.jsx)(b.G,{icon:rs.faCircleCheck,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),p||"up"!==t?p||"down"!==t?null:(0,ex.jsx)(b.G,{icon:of.m5,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,ex.jsx)(b.G,{icon:op.yt,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,ex.jsx)(m.k,{width:1}),(0,ex.jsx)(v.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:p?"gray.800":"gray.600",px:2,children:p?f:"down"===t?"End of presentation":"Start of presentation"})]})})});oL.displayName="PeekCardTab";var oz=t(12741),oM=function(){var e=(0,w.useState)(["",[],{}]),n=e[0],t=e[1],r=(0,J.qr)();return(0,w.useEffect)(function(){return r.subscribe(function(){var e=r.getState(),n=(0,$.X9)(e),o=(0,$.i2)(e)||"",i=n.parents[o]||[],s={};Object.keys(n.tree).forEach(function(e){var t=[];(function e(n){Object.keys(n).forEach(function(r){t.push(r),e(n[r])})})(n.tree[e]),s[e]=t}),t([o,i,s])})},[r]),n},oG=function(){var e=oM(),n=(0,A.Z)(e,3),t=n[0],r=n[1],o=n[2],i=Object.keys(o);return(0,ex.jsx)(ea.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:t?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:i.map(function(e,n){var s=[].concat((0,oz.Z)(r),[t])[0],c=i.indexOf(s),a=o[s],l=0,d=100;return t&&a&&-1===i.indexOf(t)&&(l=(a.indexOf(t)+1)/a.length*100,d=1/a.length*100),(0,ex.jsx)(oF,{cardId:e,state:n===c?"current":n<=c?"prev":"next",percent:l,unit:d},e)})})},oN="var(--chakra-colors-trueblue-200)",oZ="var(--chakra-colors-trueblue-100)",oF=function(e){var n=e.cardId,t=e.state,r=e.percent,o=e.unit,i="linear-gradient(to right, ".concat(oN," 0% ").concat(r,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(r,"% ").concat(r+o,"%, ").concat(oZ," ").concat(r+o,"% 100%)");return(0,ex.jsx)(m.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===t?i:"prev"===t?oN:oZ},n)},oW=(0,r5.ZP)("Esc"),oU=function(e){var n=e.editor,t=e.showNavigationControls,r=(0,k.v9)($.gh)===nW.q.SLIDE_VIEW,o=(0,w.useState)(null),i=o[0],s=o[1],c=(0,k.v9)($.JA),a=(0,w.useRef)(c),l=(0,k.I0)(),d=oc({enabled:r&&!c,setActiveKey:s});return(0,w.useEffect)(function(){l((0,$.e)({isEditingInSlideView:!1}))},[r,l]),a.current=c,(0,w.useEffect)(function(){return r3.F7.on("keydown","SLIDE_VIEW",function(e){return!!(a.current&&oW(e))&&(l((0,$.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)})},[l]),(0,r4.us)(),(0,ex.jsxs)(ex.Fragment,{children:[r&&(0,ex.jsx)(o_,{editor:n}),r&&(0,ex.jsx)(oG,{}),r&&(0,ex.jsx)(m.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,ex.jsxs)(m.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:c?1:0,pointerEvents:c?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:c?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,ex.jsx)(v.x,{size:"sm",mr:3,children:(0,ex.jsx)(h.cC,{id:"DjD/sG"})}),(0,ex.jsx)(eh.z,{size:"sm",variant:"solid",onClick:function(){return l((0,$.e)({isEditingInSlideView:!1}))},children:(0,ex.jsx)(h.cC,{id:"DPfwMq"})})]})}),r&&t&&(0,ex.jsx)(ou,{activeKey:i,spotlightingByBlock:d})]})},oV=t(85946),oB=t(13414),oH={duration:.25,delay:.75},oq={duration:.25},oK="filmstrip-root",oY=".".concat(oK),oQ="filmstrip-scroller",oX=".".concat(oQ),oJ=w.createContext({navItemPreviewRefMap:{}});function o$(){return(0,w.useContext)(oJ)}var o0=t(6110),o1=t(38815),o2=t(11895),o5=t(52949);function o3(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var o4=function(e){var n=(0,o2.i)(e),t=n.content,r=n.selection,o=!!(null!=t&&t.content),i=(0,w.useMemo)(function(){if(!o)return[];var e,n=t.content,r=(null==n?void 0:n[0].content)||[],i=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(function(e){var n;return i&&null!==(n=e.attrs)&&void 0!==n&&n.id?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"}:null}).filter(function(e){return null!==e})},[t,o]),s=(0,J.CG)(o5.ZD,function(e,n){return n4()(e,n)}).map(function(e){return i.find(function(n){return n.cardId===e.cardId})?function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o3(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o3(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},e):null}).filter(function(e){return null!==e}),c=(0,J.CG)(o5.Ae);return{isDragging:c,cards:c?s:i,editorContent:t,selection:r,isLoaded:o}},o6=t(86733),o8=t(32649),o7=function(e){var n=e.onClose,t=e.isDark,r=e.viewPreference,o=e.setViewPreference,i="list"===r,s={backgroundColor:t?"gray.700":"gray.200",activeButtonColor:t?"gray.50":"trueblue.500",inactiveButtonColor:t?"gray.50":"gray.900",closeButtonColorScheme:t?"gray":"blackAlpha"},c=s.activeButtonColor,a=s.inactiveButtonColor,l=s.backgroundColor,d=s.closeButtonColorScheme,u=(0,nT.z$)(),f=(0,w.useCallback)(function(e){return function(){o(e),null==u||u.track(nT.AA.FILMSTRIP_TOGGLE_VIEW,{view:e})}},[u,o]);return(0,ex.jsxs)(m.k,{p:"8px",pb:"2px",children:[(0,ex.jsxs)(ea.U,{spacing:0,bg:l,p:.5,borderRadius:"md",children:[(0,ex.jsx)(C.kH,{label:"Filmstrip view",children:(0,ex.jsx)(eh.z,{size:"xs",variant:i?"ghost":"plain",color:i?a:c,onClick:f("film"),"data-testid":"filmstrip-view-button",children:(0,ex.jsx)(ea.U,{children:(0,ex.jsx)(b.G,{icon:oV.Cj})})})}),(0,ex.jsx)(C.kH,{label:"List view",children:(0,ex.jsx)(eh.z,{size:"xs",variant:i?"plain":"ghost",color:i?c:a,onClick:f("list"),"data-testid":"list-view-button",children:(0,ex.jsx)(ea.U,{children:(0,ex.jsx)(b.G,{icon:o8.Zr})})})})]}),(0,ex.jsx)(C.kH,{label:(0,ex.jsx)(h.cC,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,ex.jsx)(z.h,{variant:"ghost","aria-label":x.ag._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:d,isRound:!0,size:"xs",icon:(0,ex.jsx)(b.G,{icon:o6.faXmark}),outlineOffset:"0px",ml:"auto",onClick:function(e){e.stopPropagation(),n()},onMouseDown:nl.br})})]})},o9=t(5715),ie=t(46802),it=t(86378),ir=t(1587),io=t(43926),ii=t(82904),is=t(38564),ic=t(7935),ia=t(9850),il=t.n(ia),id=t(78308),iu=t(16975),ip=t(10221),ih=t(90399),ix=t(60636),im=t(33295),iv=function(e,n){var t=is.Gk.getState(e.state).undoManager,r=t.undoStack[t.undoStack.length-1];r&&r.meta.set("filmstripState",n)},ig=function(e){var n=(0,J.CG)(o1.wg),t=(0,J.CG)(o1.zq),r=(0,J.TL)(),o=(0,eU.p)(),i=(0,w.useCallback)(function(t,r,i){if(e){var s,c=(0,nZ.Lz)(e,n);if(c.length){var a=ty.HY.from(c),l=(0,nd.G8)(a,e.schema);if(!l){o({title:(0,ex.jsx)(h.cC,{id:"fFgBN7",values:{errorMessage:r}}),status:"error",duration:3e3,position:"top"});return}null===(s=document.getSelection())||void 0===s||s.removeAllRanges(),eQ()(l,{format:"text/html"});var d=ip.Z.getState(e.state);d&&!i&&d.clearCutData(),o({title:(0,ex.jsx)(h.cC,{id:"8p/xVT",values:{0:c.length,1:t.one,2:t.other}}),status:"success",duration:3e3,position:"top"})}}},[e,n,o]),s=(0,w.useCallback)(function(){i({one:"Copied card.",other:"Copied ".concat(n.length," cards.")},"Error copying card.",!1)},[i,n]),c=(0,w.useCallback)(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var o=(0,o1.ym)((0,J.bh)().getState());r((0,o1.jf)()),e.commands.deleteCardsById(n,t),iv(e,o)}},[r,e,n]),a=(0,w.useCallback)(function(){if(e){var t="";if(1===n.length){var r=(0,nZ.Bw)(e,n[0]);r&&(t=(0,ic.getCardTitle)(r.node.toJSON()))}c();var i=t?'"'.concat(t,'"'):x.ag._({id:"FyJPFh"}),s=o({title:(0,ex.jsxs)(ea.U,{children:[(0,ex.jsx)(v.x,{noOfLines:1,children:(0,ex.jsx)(h.cC,{id:"OJTPnC",values:{0:n.length,1:n.length,displayTitle:i}})}),(0,ex.jsx)(eV.r,{textDecoration:"underline",onClick:function(){(0,eq.Yw)(e.state),o.close(s)},children:(0,ex.jsx)(h.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})}},[c,e,n,o]),l=(0,w.useCallback)(function(){i({one:"Cut card.",other:"Cut ".concat(n.length," cards")},"Error cutting card.",!0),c(!0)},[c,i,n]),d=(0,w.useCallback)(function(){if(e){var i=(0,nZ.Lz)(e,n);if(i.length){var s=(0,nZ.Bw)(e,t),c=s?s.pos+s.node.nodeSize:e.state.doc.content.size-1,a=i.map(function(e){return(0,im.h)(il()(e.toJSON()))}).map(function(e){return(0,ih.Zs)(e)}),l=(0,o1.ym)((0,J.bh)().getState());e.chain().insertContentAt(c,a,{updateSelection:!1}).command(function(e){var n=e.tr,t=(0,ix.t)(n.doc.resolve(c));return t&&(n=n.setSelection(t)),!0}).scrollIntoView().run(),iv(e,l),r((0,o1.xi)({beforeCardId:null==s?void 0:s.node.attrs.id,cardCount:a.length})),o({title:(0,ex.jsx)(h.cC,{id:"ClnFsQ",values:{0:i.length,1:i.length}}),status:"success",duration:3e3,position:"top"})}}},[r,e,t,o,n]);return{handleAddCard:(0,w.useCallback)(function(){if(e){var n=(0,o1.zq)((0,J.bh)().getState()),t=(0,nZ.Bw)(e,n);if(t){var o=t.pos,i=e.view.state.doc.nodeAt(o);if(!i){console.error("[Filmstrip] Cannot append card. Node unknown");return}var s=o+i.nodeSize,c=iu.e1.blankCard;(0,iu.ZT)({key:"blankCard",nodeName:"card"},id.fe.FILMSTRIP_CARD_MENU);var a=(0,o1.ym)((0,J.bh)().getState());e.chain().insertContentAt(s,(0,ih.Zs)(c),{updateSelection:!1}).command(function(e){var n=e.tr,t=(0,ix.t)(n.doc.resolve(s));return t&&(n=n.setSelection(t)),!0}).scrollIntoView().run(),iv(e,a),r((0,o1.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:1}))}}},[r,e]),handleCopy:s,handleDelete:a,handleCut:l,handleDuplicate:d}},ij=["children","icon","onClick","shouldHide"];function ib(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function iC(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ib(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ib(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var iy=function(e){var n=e.children,t=e.icon,r=e.onClick,o=e.shouldHide,i=(0,e_.Z)(e,ij);return void 0!==o&&o?null:(0,ex.jsx)(ii.s,iC(iC({icon:t,onClick:r},i),{},{children:n}))},iO=(0,w.memo)(function(e){var n=e.isDark;return(0,ex.jsxs)(g.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,ex.jsx)(b.G,{fixedWidth:!0,icon:io.faRectangle}),(0,ex.jsx)(b.G,{icon:ie.di,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,ex.jsx)(b.G,{icon:ie.di,transform:"shrink-7 right-6 down-4"}),(0,ex.jsx)(b.G,{icon:o9.r8,color:n?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});iO.displayName="AddCardIcon";var iw=function(e,n){if(0===e.length||!n)return null;if(1===e.length){var t=(0,nZ.Bw)(n,e[0]);return t?(0,eK.getCardTitle)(t.node.toJSON())||"Untitled card":null}return"Multiple cards selected"},ik=(0,w.forwardRef)(function(e,n){var t=e.editor,r=e.isOpen,o=e.onClose,i=e.readOnly,s=e.clearPositioning,c=e.rootStyles,a=e.isDark,l=(0,J.CG)($.yx),d=(0,eU.p)(),u=ig(t),f=u.handleCopy,p=u.handleDelete,x=u.handleCut,m=u.handleDuplicate,g=u.handleAddCard,j=(0,J.CG)(o1.wg),y=1===j.length,O=(0,w.useMemo)(function(){return y?(0,ri.gq)({cardId:j[0],docId:null==l?void 0:l.id,isPresentMode:!1}):""},[null==l?void 0:l.id,y,j]),k=(0,eB.V)(O).onCopy,S=(0,w.useCallback)(function(){k(),d({title:(0,ex.jsx)(h.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[k,d]),P=(0,nf.K)(),I=(0,w.useMemo)(function(){return iw(j,t)},[t,j]),E=(0,w.useMemo)(function(){return a?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{}},[a]);return(0,ex.jsx)(oh.v,{isOpen:r,onClose:o,children:(0,ex.jsxs)(om.q,{className:"filmstrip-card-menu",onContextMenu:function(e){e.preventDefault()},zIndex:"popover",ref:n,rootProps:{style:c},w:"260px",overflowY:"auto",onTransitionEnd:function(){r||s()},children:[I&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(v.x,{pl:3,color:a?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:I}),(0,ex.jsx)(og.R,{})]}),(0,ex.jsx)(iy,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:i,command:(0,C.cE)("Mod+X"),icon:(0,ex.jsx)(b.G,{fixedWidth:!0,icon:ir.XV}),onClick:x,children:(0,ex.jsx)(h.cC,{id:"cCd8Bs"})}),(0,ex.jsx)(iy,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:i,command:(0,C.cE)("Mod+C"),icon:(0,ex.jsx)(b.G,{fixedWidth:!0,icon:it.kZ}),onClick:f,children:(0,ex.jsx)(h.cC,{id:"he3ygx"})}),(0,ex.jsx)(iy,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:i,command:(0,C.cE)("Mod+D"),icon:(0,ex.jsx)(b.G,{fixedWidth:!0,icon:eF.WM}),onClick:m,children:(0,ex.jsx)(h.cC,{id:"euc6Ns"})}),(0,ex.jsx)(iy,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:i,icon:(0,ex.jsx)(iO,{isDark:a}),onClick:g,sx:E,children:(0,ex.jsx)(h.cC,{id:"90n2YU"})}),!i&&(0,ex.jsx)(og.R,{}),(0,ex.jsx)(iy,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!y,icon:(0,ex.jsx)(nu.x,{isLocked:!P,isDark:a}),onClick:S,children:(0,ex.jsx)(h.cC,{id:"F0YmUY"})}),(0,ex.jsx)(iy,{"data-testid":"filmstrip-card-menu-item-delete",color:a?"red.300":"red.500",icon:(0,ex.jsx)(b.G,{icon:eN.$,fixedWidth:!0}),onClick:p,shouldHide:i,children:(0,ex.jsx)(h.cC,{id:"cnGeoo"})})]})})});ik.displayName="FilmstripCardMenuComponent";var iS=(0,w.memo)(ik),iP=t(17033),iI=t(57474),iE=t(79183),iD=(0,e$.E)(g.xu),iA=function(e){var n=e.isEditorFocused,t=e.isFilmstripSelected,r=e.shouldHide,o=e.cardId,i=e.isDraggingCard,s=e.index;return(0,ex.jsxs)(m.k,{boxShadow:t?"var(--fs-item-selected-box-shadow)":n?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:r?"none":void 0,children:[(0,ex.jsx)(iT,{cardId:o}),(0,ex.jsx)(e0.M,{children:!r&&!i&&(0,ex.jsx)(iD,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,left:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,ex.jsx)(v.x,{children:s})},s)})]})},iT=function(e){var n=e.cardId,t=o$().navItemPreviewRefMap,r=(0,J.CG)($.Pu),o=(0,iI.J)(r,!1);return(0,ex.jsx)(m.k,{className:"filmstrip-nav-item-wrapper",sx:tE.n,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(iE.DB,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.5)",w:"var(--editor-width)",children:(0,ex.jsx)("div",{className:"ProseMirror",children:(0,ex.jsx)(m.k,{className:"doc-content-wrapper",direction:"column",align:"center",sx:o,children:(0,ex.jsx)("div",{style:{width:"100%"},ref:function(e){e&&(t[n]=e)}})})})})},i_=t(24963),iR=function(e){var n=e.cardId,t=e.index,r=e.isEditorFocused,o=e.isFilmstripSelected,i=(0,n6.T)({cardId:n}).title;return(0,ex.jsxs)(m.k,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:o?"var(--fs-text-item-selected-box-shadow)":r?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:o?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:"none"},".filmstrip-text-drag-handle":{display:"block"}},children:[(0,ex.jsxs)(m.k,{alignItems:"center",bg:o?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,ex.jsx)(g.xu,{className:"filmstrip-text-item-number",w:6,fontSize:t>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:t}),(0,ex.jsx)(g.xu,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:"grab"},children:(0,ex.jsx)(b.G,{icon:i_.Ok})})]}),(0,ex.jsx)(m.k,{"data-testid":"filmstrip-text-item-title",p:2,pl:"4px",flex:1,bg:o?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",children:(0,ex.jsx)(v.x,{noOfLines:1,children:i||"Untitled"})})]})},iL=function(e){var n=e.filmstripItemRef,t=e.cardId,r=e.isFilmstripSelected,o=e.currentFocusedCard,i=e.editor,s=e.isAnimating,c=(0,nN.As)("filmstrip"),a=(0,J.CG)(o1.DM);(0,w.useEffect)(function(){n.current&&t===o&&(null!=i&&i.isFocused&&!s?c.scrollElementIntoView({element:n.current,offsetFromTop:120}):r&&t===a&&requestAnimationFrame(function(){if(n.current&&c.scroller){var e=c.scroller.getBoundingClientRect(),t=n.current.getBoundingClientRect(),r=t.top,o=t.bottom,i=t.height,s=0,a=n.current.closest(".reorder-item");if(a instanceof HTMLElement&&(s=a.offsetTop),o>=e.bottom){var l=Math.max(0,s+i-c.scroller.clientHeight+4);c.scrollTo({top:l})}else r<=e.top&&c.scrollTo({top:s})}}))},[t,o,i,a,r,c,n,s])},iz=t(13720),iM=function(){var e=(0,iz.i)({lg:100,xl:125,"2xl":150})||100,n=(0,J.CG)(o1.K5),t=null!==n?n:e;return{previewWidth:t,width:t+40,fontSize:t/iE.DB}},iG=(0,e$.E)(m.k),iN=function(e){var n=e.card,t=e.index,r=e.isFirst,o=e.isEditorFocused,i=e.currentFocusedCard,s=e.isFilmstripSelected,c=e.readOnly,a=e.shouldHide,l=e.isDragInProgress,d=e.numberOfCardsDragging,u=e.onContextClick,f=e.editor,p=e.isAnimating,h=e.showTextOnly,x=n.cardId,m=n.isDragging,j=(0,w.useRef)(null);iL({filmstripItemRef:j,cardId:x,isFilmstripSelected:s,currentFocusedCard:i,editor:f,isAnimating:p});var b=(0,J.TL)(),C=iM().previewWidth,y=(0,w.useCallback)(function(e){if(x){var n=e.shiftKey,t=!n&&(e.metaKey||e.ctrlKey);if(n&&!c)b((0,o1.YC)({id:x,currentFocusedCard:i}));else if(t&&!c)b((0,o1.sY)({id:x}));else{if(l)return;b((0,o1.Ti)({id:x})),b((0,$.Qx)({attached:!1})),f&&(0,iP.YS)({cardId:x,editor:f})}}},[x,c,b,i,l,f]);return(0,ex.jsxs)(g.xu,{className:"filmstrip-item",ref:j,pos:"relative",pt:h?void 0:1,mt:h?1.5:r?void 0:1,onClick:y,onContextMenu:u,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:a?"none":void 0,"data-filmstrip-selected":s,"data-filmstrip-view":h?"list":"filmstrip",css:{"--editor-width":"".concat(C,"px")},children:[h&&(0,ex.jsx)(iR,{cardId:x,index:t,isFilmstripSelected:s,isEditorFocused:o}),(0,ex.jsx)(iA,{shouldHide:h,cardId:x,index:t,isDraggingCard:m,isFilmstripSelected:s,isEditorFocused:o}),(0,ex.jsx)(e0.M,{children:d&&(0,ex.jsx)(g.xu,{position:"absolute",bottom:0,left:0,transform:"translate(-50%, 50%)",children:(0,ex.jsx)(iG,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,ex.jsx)(v.x,{children:d})},"badge-number")})})]})},iZ=t(28316),iF=t(12691),iW=(0,w.memo)(function(e){var n=e.content,t=e.theme,r=(0,w.useState)(!1),o=r[0],i=r[1];return((0,w.useEffect)(function(){requestAnimationFrame(function(){i(!0)})},[]),o)?(0,ex.jsx)(tE.m,{theme:t,content:n,isThumbnail:!0,portalComponent:iU}):null}),iU=function(e){var n=e.renderers,t=o$().navItemPreviewRefMap;return(0,ex.jsx)(ex.Fragment,{children:Object.entries(n).map(function(e){var n=(0,A.Z)(e,2),r=n[0],o=n[1],i=o.props.node;if("document"===i.type.name)return null;var s=(0,iF.KH)(i)?t[i.attrs.id]:null;return iZ.createPortal(o.reactElement,s||o.element,r)})})};iW.displayName="FilmstripPreviewEditor";var iV=t(20362),iB=(0,w.memo)(function(e){var n=e.onClose,t=e.isDark,r=e.isResizing,o=e.setIsResizing,i=iM().previewWidth,s=(0,w.useRef)(null),c=(0,w.useRef)(i),a=(0,w.useRef)(null),l=(0,J.TL)(),d=(0,w.useCallback)(function(e){if(e.preventDefault(),s.current&&c.current&&a.current){var t=s.current,r=t.width,o=t.x,i=e.clientX-o;if(r+i<=30){n();return}var l=oP()(r+i,90,200);l!==c.current&&(c.current=l,a.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(l,"px;\n          }"))}},[n]),u=(0,iV.Z_)(d,30),f=(0,w.useCallback)(function(e){e.preventDefault(),s.current={x:e.clientX,width:c.current},o(!0),document.addEventListener("mousemove",u),document.addEventListener("mouseup",function e(){s.current=null,a.current&&(a.current.innerHTML=""),l((0,o1.lh)({width:c.current})),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",e),requestAnimationFrame(function(){o(!1)})})},[l,o,u]);return(0,ex.jsxs)(m.k,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,right:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:t?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:f,zIndex:10,children:[(0,ex.jsx)("style",{ref:a}),(0,ex.jsx)(g.xu,{position:"relative",left:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:r?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});iB.displayName="FilmstripResizer";var iH=function(e,n){if(!e||!n)return{id:null,pos:null};var t=e.$from,r=e.from,o=e.to,i=null,s=null;return t.doc.nodesBetween(r,o,function(e,n){var r=t.doc.resolve(n).depth;return!(!i&&(0,nZ.KH)(e))||1!==r||(i=e.attrs.id,s=n,!1)}),{id:i,pos:s}},iq=function(){var e;return!!(null!==(e=document.activeElement)&&void 0!==e&&e.closest(oY))},iK=function(){var e=(0,w.useRef)(null),n=(0,w.useState)(!1),t=n[0],r=n[1],o=(0,w.useState)([0,0]),i=o[0],s=o[1],c=(0,w.useState)("bottom"),a=c[0],l=c[1],d=(0,J.TL)(),u=(0,w.useCallback)(function(){r(!1)},[]),f=(0,w.useCallback)(function(){s([0,0]),l("bottom")},[]),p=(0,w.useCallback)(function(e){r(!0),s(e)},[]),h=(0,w.useCallback)(function(n){return function(t){t.preventDefault(),d((0,o1.uu)({id:n})),p([t.clientX,t.clientY]);var r,o=null===(r=e.current)||void 0===r?void 0:r.offsetHeight;if(null!=o){var i=window.innerHeight<t.clientY+o,s=t.clientY<o;i&&!s?l("top"):i&&s?l("center"):l("bottom")}}},[d,e,p]),x=(0,w.useMemo)(function(){var n,t=i[1],r=null===(n=e.current)||void 0===n?void 0:n.offsetHeight,o=r?window.innerHeight-(t+r+8):void 0,s="center"===a&&o?"translateY(".concat(o,"px)"):"top"===a?"translateY(-100%)":void 0;return{left:i[0],top:i[1],transform:s,transformOrigin:"top"}},[a,i]);return{menuRef:e,isFilmstripCardMenuOpen:t,onFilmstripCardMenuClose:u,handleContextMenu:h,menuRootStyles:x,clearPositioning:f}},iY=nM()(tn.YS,200),iQ=function(e){var n=e.isFocused,t=e.readOnly,r=e.firstFocusedCardId,o=e.editor,i=e.isDragging,s=ig(o),c=s.handleCopy,a=s.handleDelete,l=s.handleCut,d=s.handleDuplicate,u=(0,J.TL)(),f=(0,J.qr)();(0,w.useEffect)(function(){return nJ.F7.on("keydown","FILMSTRIP",function(e){if(!n)return!1;switch(e.key){case"Escape":if(i)return u((0,o5.vL)()),!0;return!1;case"Backspace":case"Delete":if(!t)return a(),!0;return!1;case"a":case"A":if(!t&&(e.ctrlKey||e.metaKey))return e.preventDefault(),u((0,o1.td)({currentFocusedCard:r})),!0;return!1;case"c":case"C":if(!t&&(e.ctrlKey||e.metaKey))return c(),!0;return!1;case"d":case"D":if(!t&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d(),!0;return!1;case"x":case"X":if(!t&&(e.ctrlKey||e.metaKey))return l(),!0;return!1;case"ArrowDown":u((0,o1.ut)({direction:"down",withShift:!t&&e.shiftKey,currentFocusedCard:r}));var s=(0,o1.wg)(f.getState())[0];return!e.shiftKey&&o&&s&&(iY({cardId:s,editor:o}),u((0,$.Qx)({attached:!1}))),!0;case"ArrowUp":u((0,o1.ut)({direction:"up",withShift:!t&&e.shiftKey,currentFocusedCard:r}));var p=(0,o1.wg)(f.getState())[0];return!e.shiftKey&&o&&p&&(iY({cardId:p,editor:o}),u((0,$.Qx)({attached:!1}))),!0;default:return!1}})},[u,r,n,i,a,c,d,l,t,o,f])},iX=t(74993),iJ=function(e){var n=(0,J.qr)(),t=(0,eU.p)(),r=(0,J.TL)();(0,w.useEffect)(function(){var o=function(o){var i,s=n.getState();if(e&&iq()&&(0,$.hN)(s)){var c=null===(i=o.clipboardData)||void 0===i?void 0:i.getData("text/html");if(c){var a=(0,iX.T)(c,e.schema).content.content.filter(function(e){return(0,iF.KH)(e)});if(a.length){var l=(0,nZ.Bw)(e,(0,o1.zq)(s)),d=l?l.pos+l.node.nodeSize:e.state.doc.content.size-1,u=a.map(function(e){return(0,im.h)(il()(e.toJSON()))}).map(function(e){return(0,ih.Zs)(e)}),f=(0,o1.ym)((0,J.bh)().getState());e.chain().insertContentAt(d,u,{updateSelection:!1}).command(function(e){var n=e.tr;n.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:d});var t=(0,ix.t)(n.doc.resolve(d));return t&&(n=n.setSelection(t)),!0}).scrollIntoView().run(),o.preventDefault(),iv(e,f),r((0,o1.xi)({beforeCardId:null==l?void 0:l.node.attrs.id,cardCount:u.length})),t({title:(0,ex.jsx)(h.cC,{id:"3viq5b",values:{0:a.length,1:a.length}}),status:"success",duration:3e3,position:"top"})}}}};return document.addEventListener("paste",o),function(){document.removeEventListener("paste",o)}},[r,e,n,t])},i$=t(30453),i0=function(){var e=(0,i$.o)(),n=(0,w.useRef)(null),t=(0,w.useRef)(),r=(0,w.useRef)(),o=(0,w.useRef)(),i=(0,w.useCallback)(function(e){if(o.current){var n=i2(o.current),i=e.target;if(n&&i&&void 0!==t.current&&void 0!==r.current){var s=i.scrollTop-t.current;n.y=r.current-s}}},[]),s=(0,w.useCallback)(function(e,t){var r=n.current;if(r){var o=r.getBoundingClientRect(),i=t.point.y,s=e.target;if(s instanceof Element){var c=s.closest("[draggable]"),a=null==c?void 0:c.parentElement;a&&(i<o.top+25&&(c!==a.firstElementChild||r.scrollTop>0)?r.scrollTop-=5:i>o.bottom-25&&(c!==a.lastElementChild||r.scrollTop<r.scrollHeight)&&(r.scrollTop+=5))}}},[]),c=(0,w.useCallback)(function(){var i=n.current,s=i1(e);if(i&&s){o.current=s,t.current=i.scrollTop;var c=i2(s);c&&(r.current=c.y)}},[e]);return{scrollerRef:n,onScroll:i,dragControls:e,onDrag:s,onDragStart:c,onDragEnd:(0,w.useCallback)(function(){t.current=void 0,r.current=void 0,o.current=void 0},[])}},i1=function(e){try{return Array.from(e.componentControls).find(function(e){return e.isDragging})}catch(e){console.error("[caught] findDraggingElementControls",e);return}},i2=function(e){try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}};function i5(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function i3(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i5(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i5(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var i4=(0,e$.E)(m.k),i6=(0,e$.E)(g.xu),i8="data-".concat(ti.dh),i7=function(e){var n,t=e.onClose,r=e.editor,o=e.readOnly,i=(0,w.useState)(!1),s=i[0],c=i[1],a=(0,ee._)(en.H.filmstripViewPreference,"film"),l=(0,A.Z)(a,2),d=l[0],u=l[1],p=(0,w.useRef)(null),h=o4(r),x=h.cards,v=h.isDragging,j=h.editorContent,b=h.selection,C=h.isLoaded,y=(0,w.useMemo)(function(){return iH(b,r)},[r,b]).id,O=(0,J.TL)(),k=(0,J.CG)(o1.wg),S=(0,J.CG)(o5.pe),P=(0,J.CG)(o5.u9),I=(0,J.CG)(o5.K3),E=(0,w.useState)(!1),D=E[0],T=E[1],_=iK(),R=_.menuRef,L=_.isFilmstripCardMenuOpen,z=_.onFilmstripCardMenuClose,M=_.clearPositioning,G=_.handleContextMenu,N=_.menuRootStyles,Z=(0,w.useCallback)(function(){if(z(),s){var e;null===(e=p.current)||void 0===e||e.focus()}},[s,z]),F=i0(),W=F.scrollerRef,U=F.onScroll,V=F.dragControls,B=F.onDrag,H=F.onDragStart,q=F.onDragEnd,K=(0,w.useCallback)(function(e){return function(){if(T(!0),H(),p.current){var n=p.current.getBoundingClientRect().height;p.current.style.height="".concat(n,"px")}var t=k.includes(e)?k:[e];O((0,o1.WF)({selectedCardIdsToDrag:t})),O((0,o5.CA)({cardIds:x.map(function(e){return e.cardId}),leaderCardId:e,selectedCardIds:t}))}},[x,O,k,H]),Y=(0,w.useCallback)(function(){r&&(O((0,o5.vL)()),r.commands.rearrangeCardsById(x.map(function(e){return e.cardId}),P),q())},[x,O,r,P,q]),Q=(0,w.useCallback)(function(){p.current&&(p.current.style.height="auto"),T(!1)},[]);iJ(r),iQ({isFocused:s,readOnly:o,firstFocusedCardId:y,editor:r,isDragging:v}),(0,eD.O)({ref:p,handler:function(e){R.current&&R.current.contains(e.target)||(L&&z(),O((0,o1.Mt)()))}});var X=(0,J.CG)($.Pu),et=(0,eH.ff)("whiteAlpha.600","whiteAlpha.100"),er=(0,eH.ff)("#F9FAFBDD","gray.900"),eo=(0,eH.ff)("gray.800","gray.200"),ei=(0,eH.ff)("blackAlpha.400","whiteAlpha.500"),es="dark"===(0,eH.If)().colorMode,ec=(0,w.useMemo)(function(){return{"--fs-item-border-color":es?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":es?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":es?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":es?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":es?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":es?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":es?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}},[es]),ea=(0,w.useState)(!1),el=ea[0],ed=ea[1],eu={initial:{x:-(n=iM().width)},animate:{x:0,transition:oH},exit:{x:-n,transition:oq}},ef=(0,w.useMemo)(function(){var e=P.length;return v&&e>1?e:null},[v,P.length]),ep=(0,w.useState)(!1),eh=ep[0],em=ep[1],ev=(0,nN.As)("filmstrip");return(0,w.useEffect)(function(){ev.setScrollSelector(oX)},[ev]),(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsxs)(m.k,{pointerEvents:"none",position:"absolute",direction:"column",left:2,top:12,bottom:2,justifyContent:"center",color:eo,children:[r&&C&&(0,ex.jsx)(iW,{content:j,theme:X}),(0,ex.jsxs)(g.xu,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:eh?0:1}},maxHeight:"100%",children:[(0,ex.jsxs)(i4,i3(i3(i3({ref:p,"data-guider-highlight":"filmstrip",className:oK},(0,f.Z)({},i8,!0)),{},{pos:"relative",direction:"column",zIndex:11},eu),{},{onAnimationStart:function(){em(!0)},onAnimationComplete:function(){em(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:function(){c(!0),null==r||r.commands.blur()},onBlur:function(e){var n,t;p.current&&null!==(n=p.current)&&void 0!==n&&n.contains(e.relatedTarget)||null!==(t=R.current)&&void 0!==t&&t.contains(e.relatedTarget)||c(!1)},borderRadius:"md",bg:er,borderWidth:"1px",borderColor:et,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,ex.jsx)(o7,{isDark:es,onClose:t,viewPreference:d,setViewPreference:u}),(0,ex.jsx)(i6,{className:oQ,layoutScroll:!0,overflowY:"auto",position:"relative",sx:i3({"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:ei,borderRadius:"full"}},ec),ref:W,onScroll:U,p:"8px",pt:0,children:(0,ex.jsx)(o0.t.Group,{onReorder:function(e){var n=e.map(function(e){return e.cardId});O((0,o5.k)({reorderedCardIds:n}))},values:x,axis:"y",children:r&&C&&x.map(function(e,n){var t=e.cardId,i=e.displayBehavior,s=k.includes(t),c=I===t;return(0,ex.jsx)(o0.t.Item,{drag:!o&&"y",value:e,onDragStart:K(t),onDragEnd:Y,onDragTransitionEnd:Q,className:"reorder-item",dragControls:V,transition:{layout:{duration:el?0:void 0}},onDrag:B,style:{position:"relative",listStyle:"none"},children:(0,ex.jsx)(iN,{readOnly:o,editor:r,card:e,index:v&&void 0!==S[t]?S[t]:n+1,isFirst:0===n,shouldHide:"hidden"===i,isDragInProgress:D,isEditorFocused:y===t&&r.isFocused,isFilmstripSelected:!!s,currentFocusedCard:y,numberOfCardsDragging:c?ef:null,onContextClick:G(t),isAnimating:eh,showTextOnly:"list"===d})},t)})})})]})),(0,ex.jsx)(iB,{onClose:t,isDark:es,isResizing:el,setIsResizing:ed})]})]}),r&&(0,ex.jsx)(iS,{ref:R,editor:r,readOnly:o,isOpen:L,onClose:Z,clearPositioning:M,rootStyles:N,isDark:es})]})},i9=function(){var e=(0,J.TL)(),n=(0,J.CG)(o1.GX),t=(0,iz.i)({base:!1,lg:!0})||!1,r=(0,w.useState)(!1),o=r[0],i=r[1],s=(0,w.useState)(!1),c=s[0],a=s[1],l=(0,w.useCallback)(function(){e((0,o1.dQ)({isOpen:!1})),e((0,o1.Mt)()),a(!0)},[e]),d=(0,w.useCallback)(function(){t||i(!0),e((0,o1.dQ)({isOpen:!0}))},[t,e]),u=!t&&o;return(0,w.useEffect)(function(){var n=!t&&!o,r=t&&!c;n?e((0,o1.dQ)({isOpen:!1})):r&&e((0,o1.dQ)({isOpen:!0}))},[e,t,o,c]),{onClose:l,onOpen:d,isOpen:n&&(t||!t&&u)}},se=(0,e$.E)(eh.z),sn=(0,w.memo)(function(){var e=(0,tl._i)().editor,n=i9(),t=n.isOpen,r=n.onClose,o=n.onOpen,i=(0,w.useRef)({navItemPreviewRefMap:{}}),s=(0,ti.Br)("edit"),c=(0,J.CG)($.hN),a=(0,eI.Yy)(),l=(0,w.useState)(!1),d=l[0],u=l[1],f=(0,w.useCallback)(function(){u(!0),setTimeout(function(){o()}),setTimeout(function(){u(!1)},750)},[o]);return(0,w.useEffect)(function(){return nJ.F7.on("keydown","FILMSTRIP",function(e){return!!(0,r5.ZP)("Mod+\\")(e)&&(t?r():f(),!0)})},[t,r,f]),(0,ex.jsx)(oJ.Provider,{value:i.current,children:(0,ex.jsx)(C.Wk,{isDark:a,children:(0,ex.jsx)(e0.M,{children:t?(0,ex.jsx)(i7,{onClose:r,editor:e,readOnly:!s||!c},"filmstrip"):(0,ex.jsx)(C.kH,{placement:"top-end",label:(0,ex.jsx)(h.cC,{id:"7ShgZt"}),isDisabled:d,shortcut:"Mod+\\",children:(0,ex.jsxs)(se,{initial:{opacity:0},animate:{opacity:1,transition:oq},exit:{opacity:0,transition:oH},zIndex:11,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",left:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:f,children:[(0,ex.jsx)(oB.TX,{children:(0,ex.jsx)(h.cC,{id:"7ShgZt"})}),d?(0,ex.jsx)(m.k,{children:(0,ex.jsx)(tF.$,{size:"sm"})}):(0,ex.jsx)(b.G,{icon:oV.Cj})]},"filmstrip-opener")})})})})});sn.displayName="Filmstrip";var st=t(3974),sr=t(1472),so=t(93319),si=t(91128),ss=t(97873),sc=t(42879),sa=function(e){var n,t=e.doc,r=(0,w.useState)(!1),o=r[0],i=r[1],s=null==t?void 0:t.id,c=null==t?void 0:null===(n=t.organization)||void 0===n?void 0:n.id,a=(0,nq.py)("manage",t),l=(0,S.bBo)({variables:{workspaceId:c},skip:!c||!a}).data,d=(0,sc.uK)({doc:t,sites:null==l?void 0:l.sites}),u=(0,sc.D5)({site:d,docId:s}),f=(0,ss.q)({doc:t,site:d,path:u}).publishDoc,p=(0,w.useCallback)((0,tu.Z)(tp().mark(function e(){return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,f();case 3:i(!1);case 4:case"end":return e.stop()}},e)})),[f]);return d?(0,ex.jsx)(eh.z,{size:"sm",variant:"solid",fontWeight:"400",leftIcon:(0,ex.jsx)(b.G,{icon:si.A$}),onClick:p,isLoading:o,children:(0,ex.jsx)(h.cC,{id:"EEYbdt"})}):null},sl=t(92743),sd=t(7099),su=t(20010),sf=t(48273),sp=t(20412),sh=t(60577),sx=t(81927),sm=t(72360),sv=t(66724),sg=t(18751),sj=t(8388),sb=t(49922),sC=t(82483),sy="gray.700",sO=t(48322),sw=["error","refetch"];function sk(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function sS(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?sk(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sk(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var sP=function(e){var n=e.error,t=e.refetch,r=(0,e_.Z)(e,sw);return(0,ex.jsx)(g.xu,sS(sS({px:6,py:4},r),{},{children:(0,ex.jsxs)(sm.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,ex.jsx)(sO.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,ex.jsx)(sv.C,{mt:4,mb:2,fontSize:"md",children:(0,ex.jsx)(h.cC,{id:"uNQm3r"})}),(0,ex.jsx)(sg.X,{maxWidth:"md",children:n.message}),(0,ex.jsx)(eh.z,{mt:4,onClick:function(){return t()},children:(0,ex.jsx)(h.cC,{id:"6gRgw8"})})]})}))},sI=t(19664),sE=t(97269),sD=t(92619),sA=t(85982),sT=function(){return x.ag._({id:"QbrUIo"})},s_=function(){return x.ag._({id:"FbBkvL"})},sR=function(e){var n=e.isAnalyticsLoading,t=e.hasError,r=e.view,o=e.setView,i=e.description;return t?(0,ex.jsx)(sD.x,{children:(0,ex.jsx)(h.cC,{id:"ZlwDi6"})}):(0,ex.jsxs)(m.k,{direction:"column",flex:1,children:[(0,ex.jsx)(sD.x,{children:n?(0,ex.jsx)(sL,{}):(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(h.cC,{id:"ZlwDi6"}),(0,ex.jsxs)(nX.g,{align:"stretch",spacing:4,children:[(0,ex.jsx)(v.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:i}),(0,ex.jsxs)(sA.E,{children:[(0,ex.jsx)(sA.U,{children:(0,ex.jsx)(eh.z,{leftIcon:(0,ex.jsx)(b.G,{icon:sE.M,"aria-label":sT()}),variant:"ghost",fontWeight:"600",bg:"deckView"===r?"trueblue.50":"transparent",color:"deckView"===r?"trueblue.500":sy,onClick:function(){return o("deckView")},children:sT()})}),(0,ex.jsx)(sA.U,{children:(0,ex.jsx)(eh.z,{leftIcon:(0,ex.jsx)(b.G,{icon:sI.AG,"aria-label":s_()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===r?"trueblue.50":"transparent",color:"cardEngagement"===r?"trueblue.500":sy,onClick:function(){return o("cardEngagement")},children:s_()})})]})]})]})}),(0,ex.jsx)(tv.o,{})]})},sL=function(){return(0,ex.jsxs)(nX.g,{align:"stretch",spacing:4,children:[(0,ex.jsx)(sx.O,{h:12,width:"30%"}),(0,ex.jsx)(sx.O,{h:4,width:"80%"})]})},sz=t(74373),sM=t(68871),sG=t(98621),sN=t.n(sG),sZ=function(e){var n=e.degree,t=e.alpha,r=e.startColor,o=void 0===r?"#ECC94B":r,i=e.endColor,s=void 0===i?"#38A169":i;if(Number.isNaN(n))return sN()("#e5e0df").toHex8String();var c=sN()(o).toHsl(),a=sN()(s).toHsl();return sN()({h:(0,oI.t7)(c.h,a.h,n),s:(0,oI.t7)(c.s,a.s,n),l:(0,oI.t7)(c.l,a.l,n),a:void 0===t?1:t}).toHex8String()},sF=function(e,n){return e.reduce(function(e,t){return e[t.cardId]=t[n],e},{})},sW=function e(n,t){var r,o=0;for(var i in n)o+=(null!==(r=t[i])&&void 0!==r?r:0)+e(n[i],t);return o},sU=function(e,n){var t,r=0;for(var o in e)r=Math.max((null!==(t=n[o])&&void 0!==t?t:0)+sW(e[o],n),r);return r},sV=t(56623),sB=t(51068),sH=t(67784),sq=t(34717),sK=t(43227),sY=t(23769),sQ=t(13813),sX=t(16844),sJ=t(62349),s$=t.n(sJ);function s0(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s1(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s0(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s0(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var s2=function(e){var n=e.cardsViewed,t=e.totalCards,r=sZ({degree:n/t}),o=t>0;return(0,ex.jsxs)(ea.U,{spacing:3,children:[(0,ex.jsxs)(m.k,{flex:1,position:"relative",children:[(0,ex.jsx)(sX.E,{h:4,flex:1,borderRadius:"sm",value:n,max:o?t:void 0,bg:"gray.200",sx:{"> div":{bg:r}}}),o&&n===t&&(0,ex.jsx)(s3,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,ex.jsx)(v.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:o?"".concat(n,"/").concat(t):(0,ex.jsx)(h.cC,{id:"8Va3Pt"})})]})},s5=function(e){var n=e.cardCount,t=(0,w.useMemo)(function(){return s$()(1,n)},[n]);return(0,ex.jsxs)(ea.U,{spacing:3,filter:"blur(3px)",children:[(0,ex.jsx)(m.k,{flex:1,position:"relative",children:(0,ex.jsx)(sX.E,{h:4,flex:1,borderRadius:"sm",value:t,max:n,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,ex.jsxs)(v.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[t,"/",n]})]})},s3=function(e){var n=(0,sY.Z)({},e);return(0,ex.jsx)(g.Cd,s1(s1({bg:"green.500",size:"18px",border:"2px solid white",color:"white"},n),{},{children:(0,ex.jsx)(b.G,{icon:sQ.LE,"aria-label":x.ag._({id:"y886Ns"}),size:"xs"})}))};function s4(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s6(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s4(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s4(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var s8=function(e){var n,t=e.cards,r=e.isColorized,o=void 0!==r&&r,i=e.scaleToMax,s=void 0!==i&&i,c=e.includeChildren,a=e.showViewersPercent,l=void 0!==a&&a,d=e.leftLabel,u=e.rightLabel,f=e.tooltipLabel,p=e.cardLookupTable,h=e.onAnalyticsPanelClose,x=(n=c?sU(t,p):Math.max.apply(Math,(0,oz.Z)(Object.values(p))),function(e){return(0,oI.t7)(0,100,e/n)}),m=(0,w.useCallback)(function(e){return x(e)},[x]);return(0,ex.jsxs)(g.xu,{mt:6,mb:4,children:[(0,ex.jsxs)(ea.U,{mb:3,children:[(0,ex.jsx)(ea.U,{children:(0,ex.jsx)(C.NZ,{children:d})}),(0,ex.jsx)(so.L,{}),(0,ex.jsx)(ea.U,{children:(0,ex.jsx)(C.kH,{placement:"top",label:f,children:(0,ex.jsx)(ea.U,{children:(0,ex.jsx)(C.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:u})})})})]}),(0,ex.jsx)(g.xu,{width:"100%",children:Object.entries(t).map(function(e){var n,t=(0,A.Z)(e,2),r=t[0],i=t[1];return(0,ex.jsx)(s7,{id:r,childCards:i,percentage:null!==(n=p[r])&&void 0!==n?n:0,calculatePercentageScale:m,isColorized:o,cardLookupTable:p,scaleToMax:s,includeChildren:c,showViewersPercent:l,onAnalyticsPanelClose:h},r)})})]})},s7=function e(n){var t=n.id,r=n.cardLookupTable,o=n.childCards,i=n.percentage,s=n.calculatePercentageScale,c=n.isColorized,a=n.scaleToMax,l=n.includeChildren,d=n.showViewersPercent,u=n.onAnalyticsPanelClose,f=(0,te.ye)("screenshotsEnabled"),p=(0,w.useState)(!1),x=p[0],j=p[1],y=(0,tT.Ux)({placement:"top",gutter:12,enterDelay:200}),O=y.referenceRef,k=y.popperRef,S=y.isHovering,P=y.getPopperProps,I=y.onMouseOver,E=y.onMouseOut,D=(0,w.useCallback)(function(){j(!x)},[x]),T=(0,w.useCallback)(function(){(0,sK.D)({cardId:t}),u()},[t,u]),_=(0,n6.c)(t),R=(0,n6.T)({cardId:t}).title,L=Object.values(o).length>0,M=0===i,G=l?i+sW(o,r):i,N=x?G:0,Z=a?s(G):Math.min(100,N),F=x?i:G,W=a?s(F):Math.min(100,F),U={startColor:"#F6AD55",endColor:"#68D391"},V=c?sZ(s6({degree:Z/100},U)):"trueblue.50",B=c?sZ(s6({degree:W/100},U)):"trueblue.100";return(0,ex.jsxs)(ed.K,{children:[(0,ex.jsxs)(m.k,{direction:"column",onMouseOver:I,onMouseOut:E,children:[(0,ex.jsxs)(m.k,{ref:O,h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,ex.jsxs)(ea.U,{pos:"absolute",zIndex:1,children:[L&&(0,ex.jsx)(z.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,ex.jsx)(b.G,{icon:sH._t}),transform:x?"rotate(90deg)":"",onClick:D,_focus:{shadow:"none"}}),!L&&(0,ex.jsx)(m.k,{w:6,justifyContent:"center",alignItems:"center",children:M?(0,ex.jsx)(C.kH,{label:(0,ex.jsx)(h.cC,{id:"s+PDNe"}),children:(0,ex.jsx)(g.xu,{color:"blackAlpha.500",children:(0,ex.jsx)(b.G,{icon:sB.Aq,size:"sm"})})}):(0,ex.jsx)(g.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,ex.jsx)(b.G,{icon:sV.nZ,size:"sm"})})}),(0,ex.jsx)(v.x,{color:M?"blackAlpha.500":void 0,noOfLines:1,children:R||(0,ex.jsx)(h.cC,{id:"wja8aL"})})]}),(0,ex.jsxs)(g.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,ex.jsx)(g.xu,{position:"absolute",h:"100%",bg:M?"blackAlpha.200":V,w:"".concat(Z,"%")}),(0,ex.jsx)(g.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:M?"blackAlpha.300":B,w:"".concat(W,"%")})]}),c&&100===i&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(so.L,{}),(0,ex.jsx)(s3,{alignSelf:"center",zIndex:1})]})]}),S&&(0,ex.jsx)(C.qh,s6({ref:k,src:f?null==_?void 0:_.previewUrl:sq.Z.src,fallbackSrc:sq.Z.src,shouldShow:S,onClick:T,tooltip:(0,ex.jsx)(h.cC,{id:"3YmIR6"}),label:d?(0,ex.jsx)(h.cC,{id:"wmqtMZ",values:{percentage:i}}):void 0},P()))]}),(0,ex.jsx)(g.xu,{pl:8,children:L&&Object.entries(o).map(function(n){var t,o=(0,A.Z)(n,2),i=o[0],f=o[1];return(0,ex.jsx)(t6.U,{in:x,children:(0,ex.jsx)(e,{id:i,childCards:f,percentage:null!==(t=r[i])&&void 0!==t?t:0,cardLookupTable:r,calculatePercentageScale:s,scaleToMax:a,isColorized:c,includeChildren:l,showViewersPercent:d,onAnalyticsPanelClose:u})},i)})})]})},s9=function(){return(0,ex.jsx)(ed.K,{spacing:2,children:(0,ex.jsx)(h.cC,{id:"QXJTby",components:{0:(0,ex.jsx)(v.x,{}),1:(0,ex.jsx)(v.x,{}),2:(0,ex.jsx)(v.x,{})}})})},ce=function(e){var n=e.timeInMS;return void 0===n?(0,ex.jsx)(ex.Fragment,{}):(0,ex.jsx)(h.cC,{id:"yXHI9B",values:{timeInSeconds:n/1e3}})},cn=function(e){var n=e.docId,t=e.viewerFilter,r=e.currentViewerFilterCount,o=e.onAnalyticsPanelClose,i=(0,J.qr)().getState(),s=(0,$.X9)(i),c=(0,S.IrH)({variables:{docId:n}}),a=c.data,l=c.error,d=c.loading,u=c.refetch,f=(0,w.useState)("viewTimePercent"),p=f[0],x=f[1],m="viewTimePercent"===p?{chartDescription:(0,ex.jsx)(h.cC,{id:"dpTE1c",values:{viewerCount:r}}),leftLabel:(0,ex.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,ex.jsx)(h.cC,{id:"8R7bfR"})}:{chartDescription:(0,ex.jsx)(h.cC,{id:"b2VMTo",values:{viewerCount:r}}),leftLabel:(0,ex.jsx)(h.cC,{id:"kTgCTO"}),rightLabel:(0,ex.jsx)(h.cC,{id:"AKDcmS"})},v=m.chartDescription,j=m.rightLabel,C=m.leftLabel,y="viewersOnly"===t?"viewers":"everyone",O=(0,te.ye)("cardViewedThreshold"),k=(0,w.useMemo)(function(){var e;return(null==a?void 0:null===(e=a.docCardsStats)||void 0===e?void 0:e[y])||[]},[null==a?void 0:a.docCardsStats,y]),P=(0,w.useMemo)(function(){return sF(k,p)},[k,p]),I=(0,w.useCallback)(function(){return x("viewTimePercent")},[]),E=(0,w.useCallback)(function(){return x("viewersPercent")},[]);return(0,ex.jsxs)(g.xu,{children:[(0,ex.jsxs)(ea.U,{my:4,children:[(0,ex.jsx)(eh.z,{leftIcon:(0,ex.jsx)(b.G,{icon:sM.SZ,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===p?"trueblue.50":"transparent",color:"viewTimePercent"===p?"trueblue.500":sy,onClick:I,children:(0,ex.jsx)(h.cC,{id:"XyvAeS"})}),(0,ex.jsx)(eh.z,{leftIcon:(0,ex.jsx)(b.G,{icon:sz.jG,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===p?"trueblue.50":"transparent",color:"viewersPercent"===p?"trueblue.500":sy,onClick:E,children:(0,ex.jsx)(h.cC,{id:"vXtpAZ"})})]}),(0,ex.jsx)(cr,{description:v}),l&&(0,ex.jsx)(sP,{error:l,refetch:u}),d&&!l&&(0,ex.jsx)(ct,{}),!d&&!l&&(0,ex.jsx)(s8,{cards:s.tree,cardLookupTable:P,scaleToMax:"viewTimePercent"===p,isColorized:"viewersPercent"===p,includeChildren:"viewTimePercent"===p,showViewersPercent:"viewersPercent"===p,rightLabel:j,leftLabel:C,tooltipLabel:"viewTimePercent"===p?(0,ex.jsx)(s9,{}):(0,ex.jsx)(ce,{timeInMS:O}),onAnalyticsPanelClose:o})]})},ct=function(e){var n=e.includeDescription;return(0,ex.jsx)(m.k,{direction:"column",mt:6,mb:4,children:(0,ex.jsxs)(nX.g,{align:"stretch",children:[void 0!==n&&n&&(0,ex.jsx)(sx.O,{h:5,mb:3,w:"70%"}),(0,oz.Z)([,,,,,]).map(function(e,n){return(0,ex.jsx)(sx.O,{h:8},n)})]})})},cr=function(e){var n=e.description;return(0,ex.jsx)(v.x,{color:sy,children:n})},co=t(89364),ci=t(73851),cs=t(36258),cc=t(19875),ca=t(77525),cl=t(74642),cd=t(35319),cu=t(27912),cf=t(12221),cp=t(13061),ch=t(65903),cx=t.n(ch),cm=t(829),cv=t.n(cm),cg=t(81188),cj=["name","profileImg","email","isCreator","isContributor","isAnonymous"];function cb(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function cC(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?cb(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cb(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var cy=function(e){var n=e.uniqueViewers,t=e.docCreatedDate,r=(0,te.ye)("cardViewedThreshold");return(0,ex.jsx)(ci.h,{children:(0,ex.jsxs)(cs.Tr,{children:[(0,ex.jsx)(cO,{label:(0,ex.jsx)(h.cC,{id:"LZHJAq",values:{uniqueViewers:n}}),tooltip:(0,ex.jsx)(h.cC,{id:"aaiIlJ",values:{docCreatedDate:t}}),width:"40%"}),(0,ex.jsx)(cO,{label:(0,ex.jsx)(h.cC,{id:"pRGfP3"}),width:"35%"}),(0,ex.jsx)(cO,{label:(0,ex.jsx)(h.cC,{id:"QfqHuz"}),tooltip:(0,ex.jsx)(ce,{timeInMS:r}),width:"25%"})]})})},cO=function(e){var n=e.label,t=e.width,r=e.tooltip,o=(0,ex.jsx)(cc.Th,{w:t,children:(0,ex.jsx)(v.x,{display:"inline",borderBottom:r?"0.125em dashed":void 0,borderBottomColor:r?"gray.400":void 0,children:n})});return r?(0,ex.jsx)(C.kH,{placement:"top",label:r,children:o}):o},cw=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],ck=function(e){var n=e.viewers,t=e.currentViewerFilterCount,r=e.docCreatedDate,o=e.creatorId,i=e.contributors,s=e.cardCount,c=e.handleTableRowClick,a=e.hasIndividualAnalytics,l=(0,nq.SE)().user,d=a?n:cv()(n,function(e){var n;return[(null===(n=e.user)||void 0===n?void 0:n.id)===(null==l?void 0:l.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,ex.jsx)(ca.x,{children:(0,ex.jsxs)(cl.i,{colorScheme:"blackAlpha",children:[(0,ex.jsx)(cy,{uniqueViewers:t,docCreatedDate:r}),(0,ex.jsx)(cd.p,{children:d.map(function(e,t){var r=e.user,d=e.lastOpened,u=e.visitorId,f=(null==r?void 0:r.id)===o,p=i.some(function(e){return e.user.id===(null==r?void 0:r.id)}),h=r?r.displayName+(r.id===(null==l?void 0:l.id)?" "+x.ag._({id:"dDUgzP"}):"")||"":x.ag._({id:"VmjbJY"}),m=d?cx()((0,cg.P9)(d)):x.ag._({id:"/JO3xr"}),g={name:h,id:(null==r?void 0:r.id)||u||"",email:null==r?void 0:r.email,isCreator:f,isContributor:p,profileImg:null==r?void 0:r.profileImageUrl,lastOpened:m},j=t===n.length-1,b=(null==r?void 0:r.id)===(null==l?void 0:l.id),C=!a&&!b;return(0,ex.jsxs)(cs.Tr,{cursor:"pointer",onClick:function(){return c(g)},_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,ex.jsx)(cu.Td,{borderBottom:j?"0 none":void 0,children:(0,ex.jsx)(cS,{name:h,email:null==r?void 0:r.email,profileImg:null==r?void 0:r.profileImageUrl,isContributor:p,isCreator:f,isAnonymous:!r})}),(0,ex.jsx)(cu.Td,{borderBottom:j?"0 none":void 0,children:C?(0,ex.jsx)(v.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:cw[t%cw.length]}):(0,ex.jsx)(v.x,{fontSize:"sm",children:m})}),(0,ex.jsx)(cu.Td,{borderBottom:j?"0 none":void 0,children:C?(0,ex.jsx)(s5,{cardCount:s}):(0,ex.jsx)(s2,{cardsViewed:e.cardsViewed||0,totalCards:s||0})})]},(null==r?void 0:r.id)||u)})})]})})},cS=function(e){var n=e.name,t=e.profileImg,r=e.email,o=e.isCreator,i=void 0!==o&&o,s=e.isContributor,c=e.isAnonymous,a=(0,e_.Z)(e,cj);return(0,ex.jsxs)(ea.U,cC(cC({},a),{},{children:[(0,ex.jsx)(cf.q,{size:"sm",name:n,src:t}),(0,ex.jsxs)(ed.K,{spacing:.5,children:[(0,ex.jsxs)(v.x,{children:[n,void 0!==c&&c&&(0,ex.jsx)(C.Yq,{label:(0,ex.jsx)(h.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}}),ml:2})]}),(0,ex.jsxs)(ea.U,{mt:1,children:[(0,ex.jsx)(v.x,{fontSize:"sm",color:"gray.500",children:void 0===r?"":r}),(i||void 0!==s&&s)&&(0,ex.jsx)(cp.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:i?(0,ex.jsx)(h.cC,{id:"UE2beD"}):(0,ex.jsx)(h.cC,{id:"3L51iw"})})]})]})]}))},cP=function(e){var n,t,r,o,i=e.user,s=e.onBackClick,c=e.docId,a=e.onAnalyticsPanelClose,l=(0,J.qr)().getState(),d=(0,$.X9)(l),u=(0,S.IrH)({variables:{docId:c,userId:i.id},skip:!c||!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),f=u.data,p=u.error,x=u.loading,m=u.refetch,v=null!==(n=null==f?void 0:null===(t=f.docCardsStats)||void 0===t?void 0:null===(r=t.everyone)||void 0===r?void 0:r.length)&&void 0!==n?n:0,j=null==f?void 0:null===(o=f.docCardsStats)||void 0===o?void 0:o.cardCount,b=(0,w.useMemo)(function(){var e;return(null==f?void 0:null===(e=f.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==f?void 0:f.docCardsStats]),C=(0,w.useMemo)(function(){return sF(b,"viewTimePercent")},[b]);return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(sD.x,{children:(0,ex.jsx)(eh.z,{"aria-label":"Back",leftIcon:(0,ex.jsx)(co.R,{}),variant:"ghost",onClick:s,children:(0,ex.jsx)(h.cC,{id:"iH8pgl"})})}),(0,ex.jsx)(tv.o,{}),(0,ex.jsx)(ep.i,{}),(0,ex.jsx)(tg.f,{children:(0,ex.jsxs)(g.xu,{children:[(0,ex.jsx)(cI,{user:i,showLastOpened:!0}),j&&(0,ex.jsx)(cr,{description:(0,ex.jsx)(h.cC,{id:"YJOrjl",values:{cardsViewed:v,totalCards:j}})}),x&&!p&&(0,ex.jsx)(ct,{includeDescription:!0}),p&&(0,ex.jsx)(sP,{error:p,refetch:m}),!p&&!x&&(0,ex.jsx)(s8,{cards:d.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,ex.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,ex.jsx)(h.cC,{id:"8R7bfR"}),cardLookupTable:C,tooltipLabel:(0,ex.jsx)(s9,{}),onAnalyticsPanelClose:a})]})})]})},cI=function(e){var n=e.user,t=e.showLastOpened;return(0,ex.jsxs)(ea.U,{align:"center",my:6,children:[(0,ex.jsx)(cS,{name:n.name,profileImg:n.profileImg,email:n.email,isCreator:n.isCreator,isContributor:n.isContributor,width:t?"50%":void 0}),t&&(0,ex.jsxs)(nX.g,{align:"flex-start",spacing:0,children:[(0,ex.jsx)(C.NZ,{children:(0,ex.jsx)(h.cC,{id:"pRGfP3"})}),(0,ex.jsx)(v.x,{children:n.lastOpened})]})]})},cE=t(87567),cD=t(47299),cA=t(81295),cT=t(26673),c_=function(e,n,t){return"everyone"===e?x.ag._({id:"1IE7uf",values:{everyone:n}}):"viewersOnly"===e?x.ag._({id:"r/tA4Y",values:{viewersOnly:t}}):x.ag._({id:"V9JX7d"})},cR={everyone:cA.Nd,viewersOnly:cD.Md,accessLinkOnly:cE.uW},cL=function(e){var n=e.selected,t=e.handleMenuItemChange,r=e.everyoneCount,o=e.viewersOnlyCount;return(0,ex.jsxs)(oh.v,{children:[(0,ex.jsx)(ox.j,{leftIcon:(0,ex.jsx)(b.G,{size:"xs",icon:cR[n]}),as:eh.z,size:"md",rightIcon:(0,ex.jsx)(b.G,{size:"xs",icon:cT.pt}),children:c_(n,r,o)}),(0,ex.jsx)(om.q,{zIndex:2,maxW:"380px",children:(0,ex.jsxs)(oj._,{defaultValue:n,value:n,onChange:function(e){Array.isArray(e)||t(e)},children:[(0,ex.jsx)(ob.i,{value:"everyone",isDisabled:0===r,children:(0,ex.jsxs)(m.k,{align:"center",children:[(0,ex.jsx)(b.G,{icon:cR.everyone,size:"xs"}),(0,ex.jsxs)(g.xu,{ml:3,children:[(0,ex.jsx)(v.x,{children:c_("everyone",r,o)}),(0,ex.jsx)(v.x,{fontSize:"sm",color:"gray.500",children:(0,ex.jsx)(h.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}})})]})]})}),(0,ex.jsx)(ob.i,{value:"viewersOnly",isDisabled:0===o,children:(0,ex.jsxs)(m.k,{align:"center",children:[(0,ex.jsx)(b.G,{icon:cR.viewersOnly,size:"xs"}),(0,ex.jsxs)(g.xu,{ml:3,children:[(0,ex.jsx)(v.x,{children:c_("viewersOnly",r,o)}),(0,ex.jsx)(v.x,{fontSize:"sm",color:"gray.500",children:(0,ex.jsx)(h.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}})})]})]})}),!1]})})]})},cz=t(46102),cM=t(6802),cG=t(70258),cN=t(80237),cZ=t(59309),cF=t(2574),cW=t(92638),cU=t(33951),cV=t(10897),cB=t(14582),cH=t(75715),cq=t(96492),cK=t(14141),cY=t(40837),cQ=["chartTitle","TooltipInner","showZero","shouldRoundYValues","showMaxAndMiddle","data","barColor","customTooltipStyles","onClick"];function cX(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function cJ(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?cX(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cX(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var c$={top:55,right:20,bottom:40,left:24},c0=function(e){return Math.round(e).toString()},c1={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1.5)",paddingLeft:"var(--chakra-space-1.5)",paddingTop:"var(--chakra-space-0.5)",paddingBottom:"var(--chakra-space-0.5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},c2="var(--chakra-colors-gray-500)",c5="var(--chakra-colors-gray-200)",c3=function(e){var n,t=e.width,r=e.height,o=e.margin,i=void 0===o?c$:o,s=e.chartData,c=e.TooltipInner,a=e.showZero,l=e.shouldRoundYValues,d=e.showMaxAndMiddle,u=e.barColor,f=e.customTooltipStyles,p=e.onClick,h=void 0===p?function(){}:p,x=(0,cq.Z)(),m=x.showTooltip,v=x.tooltipOpen,j=x.tooltipLeft,b=x.tooltipTop,C=x.tooltipData,y=x.hideTooltip,O=(0,w.useRef)(),k=(0,w.useRef)();(0,w.useEffect)(function(){return function(){O.current&&clearTimeout(O.current),k.current&&clearTimeout(k.current)}},[]);var S=s.map(function(e){return e.y}),P=Math.max.apply(Math,(0,oz.Z)(S)),I=[P,Math.round(P/2)],E=(n=d?I:S,Math.max.apply(Math,(0,oz.Z)(n.map(function(e){return(0,cH.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0})))),D=i.left+E,A=t-D-i.right,T=r-i.top-i.bottom,_=cJ(cJ(cJ({},cK.j),c1),f),R=(0,w.useMemo)(function(){return(0,cW.Z)({range:[0,A],domain:s.map(function(e){return e.x}),padding:.3})},[A,s]),L=(0,w.useMemo)(function(){return(0,cU.Z)({range:[T,0],round:!0,domain:[0,P]})},[T,P]),z=a?L(Math.min.apply(Math,(0,oz.Z)(S.filter(function(e){return 0!==e})))):T,M=a&&T-z>6;return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(g.xu,{children:(0,ex.jsxs)("svg",{width:t,height:r,children:[(0,ex.jsx)("rect",{x:0,y:0,rx:4,width:t,height:r,fill:"var(--chakra-colors-gray-100)"}),(0,ex.jsx)(cZ.Z,{top:i.top,left:D,children:s.map(function(e){var n,t,r=e.y,o=e.x,i="bar-".concat(o,"-").concat(r),s=R.bandwidth(),c=T-(null!==(n=L(r))&&void 0!==n?n:0),l=M&&0===c?6:c,d=null!==(t=R(o))&&void 0!==t?t:0,f=T-l;return(0,ex.jsxs)(cZ.Z,{children:[(0,ex.jsx)(cV.Z,{x:d,y:f,width:s,height:l,radius:5,topLeft:!0,topRight:!0,fill:a&&0===r?c5:u,onMouseLeave:function(){O.current=window.setTimeout(function(){y()},300)},onMouseMove:function(n){O.current&&clearTimeout(O.current);var t=(0,cN.Z)(n);m({tooltipData:e,tooltipTop:null==t?void 0:t.y,tooltipLeft:null==t?void 0:t.x})},onClick:function(n){return h(n,e)}}),(0,ex.jsx)(cB.Z,{x:d,y:0,width:s,height:Math.max(0,T-l),opacity:0,onMouseLeave:function(){k.current=window.setTimeout(function(){y()},300)},onMouseMove:function(n){k.current&&clearTimeout(k.current);var t=(0,cN.Z)(n);m({tooltipData:e,tooltipTop:null==t?void 0:t.y,tooltipLeft:null==t?void 0:t.x})}})]},i)})}),(0,ex.jsx)(cM.Z,{top:i.top,left:D,scale:L,stroke:c5,strokeWidth:2,tickValues:d?I:void 0,numTicks:d?void 0:2,hideZero:!0,tickFormat:l?c0:void 0,tickLength:6,tickStroke:c5,tickLabelProps:function(){return{fill:c2,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4}}}),(0,ex.jsx)(cG.Z,{top:T+i.top,left:D,scale:R,stroke:c5,numTicks:4,tickStroke:c5,tickLabelProps:function(){return{fill:c2,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}},strokeWidth:2,tickLength:6})]})}),v&&C&&(0,ex.jsx)(cY.Z,{top:b,left:j,style:_,children:(0,ex.jsx)(c,{x:C.x,y:C.y})})]})},c4=function(e){var n=e.chartTitle,t=e.TooltipInner,r=e.showZero,o=void 0===r||r,i=e.shouldRoundYValues,s=void 0===i||i,c=e.showMaxAndMiddle,a=void 0===c||c,l=e.data,d=e.barColor,u=void 0===d?"var(--chakra-colors-trueblue-200)":d,f=e.customTooltipStyles,p=e.onClick,h=void 0===p?function(){}:p,x=(0,e_.Z)(e,cQ);return(0,ex.jsxs)(g.xu,cJ(cJ({position:"relative",height:"300px"},x),{},{children:[(0,ex.jsx)(v.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:n}),(0,ex.jsx)(cF.Z,{children:function(e){var n=e.width,r=e.height;return n<10?null:(0,ex.jsx)(c3,{width:n,height:r,showZero:o,chartData:l,barColor:u,customTooltipStyles:f,onClick:h,TooltipInner:t,shouldRoundYValues:s,showMaxAndMiddle:a})}})]}))},c6=function(e,n){var t="LLL d",r=new Date;r.setDate(r.getDate()-n+1);for(var o=[],i=0;i<n;i++)!function(n){var i=new Date(r);i.setDate(i.getDate()+n);var s=(0,cz.Z)(i,{representation:"date"}),c=e.find(function(e){return e.date===s});c?o.push({x:(0,sj.p6)(c.date,t),y:c.uniqueVisitors?c.uniqueVisitors:0}):o.push({x:(0,sj.p6)(s,t),y:0})}(i);return o},c8=function(e){var n=c6(e.viewData,e.dayCount);return(0,ex.jsx)(c4,{data:n,my:3,chartTitle:(0,ex.jsx)(h.cC,{id:"mSEibf"}),TooltipInner:c7})},c7=function(e){var n=e.x,t=e.y;return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(v.x,{children:n}),(0,ex.jsx)(v.x,{children:(0,ex.jsx)(h.cC,{id:"6MKtHx",values:{y:t}})})]})},c9=function(e,n,t){if(!t)return 0;var r,o,i,s=null!==(r=t.uniqueViewers)&&void 0!==r?r:0,c=null!==(o=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==o?o:0;return"everyone"===n?s:"viewersOnly"===n?Math.max(0,s-c):0},ae=function(e){var n,t,r,o=e.doc,i=e.handleSharePanelOpen,s=e.onAnalyticsPanelClose,c=e.canShare,a=(0,S.xls)({variables:{memoId:o.id},skip:!o.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),l=a.loading,d=a.data,u=a.error,f=a.refetch,p=(0,nq.SE)().user,v=(0,w.useState)("deckView"),g=v[0],j=v[1],b=(0,w.useState)(null),C=b[0],y=b[1],O=(0,w.useState)("everyone"),k=O[0],P=O[1],I=(0,sj.p6)(o.createdTime,"PPP"),E=o.title||(0,ex.jsx)(h.cC,{id:"wja8aL"}),D=(null==d?void 0:d.memoStats.viewers)||[],A=(null==d?void 0:null===(t=d.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,T=(n=null==d?void 0:d.memoStats)&&n.dailyViews?"everyone"===k?n.dailyViews.everyone?n.dailyViews.everyone:[]:"viewersOnly"===k&&n.dailyViews.viewers?n.dailyViews.viewers:[]:[],_=(0,ey.Y)("individual_analytics",o.organization),R=(0,sC.zc)().openUpsellModal,L=T.every(function(e){return 0===e.uniqueVisitors}),z=D.filter(function(e){var n;return"everyone"===k||!(null!==(n=o.editors)&&void 0!==n&&n.some(function(n){var t,r;return(null===(t=e.user)||void 0===t?void 0:t.id)===(null===(r=n.user)||void 0===r?void 0:r.id)}))}),M=c9(o,k,null==d?void 0:d.memoStats),G=(0,w.useCallback)(function(e){P(e)},[]),N=(0,w.useCallback)(function(e){j(e)},[]),Z=(0,w.useCallback)(function(e){if(!_&&e.id!==(null==p?void 0:p.id)){R({segmentEvent:nT.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}y(e)},[R,_,p]),F=(0,w.useCallback)(function(){y(null)},[]),W=void 0!==u;return(0,ex.jsxs)(ex.Fragment,{children:[C&&(0,ex.jsx)(cP,{user:C,onBackClick:F,docId:o.id,onAnalyticsPanelClose:s}),!C&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(sR,{hasError:W,isAnalyticsLoading:l,setView:N,view:g,description:(0,ex.jsx)(h.cC,{id:"uEtUah",values:{docTitle:E,docCreatedDate:I}})}),W&&(0,ex.jsx)(sP,{error:u,refetch:f}),!W&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(ep.i,{}),(0,ex.jsxs)(tg.f,{children:[l&&(0,ex.jsx)(an,{}),!l&&D.length<=1&&c&&(0,ex.jsx)(at,{handleSharePanelOpen:i}),!l&&(0,ex.jsxs)(ed.K,{direction:"column",mt:4,spacing:4,children:[(0,ex.jsxs)(m.k,{direction:"row",justify:"space-between",align:"center",children:[(0,ex.jsx)(eu.X,{as:"h2",size:"md",children:"cardEngagement"===g?s_():sT()}),(0,ex.jsx)(cL,{selected:k,handleMenuItemChange:G,everyoneCount:c9(o,"everyone",null==d?void 0:d.memoStats),viewersOnlyCount:c9(o,"viewersOnly",null==d?void 0:d.memoStats)})]}),"deckView"===g&&L&&(0,ex.jsx)(ar,{handleSharePanelOpen:i,dayCount:A}),"deckView"===g&&!L&&(0,ex.jsx)(c8,{viewData:T,dayCount:A}),"cardEngagement"===g&&(0,ex.jsx)(cn,{docId:o.id,viewerFilter:k,currentViewerFilterCount:M,onAnalyticsPanelClose:s}),(0,ex.jsx)(ck,{creatorId:(null===(r=o.createdBy)||void 0===r?void 0:r.id)||"",viewers:z,currentViewerFilterCount:M,docCreatedDate:I,contributors:o.editors||[],cardCount:(null==d?void 0:d.memoStats.cardCount)||0,handleTableRowClick:Z,hasIndividualAnalytics:_}),z.length>3&&!_&&(0,ex.jsx)(eh.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:function(){return R({segmentEvent:nT.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS})},children:(0,ex.jsx)(h.cC,{id:"BKBX4n",values:{0:z.length-3}})}),!_&&(0,ex.jsx)(sb.m,{segmentEvent:nT.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:x.ag._({id:"GYgPBy"})})]})]})]})]})]})},an=function(){return(0,ex.jsxs)(m.k,{direction:"column",py:2,children:[(0,ex.jsx)(sx.O,{h:10,width:"40%",mb:4}),(0,ex.jsx)(sx.O,{h:40,mb:4}),(0,ex.jsx)(nX.g,{align:"stretch",children:(0,oz.Z)([,,,]).map(function(e,n){return(0,ex.jsx)(sx.O,{h:12},n)})})]})},at=function(e){var n=e.handleSharePanelOpen;return(0,ex.jsx)(m.k,{p:3,px:4,mt:2,bg:"gray.100",color:sy,borderRadius:"base",children:(0,ex.jsxs)(m.k,{align:"baseline",fontSize:"sm",children:[(0,ex.jsx)(g.xu,{pr:2,children:(0,ex.jsx)(b.G,{icon:sh.IL,"aria-label":"user-icon",size:"sm"})}),(0,ex.jsx)(v.x,{children:(0,ex.jsx)(h.cC,{id:"FNMh4I",components:{0:(0,ex.jsx)(v.x,{as:"button",onClick:n,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},ar=function(e){var n=e.handleSharePanelOpen,t=e.dayCount;return(0,ex.jsxs)(sm.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,ex.jsx)(g.Cd,{size:"30px",bg:"gray.500",children:(0,ex.jsx)(b.G,{icon:sp.Im,color:"white"})}),(0,ex.jsx)(sv.C,{mt:4,mb:2,fontSize:"md",children:(0,ex.jsx)(h.cC,{id:"2OzAI5"})}),t>0&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(sg.X,{maxWidth:"sm",children:(0,ex.jsx)(h.cC,{id:"qQLmo7",values:{dayCount:t}})}),(0,ex.jsx)(eh.z,{mt:4,onClick:n,children:(0,ex.jsx)(h.cC,{id:"IXzWG0"})})]})]})},ao=function(e){var n,t,r,o,i,s,c=e.doc,a=e.onAnalyticsPanelClose,l=(0,J.qr)().getState(),d=(0,$.X9)(l),u=(0,nq.SE)().user,f=(0,S.IrH)({variables:{docId:c.id,userId:null==u?void 0:u.id},skip:!(null!=u&&u.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),p=f.data,x=f.error,m=f.loading,j=f.refetch,b=null!==(n=null==p?void 0:null===(t=p.docCardsStats)||void 0===t?void 0:null===(r=t.everyone)||void 0===r?void 0:r.length)&&void 0!==n?n:0,C=null==p?void 0:null===(o=p.docCardsStats)||void 0===o?void 0:o.cardCount,y=(0,w.useMemo)(function(){var e;return(null==p?void 0:null===(e=p.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==p?void 0:p.docCardsStats]),O=(0,w.useMemo)(function(){return sF(y,"viewTimePercent")},[y]);if(!u)return null;var k=u.id===(null===(i=c.createdBy)||void 0===i?void 0:i.id),P=null===(s=c.editors)||void 0===s?void 0:s.some(function(e){return e.user.id===u.id}),I={name:u.displayName,id:u.id,profileImg:u.profileImageUrl,email:u.email,isContributor:P,isCreator:k};return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsxs)(sD.x,{children:[(0,ex.jsx)(h.cC,{id:"ZlwDi6"}),(0,ex.jsx)(v.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:c.title||(0,ex.jsx)(h.cC,{id:"wja8aL"})})]}),(0,ex.jsx)(tv.o,{}),(0,ex.jsx)(ep.i,{}),(0,ex.jsx)(tg.f,{children:(0,ex.jsxs)(g.xu,{children:[(0,ex.jsx)(cI,{user:I}),void 0!==C&&(0,ex.jsx)(cr,{description:(0,ex.jsx)(h.cC,{id:"YJOrjl",values:{cardsViewed:b,totalCards:C}})}),m&&!x&&(0,ex.jsx)(ct,{includeDescription:!0}),x&&(0,ex.jsx)(sP,{error:x,refetch:j,px:0}),!x&&!m&&(0,ex.jsx)(s8,{cards:d.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,ex.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,ex.jsx)(h.cC,{id:"8R7bfR"}),cardLookupTable:O,tooltipLabel:(0,ex.jsx)(s9,{}),onAnalyticsPanelClose:a}),(0,ex.jsxs)(sm.b,{children:[(0,ex.jsx)(sO.z,{}),(0,ex.jsx)(h.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:eC.N6,GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}})]})]})})]})},ai=function(e){var n=e.doc,t=e.mode,r=e.isAnalyticsPanelOpen,o=e.onAnalyticsPanelClose,i=e.onSharePanelOpen,s=(0,iz.i)({base:"sm",md:"2xl",lg:"4xl"}),c=!!i&&"full"==t,a=(0,w.useCallback)(function(){i&&(i(),o())},[i,o]);return(0,ex.jsx)(C.Wk,{isDark:!1,children:(0,ex.jsxs)(su.u_,{onClose:o,isOpen:r,size:s,blockScrollOnMount:!1,children:[(0,ex.jsx)(tx.Z,{}),(0,ex.jsxs)(sf.h,{mx:2,minW:0,children:["full"===t?(0,ex.jsx)(ae,{doc:n,handleSharePanelOpen:a,onAnalyticsPanelClose:o,canShare:c}):(0,ex.jsx)(ao,{doc:n,onAnalyticsPanelClose:o}),(0,ex.jsx)(ep.i,{my:4}),(0,ex.jsx)(tj.m,{children:(0,ex.jsxs)(m.k,{justifyContent:c?"space-between":"flex-end",flex:1,children:[c&&(0,ex.jsx)(eh.z,{leftIcon:(0,ex.jsx)(b.G,{icon:sd.zB}),variant:"ghost",onClick:a,children:(0,ex.jsx)(h.cC,{id:"IXzWG0"})}),(0,ex.jsx)(eh.z,{variant:"solid",onClick:o,children:(0,ex.jsx)(h.cC,{id:"DPfwMq"})})]})})]})]})})},as=t(6985),ac=t(25298),aa=t(27777),al=t(67453),ad=function(e){var n=e.isOpen,t=e.onClose,r=e.onSaveSuccess,o=e.docId,i=(0,eU.p)(),s=(0,w.useRef)(null),c=(0,w.useState)(""),a=c[0],l=c[1],d=(0,S.D1_)(),u=(0,A.Z)(d,2),f=u[0],p=u[1].loading,x=function(){f({variables:{id:o,title:a}}).then(function(){l(function(){return""}),r()}).catch(function(e){console.error(e),i({title:(0,ex.jsx)(ex.Fragment,{children:(0,ex.jsx)(h.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,ex.jsxs)(su.u_,{returnFocusOnClose:!1,onClose:t,closeOnOverlayClick:!0,isOpen:n,initialFocusRef:s,children:[(0,ex.jsx)(tx.Z,{}),(0,ex.jsxs)(sf.h,{children:[(0,ex.jsx)(sD.x,{children:(0,ex.jsx)(h.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}})}),(0,ex.jsx)(tv.o,{}),(0,ex.jsx)(tg.f,{children:(0,ex.jsx)(aa.I,{ref:s,value:a,required:!0,placeholder:(0,al.$)(),onChange:function(e){return l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&x()}})}),(0,ex.jsx)(tj.m,{children:(0,ex.jsx)(ed.K,{spacing:2,direction:"row",align:"center",children:(0,ex.jsx)(eh.z,{isLoading:p,isDisabled:p||!a||!a.length,onClick:function(){x()},children:(0,ex.jsx)(h.cC,{id:"tfDRzk"})})})})]})]})},au=(0,w.memo)(function(e){var n=e.doc,t=(0,w.useCallback)(function(){return as.T.emit("openSharePanel",{view:"invite"})},[]),r=(0,tQ.M)({id:"analyticsModalDisclosure"}),o=r.isOpen,i=r.onClose,s=r.onOpen,c=(0,tQ.M)({id:"titleModalDisclosure"}),a=c.isOpen,l=c.onOpen,d=c.onClose,u=(0,nT.z$)(),f=(0,nq.SE)().user,p=(0,nq.py)("manage",n)&&!!f,v=(0,w.useCallback)(function(){n&&(n.title&&""!==n.title?t():l())},[n,t,l]),g=(0,w.useCallback)(function(e){return function(){null==u||u.track(nT.AA.DOC_ANALYTICS_VIEWED,{docId:null==n?void 0:n.id,source:e,type:"full"}),s()}},[u,null==n?void 0:n.id,s]);return p&&n?(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(m.k,{children:(0,ex.jsx)(C.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,ex.jsx)(h.cC,{id:"YaUqUV"}),children:(0,ex.jsx)(ac.r,{"data-guider-highlight":"view-analytics-button","aria-label":x.ag._({id:"YaUqUV"}),onMouseDown:nl.br,onClick:g("toolbar_analytics_block"),icon:(0,ex.jsx)(b.G,{icon:sl.M})})})}),a&&(0,ex.jsx)(ad,{onClose:d,isOpen:a,onSaveSuccess:function(){d(),t()},docId:null==n?void 0:n.id}),o&&(0,ex.jsx)(ai,{doc:n,onSharePanelOpen:v,onAnalyticsPanelClose:i,isAnalyticsPanelOpen:o,mode:"full"})]}):null}),af=t(24657),ap=t(94370),ah=t(67755),ax=t(67925),am=t(73716),av=t(10920),ag=t(15756),aj=t(81410),ab=t(5632),aC=t(57973);function ay(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function aO(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ay(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ay(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var aw=(0,e$.E)(m.k),ak=function(e){var n=e.doc;return(0,ex.jsx)(aw,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,ex.jsx)(e0.M,{initial:!1,children:(0,ex.jsx)(aD,{doc:n})})})},aS=(0,w.memo)(function(e){var n=e.doc,t=(0,tl._i)().editor,r=(0,S.$gs)().isConnected,o=(0,eU.p)(),i=(0,w.useRef)(null),s=(0,w.useRef)(null),c=(0,S.D1_)(),a=(0,A.Z)(c,2),l=a[0],d=a[1].loading,u=(0,w.useState)(null),f=u[0],p=u[1],m=(0,w.useState)(!1),v=m[0],j=m[1],b=(0,w.useState)(!1),y=b[0],O=b[1],k=(0,nq.py)("edit",n),P=(0,w.useCallback)(function(){if(!t)return"";var e=(0,nG.N2)(t.state.doc,nZ.KH),n=(0,A.Z)(e,1)[0];return n&&(0,eK.getCardTitle)(n.node.toJSON())||""},[t]);(0,w.useEffect)(function(){!n||v||d||(p(n.title||""),O(!!n.titleEdited))},[n,v,d]);var I=function(){i.current.style.width=s.current.offsetWidth+0+"px"},E=(0,eH.ff)("gray.800","gray.200");return(0,ex.jsx)(C.kH,{label:k?r?(0,ex.jsx)(h.cC,{id:"2wxgft"}):(0,ex.jsx)(h.cC,{id:"Cb+Bgk"}):null,"aria-label":x.ag._({id:"2wxgft"}),children:(0,ex.jsxs)(ah.C,{value:f||"",placeholder:f||P(),isDisabled:d||!k||!r,isPreviewFocusable:k,maxW:300,width:"100%",fontWeight:"normal",onCancel:function(){I(),j(!1)},onFocus:function(){I(),n&&!d&&j(!0)},onChange:function(e){I(),v&&(p(e),O(!!e))},onSubmit:function(){if(n&&!d){j(!1);var e=f||P();l({variables:{id:n.id,title:e,titleEdited:y}}).catch(function(e){console.error(e),o({title:(0,ex.jsx)(h.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})}},children:[(0,ex.jsx)(ax.w,{px:1,py:.5,display:v?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:y?E:"inherit"}),(0,ex.jsx)(am.V,{ref:i,px:1,py:.5,color:y?E:"inherit",maxW:300,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,ex.jsx)(g.xu,{ref:s,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:rh().sanitize((f||"").replace(/\s/g,"&nbsp;"))}})]})})});aS.displayName="EditableDocTitle";var aP=function(e){var n=e.cardId,t=e.isEllipsis,r=e.value,o=e.onClick,i=(0,n6.c)(n);if(t)return(0,ex.jsx)(b.G,{icon:ap.cN});if(!n&&!r)return null;var s=r||(null==i?void 0:i.title)||"";return(0,ex.jsx)(v.x,{noOfLines:1,onClick:o,maxW:180,fontWeight:"normal",children:s})},aI=function(e){var n=e.isPresentModeFlat;return function(e){var t=(0,$.gh)(e),r=(0,$.i2)(e)||"",o=(0,$.X9)(e).parents[r]||[];if("DOC_VIEW"===t||n)return[{isHome:!0},{isDocTitle:!0}];var i=o[0],s=o[o.length-1];return[{isHome:!0},o.length>1?{cardId:i}:null,o.length>2?{isEllipsis:!0}:null,o.length>0?{cardId:s}:null,{cardId:r}]}},aE=function(){var e=(0,te.ye)("presentModeFlat");return(0,J.CG)(aI({isPresentModeFlat:e}),function(e,n){return JSON.stringify(e)===JSON.stringify(n)})},aD=(0,w.memo)(function(e){var n=e.doc,t=aE(),r=(0,aC.X)(en.H.lastHomeUrl,"/"),o=(0,A.Z)(r,1)[0],i=(0,te.ye)("offline"),s=(0,nq.SE)().user,c=(0,S.$gs)().isConnected,a=(0,tl._i)().confirmNavigation,l=(0,ab.useRouter)().push,d=(0,iz.i)({base:"xs",sm:"sm"}),u=(0,eH.ff)("gray.500","gray.400"),f=(0,eH.ff)("gray.800","gray.100");return(0,ex.jsxs)(ea.U,{spacing:0,as:eh.z,textAlign:"left",px:0,_hover:{color:f},h:8,children:[(0,ex.jsx)(av.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:d,spacing:["4px","8px"],variant:"plainButton",separator:(0,ex.jsx)(g.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,ex.jsx)(b.G,{icon:sH._t})}),children:t.map(function(e,r){if(!e)return null;var i=r===t.length-1,c=e.cardId,d=e.isEllipsis,f=e.isDocTitle,p=e.isHome,h=e.value,x=p?"home":d?"ellipsis":c||h||r;if(p&&!s)return null;var m={as:t9(),href:o||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,ex.jsx)(ag.g,{children:(0,ex.jsx)(aw,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,ex.jsx)(aj.A,aO(aO({isCurrentPage:i,pointerEvents:i&&!f?"none":"inherit",color:i?u:"inherit"},p?aO({},m):{}),{},{children:f?(0,ex.jsx)(aS,{doc:n}):p?(0,ex.jsx)(eV.r,{href:m.href,onClick:function(e){e.preventDefault(),a().then(function(){l(m.href)})},mr:1,children:(0,ex.jsx)(b.G,{size:"1x",icon:af.J9})}):(0,ex.jsx)(aP,{cardId:c,value:h,isEllipsis:d,onClick:function(){c&&(0,sK.D)({cardId:c,method:"push"})}})}))},x)},x)})}),!c&&(0,ex.jsx)(C.kH,{label:(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(v.x,{mr:2,children:(0,ex.jsx)(h.cC,{id:"ysdDIA"})}),i&&(0,ex.jsx)(v.x,{color:"gray.300",children:(0,ex.jsx)(h.cC,{id:"+QNhGE"})})]}),"aria-label":x.ag._({id:"IcHxhR"}),children:(0,ex.jsx)(m.k,{color:"gray.300",alignItems:"center",pr:3,children:(0,ex.jsx)(b.G,{icon:p.bK})})})]})});aD.displayName="BreadcrumbGroup";var aA=t(76547),aT=t(82642),a_=t(30807),aR=t(80040),aL=t(28957),az=function(){var e=(0,nq.SE)(),n=e.user,t=e.anonymousUser,r=(0,k.I0)(),o=(0,eU.p)(),i=(0,tl._i)().editor,s=(0,k.v9)((0,$._h)((null==n?void 0:n.id)||t.id)),c=s.collaborators,a=s.followers;(0,rK.rU)({editor:i,collaborators:c,user:n});var l=(0,k.v9)($.Ok),u=(0,k.v9)($.e0),f=(0,k.v9)($.yn),p=(0,k.v9)($.gs),g=(0,k.v9)($.JA);(0,w.useEffect)(function(){l.forEach(function(e){o({duration:2e3,position:"bottom",render:function(){return(0,ex.jsxs)(m.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,ex.jsx)(cf.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:sN()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,ex.jsx)(v.x,{ml:2,children:(0,ex.jsx)(h.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[l,o]),(0,w.useEffect)(function(){var e=!f&&p&&!g;if(i&&e){o.closeAll();var n=o({id:"detached-toast",render:function(){return(0,ex.jsxs)(m.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,ex.jsx)(v.x,{size:"sm",mr:6,children:(0,ex.jsx)(h.cC,{id:"PjodLp"})}),(0,ex.jsxs)(tb.h,{size:"sm",alignItems:"center",children:[(0,ex.jsx)(eh.z,{onClick:function(){r((0,$.Qx)({attached:!0}))},variant:"solid",children:(0,ex.jsx)(h.cC,{id:"f/C2ic"})}),(0,ex.jsx)(C.kH,{label:(0,ex.jsx)(h.cC,{id:"5JWVnj"}),children:(0,ex.jsx)(z.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":x.ag._({id:"5JWVnj"}),icon:(0,ex.jsx)(aT.T,{}),onClick:function(){r((0,$.Qx)({attached:!1,following:null}))}})})]})]})},position:"bottom",duration:null});return function(){o.close(n)}}},[i,f,p,g,o,r]),(0,w.useEffect)(function(){p||!i||i.isDestroyed||r((0,$.Qx)({following:null}))},[i,p,r]);var j=(0,iz.i)({base:4,md:6,xl:8})||6,b=j/(a.length?2:1),y=j/(c.length?2:1);return(0,ex.jsx)(m.k,{children:(0,ex.jsxs)(ea.U,{divider:(0,ex.jsx)(a_.c,{borderColor:"gray.200"}),children:[a.length&&(0,ex.jsx)(aM,{type:d.FOLLOWERS,collaborators:a,max:y,isEveryone:0===c.length,localCollaborator:u,localIsAttached:f}),c.length&&(0,ex.jsx)(aM,{type:d.COLLABORATORS,collaborators:c,max:b,isEveryone:0===a.length,localCollaborator:u,localIsAttached:f})]})})};(o=d||(d={})).FOLLOWERS="FOLLOWERS",o.COLLABORATORS="COLLABORATORS";var aM=function(e){var n=e.collaborators,t=e.localCollaborator,r=e.localIsAttached,o=e.type,i=e.max,s=e.isEveryone,c=(0,rK.OM)(),a=o===d.FOLLOWERS,l=n.length>i,u=l?n.slice(0,i-1):n,f=l?n.length-i+1:0,p=function(e){var n=e.localIsFollowing,t=e.collaborator;a||c({localIsFollowing:n,localIsAttached:r,collaborator:t})};return(0,ex.jsx)(aL.S,{children:(0,ex.jsxs)(aR.H,{size:"sm",spacing:a?-2:0,children:[a&&(0,ex.jsx)(aG,{isEveryone:s}),u.map(function(e,n){var o,i=(null==t?void 0:null===(o=t.memoState)||void 0===o?void 0:o.following)===e.sessionId,s=!!e.idleSince,c=!a&&(l||u.length-1!==n);return(0,ex.jsx)(C.Vw,{ignoreFallback:!0,name:e.name,label:(0,ex.jsxs)(m.k,{direction:"column",justify:"center",align:"center",children:[(0,ex.jsx)(v.x,{children:e.name}),(0,ex.jsx)(v.x,{fontSize:"xs",children:a?(0,ex.jsx)(h.cC,{id:"iRohzP"}):i&&r?(0,ex.jsx)(h.cC,{id:"1QTvS5"}):(0,ex.jsx)(h.cC,{id:"2Ldadb"})})]}),pointerEvents:s?"none":"auto",opacity:s?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:i&&r,bg:e.color,shadow:"base",color:sN()(e.color).isDark()?"white":"black",cursor:a?"":"pointer",boxProps:c?{marginEnd:-2}:{},onClick:function(){return p({localIsFollowing:i,collaborator:e})}},e.sessionId)}),f>0&&(0,ex.jsxs)(C.Z9,{tooltipLabel:x.ag._({id:"25VyZX"}),onClick:function(e){var r,o=n.find(function(n){return n.id===e.id});p({localIsFollowing:!!(o&&(null==t?void 0:null===(r=t.memoState)||void 0===r?void 0:r.following)===o.sessionId),collaborator:o})},avatars:n,count:f,disabled:a,children:[(0,ex.jsx)(v.x,{px:2,children:a?(0,ex.jsx)(h.cC,{id:"vliZud",values:{0:n.length}}):(0,ex.jsx)(h.cC,{id:"sC4bhw",values:{0:n.length}})}),!a&&(0,ex.jsx)(v.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,ex.jsx)(h.cC,{id:"miJbY4"})}),(0,ex.jsx)(og.R,{})]})]})})},aG=function(e){var n=e.isEveryone,t=(0,w.useState)(!1),r=t[0],o=t[1],i=(0,w.useState)(!1),s=i[0],c=i[1],a=(0,w.useState)(!1),l=a[0],d=a[1];return((0,w.useEffect)(function(){!r&&n&&(c(!0),o(!0),setTimeout(function(){c(!1)},3e3))},[n,r]),n)?(0,ex.jsx)(g.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,ex.jsx)(C.kH,{label:(0,ex.jsx)(h.cC,{id:"w7dTyp"}),isOpen:l||s,children:(0,ex.jsx)(g.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:(0,ex.jsx)(b.G,{icon:aA.Md})})})}):(0,ex.jsx)(g.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,ex.jsx)(b.G,{icon:aA.Md})})},aN=t(74624),aZ=t(5735),aF=t(45390),aW=t(57895),aU=t(90282),aV=t(24799),aB=t(1672),aH=t(10649),aq=t(4036),aK=t(82282),aY=t(31807),aQ=t(9846),aX=t(42048),aJ=t(98649),a$=function(e){var n=(0,J.CG)($.e_),t=(0,J.TL)(),r=(0,w.useCallback)(function(e){t((0,$.Qt)({docAttrs:{format:e}}))},[t]);return(0,ex.jsx)(tb.h,{size:"sm",isAttached:!0,my:2,children:aJ.n.map(function(e){return(0,ex.jsx)(eh.z,{isActive:e.key===n.key,onClick:function(){return r(e.key)},children:cx()(e.label)},e.key)})})},a0=t(85147),a1=t(20387),a2=function(){var e;return e={},(0,f.Z)(e,nW.q.DOC_VIEW,{buttonLabel:(0,ex.jsx)(h.cC,{id:"eZb+lw"}),shortcutIcon:a1.zc,shortcutKeys:(0,C.cE)("Mod+Enter"),shortcutLabel:(0,ex.jsx)(h.cC,{id:"9vUn+H"})}),(0,f.Z)(e,nW.q.SLIDE_VIEW,{buttonLabel:(0,ex.jsx)(h.cC,{id:"ydzS9x"}),shortcutIcon:a0.Bg,shortcutKeys:"Esc",shortcutLabel:(0,ex.jsx)(h.cC,{id:"5Rfo7J"})}),e},a5=t(8699),a3=t(47592),a4=t(59131),a6=(0,r5.ZP)("mod+Enter"),a8=(0,r5.ZP)("Esc"),a7=(0,r5.ZP)("mod+Esc"),a9=(0,r5.ZP)("shift+mod+Enter"),le=function(e,n){var t=document.querySelector(n);if(t){var r=t.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(r.width/2,100),100)}},ln=function(e){var n=e.editorWrapperEl,t=e.scrollingParentSelector,r=(0,J.TL)(),o=(0,w.useState)(!1),i=o[0],s=o[1],c=(0,w.useState)(!1),a=c[0],l=c[1],d=(0,tl._i)().editor,u=(0,J.CG)($.gh),f=(0,w.useRef)(u);(0,w.useEffect)(function(){f.current=u},[u]);var p=(0,J.CG)($.yq),h=(0,J.CG)($.JA),x=(0,J.CG)(oe.C),m=(0,nT.z$)(),v=(0,w.useCallback)(function(e){d&&!d.isDestroyed&&(e===nW.q.SLIDE_VIEW?((0,a3.E0)(d.state.doc,r),(0,or.U6)(d,!1),d.commands.spotlightCurrentCard()):(d.commands.turnOffSpotlight(!0),le(d,t)),r(function(n){n((0,$.Qx)({attached:!1})),n((0,$.PM)({mode:e}))}))},[r,d,t]),g=(0,w.useCallback)(function(){try{var e,n,t,r;if(null!==(e=document.body)&&void 0!==e&&e.requestFullscreen){null===(t=document.body)||void 0===t||t.requestFullscreen();return}null!==(n=document.body)&&void 0!==n&&n.webkitRequestFullscreen&&(null===(r=document.body)||void 0===r||r.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),j=(0,w.useCallback)(function(){try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),b=(0,te.ye)("realUserMetrics"),C=(0,a5.wK)(b),y=C.recordExitSlideModePerformance,O=C.recordEnterSlideModePerformance,k=(0,w.useCallback)(function(e){var n=e.fullscreen,t=void 0!==n&&n;f.current!==nW.q.SLIDE_VIEW&&(v(nW.q.SLIDE_VIEW),t&&g(),null==m||m.trackDocEvent(nT.AA.PRESENT_MODE_ENTERED),O({isFullscreen:t}),setTimeout(function(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[v,O,g,f,m]),S=(0,w.useCallback)(function(){f.current!==nW.q.DOC_VIEW&&(v(nW.q.DOC_VIEW),i&&j(),null==m||m.trackDocEvent(nT.AA.PRESENT_MODE_EXITED),y({isFullscreen:i}))},[v,i,j,y,f,m]);return(0,w.useEffect)(function(){var e=function(){null!==document.fullscreenElement||a||S(),null!==document.webkitCurrentFullScreenElement||a||S(),s(function(e){return!e}),l(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[a,S,j]),(0,rJ.r)(function(){d&&!d.isDestroyed&&u===nW.q.DOC_VIEW&&requestAnimationFrame(function(){var e=d.state.selection;e instanceof a4.c&&d.commands.command(function(n){return n.tr.setSelection(e.createSelectionNear()),!0})})},[d,u]),(0,w.useEffect)(function(){return r3.F7.on("keydown","PRESENT_BLOCK",function(e){var n,t,r,o=f.current===nW.q.SLIDE_VIEW;if(!x){if(a6(e)){if(null!=e&&null!==(n=e.target)&&void 0!==n&&n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),k({fullscreen:!1}),!0}if(a9(e)){if(null!=e&&null!==(t=e.target)&&void 0!==t&&t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),k({fullscreen:!0}),!0}if(a7(e)&&o)return S(),!0;if(a8(e)&&o&&!p&&!h){if(null!=e&&null!==(r=e.target)&&void 0!==r&&r.closest("[data-gamma-child-tiptap-editor]"))return;return S(),!0}}})},[k,S,g,p,h,n,x]),{enterSlideView:k,exitSlideView:S,enterFullscreen:g,exitFullscreen:j,exitedFullscreenByClick:a,isFullscreen:i,setIsFullscreen:s,setExitedFullscreenByClick:l}},lt=function(e){var n=e.editorWrapperEl,t=e.scrollingParentSelector,r=(0,J.CG)($.gh),o=(0,te.ye)("presentFullScreen"),i=a2()[r],s=i.shortcutIcon,c=i.shortcutKeys,a=i.buttonLabel,l=ln({editorWrapperEl:n,scrollingParentSelector:t}),d=l.enterSlideView,u=l.exitSlideView;return(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:s,fixedWidth:!0}),command:c,onClick:function(){r===nW.q.SLIDE_VIEW?u():d({fullscreen:o})},children:a})},lr=t(50376),lo=t(47090);function li(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ls(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?li(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):li(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var lc=function(e){var n,t,r=e.doc,o=e.editorWrapperEl,i=e.scrollingParentSelector,s=(0,nq.SE)().user,c=(0,S.$gs)().isConnected,a=(0,rN.e)(),l=(0,tl._i)().editor,d=(0,al.$)(null==r?void 0:r.title),u=(null==r?void 0:r.createdTime)&&(0,aK.Z)((0,aY.Z)(r.createdTime),"PPP"),f=null==r?void 0:r.id,p=(0,tQ.M)({id:"snapshotsDrawer"}),x=p.isOpen,m=p.onClose,j=p.onOpen,y=(0,tQ.M)({id:"analyticsPanelDisclosure"}),O=y.isOpen,k=y.onClose,P=y.onOpen,I=(0,S.LT4)(),E=(0,A.Z)(I,1)[0],D=(0,S.iX9)(),T=(0,A.Z)(D,1)[0],_=(0,nT.z$)(),R=(0,nq.py)("view",r)&&!!s,L=(0,nq.py)("edit",r),z=(0,nq.py)("manage",r)&&!!s,M=(0,te.ye)("pageSetup")&&L,G=!!(s&&0!==s.workspaceMemberships.length),N=(0,te.ye)("docFormats"),Z=(0,J.CG)($.hN),F=(0,w.useCallback)(function(){null==_||_.track(nT.AA.DOC_ANALYTICS_VIEWED,{docId:f,source:"toolbar_doc_menu",type:"personal"}),P()},[_,f,P]),W=(0,w.useCallback)(function(e){return function(){if(f){var n={id:f};e?E({variables:n,optimisticResponse:{archiveDoc:ls(ls({},n),{},{archived:e,__typename:"Doc"})}}):T({variables:n,optimisticResponse:{unarchiveDoc:ls(ls({},n),{},{archived:e,__typename:"Doc"})}})}}},[E,f,T]),U=(0,w.useCallback)(function(){l&&l.commands.undo()},[l]),V=(0,tQ.M)({id:"codeEditor"}),B=V.isOpen,H=V.onOpen,q=V.onClose,K=(0,te.ye)("docCustomCode")&&L,Y=(0,rr.n)();return(0,ex.jsxs)(oh.v,{children:[(0,ex.jsx)(ox.j,{as:ac.r,borderRadius:"md",isDisabled:x,icon:(0,ex.jsx)(b.G,{icon:ap.cN}),onMouseDown:nl.br,"data-testid":"doc-toolbar-menu-button"}),(0,ex.jsx)(eA.h,{children:r&&(0,ex.jsxs)(om.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:[(0,ex.jsxs)(g.xu,{px:4,py:2,maxW:"300px",children:[(0,ex.jsx)(v.x,{noOfLines:6,children:d}),(0,ex.jsx)(v.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,ex.jsx)(h.cC,{id:"jlWdji",values:{createdTime:u}})}),(0,ex.jsx)(C.kH,{label:null==r?void 0:null===(n=r.createdBy)||void 0===n?void 0:n.email,children:(0,ex.jsx)(v.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,ex.jsx)(h.cC,{id:"t490IT",values:{0:null==r?void 0:null===(t=r.createdBy)||void 0===t?void 0:t.displayName}})})}),N&&(0,ex.jsx)(a$,{})]}),(0,ex.jsx)(og.R,{}),(0,ex.jsx)(aQ.V,{label:(0,ex.jsx)(h.cC,{id:"IdcoRx"}),isConnected:c,maxWidth:"300px"}),c&&(0,ex.jsxs)(ex.Fragment,{children:[!!s&&!z&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:sl.M,fixedWidth:!0}),onClick:F,children:(0,ex.jsx)(h.cC,{id:"ZlwDi6"})}),(0,ex.jsx)(lt,{editorWrapperEl:o,scrollingParentSelector:i}),G&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:it.kZ,fixedWidth:!0}),onClick:function(){l&&a({docId:f,initialContent:l.getJSON(),source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,ro.Q5)()})},children:(0,ex.jsx)(h.cC,{id:"euc6Ns"})}),R&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:aH.kw,fixedWidth:!0}),onClick:function(){as.T.emit("openSharePanel",{view:"export"})},children:(0,ex.jsx)(h.cC,{id:"U8WPSi"})}),M&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:aB.gr,fixedWidth:!0}),onClick:function(){as.T.emit("openPageSetup","cards")},children:(0,ex.jsxs)(ea.U,{children:[(0,ex.jsx)(h.cC,{id:"Kx2GmY"}),(0,ex.jsx)(so.L,{}),(0,ex.jsx)(aq.C,{colorScheme:"green",ml:2,children:(0,ex.jsx)(h.cC,{id:"isRobC"})})]})}),K&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:aV.dT,fixedWidth:!0}),onClick:H,children:(0,ex.jsxs)(ea.U,{children:[(0,ex.jsx)(h.cC,{id:"cnlGIm"}),(0,ex.jsx)(so.L,{}),(0,ex.jsx)(aq.C,{colorScheme:"green",ml:2,children:(0,ex.jsx)(h.cC,{id:"YBt9YP"})})]})}),Z&&(0,ex.jsx)(og.R,{}),Z&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:aU.faArrowRotateLeft,fixedWidth:!0}),onClick:U,command:(0,C.cE)("Mod+Z"),children:(0,ex.jsx)(h.cC,{id:"9uI/rE"})}),L&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:sM.SZ,fixedWidth:!0}),onClick:j,children:(0,ex.jsx)(h.cC,{id:"6Z5x06"})}),Y&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:t3.Fz,fixedWidth:!0}),as:t9(),href:Y,target:(0,ro.Q5)()?"_self":"_blank",children:(0,ex.jsx)(h.cC,{id:"7U0bM7"})}),z&&(0,ex.jsx)(og.R,{}),z?r.archived?(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:aW.Ze,fixedWidth:!0}),onClick:W(!1),children:(0,ex.jsx)(h.cC,{id:"yKu/3Y"})}):(0,ex.jsx)(ii.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,ex.jsx)(b.G,{icon:eN.$,fixedWidth:!0}),onClick:W(!0),children:(0,ex.jsx)(h.cC,{id:"1C/Yjq"})}):null]})]})}),r&&(0,ex.jsx)(lr.Z,{doc:r,isOpen:x,onClose:m}),r&&O&&(0,ex.jsx)(ai,{doc:r,isAnalyticsPanelOpen:O,onAnalyticsPanelClose:k,mode:"personal"}),K&&(0,ex.jsx)(aX.B,{editor:l,isOpen:B,onClose:q}),M&&(0,ex.jsx)(lo.T,{editor:l})]})},la=t(22595),ll=t(26886),ld=t(71528),lu=t(26384),lf=t(84558),lp=t(91930),lh=t(7328),lx=t(84807),lm=t(28165),lv=t(97442),lg={followOnStart:"follow_on_start",followingId:"following_id"},lj=function(e,n){var t=n.followOnStart,r=n.followingId,o=new URL(e);return r&&o.searchParams.append(lg.followingId,r),t&&o.searchParams.append(lg.followOnStart,"true"),o.toString()},lb=function(e){switch(e){case"edit":return x.ag._({id:"UZN1cZ"});case"comment":return x.ag._({id:"jFTs0A"});case"view":return x.ag._({id:"Ya6CJ0"});default:return x.ag._({id:"Txd1qM"})}},lC=function(e){var n,t,r=e.isOpen,o=e.onClose,i=e.accessLinkUrl,s=e.onPlayClick,c=(0,nq.SE)().user,a=(0,ab.useRouter)().replace,l={followOnStart:!0,followingId:null==c?void 0:c.id},d=(0,w.useState)(l),f=d[0];d[1];var p=lj(i,f),m=(0,nq.SE)(),j=m.user,y=m.color,O=(0,J.CG)(td.yx),k=null==O?void 0:null===(n=O.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.permission,S=(0,lm.keyframes)(u||(u=(0,lh.Z)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "])));return(0,ex.jsx)(C.Wk,{isDark:!1,children:(0,ex.jsxs)(su.u_,{isOpen:r,onClose:o,size:"lg",children:[(0,ex.jsx)(tx.Z,{}),(0,ex.jsxs)(sf.h,{children:[(0,ex.jsx)(sD.x,{children:(0,ex.jsx)(h.cC,{id:"88XnIQ"})}),(0,ex.jsx)(tv.o,{}),(0,ex.jsx)(ep.i,{}),(0,ex.jsx)(tg.f,{pt:"6",children:(0,ex.jsxs)(ed.K,{spacing:"4",children:[(0,ex.jsx)(v.x,{children:(0,ex.jsx)(h.cC,{id:"oYTLJe",values:{0:lb(k),GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc},components:{0:(0,ex.jsx)(v.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,ex.jsx)(C.kH,{label:x.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,ex.jsx)(g.xu,{mb:"2",children:(0,ex.jsx)(lv.I,{url:p,variant:"solid"})}),(0,ex.jsxs)(sm.b,{children:[(0,ex.jsx)(sO.z,{}),(0,ex.jsxs)(ea.U,{flexBasis:"100%",alignItems:"top",children:[(0,ex.jsx)(v.x,{fontSize:"sm",width:"100%",children:(0,ex.jsx)(h.cC,{id:"EApNIe"})}),(0,ex.jsxs)(g.xu,{position:"relative",textShadow:"sm",children:[(0,ex.jsx)(cf.q,{animation:"".concat(S," 2s infinite ease-out"),name:null==j?void 0:j.displayName,src:null==j?void 0:j.profileImageUrl,size:"md",border:"solid 3px ".concat(y.value),shadow:"lg"}),(0,ex.jsx)(g.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,ex.jsx)(b.G,{icon:lx.q,fixedWidth:!0})})]})]})]})]})}),(0,ex.jsx)(tj.m,{children:(0,ex.jsxs)(tb.h,{children:[(0,ex.jsx)(eh.z,{variant:"ghost",colorScheme:"gray",onClick:function(){o()},children:(0,ex.jsx)(h.cC,{id:"DPfwMq"})}),(0,ex.jsx)(eh.z,{variant:"solid",onClick:function(){o(),s(),a(p,p,{shallow:!0})},leftIcon:(0,ex.jsx)(b.G,{icon:a1.zc}),children:(0,ex.jsx)(h.cC,{id:"tbDuNX"})})]})})]})]})})},ly=function(e){var n,t,r,o,i=e.doc,s=e.isStaticEditor,c=e.editorWrapperEl,a=e.scrollingParentSelector,l=(0,tQ.M)({id:"meetModal"}),d=l.onOpen,u=l.onClose,f=l.isOpen,p=ln({editorWrapperEl:c,scrollingParentSelector:a}),j=p.enterSlideView,y=p.exitSlideView,O=p.setExitedFullscreenByClick,k=p.isFullscreen,S=p.enterFullscreen,P=p.exitFullscreen,I=(0,nq.SE)().user,E=(0,J.CG)($.gh),D=(0,w.useRef)(E);(0,w.useEffect)(function(){D.current=E},[E]);var A=a2()[E],T=A.shortcutLabel,_=A.shortcutIcon,R=A.shortcutKeys,L=A.buttonLabel,z=null==i?void 0:null===(n=i.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,M=!!(null==i?void 0:null===(r=i.accessLinks)||void 0===r?void 0:null===(o=r[0])||void 0===o?void 0:o.permission),G=(0,nq.py)("manage",i||void 0),N=(0,te.ye)("presentFullScreen"),Z="present"===(0,J.CG)($.e_).primaryAction?"solid":"plain";return(0,ex.jsxs)(m.k,{children:[(0,ex.jsxs)(tb.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":E===nW.q.SLIDE_VIEW?"slide":"doc",children:[(0,ex.jsx)(C.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:T,shortcut:R,children:(0,ex.jsx)(ac.h,{fontWeight:"normal",size:"sm",variant:Z,onClick:function(){E===nW.q.SLIDE_VIEW?y():j({fullscreen:N})},onMouseDown:nl.br,icon:(0,ex.jsx)(b.G,{icon:_}),"data-present-button":!0,children:L})}),(0,ex.jsxs)(oh.v,{children:[(0,ex.jsx)(ox.j,{variant:Z,as:ac.r,icon:(0,ex.jsx)(b.G,{icon:cT.pt})}),(0,ex.jsx)(eA.h,{children:(0,ex.jsxs)(om.q,{zIndex:"popover",children:[E===nW.q.DOC_VIEW&&(0,ex.jsxs)(lp.k,{title:x.ag._({id:"9vUn+H"}),children:[(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:lf.Rk,fixedWidth:!0}),command:(0,C.cE)("Mod+Enter"),onClick:function(){return j({fullscreen:!1})},children:(0,ex.jsx)(h.cC,{id:"LRFe2O"})}),(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:lu.tc,fixedWidth:!0}),command:(0,C.cE)("Mod+Shift+Enter"),onClick:function(){return j({fullscreen:!0})},children:(0,ex.jsx)(h.cC,{id:"OwIqiD"})})]}),E===nW.q.SLIDE_VIEW&&(0,ex.jsx)(ii.s,{icon:(0,ex.jsx)(b.G,{icon:a0.Bg,fixedWidth:!0}),command:"ESC",onClick:y,children:(0,ex.jsx)(h.cC,{id:"5Rfo7J"})}),!s&&I&&G&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(og.R,{}),(0,ex.jsx)(C.kH,{isDisabled:M,label:(0,ex.jsx)(h.cC,{id:"zk6wKo"}),children:(0,ex.jsx)(g.xu,{children:(0,ex.jsx)(ii.s,{onClick:function(){var e;null!=i&&null!==(e=i.accessLinks)&&void 0!==e&&e[0].permission&&d()},isDisabled:!M,icon:(0,ex.jsx)(b.G,{icon:ld.AS,fixedWidth:!0}),children:(0,ex.jsx)(ed.K,{spacing:"0",children:(0,ex.jsx)(h.cC,{id:"z7gRub",components:{0:(0,ex.jsx)(v.x,{}),1:(0,ex.jsx)(v.x,{fontSize:"sm",color:"gray.600"})}})})})})})]}),!s&&I&&z&&(0,ex.jsx)(lC,{isOpen:f,onClose:u,accessLinkUrl:z,onPlayClick:function(){j({fullscreen:!1})}})]})})]})]}),E===nW.q.SLIDE_VIEW&&(0,ex.jsx)(m.k,{ml:E===nW.q.SLIDE_VIEW?2:0,children:(0,ex.jsx)(C.kH,{label:k?"Exit full screen":"Enter full screen",children:(0,ex.jsx)(ac.r,{"aria-label":k?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,ex.jsx)(b.G,{icon:k?ll.Qj:la.TL}),onClick:k?function(){O(!0),P()}:S})})})]})},lO=t(41864),lw=t(35330),lk=t(92779),lS=t(31912),lP=function(e){var n,t,r=e.doc,o=e.showAnalytics,i=e.showSharePublic,s=e.showEmbed,c=e.showButton,a=(0,tQ.M)({id:"analyticsModalDisclosure"}),l=a.isOpen,d=a.onClose,u=a.onOpen,f=(0,lw.y)(),p=f.isSharePanelOpen,x=f.onSharePanelOpen,m=f.onSharePanelClose,j=f.view,b=f.setView,y=(0,nq.SE)(),O=y.user,k=y.currentWorkspace,S=(0,tl._i)().editor,P=(0,nq.py)("view",r),I=(0,nq.py)("edit",r),E=(0,nq.py)("manage",r),D=(0,nT.z$)();(0,w.useEffect)(function(){return as.T.on("openSharePanel",function(e){var n=e.view;x(),b(n)})},[x,b]);var A=(0,w.useCallback)(function(){null==D||D.track(nT.AA.DOC_ANALYTICS_VIEWED,{docId:null==r?void 0:r.id,source:"share_panel",type:E?"full":"personal"}),u()},[D,E,null==r?void 0:r.id,u]);if(!P||!O||!r)return null;var T=r.collaborators||[],_=r.channels||[],R=(0,lS.Hs)((0,oz.Z)(T).sort(function(e,n){return e.user.id===O.id?-1:n.user.id===O.id?1:0}).map(function(e){return e.user.id===O.id?"You":e.user.displayName||""}).concat(r.orgAccess?_.map(function(e){return e.name||""}):[])),L=(0,lk.h_)(r,O),z=L?(0,lk.Xp)()[L]:null,M=(0,lk.Gi)(r,k);return null===z?(console.error("[SharePanel] Unknown VisibilityValue for doc",r),null):(0,ex.jsxs)(ex.Fragment,{children:[(void 0===c||c)&&(0,ex.jsx)(C.kH,{label:(0,ex.jsxs)(ex.Fragment,{children:[M&&(0,ex.jsx)(v.x,{fontWeight:"bold",children:(0,ex.jsx)(h.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}})}),z.title(null==r?void 0:null===(n=r.organization)||void 0===n?void 0:n.name)?(0,ex.jsx)(v.x,{children:z.title(null==r?void 0:null===(t=r.organization)||void 0===t?void 0:t.name)}):null,(0,ex.jsx)(v.x,{fontSize:"xs",children:z.subtitle?z.subtitle(R||""):""})]}),children:(0,ex.jsx)("span",{children:(0,ex.jsx)(ac.h,{"data-guider-highlight":"share-button",onMouseDown:nl.br,icon:(0,ex.jsx)(g.xu,{children:(0,ex.jsx)(lO.aA,{visibility:z,isFromOtherOrg:M})}),isDisabled:!I,onClick:x,children:(0,ex.jsx)(h.cC,{id:"Z8lGw6"})})})}),(0,ex.jsx)(lO.WQ,{doc:r,editor:S,isSharePanelOpen:p,onSharePanelOpen:x,onSharePanelClose:m,onAnalyticsPanelOpen:A,view:j,setView:b,showAnalytics:void 0===o||o,showSharePublic:void 0===i||i,showEmbed:void 0===s||s}),l&&(0,ex.jsx)(ai,{doc:r,onSharePanelOpen:x,onAnalyticsPanelClose:d,isAnalyticsPanelOpen:l,mode:E?"full":"personal"})]})},lI=t(38621),lE=function(e){var n=e.spotlightingByBlock,t=(0,tl._i)().editor,r=(0,w.useCallback)(function(){n?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock()},[t,n]);return(0,ex.jsx)(m.k,{children:(0,ex.jsx)(C.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,ex.jsxs)(v.x,{whiteSpace:"nowrap",children:[n?"Turn off spotlight":"Turn on spotlight",(0,ex.jsx)(v.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,ex.jsx)(ac.h,{colorScheme:"trueblue",variant:n?"solid":"plain",onClick:function(e){r(),e.target.blur()},icon:(0,ex.jsx)(b.G,{icon:lI.QM}),children:"Spotlight"})})})},lD=t(18504),lA=t(78050),lT=t(4685),l_=t(71007),lR=t(17621),lL=t(2875),lz=(0,w.memo)(function(e){var n=e.isOpen,t=e.onClose,r=e.openThemeEditor,o=e.openThemeEditorWithDefaultTheme,i=e.setDocTheme,s=(0,J.CG)($.Pu),c=(0,w.useCallback)(function(){lL.pw.emit(lL.TI.OPEN_PAGE_SETUP,"background"),null==t||t()},[t]);return(0,ex.jsx)(C.Wk,{isDark:!1,children:(0,ex.jsxs)(th.d,{returnFocusOnClose:!1,isOpen:n,placement:"right",onClose:t,size:"md",children:[(0,ex.jsx)(tx.Z,{background:"none"}),(0,ex.jsxs)(tm.s,{"data-testid":"doc-theme-drawer","data-doc-theme-drawer":!0,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,ex.jsx)(sD.x,{pb:4,children:(0,ex.jsx)(lR.v,{title:(0,ex.jsx)(h.cC,{id:"FEr96N"}),openThemeEditorWithDefaultTheme:o,showDrawerCloseButton:!0})}),(0,ex.jsx)(tg.f,{overflowX:"hidden","data-theme-picker-scroll-container":!0,children:(0,ex.jsx)(l_.t,{currentTheme:s,openBackgroundPanel:c,setTheme:i,openThemeEditor:r,openThemeEditorWithDefaultTheme:o})})]})]})})});lz.displayName="DocThemeDrawer";var lM=(0,w.memo)(function(){var e,n=(0,eU.p)(),t=(0,tl._i)(),r=t.docId,o=t.getCollaborativeEditorInstance,i=(0,tQ.M)({id:"themeEditor"}),s=i.isOpen,c=i.onOpen,a=i.onClose,l=(0,tQ.M)({id:"themeStyleDrawer"}),d=l.isOpen,u=l.onOpen,f=l.onClose,p=null===(e=o())||void 0===e?void 0:e.state.doc.toJSON(),x=(0,J.CG)($.Pu),v=(0,lT.g)(),g=(0,A.Z)(v,2),j=g[0],b=g[1],C=o(),y=(0,eI.LW)(C,c,b),O=y.openThemeEditor,k=y.openThemeEditorWithDefaultTheme,S=(0,nT.z$)(),P=(0,eI.vi)({docId:r,editor:C}).updateDocThemeWithAccentImages,I=(0,w.useCallback)(function(e){e.id!==x.id&&P(e.id).then(function(){null==S||S.track(nT.AA.DOC_THEME_UPDATED,{doc_id:r,theme_id:e.id})}).catch(function(e){console.error(e),n({title:(0,ex.jsx)(h.cC,{id:"Fulf8b",values:{0:e.message}}),position:"top",status:"error"})})},[S,x.id,r,n,P]);return(0,w.useEffect)(function(){var e=as.T.on("toggleThemeBlock",u),n=lL.pw.on(lL.TI.OPEN_THEME_DRAWER,u);return function(){e(),n()}},[u]),(0,ex.jsxs)(m.k,{children:[(0,ex.jsx)(lz,{isOpen:d&&!s,onClose:f,openThemeEditor:O,openThemeEditorWithDefaultTheme:k,setDocTheme:I}),(0,ex.jsx)(lA.z,{isOpen:s,onClose:a,state:j,dispatch:b,docContent:p,onThemeCreated:I,disableDrawerTransition:!0})]})}),lG=(0,w.memo)(function(){var e=(0,S.$gs)().isConnected;return(0,ex.jsx)(C.kH,{label:e?(0,ex.jsx)(h.cC,{id:"JkEyR8"}):(0,ex.jsx)(h.cC,{id:"GvC+mL",components:{0:(0,ex.jsx)(v.x,{}),1:(0,ex.jsx)(v.x,{color:"gray.300"})}}),"aria-label":x.ag._({id:"JkEyR8"}),children:(0,ex.jsx)(g.xu,{children:(0,ex.jsx)(ac.h,{"data-guider-highlight":"toolbar-theme-button",onClick:function(){as.T.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,ex.jsx)(b.G,{icon:lD.q2}),"data-testid":"toolbar-theme-button",children:(0,ex.jsx)(h.cC,{id:"FEr96N"})})})})});lG.displayName="ThemeToolbarButton";var lN=function(){return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(lM,{}),(0,ex.jsx)(lG,{})]})};lM.displayName="ThemeDrawers";var lZ=t(31997),lF=t(74588),lW=t(95472),lU=[.5,.8,.9,1,1.1,1.2,1.5,2],lV=function(e){return"".concat((100*e).toFixed(0),"%")},lB=function(){var e=(0,te.ye)("presentZoom"),n=(0,tl._i)().editor,t=(0,nT.z$)(),r=(0,k.I0)(),o=(0,J.CG)($.SU),i=(0,w.useCallback)(function(e){r((0,$.Ic)({zoomLevel:e})),r((0,$.fT)({enabled:!1})),null==t||t.track(nT.AA.DOC_ZOOMED,{direction:"set",level:e})},[r,t]),s=(0,w.useCallback)(function(){r((0,$.fT)({enabled:!0}))},[r]),c=(0,w.useCallback)(function(){var e=Math.min(n2.v4,o+.1);r((0,$.Ic)({zoomLevel:e})),r((0,$.fT)({enabled:!1})),null==t||t.track(nT.AA.DOC_ZOOMED,{direction:"in",level:e})},[r,t,o]),a=(0,w.useCallback)(function(){var e=Math.max(n2.Ou,o-.1);r((0,$.Ic)({zoomLevel:e})),r((0,$.fT)({enabled:!1})),null==t||t.track(nT.AA.DOC_ZOOMED,{direction:"in",level:e})},[r,t,o]),l=(0,w.useCallback)(function(){var e=n2.aX;r((0,$.Ic)({zoomLevel:e})),r((0,$.fT)({enabled:!1})),null==t||t.track(nT.AA.DOC_ZOOMED,{direction:"reset",level:e})},[r,t]),d=(0,J.CG)(oe.C),u=(0,r4.rJ)();return((0,w.useEffect)(function(){if(e)return r3.F7.on("keydown","PRESENT_BLOCK",function(e){return!(d||!n||(0,lW.KB)(n)||(0,nF.Hx)(e.target))&&((0,r5.ZP)("=")(e)?(c(),e.preventDefault(),!0):(0,r5.ZP)("-")(e)?(a(),e.preventDefault(),!0):(0,r5.ZP)("0")(e)?(l(),e.preventDefault(),!0):!!(0,r5.ZP)("9")(e)&&(s(),e.preventDefault(),!0))})},[d,e,n,c,a,l,s]),e)?(0,ex.jsxs)(tb.h,{spacing:"0",size:"sm",variant:"plain",isAttached:!0,children:[(0,ex.jsx)(C.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:x.ag._({id:"FjkaiT"}),children:(0,ex.jsx)(z.h,{"aria-label":x.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:a,icon:(0,ex.jsx)(b.G,{icon:lZ.Kl})})}),(0,ex.jsxs)(oh.v,{closeOnSelect:!0,children:[(0,ex.jsx)(C.kH,{label:x.ag._({id:"VZ3UQG"}),children:(0,ex.jsx)(ox.j,{minW:20,as:eh.z,variant:"plain",size:"sm",rightIcon:(0,ex.jsx)(b.G,{icon:lF.eW}),children:u?(0,ex.jsx)(h.cC,{id:"R9Khdg"}):lV(o)})}),(0,ex.jsxs)(om.q,{maxW:"220px",children:[(0,ex.jsx)(oj._,{value:u?"auto":o.toString(),type:"radio",children:(0,ex.jsx)(ob.i,{value:"auto",onClick:s,children:(0,ex.jsxs)(ea.U,{children:[(0,ex.jsxs)(v.x,{children:[(0,ex.jsx)(h.cC,{id:"R9Khdg"})," ",(0,ex.jsx)(v.x,{as:"span",color:"gray.500",children:(0,ex.jsx)(h.cC,{id:"P9Cyl9"})})]}),(0,ex.jsx)(so.L,{}),(0,ex.jsx)(v.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,ex.jsx)(og.R,{}),(0,ex.jsx)(oj._,{value:u?"auto":o.toString(),type:"radio",children:lU.map(function(e){return(0,ex.jsx)(ob.i,{value:(e/100).toString(),onClick:function(){i(e)},children:(0,ex.jsxs)(ea.U,{children:[(0,ex.jsx)(v.x,{children:lV(e)}),(0,ex.jsx)(so.L,{}),e===n2.aX&&(0,ex.jsx)(v.x,{as:"span",opacity:"0.6",children:"0"})]})},e)})})]})]}),(0,ex.jsx)(C.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:x.ag._({id:"AWOSPo"}),children:(0,ex.jsx)(z.h,{fontWeight:"normal","aria-label":x.ag._({id:"AWOSPo"}),onClick:c,icon:(0,ex.jsx)(b.G,{icon:t4.r8})})})]}):null},lH=(0,w.memo)(function(e){var n,r,o=e.scrollingParentSelector,i=e.toggleCommentsPanel,s=e.isCommentsPanelOpen,c=e.editorWrapperEl,a=e.docEditorType,l=(0,sr.a)(["(max-width: 840px)","(min-width: 841px)"]),d=(0,A.Z)(l,1)[0],u=(0,iz.i)({base:!0,lg:!1}),p=(0,ri.LQ)(window.location.href),h=(0,J.CG)($.gh),x=(0,J.CG)(td.yx),v=(0,tl._i)().editor,g=(0,nq.py)("comment",x),j=(0,ot.g)(v).enabled,b="SLIDE_VIEW"!==h,C=(0,J.CG)($.hN),y=a!==ta.Z.COLLABORATIVE,O=a===ta.Z.PUBLIC_STATIC,k=(0,J.CG)($.Tf),S=(0,te.ye)("aiChat");(0,te.ye)("pptExport")&&(window.exportToPptx=(n=(0,tu.Z)(tp().mark(function e(n){var r;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([t.e(9775),t.e(5743),t.e(3496)]).then(t.bind(t,13448));case 4:return r=e.sent.exportToPptx,e.abrupt("return",r(v,n));case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}));var P=X((0,w.useCallback)(function(e){var n=I.current;return!!n&&(!!(n.querySelector("[data-active]")||n.querySelector('[aria-expanded="true"]'))||e.clientY<100)},[]),!k),I=(0,w.useRef)(null),E=!k||k&&P,D=!!(null==x?void 0:x.publishedSnapshotId),T=!(0,ro.s2)()&&!d&&!p;return v?(0,ex.jsxs)(m.k,{"data-editor-toolbar":!0,ref:I,bg:"linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.1) 100%)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"center",pr:6,marginTop:E?0:"-100%",pointerEvents:"none",sx:(r={},(0,f.Z)(r,"&:focus-within",{marginTop:0}),(0,f.Z)(r,"> *",{pointerEvents:"auto"}),(0,f.Z)(r,"> #toolbar-spacer",{pointerEvents:"none"}),r),transitionProperty:"margin-top",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,ex.jsx)(aF.a,{}),!O&&(0,ex.jsx)(ea.U,{children:(0,ex.jsx)(ak,{doc:x})}),(0,ex.jsx)(so.L,{pointerEvents:"none",id:"toolbar-spacer"}),(0,ex.jsxs)(ea.U,{children:[!d&&(0,ex.jsx)(az,{}),!d&&!b&&(0,ex.jsx)(lB,{}),!d&&!b&&(0,ex.jsx)(ex.Fragment,{children:(0,ex.jsx)(lE,{spotlightingByBlock:j})}),!d&&!y&&C&&(0,ex.jsx)(lN,{}),!d&&!y&&(0,ex.jsx)(lP,{doc:x}),T&&!D&&(0,ex.jsx)(ly,{doc:x,isStaticEditor:y,editorWrapperEl:c,scrollingParentSelector:o}),T&&D&&(0,ex.jsx)(sa,{doc:x}),!y&&g&&(0,ex.jsx)(aN.U,{doc:x,mode:h,isCommentsPanelOpen:s,toggleCommentsPanel:i}),!d&&u&&!y&&C&&S&&(0,ex.jsx)(aZ.u,{}),!d&&!y&&(0,ex.jsx)(au,{doc:x}),!d&&!y&&(0,ex.jsx)(lc,{doc:x,editorWrapperEl:c,scrollingParentSelector:o}),!O&&(0,ex.jsx)(m.k,{children:(0,ex.jsx)(tO.DY,{showRing:!0})})]})]}):null}),lq=t(34684),lK=t(95993),lY=t(98013),lQ=t(27483),lX=t(81891),lJ=t(2702),l$=t(27809),l0=t(84991),l1=t(76451),l2=function(e){(0,W.Z)(r,e);var n,t=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,V.Z)(r);if(n){var o=(0,V.Z)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,U.Z)(this,e)});function r(e){var n;return(0,N.Z)(this,r),t.call(this,{transform:(n=(0,tu.Z)(tp().mark(function n(t,r){var o,i,s,c;return tp().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!("data"!==t.event)){n.next=3;break}return r.enqueue(t),n.abrupt("return");case 3:s=(i=t.data.content).attrs.id,(c=i.content.find(function(e){return"cardAccentLayoutItem"===e.type}))&&(!c.attrs.background||(null===(o=c.attrs.background)||void 0===o?void 0:o.type)===l1.E.NONE)&&(c.attrs.background=(0,l0.Bv)(e,s),(0,l0.Tm)(i)),r.enqueue(t);case 8:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)})})}return(0,Z.Z)(r)}(lK.GJ),l5=t(21365),l3=t(60081),l4=t(80591),l6=t(4038),l8=t(43862);function l7(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function l9(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l7(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l7(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var de=(i=(0,tu.Z)(tp().mark(function e(n){var t,r,o,i,s,c,a;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.editor,r=n.chain,o=n.node,i=n.imageAttrs,s=n.pos,r.updateAttributesAtPos(s,(0,l4.j6)(o,{uploadStatus:l8.D.Uploading})),c=i.tempUrl,a=i.src,(0,l6.WY)(a,t.storage.mediaUpload.orgId,{onUploadComplete:function(e){(0,l4.Ns)(t,c,e)},onUploadFailed:function(e){(0,l4.f8)(t,c,e,!0)}});case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),dn=(s=(0,tu.Z)(tp().mark(function e(n){var t,r,o,i,s,c;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.cardId,r=n.editor,console.debug("[AIStream uploadAIImages] for cardId: ",t),o=r.chain(),i=(0,nG.N2)(r.state.doc,function(e){return(0,nZ.KH)(e)&&e.attrs.id===t})[0]){e.next=7;break}return console.error("[uploadAIImages] can not find card with id: ",t),e.abrupt("return");case 7:c=(s=i.pos)+i.node.nodeSize,r.state.doc.descendants(function(e,n){if(n<s||n>c)return!0;var t=(0,l4.XU)(e);return!t||(t&&t.uploadStatus===l8.D.Queued&&(console.debug("[AIStream processAIImages]: ".concat(e.type.name," node with AI queries at pos ").concat(n,":"),t),de({editor:r,chain:o,node:e,imageAttrs:t,pos:n})),!0)}),o.run();case 11:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)}),dt=(c=(0,tu.Z)(tp().mark(function e(n){var t,r,o,i,s;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.lastCompletedCardId,r=n.editor,o=n.theme,t){e.next=3;break}return e.abrupt("return");case 3:if(console.debug("[AIStream refetchLazyImages] for cardId: ",t),i=(0,nG.N2)(r.state.doc,function(e){return(0,nZ.KH)(e)&&e.attrs.id===t})[0]){e.next=8;break}return console.error("[refetchLazyImages] can not find card with id: ",t),e.abrupt("return");case 8:s=i.pos+i.node.nodeSize,r.state.doc.descendants(function(e,n){if(n<0||n>s)return!0;var t=(0,l4.XU)(e);if(t&&"queued"===t.loadImageStatus&&t.loadImageId&&t.loadImageParams){var i=t.loadImageId,c=t.loadImageParams;return(0,l3.B)({loadImageId:i,loadImageParams:c,context:{docId:r.gammaDocId,workspaceId:r.gammaOrgId}}).then(function(n){dr({editor:r,newAttrs:n,loadImageId:i,node:e,theme:o})}),!0}});case 11:case"end":return e.stop()}},e)})),function(e){return c.apply(this,arguments)}),dr=(a=(0,tu.Z)(tp().mark(function e(n){var t,r,o,i,s,c,a,l;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.editor,r=n.loadImageId,o=n.newAttrs,i=n.node,s=n.theme,c=n.cardId,a=(0,nG.N2)(t.state.doc,function(e){var n=(0,l4.XU)(e);return!!n&&n.loadImageId===r})[0]){e.next=5;break}return console.error("[AIStream] could not find image in editor with loadImageId=".concat(r,"}")),e.abrupt("return");case 5:l="cardAccentLayoutItem"===i.type.name&&"error"===o.loadImageStatus?l9(l9({},a.node.attrs),{},{background:(0,l0.Bv)(s,c)}):(0,l4.j6)(a.node,o),t.commands.updateAttributesAtPos(a.pos,l);case 7:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)});function di(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function ds(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?di(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):di(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var dc=function(e){(0,W.Z)(o,e);var n,t,r=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,V.Z)(o);if(n){var r=(0,V.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,U.Z)(this,e)});function o(e){var n,t,i=e.editor,s=e.theme;(0,N.Z)(this,o);var c=(n=(0,tu.Z)(tp().mark(function e(n,r){var o,c,a;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("data"!==n.event)){e.next=3;break}return r.enqueue(n),e.abrupt("return");case 3:c=(o=n.data).index,a=o.id,t.streamingCardIndex=c,(0,l5.N)(n.data.content,function(e){if("text"!==e.type){var n,r=ty.NB.fromJSON(i.schema,{type:e.type,attrs:e.attrs}),o=(0,l4.XU)(r);if(o&&"queued"===o.loadImageStatus&&o.loadImageId&&o.loadImageParams){var l=o.loadImageId,d=o.loadImageParams;t.imageAttrs[l]||(t.imageAttrs[l]=r.attrs),t.loadImagePromises[l]||(t.loadImagePromises[l]=t.loadImage({editor:i,loadImageId:l,loadImageParams:d,cardIndex:c,cardId:a,theme:s,node:r})),e.attrs=null!==(n=t.loadedImageAttrs[l])&&void 0!==n?n:t.imageAttrs[l]}}}),n.data.cardComplete&&t.streamingCardIndex++,r.enqueue(n);case 8:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)});return t=r.call(this,{transform:c}),(0,f.Z)((0,F.Z)(t),"streamingCardIndex",0),(0,f.Z)((0,F.Z)(t),"imageAttrs",{}),(0,f.Z)((0,F.Z)(t),"loadedImageAttrs",{}),(0,f.Z)((0,F.Z)(t),"loadImagePromises",{}),t}return(0,Z.Z)(o,[{key:"loadImage",value:(t=(0,tu.Z)(tp().mark(function e(n){var t,r,o,i,s,c,a,l;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.editor,r=n.loadImageId,o=n.loadImageParams,i=n.cardIndex,s=n.cardId,c=n.node,a=n.theme,e.next=3,(0,l3.B)({loadImageId:r,loadImageParams:o,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId}});case 3:if(l=e.sent,this.streamingCardIndex!==i){e.next=8;break}return this.loadedImageAttrs[r]=(0,l4.j6)(c,l),"cardAccentLayoutItem"===c.type.name&&"error"===l.loadImageStatus&&(this.loadedImageAttrs[r]=ds(ds({},c.attrs),{},{background:(0,l0.Bv)(a,s)})),e.abrupt("return");case 8:requestAnimationFrame(function(){dr({editor:t,loadImageId:r,newAttrs:l,node:c,theme:a,cardId:s})});case 9:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),o}(lK.GJ),da=t(91760),dl=tp().mark(dx);function dd(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return du(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return du(e,n)}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw i}}}}function du(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function df(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function dp(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?df(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):df(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var dh=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===n.length)throw Error("Cannot have empty path");for(var o=(0,oz.Z)(n),i=dp({},e),s=i,c=0;n.length>0;){if(!s.content)throw Error("Can't surround a node with children");var a=o.shift();if(0===o.length){var l=s.content.slice(0,a);l.push(t),s.content=l;break}if(c<r){var d=s.content.slice(0);d.splice(a,1,dp({},d[a])),s.content=d,s=s.content[a]}else{var u=s.content.slice(0,a+1);u.splice(a,1,dp({},u[a])),s.content=u,s=s.content[a]}c++}return i};function dx(e){var n,t,r,o,i,s,c,a,l,d,u,f,p,h,x=arguments;return tp().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(n=x.length>1&&void 0!==x[1]?x[1]:0,t=x.length>2&&void 0!==x[2]?x[2]:e,r=x.length>3&&void 0!==x[3]?x[3]:[],"text"!==e.type){m.next=14;break}o=e.text.split(" "),i=0;case 6:if(!(i<o.length)){m.next=13;break}return s={type:"text",text:o.slice(0,i+1).join(" ")},m.next=10,dh(t,r,s,n);case 10:i++,m.next=6;break;case 13:case 17:return m.abrupt("return");case 14:if(e.content){m.next=18;break}return m.next=17,dh(t,r,e,n);case 18:c=0,a=dd(e.content),m.prev=20,a.s();case 22:if((l=a.n()).done){m.next=45;break}d=l.value,u=[].concat((0,oz.Z)(r),[c]),f=dd(dx(d,n,t,u)),m.prev=26,f.s();case 28:if((p=f.n()).done){m.next=34;break}return h=p.value,m.next=32,h;case 32:m.next=28;break;case 34:m.next=39;break;case 36:m.prev=36,m.t0=m.catch(26),f.e(m.t0);case 39:return m.prev=39,f.f(),m.finish(39);case 42:c++;case 43:m.next=22;break;case 45:m.next=50;break;case 47:m.prev=47,m.t1=m.catch(20),a.e(m.t1);case 50:return m.prev=50,a.f(),m.finish(50);case 53:case"end":return m.stop()}},dl,null,[[20,47,50,53],[26,36,39,42]])}function dm(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function dv(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dm(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dm(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function dg(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var dj=function(e){(0,W.Z)(r,e);var n,t=(n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=(0,V.Z)(r);if(n){var o=(0,V.Z)(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return(0,U.Z)(this,e)});function r(e){(0,N.Z)(this,r);var n,o,i=(n=(0,tu.Z)(tp().mark(function n(t,r){var o,i,s,c,a,l;return tp().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!("done"===t.event||"cancel"===t.event)){n.next=3;break}return r.enqueue(t),n.abrupt("return");case 3:o=(0,J.bh)(),i=null,s=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return dg(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dg(e,n)}}(e))){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(c)throw i}}}}(dx(t.data.content,1)),n.prev=6,s.s();case 8:if((c=s.n()).done){n.next=19;break}if(a=c.value){n.next=12;break}return n.abrupt("continue",17);case 12:return i&&r.enqueue(i),i={id:t.id,event:"data",data:dv(dv({},t.data),{},{content:a,cardComplete:!1})},l=(0,re.qn)(e)(o.getState()),n.next=17,db(l);case 17:n.next=8;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(6),s.e(n.t0);case 24:return n.prev=24,s.f(),n.finish(24);case 27:i&&r.enqueue(dv(dv({},i),{},{data:dv(dv({},i.data),{},{cardComplete:!0})}));case 28:case"end":return n.stop()}},n,null,[[6,21,24,27]])})),function(e,t){return n.apply(this,arguments)});return o=t.call(this,{transform:i}),(0,f.Z)((0,F.Z)(o),"index",0),(0,f.Z)((0,F.Z)(o),"startTime",performance.now()),o}return(0,Z.Z)(r)}(lK.GJ),db=function(e){return new Promise(function(n){return da.iK(n,e)})},dC=t(54113),dy=t(51663),dO=function(e){var n=e.enabled,t=e.type,r=(0,dy.As)(t),o=(0,w.useRef)(!0);(0,w.useEffect)(function(){if(n){var e=r.scroller;if(e){var t=function(){r.isAtBottom(40)?o.current=!0:o.current=!1},i=function(){o.current=!1};return e.addEventListener("wheel",t,{passive:!0}),e.addEventListener("touchend",t,{passive:!0}),e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchmove",i,{passive:!0}),function(){e.removeEventListener("wheel",t),e.removeEventListener("touchend",t),e.removeEventListener("touchstart",i),e.removeEventListener("touchmove",i)}}}},[r,n]);var i=(0,w.useCallback)(function(){if(o.current){var e;null===(e=r.scroller)||void 0===e||e.scrollTo({top:r.scroller.scrollHeight,behavior:"auto"})}},[r]);return(0,iV.Z_)(i,100)},dw=t(73593),dk=t(51180),dS=t(34768),dP=["latency"];function dI(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function dE(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dI(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dI(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var dD="[CONTENT_FILTER]",dA=function(){return(0,ex.jsxs)(sm.b,{status:"error",variant:"solid",children:[(0,ex.jsx)(sO.z,{}),(0,ex.jsx)(sg.X,{children:(0,ex.jsxs)(ed.K,{children:[(0,ex.jsx)("strong",{children:(0,ex.jsx)(h.cC,{id:"7g5s/N"})}),(0,ex.jsx)(v.x,{children:(0,ex.jsx)(h.cC,{id:"Xp43Ei"})})]})})]})},dT=function(e){var n=e.editor,t=e.content,r=e.cardId,o=e.cardIndex,i=e.cardComplete,s=(0,nG.N2)(n.state.doc,function(e){return(0,iF.KH)(e)})[0],c=(0,nG.N2)(n.state.doc,function(e){return(0,iF.KH)(e)&&e.attrs.id===r})[0];if(!s)throw Error("Doc does not have a first card");var a=c?{from:c.pos,to:c.pos+c.node.nodeSize}:0===o?{from:s.pos,to:s.pos+s.node.nodeSize}:n.state.doc.nodeSize-3;try{if(n.commands.insertContentAt(a,t,{updateSelection:0===o}),i&&0===o){var l=(0,ix.t)(n.state.doc.resolve(s.pos));l&&n.commands.command(function(e){return e.tr.setSelection(l),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},d_=function(e){var n=e.docId,t=e.store,r=e.generateInfo,o=e.editor,i=e.lazyImages;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(n,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}lX.a.trackRequestSent(t,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});var s=(0,lQ.pM)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}).stream;return(0,lY.Nl)({stream:s,docId:n,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,lastCompletedCardIndex:r.lastCompletedCardIndex,options:{lazyImages:i,imageOptions:r.imageOptions,docFormatKey:(0,dw.hx)((0,dw.VA)(o)).key},store:t})},dR=function(e,n){var t,r=(0,J.CG)($.Pu),o=(0,J.qr)(),i=(0,J.TL)(),s=(0,J.CG)($.KV),c=(0,te.ye)("streamResumingEnabled"),a=(0,te.ye)("generatorLazyImages"),l=(0,w.useRef)(!1),d=dL({docId:e}),u=d.isStreaming,f=d.onStreamData,p=d.onStreamDone,h=d.onStreamError,x=d.onStreamStart,m=d.onAbortStream,v=dO({enabled:u,type:"editor"}),g=(0,w.useCallback)((t=(0,tu.Z)(tp().mark(function t(i){var s,c,a;return tp().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:x({editor:n}),c=dz({streamResponse:i,editor:n,store:o,theme:r,docId:e}).getReader(),t.prev=5;case 6:return t.next=8,c.read();case 8:if((s=t.sent).done){t.next=18;break}if(s.value){t.next=11;break}return t.abrupt("continue",6);case 11:if(!l.current){t.next=14;break}return console.log("[AIStream] has aborted -- no longer reading stream"),t.abrupt("break",18);case 14:"data"===(a=s.value).event&&(f({value:a.data,editor:n,streamResponse:i}),v()),t.next=6;break;case 18:t.next=24;break;case 20:return t.prev=20,t.t0=t.catch(5),h({err:t.t0,streamResponse:i,editor:n}),t.abrupt("return");case 24:if(!l.current){t.next=26;break}return t.abrupt("return");case 26:a&&"done"!==a.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:a}),p({editor:n,streamResponse:i});case 28:case"end":return t.stop()}},t,null,[[5,20]])})),function(e){return t.apply(this,arguments)}),[e,n,f,p,h,x,v,o,r]);(0,dS.v)(function(){if(n&&s&&!u){var t=(0,re.oH)(e)(o.getState()),r=(0,re.nl)(o.getState());if(t){"running"===t.status&&g(t);return}if(c&&!r){var i=(0,dw.VA)(n),l=i.generateInfo;if("streaming"!==i.generateStatus){if(new URLSearchParams(window.location.search).get("restream")){var d=d_({docId:e,generateInfo:dE(dE({},{interactionId:l.interactionId,streamId:l.streamId}),{},{lastEventId:"0",lastCompletedCardId:null,imageOptions:l.imageOptions||{provider:"aiGenerated"},lastCompletedCardIndex:null}),editor:n,store:o,lazyImages:a});d&&g(d)}return}var f=(0,$.yx)(o.getState());if((null==f?void 0:f.createdTime)&&Date.now()-new Date(f.createdTime).getTime()>36e5){n.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}var p=d_({docId:e,generateInfo:l,editor:n,store:o,lazyImages:a});p&&g(p)}}},[e,n,o,s,x,h,f,p,c,g,u,a],[n,s]),(0,w.useEffect)(function(){return function(){var t=(0,re.oH)(e)(o.getState());n&&t&&"running"===t.status&&(l.current=!0,m({editor:n,streamResponse:t}))}},[i,e,m,n,o])},dL=function(e){var n=e.docId,t=(0,eU.p)(),r=(0,J.TL)(),o=(0,J.qr)(),i=(0,te.ye)("aiWizardUploadImages"),s=(0,w.useState)(!1),c=s[0],a=s[1],l=(0,te.ye)("debugLogging"),d=(0,w.useRef)(null);(0,w.useEffect)(function(){return function(){d.current&&(t.close(d.current),d.current=null)}},[t]);var u=(0,w.useCallback)(function(){d.current||(d.current=t({id:"ai-generating-toast",isClosable:!1,render:function(){return(0,ex.jsxs)(sm.b,{variant:"light",children:[(0,ex.jsx)(tF.$,{size:"sm",mr:2}),(0,ex.jsxs)(sg.X,{children:[(0,ex.jsx)("strong",{children:(0,ex.jsx)(h.cC,{id:"n2cF1o"})})," ",(0,ex.jsx)(h.cC,{id:"BFGwQA"})]})]})},position:"top",duration:null}))},[t]),f=(0,w.useCallback)(function(e){var n=e.editor;n&&(a(!0),n.commands.setAIGenerationRunning(!0),u())},[u]),p=(0,w.useCallback)(function(e){var n=e.editor,t=e.value;if(e.streamResponse&&n){var r=t.id,o=t.cardComplete,s=t.index;dT({editor:n,content:t.content,cardId:r,cardIndex:s,cardComplete:o}),o&&i&&dn({editor:n,cardId:r})}},[i]),x=(0,w.useCallback)(function(e){var n,i,s,c=e.editor,u=e.streamResponse;if(c&&u){var f=u.id,p=(0,dw.hx)((0,dw.VA)(c)),x=(0,dw.VA)(c).generateInfo;a(!1),c.commands.setAIGenerationRunning(!1),c.commands.updateAttributesAtPos(0,{generateStatus:"done"});var m=(0,l$.NV)(),v=m.debugInfo();l&&console.log("[AIStream] ImageStore DEBUG",{imageStore:m,debug:v}),(0,l$.Uu)(),r((0,re.G0)({id:f,status:"complete"}));var g=(0,dk.R)(c),j=new TextEncoder().encode(JSON.stringify(c.state.doc.toJSON())),b=g?g/j.byteLength:void 0;lX.a.trackStreamComplete(o,f,{imageProvider:null===(n=x.imageOptions)||void 0===n?void 0:n.provider,numImageSearches:v.requests.length,imageSearches:v.requests,ydocToJsonRatio:b});var C=(0,$.yx)(o.getState());C&&null!==(i=C.docGenerateInput)&&void 0!==i&&i.id?(0,dC.d)((null===(s=x.imageOptions)||void 0===s?void 0:s.provider)==="aiGenerated"?"generateV2WithImages":"generateV2"):(0,dC.d)("wizardCreation"),d.current&&t.update(d.current,{title:(0,ex.jsx)(h.cC,{id:"2/LpWt",values:{0:p.generationLabel||p.label}}),status:"success",position:"top",duration:3e3,isClosable:!0})}},[r,l,o,t]);return{isStreaming:c,onStreamStart:f,onStreamData:p,onStreamError:(0,w.useCallback)(function(e){var i=e.err,s=e.editor,c=e.streamResponse,u=c.id,f=(0,lJ.uS)(i),p=f.errorMessage,x=f.errorCode;console.error("StreamError: ",{interactionId:u,errorMessage:p,errorCode:x,stack:i.stack}),l&&console.log("StreamError: (".concat(x,") - ").concat(p),i.stack),a(!1),s.commands.setAIGenerationRunning(!1),s.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,l$.Uu)(),r((0,re.G0)({id:u,status:"error"}));var m=(0,re.Sn)(u)(o.getState());if(m){var v=m.latency,g=(0,e_.Z)(m,dP);(0,rx.pQ)(dE(dE({},g),{},{errorName:"StreamError",errorMessage:p,errorCode:x,outputMessage:"",latency:v||performance.now()-g.startTime,isResuming:c.isResuming,docId:n}))}d.current&&(p===dD?t.update(d.current,{render:dA,position:"top",duration:null,isClosable:!0}):t.update(d.current,{title:(0,ex.jsx)(h.cC,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[r,n,l,o,t]),onStreamDone:x,onAbortStream:(0,w.useCallback)(function(e){var n=e.editor,t=e.streamResponse.id;a(!1),n.commands.setAIGenerationRunning(!1),lX.a.trackStreamAbort(o,{interactionId:t,abortReason:"leave-editor"}),r((0,re.Of)({id:t}))},[r,o])}},dz=function(e){var n=e.streamResponse,t=e.editor,r=e.store,o=e.docId,i=e.theme,s=n.id,c=n.stream,a=!0;return c.pipeThrough(new l2(i)).pipeThrough(new dj(n.id)).pipeThrough(new dc({editor:t,theme:i})).pipeThrough(new lK.GJ({transform:function(e,n){if("done"===e.event&&"content_filter"===e.finishReason){n.error(Error(dD));return}n.enqueue(e)}})).pipeThrough((0,lY.c1)(function(e){a&&"data"===e.event&&(lX.a.trackStreamStart(r,{interactionId:s,docId:o}),n.isResuming&&(t.commands.deleteCardsAfter(n.lastCompletedCardId||null),n.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",n.lastCompletedCardId),dt({editor:t,lastCompletedCardId:n.lastCompletedCardId,theme:i}))),a=!1),"data"===e.event&&e.data.cardComplete&&t.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},dM=t(14198),dG=function(e){var n=e.toggleToCPanel,t=e.initializeToCPanel,r=e.isToCPanelOpen,o=(0,dM.F)().breakpoints.xl,i=(0,J.CG)($.gh),s=(0,w.useState)(i!==nW.q.SLIDE_VIEW),c=s[0],a=s[1],l=(0,w.useState)(!1),d=l[0];l[1];var u=(0,k.I0)();(0,tT.vm)(function(){t()},[o,n,t,u],[]),(0,tT.vm)(function(){i===nW.q.SLIDE_VIEW?(a(r),n({disableTransition:!1,override:"closed"})):d&&i===nW.q.DOC_VIEW&&n({disableTransition:!1,override:c?"open":"closed"})},[n,r,c,i,d],[i])};function dN(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function dZ(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dN(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dN(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var dF="doc_archived_warning",dW=function(e,n){var t=(0,eU.p)(),r=(0,S.iX9)(),o=(0,A.Z)(r,1)[0];(0,w.useEffect)(function(){return function(){t.close(dF)}},[]),(0,w.useEffect)(function(){e&&n===ta.Z.COLLABORATIVE&&(e.archived&&!t.isActive(dF)?t({id:dF,title:(0,ex.jsxs)(v.x,{"data-testid":"trash-confirmation-toast",children:[(0,ex.jsx)(h.cC,{id:"fkHPZu"})," ",(0,ex.jsx)(eV.r,{textDecoration:"underline",onClick:function(){var n={id:e.id};o({variables:n,optimisticResponse:{unarchiveDoc:dZ(dZ({},n),{},{archived:!0,__typename:"Doc"})}})},children:(0,ex.jsx)(h.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null}):!e.archived&&t.isActive(dF)&&t.close(dF))},[e,n,t,o])},dU=function(){var e=(0,te.ye)("filmstrip"),n=(0,J.CG)(td.fh),t=(0,ti.Br)("comment"),r=(0,J.CG)($.gh);return e&&n===ta.Z.COLLABORATIVE&&t&&r===nW.q.DOC_VIEW&&!(0,ro.s2)()},dV=t(20372),dB=t(27910),dH=t(80102),dq=t(50350),dK=function(){var e=(0,eO.nO)(),n=(0,eO.UV)(),t=(0,iz.i)({base:!1,lg:!0,"2xl":!1}),r=(0,J.CG)($.Hl),o=(0,J.CG)(o1.GX),i=dU(),s=(0,dB.k)(),c=(0,dV.S)((0,f.Z)({base:"0px"},dH.K0,dq.bk))||"0px",a=iM().width;return(0,w.useMemo)(function(){return{"--doc-padding-left":o&&i&&t?"".concat(a,"px"):"0px","--doc-padding-right":r?c:s?"60px":"0px","--present-padding-left":"".concat(e,"px"),"--present-padding-right":"".concat(n,"px"),"--comment-slide-margin":c}},[a,o,e,r,n,s,t,c,i])},dY=t(28615),dQ=t(93665),dX=t(51746),dJ=t(95896),d$=function(e){var n=e.launchIntercomUI;return function(e){var t=e.onClose;return(0,ex.jsxs)(m.k,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,ex.jsx)(nQ.P,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,ex.jsx)(b.G,{icon:dQ.xH,size:"2x"}),(0,ex.jsxs)(m.k,{direction:"column",ml:3,children:[(0,ex.jsx)(g.xu,{children:(0,ex.jsx)(v.x,{lineHeight:6,fontSize:"sm",children:(0,ex.jsx)(h.cC,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc},components:{0:(0,ex.jsx)("b",{})}})})}),(0,ex.jsx)(v.x,{lineHeight:6,fontSize:"sm",pt:2,children:(0,ex.jsx)(h.cC,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc},components:{0:(0,ex.jsx)(eh.z,{as:eV.r,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:function(){n()},colorScheme:"white"})}})})]})]})}},d0="no-snapshot-warning",d1=function(e,n){var t=(0,dX.G)(),r=(0,eU.p)(),o=(0,dJ.z$)(),i=null==e?void 0:e.id,s=n===ta.Z.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,w.useEffect)(function(){!s||r.isActive(d0)||(r({id:d0,render:d$({launchIntercomUI:t}),duration:null,position:"top",isClosable:!0}),null==o||o.track(nT.xW.NO_CURRENT_SNAPSHOT,{docId:i}))},[o,i,t,s,r])},d2=function(e){var n=(0,J.TL)(),t=(0,J.CG)(o1.GX),r=(0,w.useRef)(!1);(0,w.useEffect)(function(){!e||r.current||t||(r.current=!0,n((0,o1.dQ)({isOpen:!0})))},[n,t,e])},d5=t(56675),d3=t(21010),d4=t(65185);function d6(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function d8(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d6(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d6(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var d7=function(e){var n=(0,d5.x)(),t=(0,J.CG)(d4.cn);(0,w.useEffect)(function(){t&&n.cache.updateQuery({query:d3.yE1,variables:{id:e}},function(e){if(!(null!=e&&e.doc))return e;var n=e.doc;return n.titleEdited?e:{doc:d8(d8({},n),{},{title:t})}})},[t,n,e])},d9=t(47947),ue=t(46732),un=function(e,n){var t=(0,ue._)().isUnauthorized;(0,nT.If)(function(r){!0!==t&&void 0!==t&&(r.track(nT.AA.DOC_VIEWED,{doc_id:e}),n===ta.Z.EXAMPLE_STATIC&&r.track(nT.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,n,t]),(0,d9.d)();var r=(0,te.ye)("realUserMetrics"),o=n===ta.Z.COLLABORATIVE&&r,i=(0,te.ye)("rumKeystrokeSampleRate");(0,a5.lh)(o,i)},ut=function(e){var n=(0,k.I0)(),t=(0,nT.z$)();(0,w.useEffect)(function(){var r,o=function(){var o=(0,J.bh)().getState();r=(0,$.Q5)(o),(0,a3.I7)(e),n((0,$.lx)({isEditingDisabled:!0})),null==t||t.trackDocEvent(nT.AA.DOC_PRINTED)},i=function(){n((0,$.lx)({isEditingDisabled:!1})),n((0,$.xn)({expandedCardsMap:r}))};return window.addEventListener("beforeprint",o),window.addEventListener("afterprint",i),function(){window.removeEventListener("beforeprint",o),window.removeEventListener("afterprint",i)}},[n,e,t])};function ur(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function uo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ur(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ur(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ui="doc-root",us=function(e){var n=e.isConnected;return(0,ex.jsx)(m.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:n?(0,ex.jsx)(h.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}}):(0,ex.jsxs)(m.k,{m:8,alignItems:"center",direction:"row",children:[(0,ex.jsx)(b.G,{icon:p.bK,size:"4x"}),(0,ex.jsx)(v.x,{ml:8,children:(0,ex.jsx)(h.cC,{id:"qercPA",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc},components:{0:(0,ex.jsx)("strong",{})}})})]})})},uc=function(e){var n=e.doc,t=e.user,r=e.docEditorType,o=(0,P.$m)(n,t),i=(0,k.v9)($.gh),s=r===ta.Z.COLLABORATIVE&&!o,c=s&&i===nW.q.SLIDE_VIEW;return r!==ta.Z.COLLABORATIVE||t?c?(0,ex.jsx)(eb,{}):s?(0,ex.jsx)(D.C,{showTourReplay:!0}):null:(0,ex.jsx)(rV.m,{docWorkspace:null==n?void 0:n.organization})},ua=(0,tl.eT)(function(e){var n=e.docEditorType,t=(0,tl._i)(),r=t.docId,o=t.isUnauthorized,i=t.setCollaborativeEditorInstance,s=t.editor,c=(0,J.CG)(td.yx),a=(0,S.$gs)().isConnected,l=(0,nq.SE)().user;(0,I.F3)(),dW(c,n),d1(c,n),dR(r,s),d7(r),un(r,n),(0,dY.j)(),(0,lq.P)(),(0,lq.J)(),(0,rK.Zd)(s,".".concat(ui)),r2(s),(0,tc.V)(),ut(s),(0,P.DD)(c,n===ta.Z.COLLABORATIVE);var d=(0,w.useRef)(null),u=(0,J.TL)(),f=(0,eI.Yy)(),p=(0,w.useMemo)(function(){return(0,nD.vu)(f)},[f]),h=dU();d2(h);var v=dK(),b=(0,w.useMemo)(function(){return uo(uo({},p),v)},[p,v]);console.debug("%c[DocEditorComponent] RENDER - ".concat(r),"background-color: gold");var y=(0,eO.Pp)(st.Q),k=y.togglePanel,D=y.isPanelOpen,A=y.initPanel,T=(0,eO.Pp)(t1.s),_=T.togglePanel,R=T.isPanelOpen,L=(0,eO.Pp)(t2.Rr),z=L.togglePanel,M=L.isPanelOpen;(0,t2.QK)({toggleDesignPartnerPanel:z,isDesignPartnerPanelOpen:M,editor:s});var G=(0,eO.Pp)(tr);ts({toggleCardNotesPanel:G.togglePanel,isCardNotesPanelOpen:G.isPanelOpen}),dG({toggleToCPanel:k,isToCPanelOpen:D,initializeToCPanel:A}),(0,w.useEffect)(function(){return function(){u((0,eS.qo)())}},[u]);var N=(0,w.useCallback)(function(){return!!(s&&s.state.selection.empty)},[s]),Z=(0,eO.Xy)(),F=Z.leftPanelLifecycle,W=Z.rightPanelLifecycle,U=Z.globalPanelLifecycle,V=(0,ey.dU)(null==c?void 0:c.organization),B=(0,E.U)(null==c?void 0:c.title,V),H=x.ag._({id:"X6YCwz"}),q=x.ag._({id:"abr3hR"});return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,ex.jsx)(O(),{children:(0,ex.jsx)("title",{children:B})}),(0,ex.jsx)(t$,{doc:c,editor:s}),(0,ex.jsx)(eP.H9,{isEnabledFn:N}),o?(0,ex.jsx)(us,{isConnected:a}):(0,ex.jsxs)(m.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:d,children:[(0,ex.jsx)(ew.Av,{panelLifecycle:F}),(0,ex.jsxs)(m.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[(0,ex.jsx)(C.Wk,{isDark:f,children:(0,ex.jsx)(lH,{scrollingParentSelector:".".concat(ui),editorWrapperEl:d.current,docEditorType:n,isToCPanelOpen:D,toggleToCPanel:k,isCommentsPanelOpen:R,toggleCommentsPanel:_})}),(0,ex.jsxs)(g.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:(0,j.cx)(ui,M&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(H,"'"),"--ai-generating-label":"'".concat(q,"'")},sx:b,children:[n===ta.Z.PUBLIC_STATIC?(0,ex.jsx)(rX,{docId:r,snapshotId:null==c?void 0:c.currentSnapshotId,scrollingParentSelector:".".concat(ui),onCreate:i}):n===ta.Z.EXAMPLE_STATIC?(0,ex.jsx)(rq,{docId:r,snapshotId:null==c?void 0:c.currentSnapshotId,scrollingParentSelector:".".concat(ui),onCreate:i}):(0,ex.jsxs)(ek.Mn.Provider,{value:U,children:[(0,ex.jsx)(eE.Ge,{doc:c,docId:r,readOnly:null==c?void 0:c.archived,onCreate:i,scrollingParentSelector:".".concat(ui)}),s&&(0,ex.jsx)(nH,{editor:s})]}),(0,ex.jsx)(rz,{editor:s}),(0,ex.jsx)(oU,{editor:s})]})]}),(0,ex.jsx)(ew.U8,{panelLifecycle:W}),(0,ex.jsx)(nA.a,{editorId:"main",children:(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(nE,{editor:s}),(0,ex.jsx)(uc,{doc:c,user:l,docEditorType:n}),h&&(0,ex.jsx)(sn,{})]})})]})]})}),ul=t(56768),ud=t(93031),uu=t(59195),uf=t(92488),up=t(38717),uh=t(21496),ux=function(e){var n=e.theme,t=e.onClick,r=e.isChecked,o=e.index,i=e.startIndex;return(0,ex.jsxs)(g.xu,{gridColumnStart:o+1-i,display:i>o?"none":"block",gridRow:1,as:up.f,p:2,transition:"all 0.2s ease-in-out",bgColor:r?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:r?void 0:"outline"},outline:"none",onClick:t,_hover:{bgColor:r?"trueblue.100":"gray.100"},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&t()},"data-theme-id":n.id,"data-testid":r?"current-theme-preview":void 0,cursor:"pointer",children:[(0,ex.jsx)(uh.n,{theme:n}),(0,ex.jsxs)(ed.K,{direction:"row",spacing:1,pt:1,children:[r&&(0,ex.jsx)(tN.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,ex.jsx)(v.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:r?"trueblue.700":void 0,children:n.name})]})]})};ux.displayName="DemoDocThemePreview";var um="linen.50",uv=function(e){var n=e.templateTheme,r=e.setTheme,o=e.currentThemeId,i=(0,k.v9)($.gh)===nW.q.SLIDE_VIEW,s=(0,w.useState)([]),c=s[0],a=s[1],l=(0,w.useState)(!1),d=l[0],u=l[1],f=(0,w.useState)(0),p=f[0],x=f[1],v=(0,iz.i)({base:3,md:4,lg:5})||3;(0,w.useEffect)(function(){t.e(3541).then(t.bind(t,33541)).then(function(e){a(e.GLOBAL_THEMES)})},[]);var g=[].concat((0,oz.Z)(n?[n]:[]),(0,oz.Z)(c.filter(function(e){return e.id!==(null==n?void 0:n.id)}))),j=(0,w.useCallback)(function(e){1===e?x(function(e){return e+1}):x(function(e){return e-1})},[]);return i?(0,ex.jsx)(ex.Fragment,{}):(0,ex.jsx)(eA.h,{children:(0,ex.jsxs)(m.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:um,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,ex.jsx)(m.k,{alignItems:"flex-end",justify:"flex-end",children:(0,ex.jsx)(eh.z,{variant:"ghost",size:"sm",rightIcon:(0,ex.jsx)(b.G,{icon:d?uf.gc:uu.on}),onClick:function(){return u(function(e){return!e})},children:d?(0,ex.jsx)(h.cC,{id:"yz7wBu"}):(0,ex.jsx)(h.cC,{id:"x6tIe+"})})}),(0,ex.jsx)(m.k,{justify:"flex-start",align:"flex-start",bgColor:um,w:"100%",children:d&&(0,ex.jsxs)(ed.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,ex.jsx)(z.h,{"aria-label":"Left",onClick:function(){return j(-1)},variant:"ghost",isDisabled:0===p,icon:(0,ex.jsx)(b.G,{icon:ud.Ey})}),(0,ex.jsx)(r8.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(v,", calc(100% / ").concat(v," - 1em))")],gap:"0 1em",bgColor:um,children:g.map(function(e,n){return(0,ex.jsx)(ux,{index:n,startIndex:p,isChecked:e.id===o,theme:e,onClick:function(){r(e)}},e.id)})}),(0,ex.jsx)(z.h,{"aria-label":"Right",variant:"ghost",isDisabled:p+v>g.length,onClick:function(){return j(1)},icon:(0,ex.jsx)(b.G,{icon:ul.yO})})]})})]})})},ug=t(53589),uj=t(68690),ub=t(10344),uC=t(70091),uy=t(88963),uO=[{description:(0,ex.jsx)(h.cC,{id:"gtWy3j"}),shortcut:["←","→"]},{description:(0,ex.jsx)(h.cC,{id:"UCxK2S"}),shortcut:["↑","↓"]},{description:(0,ex.jsx)(h.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,ex.jsx)(h.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,ex.jsx)(h.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,ex.jsx)(h.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,ex.jsx)(h.cC,{id:"K0Oq/D"}),shortcut:"R"}],uw=function(e){var n=ln({editorWrapperEl:e.editorWrapperEl,scrollingParentSelector:e.scrollingParentSelector}),t=n.enterSlideView,r=n.exitSlideView,o=n.setExitedFullscreenByClick,i=n.isFullscreen,s=n.enterFullscreen,c=n.exitFullscreen,a=(0,J.CG)($.gh),l=(0,w.useRef)(a);return(0,w.useEffect)(function(){l.current=a},[a]),(0,ex.jsxs)(ea.U,{children:[(0,ex.jsxs)(tb.h,{isAttached:!0,size:"sm",children:[(0,ex.jsx)(C.kH,{label:a===nW.q.DOC_VIEW?(0,ex.jsx)(h.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}}):(0,ex.jsx)(h.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}}),children:(0,ex.jsx)(eh.z,{variant:a===nW.q.DOC_VIEW?"solid":"plain",cursor:a===nW.q.SLIDE_VIEW?"pointer":"auto",onClick:function(){a===nW.q.SLIDE_VIEW&&r()},leftIcon:(0,ex.jsx)(b.G,{icon:uj.cw}),children:(0,ex.jsx)(h.cC,{id:"7Zdnlq"})})}),(0,ex.jsx)(C.kH,{label:a===nW.q.SLIDE_VIEW?(0,ex.jsx)(h.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}}):(0,ex.jsx)(h.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:eC.Yc}}),children:(0,ex.jsx)(eh.z,{variant:a===nW.q.SLIDE_VIEW?"solid":"plain",cursor:a===nW.q.DOC_VIEW?"pointer":"auto",onClick:function(){a===nW.q.DOC_VIEW&&t({fullscreen:!1})},leftIcon:(0,ex.jsx)(b.G,{icon:ug.bg}),children:(0,ex.jsx)(h.cC,{id:"FOoDGS"})})})]}),a===nW.q.SLIDE_VIEW&&(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(ep.i,{orientation:"vertical"}),(0,ex.jsx)(C.kH,{label:i?(0,ex.jsx)(h.cC,{id:"IkOhTI"}):(0,ex.jsx)(h.cC,{id:"q8ARHN"}),children:(0,ex.jsx)(z.h,{size:"sm","aria-label":i?x.ag._({id:"IkOhTI"}):x.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,ex.jsx)(b.G,{icon:i?ll.Qj:la.TL}),onClick:i?function(){o(!0),c()}:s})}),(0,ex.jsxs)(R.J,{children:[(0,ex.jsx)(L.x,{children:(0,ex.jsx)(eh.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,ex.jsx)(h.cC,{id:"77Emn0"})})}),(0,ex.jsxs)(M.y,{border:"1px solid #eee !important",children:[(0,ex.jsx)(ub.Q,{}),(0,ex.jsx)(uC.u,{}),(0,ex.jsx)(G.b,{children:(0,ex.jsx)(uy.A,{list:uO})})]})]})]})]})},uk=(0,w.memo)(function(e){var n=e.scrollingParentSelector,t=e.editorWrapperEl;(0,J.CG)(td.yx);var r=(0,w.useRef)(null);return(0,ex.jsx)(m.k,{ref:r,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,ex.jsx)(m.k,{direction:"column",w:"100%",children:(0,ex.jsx)(uw,{editorWrapperEl:t,scrollingParentSelector:n})})})}),uS="doc-root",uP=(0,tl.eT)(function(e){var n,t=e.docEditorType,r=void 0===t?ta.Z.COLLABORATIVE:t,o=(0,tl._i)(),i=o.docId,s=o.setCollaborativeEditorInstance,c=o.editor,a=(0,J.CG)(td.yx);un(i,r),(0,dY.j)(),(0,lq.P)(),(0,lq.J)(),(0,rK.Zd)(c,".".concat(uS)),r2(c),(0,tc.V)(),ut(c),(0,P.DD)(a,r===ta.Z.COLLABORATIVE);var l=(0,w.useRef)(null),d=null==a?void 0:a.theme,u=(0,w.useState)(function(){return d}),f=u[0],p=u[1],h=(0,J.TL)(),x=(0,w.useRef)(!1),v=(0,S.EDv)({variables:{docId:i,snapshotId:null==a?void 0:a.currentSnapshotId},skip:!(null!=a&&a.currentSnapshotId)}).data,j=null==v?void 0:null===(n=v.snapshot)||void 0===n?void 0:n.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,w.useEffect)(function(){d&&!x.current&&(p(d),x.current=!0)},[d]),(0,w.useEffect)(function(){if(c){var e=null==f?void 0:f.config.accentBackgrounds;if(!e||0===e.length){j&&c.commands.setContent(j);return}c.commands.updateThemeAccentImages(e)}},[c,f,j]);var b=(0,eO.Pp)(st.Q);dG({toggleToCPanel:b.togglePanel,isToCPanelOpen:b.isPanelOpen,initializeToCPanel:b.initPanel}),(0,w.useEffect)(function(){return function(){h((0,eS.qo)())}},[h]);var C=(0,eO.Xy)(),y=C.leftPanelLifecycle;return C.globalPanelLifecycle,(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,ex.jsx)(O(),{children:(0,ex.jsxs)("title",{children:["".concat(a?(0,al.$)(a.title)+" | ":""),"Gamma"]})}),(0,ex.jsxs)(m.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:l,children:[(0,ex.jsx)(ew.Av,{panelLifecycle:y}),(0,ex.jsxs)(m.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[c&&(0,ex.jsx)(uk,{scrollingParentSelector:".".concat(uS),editorWrapperEl:l.current,setTheme:p,currentThemeId:(null==f?void 0:f.id)||(null==d?void 0:d.id),templateTheme:d}),(0,ex.jsxs)(g.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:uS,children:[(0,ex.jsx)(rX,{docId:i,snapshotId:null==a?void 0:a.currentSnapshotId,scrollingParentSelector:".".concat(uS),onCreate:s,theme:f,hideMadeWithGammaBadge:!0}),(0,ex.jsx)(oU,{editor:c,showNavigationControls:!0})]})]}),(0,ex.jsx)(nE,{editor:c}),(0,ex.jsx)(uv,{setTheme:p,currentThemeId:(null==f?void 0:f.id)||(null==d?void 0:d.id),templateTheme:d})]})]})}),uI=t(1005),uE=t(86633),uD="body",uA=t(55580),uT=t(56648),u_=t(46663),uR=t(60670),uL=function(e){var n=(0,dy.As)(e),t=(0,w.useState)("up"),r=t[0],o=t[1];return(0,w.useEffect)(function(){var e=document.querySelector(n.scrollSelector);if(e){var t=(null==e?void 0:e.scrollTop)||0,r=function(){var n=(null==e?void 0:e.scrollTop)||0;Math.abs(n-t)>0&&(o(!(n>t)||t>0&&0===n||n>0&&0===t?"up":"down"),t=n>0?n:0)},i=K()(function(){return window.requestAnimationFrame(r)},500,{leading:!0});return null==e||e.addEventListener("scroll",i),function(){return null==e?void 0:e.removeEventListener("scroll",i)}}},[n.scrollSelector]),r},uz=t(26806),uM=["icon","children"];function uG(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function uN(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?uG(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uG(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var uZ=(0,w.memo)(function(){return(0,ex.jsx)(g.xu,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}})});uZ.displayName="MenuDivider";var uF=(0,w.memo)(function(e){var n=e.icon,t=e.children,r=(0,e_.Z)(e,uM);return(0,ex.jsx)(g.xu,uN(uN({as:"button",w:"100%",textAlign:"left",px:2,py:2,fontWeight:"500",color:"gray.700",transition:"all 0.2s",_hover:{bg:"gray.100"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md"},r),{},{children:(0,ex.jsxs)(ea.U,{children:[n&&(0,ex.jsx)(g.xu,{children:n}),(0,ex.jsx)(g.xu,{children:t})]})}))});uF.displayName="MenuItem";var uW=function(e){var n,t,r=e.isOpen,o=e.onClose,i=e.doc,s=e.editingEnabled,c=(0,nq.SE)().user,a=(0,S.$gs)().isConnected,l=(0,rN.e)(),d=(0,tl._i)().editor,u=(0,al.$)(null==i?void 0:i.title),f=(null==i?void 0:i.createdTime)&&(0,aK.Z)((0,aY.Z)(i.createdTime),"PPP"),p=null==i?void 0:i.id,x=(0,tQ.M)({id:"analyticsPanelDisclosure"}),g=x.isOpen,j=x.onClose,y=x.onOpen,O=(0,S.LT4)(),k=(0,A.Z)(O,1)[0],P=(0,S.iX9)(),I=(0,A.Z)(P,1)[0],E=(0,nT.z$)(),D=(0,nq.py)("manage",i)&&!!c,T=(0,nq.py)("manage",i)&&!!c,_=(0,te.ye)("pageSetup")&&s,R=!!(c&&0!==c.workspaceMemberships.length),L=(0,te.ye)("docFormats"),z=(0,w.useCallback)((0,tu.Z)(tp().mark(function e(){var n;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return n=d.getJSON(),e.next=5,l({docId:p,initialContent:n,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1});case 5:o();case 6:case"end":return e.stop()}},e)})),[p,l,d,o]),M=(0,w.useCallback)(function(){null==E||E.track(nT.AA.DOC_ANALYTICS_VIEWED,{docId:p,source:"toolbar_doc_menu",type:"personal"}),y()},[E,p,y]),G=(0,w.useCallback)(function(e){return function(){if(p){var n={id:p};e?k({variables:n,optimisticResponse:{archiveDoc:uN(uN({},n),{},{archived:e,__typename:"Doc"})}}):I({variables:n,optimisticResponse:{unarchiveDoc:uN(uN({},n),{},{archived:e,__typename:"Doc"})}})}}},[k,p,I]);return(0,ex.jsxs)(ex.Fragment,{children:[i&&(0,ex.jsx)(C.Aj,{isOpen:r,onClose:o,children:(0,ex.jsxs)(m.k,{w:"100%",h:r?"100%":void 0,direction:"column",children:[(0,ex.jsxs)(ea.U,{align:"flex-start",p:6,children:[(0,ex.jsxs)(ed.K,{spacing:0,children:[(0,ex.jsx)(v.x,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:u}),(0,ex.jsx)(v.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,ex.jsx)(h.cC,{id:"jlWdji",values:{createdTime:f}})}),(0,ex.jsx)(C.kH,{label:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.email,children:(0,ex.jsx)(v.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,ex.jsx)(h.cC,{id:"t490IT",values:{0:null==i?void 0:null===(t=i.createdBy)||void 0===t?void 0:t.displayName}})})})]}),(0,ex.jsx)(so.L,{}),(0,ex.jsx)(nQ.P,{mt:-2,onClick:function(e){e.stopPropagation(),o()}})]}),(0,ex.jsxs)(ed.K,{p:3,pt:0,children:[L&&(0,ex.jsx)(a$,{}),(0,ex.jsx)(uZ,{}),T&&(0,ex.jsx)(uF,{icon:(0,ex.jsx)(b.G,{icon:t5.nN,fixedWidth:!0}),onClick:function(){o(),as.T.emit("openSharePanel",{view:"invite"})},children:(0,ex.jsx)(h.cC,{id:"iyga2M"})}),s&&(0,ex.jsx)(uF,{icon:(0,ex.jsx)(b.G,{icon:lD.q2,fixedWidth:!0}),onClick:function(){o(),as.T.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,ex.jsx)(h.cC,{id:"W15e8B"})}),(0,ex.jsx)(uZ,{}),a&&(0,ex.jsxs)(ex.Fragment,{children:[!!c&&T&&(0,ex.jsx)(uF,{icon:(0,ex.jsx)(b.G,{icon:sl.M,fixedWidth:!0}),onClick:function(){o(),M()},children:(0,ex.jsx)(h.cC,{id:"qcxxQS"})}),R&&(0,ex.jsx)(uF,{icon:(0,ex.jsx)(b.G,{icon:it.kZ,fixedWidth:!0}),onClick:z,children:(0,ex.jsx)(h.cC,{id:"euc6Ns"})}),D&&(0,ex.jsx)(uF,{icon:(0,ex.jsx)(b.G,{icon:aH.kw,fixedWidth:!0}),onClick:function(){o(),as.T.emit("openSharePanel",{view:"export"})},children:(0,ex.jsx)(h.cC,{id:"U8WPSi"})}),_&&(0,ex.jsx)(uF,{icon:(0,ex.jsx)(b.G,{icon:aB.gr,fixedWidth:!0}),onClick:function(){o(),as.T.emit("openPageSetup","cards")},children:(0,ex.jsxs)(ea.U,{children:[(0,ex.jsx)(h.cC,{id:"Kx2GmY"}),(0,ex.jsx)(so.L,{}),(0,ex.jsx)(aq.C,{colorScheme:"green",ml:2,children:(0,ex.jsx)(h.cC,{id:"isRobC"})})]})}),T&&(0,ex.jsx)(uZ,{}),T?i.archived?(0,ex.jsx)(uF,{icon:(0,ex.jsx)(b.G,{icon:aW.Ze,fixedWidth:!0}),onClick:G(!1),children:(0,ex.jsx)(h.cC,{id:"yKu/3Y"})}):(0,ex.jsx)(uF,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,ex.jsx)(b.G,{icon:eN.$,fixedWidth:!0}),onClick:G(!0),children:(0,ex.jsx)(h.cC,{id:"1C/Yjq"})}):null]})]})]})}),i&&g&&(0,ex.jsx)(ai,{doc:i,isAnalyticsPanelOpen:g,onAnalyticsPanelClose:j,mode:"full"}),_&&(0,ex.jsx)(lo.T,{editor:d}),s&&(0,ex.jsx)(lM,{})]})};function uU(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function uV(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?uU(Object(t),!0).forEach(function(n){(0,f.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uU(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var uB=function(e){var n,t,r,o=e.doc,i=e.editor,s=e.commentsEnabled,c=e.editingEnabled,a=e.onCommentFeedOpen,l=e.onTocOpen,d=(0,aC.X)(en.H.lastHomeUrl,"/"),u=(0,A.Z)(d,1)[0],f=(0,nq.SE)().user,p=(0,nq.py)("manage",o),h=(null==o?void 0:null===(n=o.comments)||void 0===n?void 0:n.filter(function(e){return e.status===S.Ux9.Open}).length)||0,x=uL("editor"),m=(0,k.v9)($.Pu),g=(0,uz.Jh)(m),j=null!==(t=m.config.bodyColor)&&void 0!==t?t:(0,tk.wj)(m)?"white":"gray.800",C=null!==(r=m.accentColor)&&void 0!==r?r:(0,tk.wj)(m)?"trueblue.300":"trueblue.700",y=(0,w.useCallback)(function(){i&&i.commands.undo()},[i]),O=(0,_.q)(),P=O.isOpen,I=O.onOpen,E=O.onClose;return o?(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(uW,{doc:o,isOpen:P,onClose:E,editingEnabled:c}),(0,ex.jsxs)(ea.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==x?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==x?1:0,zIndex:"sticky",sx:uV(uV({},(0,uz.Oj)(g,m,!0)),{},{border:"none",filter:"none",borderRadius:0}),color:j,children:[f&&(0,ex.jsx)(t9(),{href:u,passHref:!0,legacyBehavior:!0,children:(0,ex.jsx)(z.h,{as:eV.r,"aria-label":"Home",color:j,_hover:{bg:"transparent",color:C},icon:(0,ex.jsx)(b.G,{icon:af.J9,size:"1x"}),variant:"ghost"})}),(0,ex.jsx)(v.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:j,children:null==o?void 0:o.title}),(0,ex.jsxs)(tb.h,{variant:"ghost",children:[s&&(0,ex.jsx)(eh.z,{color:j,_hover:{bg:"transparent",color:C},fontSize:"sm",onClick:a,leftIcon:(0,ex.jsx)(b.G,{icon:uR.Mz}),children:h}),c&&(0,ex.jsx)(z.h,{color:j,"aria-label":"Undo",onClick:y,_hover:{bg:"transparent",color:C},icon:(0,ex.jsx)(b.G,{icon:u_.X7})}),!c&&(0,ex.jsx)(z.h,{color:j,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:C},onClick:l,icon:(0,ex.jsx)(b.G,{icon:uT.xi})}),(p||c)&&(0,ex.jsx)(z.h,{color:j,"aria-label":"Open toolbar",_hover:{bg:"transparent",color:C},onClick:I,icon:(0,ex.jsx)(b.G,{icon:uA.faEllipsis})})]})]})]}):null},uH=function(e){var n=e.doc,t=e.docEditorType,r=e.commentsEnabled,o=void 0===r||r,i=(0,tl._i)(),s=i.docId,c=i.setCollaborativeEditorInstance,a=i.editor,l=(0,_.q)({id:"mobile-comment-feed-panel-drawer"}),d=l.isOpen,u=l.onOpen,f=l.onClose,p=(0,_.q)({id:"mobile-toc-drawer"}),h=p.isOpen,x=p.onOpen,v=p.onClose,g=(0,w.useState)(null),j=g[0],b=g[1];console.debug("%c[MobileEditorWrapper] RENDER - ".concat(s),"background-color: gold");var y=(0,te.ye)("mobileEditing"),O=(0,nq.py)("edit",n),k=y&&O;return(0,ex.jsxs)(m.k,{ref:(0,w.useCallback)(function(e){return b(e)},[]),direction:"column",flex:1,children:[(0,ex.jsx)(uB,{doc:n,editor:a,onCommentFeedOpen:u,commentsEnabled:!k&&o,editingEnabled:k,onTocOpen:x}),t===ta.Z.PUBLIC_STATIC?(0,ex.jsx)(rX,{docId:s,snapshotId:null==n?void 0:n.currentSnapshotId,scrollingParentSelector:uD,onCreate:c}):t===ta.Z.EXAMPLE_STATIC?(0,ex.jsx)(rq,{docId:s,snapshotId:null==n?void 0:n.currentSnapshotId,scrollingParentSelector:uD,onCreate:c}):(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsx)(eE.Ge,{doc:n,docId:s,readOnly:!k,onCreate:c,scrollingParentSelector:uD}),a&&(0,ex.jsx)(nH,{editor:a})]}),o&&d&&(0,ex.jsx)(C.Aj,{isOpen:d,onClose:f,drawerProps:{autoFocus:!1},children:(0,ex.jsx)(uI.m,{onClose:f,editor:a})}),h&&(0,ex.jsx)(C.Aj,{isOpen:h,onClose:v,children:(0,ex.jsx)(uE.o,{rootElement:j,handleClose:v})}),(0,ex.jsx)(lP,{doc:n,showButton:!1}),(0,ex.jsx)(nA.a,{children:(0,ex.jsx)(rz,{editor:a})})]})},uq=(0,tl.eT)(function(e){var n=e.docEditorType,t=(0,tl._i)(),r=t.docId,o=t.isUnauthorized,i=t.editor;un(r,n),dR(r,i),(0,dY.j)();var s=(0,w.useRef)(null),c=(0,J.CG)(td.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(r),"background-color: gold");var a=n===ta.Z.COLLABORATIVE;return(0,ex.jsxs)(ex.Fragment,{children:[(0,ex.jsxs)(O(),{children:[(0,ex.jsxs)("title",{children:["".concat(c?(0,al.$)(c.title)+" | ":""),"Gamma"]}),(0,ex.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,ex.jsx)(lm.Global,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),o?(0,ex.jsxs)(m.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",eC.Yc,"."]}):(0,ex.jsx)(m.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:s,flex:"1",children:(0,ex.jsx)(uH,{doc:c,docEditorType:n,commentsEnabled:a})})]})})},47827:function(e,n,t){t.d(n,{AA:function(){return h},DN:function(){return f},mb:function(){return p}});var r=t(20406),o=t(28526),i=t.n(o),s=t(5632),c=t(2784),a=t(46358),l=t(42879),d=t(62141),u=t(6985),f=(0,c.createContext)({openPageSetup:function(e,n){},openSharePanel:function(e,n){}}),p=function(e,n){var t=(0,s.useRouter)().push,o=(0,a.qr)();return(0,c.useMemo)(function(){var s,c;return{openPageSetup:(s=(0,r.Z)(i().mark(function r(s,c){var a,f;return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:if(a=function(){return u.T.emit("openPageSetup",c)},!(s!==e)){r.next=9;break}return r.next=6,t((0,l.as)(n,s));case 6:f=o.subscribe(function(){(0,d.ke)(o.getState())===s&&(a(),f())}),r.next=10;break;case 9:a();case 10:case"end":return r.stop()}},r)})),function(e,n){return s.apply(this,arguments)}),openSharePanel:(c=(0,r.Z)(i().mark(function r(s,c){var a,f;return i().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:if(a=function(){return u.T.emit("openSharePanel",c)},!(s!==e)){r.next=9;break}return r.next=6,t((0,l.as)(n,s));case 6:f=o.subscribe(function(){(0,d.ke)(o.getState())===s&&(a(),f())}),r.next=10;break;case 9:a();case 10:case"end":return r.stop()}},r)})),function(e,n){return c.apply(this,arguments)})}},[e,t,n,o])},h=function(){return(0,c.useContext)(f)}},28916:function(e,n,t){t.d(n,{V:function(){return i}});var r=t(2784),o="drag-in-progress",i=function(){(0,r.useEffect)(function(){var e=function(){document.body.classList.add(o)},n=function(){document.body.classList.remove(o)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",n,!0),document.body.addEventListener("drop",n,!0),document.body.addEventListener("mouseup",n,!0),function(){document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",n,!0),document.body.removeEventListener("drop",n,!0),document.body.removeEventListener("mouseup",n,!0)}},[])}}}]);
//# sourceMappingURL=9898-812e3c3a26379089.js.map